<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<![endif]-->
<title>VIM 中文帮助: Tar 文件探索器</title>
<link rel="stylesheet" href="vim-stylesheet.css" type="text/css" />
<link rel="canonical" href="https://yianwillis.github.io/vimcdoc/doc/pi_tar.html" />
<script type="text/javascript" src="vimcdoc.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
<nav id=banner>
<form action=tags.html target="tag_iframe">
  <input type="text" name="tag" id="tag" placeholder="标签搜索">
</form>
<iframe name="tag_iframe" src=""></iframe>
<a href="help.html">帮助总览</a> &middot;
<hr/>
<a href="quickref.html">快速参考</a> &middot;
<a href="index.html">命令索引</a> &middot;
<a href="eval.html#functions">函数列表</a> &middot;
<a href="quickref.html#option-list">选项列表</a> &middot;
<hr/>
<a href="usr_toc.html">用户手册</a> &middot;
<a href="help.html#reference_toc">参考手册</a> &middot;
</nav>

<header>
<h2>pi_tar</h2>
</header>
<article id=outer>
<section class=inner>
<b class="vimtag"> <a name="pi_tar.txt">pi_tar.txt</a> </b>    适用于 Vim 9.1 版本。   最近更新: 2025年9月

                       +====================+
                       |    Tar 文件接口    |
                       +====================+
                                <code class="vim">译者</code>: Willis

Original Author:  Charles E. Campbell
Copyright 2005-2017:                                    <b class="vimtag"> <a name="tar-copyright">tar-copyright</a> </b>
        The VIM LICENSE (see  <a href="uganda.html#copyright">copyright</a> ) applies to the files in this
        package, including tarPlugin.vim, tar.vim, and pi_tar.txt.  Like
        anything else that's except use "tar.vim" instead of "VIM".  Like
        anything else that's free, tar.vim and its associated files are
        provided *as is* and comes with no warranty of any kind, either
        expressed or implied.  No guarantees of merchantability.  No
        guarantees of suitability for any purpose.  By using this plugin, you
        agree that in no event will the copyright holder be liable for any
        damages resulting from the use of this software. Use at your own risk!

</section><hr class="doubleline" /><section class=inner>
<h4>1. 内容                                         <b class="vimtag"> <a name="tar">tar</a> </b> <b class="vimtag"> <a name="tar-contents">tar-contents</a> </b></h4>   1. 内容...................................................... <a href="pi_tar.html#tar-contents">tar-contents</a> 
   2. 用法...................................................... <a href="pi_tar.html#tar-usage">tar-usage</a> 
   3. 选项...................................................... <a href="pi_tar.html#tar-options">tar-options</a> 
   4. 历史...................................................... <a href="pi_tar.html#tar-history">tar-history</a> 

</section><hr class="doubleline" /><section class=inner>
<h4>2. 用法                                         <b class="vimtag"> <a name="tar-usage">tar-usage</a> </b> <b class="vimtag"> <a name="tar-manual">tar-manual</a> </b></h4>
   编辑 *.tar 文件时，此插件进行处理，显示内容页面。移动光标到文件上，然后按
   <code class="special">&lt;return&gt;</code> 键，就可以选择该文件进行编辑。编辑后，可以写回该文件。目前，不能用
   该插件建立新的 tar 归档文件。

                                                <b class="vimtag"> <a name=":Vimuntar">:Vimuntar</a> </b>
<code class="section">   VIMUNTAR</code>

   :Vimuntar <code class="special">[vimhome]</code>

        本命令，如有需要，把 tar 包文件复制到以下目录中的 .vim 或 vimfiles 目
        录: 若 <code class="special">[vimhome]</code> 未指定，<a href="options.html#'runtimepath'">'runtimepath'</a> 的第一个可写目录。不然，
        <code class="special">[vimhome]</code> 参数允许用户自定义该目录。

        复制动作使用 <b class="vimtag"> <a name="g:tar_copycmd">g:tar_copycmd</a> </b>  定义的命令，即
<code class="example">                cp   用于 cygwin、unix、macunix</code>
<code class="example">                copy 用于 windows (32、95、64、16)</code>
        提取动作使用 <b class="vimtag"> <a name="g:tar_extractcmd">g:tar_extractcmd</a> </b> 定义的命令，缺省是
<code class="example">                "tar -xf"</code>

                                                <b class="vimtag"> <a name=":TarDiff">:TarDiff</a> </b>
<code class="section">   支 持 比 较</code>

   :TarDiff <code class="special">[filename]</code>

        本命令会试图比较文件的 tar 包版本和系统上相对应的文件。为了找到系统上
        的对应文件，脚本会用到 tar 包中的文件相关联的路径。如果当前目录下没有
        该路径，:TarDiff 就无法找到相关的文件。

        如果给出 <code class="special">[filename]</code>，该文件名 (和其路径) 会被用来指定相关文件。


<code class="section">   禁 止 载 入</code>

   如果由于某种原因你不想 vim 检查 tar 文件，在 &lt;.vimrc&gt; 中定义两个变量就可以
   不载入 tar 插件:
<code class="example"></code>
<code class="example">        let g:loaded_tarPlugin= 1</code>
<code class="example">        let g:loaded_tar      = 1</code>

                                                        <b class="vimtag"> <a name="tar-mappings">tar-mappings</a> </b>
<code class="section">   映 射</code>

   可在 tar 缓冲区里使用下列的 (缓冲区局部) 映射:

        <code class="special">&lt;CR&gt;</code>            打开选中的文件进行编辑，所有的改动会写回到归档。
        <code class="special">&lt;LeftMouse&gt;</code>     同 <code class="special">&lt;CR&gt;</code>
        x               提取选中的文件。

</section><hr class="doubleline" /><section class=inner>
<h4>3. 选项                                                 <b class="vimtag"> <a name="tar-options">tar-options</a> </b></h4>
   以下是用户可以改变的变量，通常在 &lt;.vimrc&gt; 文件里设置。
<code class="section">   变量                 缺省值  解释 </code>
   <b class="vimtag"> <a name="g:tar_browseoptions">g:tar_browseoptions</a> </b>  "Ptf"   用于得到内容列表
   <b class="vimtag"> <a name="g:tar_readoptions">g:tar_readoptions</a> </b>  "OPxf"  用于从 tar 包里提取文件
   <b class="vimtag"> <a name="g:tar_cmd">g:tar_cmd</a> </b>          "tar"   tar 程序名
   <b class="vimtag"> <a name="g:tar_nomax">g:tar_nomax</a> </b>          0     如果为真，不最大化文件窗口
   <b class="vimtag"> <a name="g:tar_writeoptions">g:tar_writeoptions</a> </b> "uf"    用于更新/替换文件


</section><hr class="doubleline" /><section class=inner>
<h4>4. 历史 (英文)                                          <b class="vimtag"> <a name="tar-history">tar-history</a> </b></h4>
        unreleased:
                Jul 13, 2025    * drop leading /
                May 19, 2025    * restore working directory after read/write
                Apr 16, 2025    * decouple from netrw by adding s:WinPath()
                                instead of shelling out to file(1)
                Mar 02, 2025    * determine the compression using readblob()
                Mar 02, 2025    * escape the filename before using :read
                Mar 01, 2025    * fix syntax error in tar#Read()
                Feb 28, 2025    * add support for bzip3 (#16755)
                Feb 06, 2025    * add support for lz4 (#16591)
                Nov 11, 2024    * support permissions (#7379)
                Feb 19, 2024    * announce adoption
                Jan 08, 2024    * fix a few problems (#138331, #12637, #8109)
        v31     Apr 02, 2017    * (klartext) reported that browsing encrypted
                                  files in a zip archive created unencrypted
                                  swap files.  I am applying a similar fix
                                  used on zip.vim to tar.vim: new buffers
                                  are opened with  <a href="recover.html#:noswapfile">:noswapfile</a> .
                May 16, 2017    * When the mouse option isn't empty, the
                                  leftmouse can be used to select a file
                                  in the tar-file listing.
        v30     Apr 22, 2014    * .tgz files are ambiguous: they may have been
                                  compressed with either gzip or bzip2.  Tar.vim
                                  disambiguates by using unix's "file" command.
                Feb 18, 2016    * Changed =~ to =~# where appropriate
                Feb 18, 2017    * Now also permits xz decompression
        v28     Jun 23, 2011    * a few more decompression options (tbz tb2 txz)
        v27     May 31, 2011    * moved cygwin detection before g:tar_copycmd
                                  handling
                                * inserted additional  <a href="motion.html#:keepj">:keepj</a>  modifiers
                                * changed silent  to  sil!  ( <a href="various.html#:silent">:silent</a> )
        v26     Aug 09, 2010    * uses buffer-local instead of window variables
                                  to hold tarfile name
                                * inserted keepj before 0d to protect jump list
        v25     Jun 19, 2010    * (Jan Steffens) added support for xz
                                  compression
        v24     Apr 07, 2009    * :Untarvim command implemented
                Sep 28, 2009    * Added lzma support
        v22     Aug 08, 2008    * security fixes
        v16     Jun 06, 2008    * tarfile:: used instead of tarfile: when
                                  editing files inside tarballs.  Fixes a
                                  problem with tarballs called things like
                                  c:\abc.tar. (tnx to Bill McCarthy)
        v14     May 09, 2008    * arno caught a security bug
                May 28, 2008    * various security improvements.  Now requires
                                  patch 299 which provides the fnameescape()
                                  function
                May 30, 2008    * allows one to view *.gz and *.bz2 files that
                                  are in *.tar files.
        v12     Sep 07, 2007    * &amp;shq now used if not the empty string for
                                  g:tar_shq
        v10     May 02, 2006    * now using "redraw then echo" to show messages,
                                  instead of "echo and prompt user"
        v9      May 02, 2006    * improved detection of masquerading as tar file
        v8      May 02, 2006    * allows editing of files that merely masquerade
                                  as tar files
        v7      Mar 22, 2006    * work on making tar plugin work across network
                Mar 27, 2006    * g:tar_cmd now available for users to change
                                  the name of the tar program to be used.  By
                                  default, of course, it's "tar".
        v6      Dec 21, 2005    * writing to files not in directories caused
                                  problems - fixed (pointed out by
                                  Christian Robinson)
        v5      Nov 22, 2005    * report option workaround installed
        v3      Sep 16, 2005    * handles writing files in an archive back to
                                  the archive
                Oct 18, 2005    * <code class="special">&lt;amatch&gt;</code> used instead of <code class="special">&lt;afile&gt;</code> in autocmds
                Oct 18, 2005    * handles writing to compressed archives
                Nov 03, 2005    * handles writing tarfiles across a network
                                  using netrw#NetWrite()
        v2                      * converted to use Vim7's new autoload feature
                                  by Bram Moolenaar
        v1      (original)      * Michael Toren
                                  (see michael.toren.net/code/ 链接看来已失效)

</section><hr class="doubleline" /><section class=inner>
<h4>vim:tw=78:ts=8:noet:ft=help</h4></section>
</article>
<footer>
Generated by vim2html
</footer>
</body>
</html>
