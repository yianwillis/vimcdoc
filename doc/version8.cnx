*version8.txt*  For Vim version 8.2.  最近更新: 2020年1月


		  VIM 参考手册	  by Bram Moolenaar
				译者: Willis
				http://vimcdoc.sf.net

				*vim8* *vim-8* *version-8.0* *version8.0*
欢迎来到 Vim 版本 8！新版本修正了大量的漏洞，也增加了几个好用的特性。本文档列
出 Vim 7.4 以来所有加入的新项目和已有特性的改动。Vim 7.4 及之前的补丁可见:
|vim-7.4|.

使用此命令可见正在使用的 Vim 程序的完整版本和特性信息: >
	:version

新 特 性				|new-8|
	Vim 脚本增强			|new-vim-script-8|
	若干新项目			|new-items-8|

不 兼 容 的 改 动			|incompatible-8|

改 进					|improvements-8|

编 译 时 的 改 变			|compile-changes-8|

补 丁					|patches-8|

8.1 版 本			|version-8.1|
改动					|changed-8.1|
新增					|added-8.1|
补丁					|patches-8.1|

8.2 版 本			|version-8.2|
改动					|changed-8.2|
新增					|added-8.2|
补丁					|patches-8.2|


|vi_diff.txt| 提供 Vi 和 Vim 8.0 的区别的一个概述。
|version4.txt|、|version5.txt|、|version6.txt| 和 |version7.txt| 说明其它版本
间的区别。

==============================================================================
新 特 性						*new-8*

首先给出最有意思的新特性的概述。下面再给出完整列表。


异步 I/O 支持，通道 ~

Vim 现在可以在后台和其它进程交换信息。这样就可以让服务器完成工作并发送结果给
Vim。例见 |channel-demo|，展示和一个 Python 服务器的交流。

和通道紧密相关的是 JSON 支持。JSON 受到广泛支持，可以方便地支持进程间通信，
支持任何语言编写的服务器。要用的函数是 |json_encode()| 和 |json_decode()|。

这样就可以编写十分复杂的插件，使用任何语言并在单独的进程上运行。


作业 ~

Vim 现在可以启动作业，与之交互，并停止作业。可用于运行进程来完成补全，拼写检查
等等工作。使用通道机制和作业进行交互。作业也可以读入或写到缓冲区或文件。见
|job_start()|。


定时器 ~

定时器是另一种异步机制。可以单次或重复激活并调用函数来完成任何工作。例如: >
	let tempTimer = timer_start(4000, 'CheckTemp')
这会在四秒 (4000 毫秒) 后调用 CheckTemp() 函数。见 |timer_start()|。


偏函数 ~

Vim 已经有了函数引用，即对一个函数的引用。偏函数也引用函数，并附加对参数和/或
字典的绑定。这对通道和定时器的回调特别有用。例如，上面定时器的示例，要给函数传
递参数: >
	let tempTimer = timer_start(4000, function('CheckTemp', ['out']))
这会在四秒后调用 CheckTemp('out')。


匿名函数和闭包 ~

加入函数创建的快捷方式: {args -> expr}。见 |lambda|。
可用于 `filter()` 和 `map()` 之类的函数，它们现在也接受函数参数。例如: >
	:call filter(mylist, {idx, val -> val > 20})

匿名函数可以使用该函数定义所在的作用域内定义的变量。这通常被称为 |closure|。

通过加入 "closure" 参数，用户定义函数也可以是闭包 |:func-closure|。


软件包 ~

插件持续增长，可用的数目前所未有。要方便管理诸多插件，引入软件包的支持。这是获
得一个或更多插件的方便方式，它们在目录里存放并可一直保持更新。Vim 会自动或按需
载入。见 |packages|。


新风格测试 ~

用于 Vim 开发者。目前为止，为 Vim 编写测试用例并不容易。Vim 8 加入 assert 函数
和支持测试的框架。这样测试的编写和保持更新就简单很多。同时，新增了若干专为测试
而引入的函数。见 |test-functions|。


窗口 ID ~

之前窗口只能为它们的编号访问。每次窗口打开、关闭或移动时，此编号都会改变。现在
每个窗口有了独一无二的 ID，这样方便它们的查找。见 |win_getid()| 和
|win_id2win()|。


Viminfo 使用时间戮 ~

之前，viminfo 保存上次 Vim 在那里写入的信息。现在使用时间戳，来确保保存的是最
新的项目。见 |viminfo-timestamp|。


回绕缩进行 ~

加入 'breakindent' 选项以便回绕行而不改变缩进的数量。


Windows: DirectX 支持 ~

加入 'renderoptions' 选项以便 MS-Windows 上切换 DirectX (DirectWrite) 的支持。


GTK+ 3 支持 ~

除了很细微的技术上的差异，GTK+ 3 GUI 的工作方式和 GTK+ 2 类似。如果 2 和 3 同
时存在，configure 只选择 GTK + 2。src/Makefile 说明如何选择 GTK+ 3 来代替。详
见 |gui-x11-compiling|。


Vim 脚本增强						*new-vim-script-8*
-----------------------

Vim 脚本加入以下新类型:

	|Special|	|v:false|、|v:true|、|v:none| 和 |v:null|
	|Channel|	到其它进程的连接，用于支持异步 I/O
	|Job|		进程控制

加入许多函数和命令以支持新类型。

在新系统上，Vim 脚本使用的数值现在使用 64 位。可通过 |+num64| 特性来检查。

加入很多新项目以支持 |new-style-testing|。

printf() 的 %s 现在接受任何类型的参数。用和 string() 类似的方式转换为字符串。


若干新项目						*new-items-8*
-----------------

可视模式命令: ~

|v_CTRL-A|	CTRL-A		给高亮文本中的数值加上 N
|v_CTRL-X|	CTRL-X		给高亮文本中的数值减去 N
|v_g_CTRL-A|	g CTRL-A	给高亮文本中的数值加上 N
|v_g_CTRL-X|	g CTRL-X	给高亮文本中的数值减去 N


插入模式命令: ~

|i_CTRL-G_U|	CTRL-G U	下一个光标移动不打断撤销


命令行模式命令: ~

|/_CTRL-G|	CTRL-G		'incsearch' 激活时，转到下个匹配
|/_CTRL-T|	CTRL-T		'incsearch' 激活时，转到前个匹配


选项: ~

'belloff'		为这些原因不响铃
'breakindent'		回绕行重复缩进
'breakindentopt'	'breakindent' 的设置
'emoji'			表情字符视作全宽
'fixendofline'		确保文件的末行有 <EOL>
'langremap'		映射字符适用 'langmap'
'luadll'		Lua 动态库名
'packpath'		软件包使用的目录列表
'perldll'		Perl 动态库名
'pythondll'		Python 2 动态库名
'pythonthreedll'	Python 3 动态库名
'renderoptions'		Window 上文本渲染选项
'rubydll'		Ruby 动态库名
'signcolumn'		何时显示标号列
'tagcase'		标签文件查找时如何处理大小写
'tcldll'		Tcl 动态库名
'termguicolors'		终端使用 GUI 颜色


Ex 命令: ~

|:cbottom|		滚动到 quickfox 窗口底部
|:cdo|			为每个合法的错误列表项目执行命令
|:cfdo|			为每个错误列表的文件执行命令
|:chistory|		显示 quickfix 列表堆栈
|:clearjumps|		清除跳转列表
|:filter|		只输出匹配 (或不匹配) 的行
|:helpclose|		关闭帮助窗口
|:lbottom|		滚动到位置窗口的底部
|:ldo|			为每个合法位置列表项目执行命令
|:lfdo|			为每个位置列表的文件执行命令
|:lhistory|		显示位置列表堆栈
|:noswapfile|		跟随的若干命令不创建交换文件
|:packadd|		从 'packpath' 载入插件
|:packloadall|		从 'packpath' 载入所有包
|:smile|		让用户高兴一下


Ex 命令修饰符: ~

|:keeppatterns|		跟随的命令保持搜索模式历史不变
|<mods>|		提供用户自定义命令的命令修饰符


新函数及功能扩展的函数: ~

|arglistid()|		获取参数列表的编号
|assert_equal()|	断言两个表达式的值相等
|assert_exception()|	断言命令抛出例外
|assert_fails()|	断言函数调用失败
|assert_false()|	断言表达式为假
|assert_inrange()|	断言表达式在范围内
|assert_match()|	断言模式与值匹配
|assert_notequal()|	断言两个表达式的值不等
|assert_notmatch()|	断言模式不与值匹配
|assert_true()|		断言表达式为真
|bufwinid()|		获取特定缓冲区的窗口 ID
|byteidxcomp()|		类似于 byteidx()，但计算组合字符
|ch_close()|		关闭通道
|ch_close_in()|		关闭通道的 in 部分
|ch_evalexpr()|		通过通道计算表达式
|ch_evalraw()|		通过通道计算未经处理的表达式
|ch_getbufnr()|		获取通道的缓冲区号
|ch_getjob()|		获取通道相关的作业
|ch_info()|		获取通道信息
|ch_log()|		在通道日志文件写下信息
|ch_logfile()|		设置通道日志文件
|ch_open()|		打开通道
|ch_read()|		从通道读取信息
|ch_readraw()|		从通道读取未处理的信息
|ch_sendexpr()|		从通道读取 JSON 信息
|ch_sendraw()|		向通道发送未处理的信息
|ch_setoptions()|	设置通道的选项
|ch_status()|		获取通道的状态
|execute()|		执行 Ex 命令并获取输出
|exepath()|		可执行程序的完整路径
|funcref()|		返回函数 {name} 的引用
|getbufinfo()|		获取缓冲区信息的列表
|getcharsearch()|	返回字符搜索信息
|getcmdwintype()|	返回当前命令行窗口类型
|getcompletion()|	返回命令行补全匹配的列表
|getcurpos()|		获取光标位置
|gettabinfo()|		获取标签页信息的列表
|getwininfo()|		获取窗口信息的列表
|glob2regpat()|		转换 glob 模式到搜索模式
|isnan()|		检查非数
|job_getchannel()|	获取作业使用的通道
|job_info()|		获取作业信息
|job_setoptions()|	设置作业选项
|job_start()|		启动作业
|job_status()|		获取作业状态
|job_stop()|		停止作业
|js_decode()|		把 JSON 字符串解码为 Vim 类型
|js_encode()|		把表达式编码为 JSON 字符串
|json_decode()|		把 JSON 字符串解码为 Vim 类型
|json_encode()|		把表达式编码为 JSON 字符串
|matchaddpos()|		定义位置列表用于高亮
|matchstrpos()|		字符串中满足匹配的模式和位置
|perleval()|		计算 Perl 表达式
|reltimefloat()|	转换 reltime() 结果为浮点数
|setcharsearch()|	设置字符搜索信息
|setfperm()|		设置文件权限
|strcharpart()|		用字符索引获取字符串的子串
|strgetchar()|		用字符索引获取字符串里的字符
|systemlist()|		得到列表形式的外壳命令结果
|test_alloc_fail()|	使内存分配失败
|test_autochdir()|	测试 'autochdir' 功能
test_disable_char_avail() 无预输入的测试 (将要删除)
|test_garbagecollect_now()| 立即清理内存
|test_null_channel()|	返回 null 通道
|test_null_dict()|	返回 null 字典
|test_null_job()|	返回 null 作业
|test_null_list()|	返回 null 列表
|test_null_partial()|	返回 null 偏函数
|test_null_string()|	返回 null 字符串
|test_settime()|	设置 Vim 内部使用的时间
|timer_info()|		获取定时器信息
|timer_pause()|		暂停或继续定时器
|timer_start()|		建立定时器
|timer_stop()|		停止定时器
|timer_stopall()|	停止所有定时器
|uniq()|		删除重复邻接项目的备份
|win_findbuf()|		寻找包含某缓冲区的窗口
|win_getid()|		获取窗口的窗口 ID
|win_gotoid()|		给出 ID 转到指定窗口
|win_id2tabwin()|	给出窗口 ID 获取标签页号和窗口号
|win_id2win()|		把窗口 ID 转换为窗口号
|wordcount()|		获取缓冲区的字节/单词/字符计数


新 Vim 变量: ~

|v:beval_winid|		鼠标指针所在的窗口的窗口 ID
|v:completed_item|	用于最近经补全的单词的补全项目
|v:errors|		assert 函数找到的错误
|v:false|		值为零的数值
|v:hlsearch|		指示搜索高亮是否打开
|v:mouse_winid|		 |getchar()| 获取的鼠标点击所在的窗口 ID
|v:none|		空字符串，用于 JSON
|v:null|		空字符串，用于 JSON
|v:option_new|		选项的新值，用于 |OptionSet|
|v:option_old|		选项的旧值，用于 |OptionSet|
|v:option_oldlocal|	选项的旧局部值，用于 |OptionSet|
|v:option_oldglobal|	选项的旧全局值，用于 |OptionSet|
|v:option_type|		set 命令的作用域，用于 |OptionSet|
|v:option_command|	选项设置所用的命令，用于 |OptionSet|
|v:progpath|		Vim 启动所用的命令
|v:t_bool|		布尔型的类型值
|v:t_channel|		通道的类型值
|v:t_dict|		字典的类型值
|v:t_float|		浮点数的类型值
|v:t_func|		函数引用的类型值
|v:t_job|		作业的类型值
|v:t_list|		列表的类型值
|v:t_none|		None 的类型值
|v:t_number|		数值的类型值
|v:t_string|		字符串的类型值
|v:testing|		必须在用 `test_garbagecollect_now()` 前设置
|v:true|		值为一的数值
|v:vim_did_enter|	就在 VimEnter 自动命令激活前设置


新自动命令事件: ~

|CmdUndefined|		使用未定义的用户命令
|OptionSet|		设置任何选项后
|TabClosed|		关闭标签页后
|TabNew|		建立新标签页后
|TextChangedI|		插入模式下改动文本后
|TextChanged|		普通模式下改动文本后
|WinNew|		建立新窗口后


新高亮组: ~

EndOfBuffer		缓冲区末行的填充行 (~)。 |hl-EndOfBuffer|


搜索模式的新项目: ~

|/\%C|	\%C		匹配任何组合字符


新语法/缩进/文件类型插件文件: ~

AVR Assembler (Avra) 语法
Arduino 语法
Bazel 语法、缩进和文件类型插件
Dockerfile 语法和文件类型插件
Eiffel 文件类型插件
Euphoria 3 和 4 语法
Go 语法、缩进和文件类型插件
Godoc 语法
Groovy 文件类型插件
HGcommit 文件类型插件
Hog 缩进和文件类型插件
Innovation Data Processing upstream.pt 语法
J 语法、缩进和文件类型插件
Jproperties 文件类型插件
Json 语法、缩进和文件类型插件
Kivy 语法
Less 语法和缩进
Mix 语法
Motorola S-Record 语法
R 文件类型插件
ReStructuredText 语法、缩进和文件类型插件
Registry 文件类型插件
Rhelp 缩进和文件类型插件
Rmd (markdown with R code chunks) 语法和缩进
Rmd 文件类型插件
Rnoweb 文件类型插件
Rnoweb 缩进
Scala 语法、缩进和文件类型插件
SystemVerilog 语法、缩进和文件类型插件
Systemd 语法、缩进和文件类型插件
Teraterm (TTL) 语法和缩进
Text 文件类型插件
Vroom 语法、缩进和文件类型插件


新键盘映射表: ~

东亚美尼亚语和西亚美尼亚语
俄罗斯语 JCUKEN Windows 变种的输入
越南语 telex 和 vni 输入

==============================================================================
不 兼 容 的 改 动				*incompatible-8*

这些改动和以前版本不兼容。如果从 Vim 7.4 升级到 8.0 时出现问题，检查这个列表。


没有 vimrc 时更好的缺省处理 ~

如果找不到 vimrc，截入 |defaults.vim| 脚本来设置更多对新用户有用的缺省值。这包
括设置 'nocompatible'。这样，Vim 就不再以 Vi 兼容模式启动。如果你确实想要，建
立 .vimrc 文件并设置 "set compatible"，或以 "vim -C" 启动 Vim。


删除支持 ~

删除了 MS-DOS 的支持。有一段时间不能用了 (Vim 不能放进内存里)，它的删除清理了
不少代码。

删除了 Windows 16 位 (Windows 95 和更旧版本) 的支持。

删除了 OS/2 的支持。因为没有人在用，可能有一段时间早就不能用了。

删除了 SNiFF+ 的支持。


少量不兼容: ~

可能吧...

==============================================================================
改 进							*improvements-8*

已有的 blowfish 加密被发现比以前想象的要弱。为此，加入了 blowfish2 方法进行修
正。注意 这还不是顶尖的加密方法，但对多数应用足够了。见 'cryptmethod'。


==============================================================================
编 译 时 的 改 变					*compile-changes-8*

Vim 版本库从 Google code 转到了 gitub，因为 Google code 停止了服务。可在这里
找到。 https://github.com/vim/vim。

函数现在使用 ANSI-C 声明。需要至少 C-89 兼容的编译器。

现在总是包含 +visual 特性。

==============================================================================
补 丁						*patches-8* *bug-fixes-8*

这里的补丁列表包含 7.4.0 开始的补丁。包含所有的新特性，但不包含 runtime 的文件
改动 (语法、缩进、帮助等等)

Patch 7.4.001
问题:       Character classes such as [a-z] do not react to 'ignorecase'.
	    Breaks man page highlighting. (Mario Grgic)
解决方案:   Add separate items for classes that react to 'ignorecase'.  Clean
	    up logic handling character classes.  Add more tests.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.002
问题:       Pattern with two alternative look-behind matches does not match.
	    (Amadeus Demarzi)
解决方案:   When comparing PIMs also compare their state ID to see if they are
	    different.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.003
问题:       Memory access error in Ruby syntax highlighting. (Christopher Chow)
解决方案:   Refresh stale pointer. (James McCoy)
相关文件:   src/regexp_nfa.c

Patch 7.4.004
问题:       When closing a window fails ":bwipe" may hang.
解决方案:   Let win_close() return FAIL and break out of the loop.
相关文件:   src/window.c, src/proto/window.pro, src/buffer.c

Patch 7.4.005
问题:       Using "vaB" while 'virtualedit' is set selects the wrong area.
	    (Dimitar Dimitrov)
解决方案:   Reset coladd when finding a match.
相关文件:   src/search.c

Patch 7.4.006
问题:       mkdir("foo/bar/", "p") gives an error message. (David Barnett)
解决方案:   Remove the trailing slash. (lcd)
相关文件:   src/eval.c

Patch 7.4.007
问题:       Creating a preview window on startup leaves the screen layout in a
	    messed up state. (Marius Gedminas)
解决方案:   Don't change firstwin. (Christian Brabandt)
相关文件:   src/main.c

Patch 7.4.008
问题:       New regexp engine can't be interrupted.
解决方案:   Check for CTRL-C pressed. (Yasuhiro Matsumoto)
相关文件:   src/regexp_nfa.c, src/regexp.c

Patch 7.4.009
问题:       When a file was not decrypted (yet), writing it may destroy the
	    contents.
解决方案:   Mark the file as readonly until decryption was done. (Christian
	    Brabandt)
相关文件:   src/fileio.c

Patch 7.4.010 (after 7.4.006)
问题:       Crash with invalid argument to mkdir().
解决方案:   Check for empty string. (lcd47)
相关文件:   src/eval.c

Patch 7.4.011
问题:       Cannot find out if "acl" and "xpm" features are supported.
解决方案:   Add "acl" and "xpm" to the list of features. (Ken Takata)
相关文件:   src/eval.c, src/version.c

Patch 7.4.012
问题:       MS-Windows: resolving shortcut does not work properly with
	    multi-byte characters.
解决方案:   Use wide system functions. (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.013
问题:       MS-Windows: File name buffer too small for utf-8.
解决方案:   Use character count instead of byte count. (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.014
问题:       MS-Windows: check for writing to device does not work.
解决方案:   Fix #ifdefs. (Ken Takata)
相关文件:   src/fileio.c

Patch 7.4.015
问题:       MS-Windows: Detecting node type does not work for multi-byte
	    characters.
解决方案:   Use wide character function when needed. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.016
问题:       MS-Windows: File name case can be wrong.
解决方案:   Add fname_casew(). (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.017
问题:       ":help !!" does not find the "!!" tag in the help file. (Ben
	    Fritz)
解决方案:   When reading the start of the tags file do parse lines that are
	    not header lines.
相关文件:   src/tag.c

Patch 7.4.018
问题:       When completing item becomes unselected. (Shougo Matsu)
解决方案:   Revert patch 7.3.1269.
相关文件:   src/edit.c

Patch 7.4.019
问题:       MS-Windows: File name completion doesn't work properly with
	    Chinese characters. (Yue Wu)
解决方案:   Take care of multi-byte characters when looking for the start of
	    the file name. (Ken Takata)
相关文件:   src/edit.c

Patch 7.4.020
问题:       NFA engine matches too much with \@>. (John McGowan)
解决方案:   When a whole pattern match is found stop searching.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.021
问题:       NFA regexp: Using \ze in one branch which doesn't match may cause
	    end of another branch to be wrong. (William Fugh)
解决方案:   Set end position if it wasn't set yet.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.022
问题:       Deadlock while exiting, because of allocating memory.
解决方案:   Do not use gettext() in deathtrap(). (James McCoy)
相关文件:   src/os_unix.c, src/misc1.c

Patch 7.4.023
问题:       Compiler warning on 64 bit windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/edit.c

Patch 7.4.024
问题:       When root edits a file the undo file is owned by root while the
	    edited file may be owned by another user, which is not allowed.
	    (cac2s)
解决方案:   Accept an undo file owned by the current user.
相关文件:   src/undo.c

Patch 7.4.025 (after 7.4.019)
问题:       Reading before start of a string.
解决方案:   Do not call mb_ptr_back() at start of a string. (Dominique Pelle)
相关文件:   src/edit.c

Patch 7.4.026
问题:       Clang warning for int shift overflow.
解决方案:   Use unsigned and cast back to int. (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.4.027 (after 7.4.025)
问题:       Another valgrind error when using CTRL-X CTRL-F at the start of
	    the line. (Dominique Pelle)
解决方案:   Don't call mb_ptr_back() at the start of the line.  Add a test.
相关文件:   src/edit.c, src/testdir/test32.in

Patch 7.4.028
问题:       Equivalence classes are not working for multi-byte characters.
解决方案:   Copy the rules from the old to the new regexp engine. Add a test
	    to check both engines.
相关文件:   src/regexp_nfa.c, src/testdir/test44.in, src/testdir/test99.in,
	    src/testdir/test99.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile

Patch 7.4.029
问题:       An error in a pattern is reported twice.
解决方案:   Remove the retry with the backtracking engine, it won't work.
相关文件:   src/regexp.c

Patch 7.4.030
问题:       The -mno-cygwin argument is no longer supported by Cygwin.
解决方案:   Remove the arguments. (Steve Hall)
相关文件:   src/GvimExt/Make_cyg.mak, src/Make_cyg.mak, src/xxd/Make_cyg.mak

Patch 7.4.031
问题:       ":diffoff!" resets options even when 'diff' is not set. (Charles
	    Cooper)
解决方案:   Only resets related options in a window where 'diff' is set.
相关文件:   src/diff.c

Patch 7.4.032
问题:       NFA engine does not match the NUL character. (Jonathon Merz)
解决方案:   Use 0x0a instead of NUL. (Christian Brabandt)
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.033
问题:       When the terminal has only 20 lines test 92 and 93 overwrite the
	    input file.
解决方案:   Explicitly write test.out. Check that the terminal is large enough
	    to run the tests.  (Hirohito Higashi)
相关文件:   src/testdir/test92.in, src/testdir/test93.in,
	    src/testdir/test1.in, src/testdir/Makefile

Patch 7.4.034
问题:       Using "p" in Visual block mode only changes the first line.
解决方案:   Repeat the put in all text in the block. (Christian Brabandt)
相关文件:   runtime/doc/change.txt, src/ops.c, src/normal.c,
	    src/testdir/test20.in, src/testdir/test20.ok

Patch 7.4.035
问题:       MS-Windows: The mouse pointer flickers when going from command
	    line mode to Normal mode.
解决方案:   Check for WM_NCMOUSEMOVE. (Ken Takata)
相关文件:   src/gui_w48.c

Patch 7.4.036
问题:       NFA engine does not capture group correctly when using \@>. (ZyX)
解决方案:   Copy submatches before doing the recursive match.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.037
问题:       Using "\ze" in a sub-pattern does not result in the end of the
	    match to be set. (Axel Bender)
解决方案:   Copy the end of match position when a recursive match was
	    successful.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.038
问题:       Using "zw" and "zg" when 'spell' is off give a confusing error
	    message. (Gary Johnson)
解决方案:   Ignore the error when locating the word.  Explicitly mention what
	    word was added. (Christian Brabandt)
相关文件:   src/normal.c, src/spell.c

Patch 7.4.039
问题:       MS-Windows: MSVC10 and earlier can't handle symlinks to a
	    directory properly.
解决方案:   Add stat_symlink_aware() and wstat_symlink_aware(). (Ken Takata)
相关文件:   src/os_mswin.c, src/os_win32.c, src/os_win32.h

Patch 7.4.040
问题:       Valgrind error on exit when a script-local variable holds a
	    reference to the scope of another script.
解决方案:   First clear all variables, then free the scopes. (ZyX)
相关文件:   src/eval.c

Patch 7.4.041 (after 7.4.034)
问题:       Visual selection does not remain after being copied over. (Axel
	    Bender)
解决方案:   Move when VIsual_active is reset. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4.042
问题:       When using ":setlocal" for 'spell' and 'spelllang' then :spelldump
	    doesn't work. (Dimitar Dimitrov)
解决方案:   Copy the option variables to the new window used to show the dump.
	    (Christian Brabandt)
相关文件:   src/spell.c

Patch 7.4.043
问题:       VMS can't handle long function names.
解决方案:   Shorten may_req_ambiguous_character_width. (Samuel Ferencik)
相关文件:   src/main.c, src/term.c, src/proto/term.pro


Patch 7.4.044 (after 7.4.039)
问题:       Can't build with old MSVC. (Wang Shoulin)
解决方案:   Define OPEN_OH_ARGTYPE instead of using intptr_t directly.
相关文件:   src/os_mswin.c

Patch 7.4.045
问题:       substitute() does not work properly when the pattern starts with
	    "\ze".
解决方案:   Detect an empty match. (Christian Brabandt)
相关文件:   src/eval.c, src/testdir/test80.in, src/testdir/test80.ok

Patch 7.4.046
问题:       Can't use Tcl 8.6.
解决方案:   Change how Tcl_FindExecutable is called. (Jan Nijtmans)
相关文件:   src/if_tcl.c

Patch 7.4.047
问题:       When using input() in a function invoked by a mapping it doesn't
	    work.
解决方案:   Temporarily reset ex_normal_busy. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.048
问题:       Recent clang version complains about -fno-strength-reduce.
解决方案:   Add a configure check for the clang version. (Kazunobu Kuriyama)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.049
问题:       In Ex mode, when line numbers are enabled the substitute prompt is
	    wrong.
解决方案:   Adjust for the line number size. (Benoit Pierre)
相关文件:   src/ex_cmds.c

Patch 7.4.050
问题:       "gn" selects too much for the pattern "\d" when there are two
	    lines with a single digit. (Ryan Carney)
解决方案:   Adjust the logic of is_one_char(). (Christian Brabandt)
相关文件:   src/search.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.4.051
问题:       Syntax highlighting a Yaml file causes a crash. (Blake Preston)
解决方案:   Copy the pim structure before calling addstate() to avoid it
	    becoming invalid when the state list is reallocated.
相关文件:   src/regexp_nfa.c

Patch 7.4.052
问题:       With 'fo' set to "a2" inserting a space in the first column may
	    cause the cursor to jump to the previous line.
解决方案:   Handle the case when there is no comment leader properly. (Tor
	    Perkins)  Also fix that cursor is in the wrong place when spaces
	    get replaced with a Tab.
相关文件:   src/misc1.c, src/ops.c, src/testdir/test68.in,
	    src/testdir/test68.ok

Patch 7.4.053
问题:       Test75 has a wrong header. (ZyX)
解决方案:   Fix the text and remove leading ".
相关文件:   src/testdir/test75.in

Patch 7.4.054
问题:       Reading past end of the 'stl' string.
解决方案:   Don't increment pointer when already at the NUL. (Christian
	    Brabandt)
相关文件:   src/buffer.c

Patch 7.4.055
问题:       Mac: Where availability macros are defined depends on the system.
解决方案:   Add a configure check. (Felix Bünemann)
相关文件:   src/config.h.in, src/configure.in, src/auto/configure,
	    src/os_mac.h

Patch 7.4.056
问题:       Mac: Compilation problem with OS X 10.9 Mavericks.
解决方案:   Include AvailabilityMacros.h when available. (Kazunobu Kuriyama)
相关文件:   src/os_unix.c

Patch 7.4.057
问题:       byteidx() does not work for composing characters.
解决方案:   Add byteidxcomp().
相关文件:   src/eval.c, src/testdir/test69.in, src/testdir/test69.ok,
	    runtime/doc/eval.txt

Patch 7.4.058
问题:       Warnings on 64 bit Windows.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/ops.c

Patch 7.4.059
问题:       set_last_cursor() may encounter w_buffer being NULL.  (Matt
	    Mkaniaris)
解决方案:   Check for NULL.
相关文件:   src/mark.c

Patch 7.4.060
问题:       Declaration has wrong return type for PyObject_SetAttrString().
解决方案:   Use int instead of PyObject. (Andreas Schwab)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.4.061 (after 7.4.055 and 7.4.056)
问题:       Availability macros configure check in wrong place.
解决方案:   Also check when not using Darwin. Remove version check.
相关文件:   src/configure.in, src/auto/configure, src/os_unix.c

Patch 7.4.062 (after 7.4.061)
问题:       Configure check for AvailabilityMacros.h is wrong.
解决方案:   Use AC_CHECK_HEADERS().
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.063
问题:       Crash when using invalid key in Python dictionary.
解决方案:   Check for object to be NULL.  Add tests. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.064
问题:       When replacing a character in Visual block mode, entering a CR
	    does not cause a repeated line break.
解决方案:   Recognize the situation and repeat the line break. (Christian
	    Brabandt)
相关文件:   src/normal.c, src/ops.c, src/testdir/test39.in,
	    src/testdir/test39.ok

Patch 7.4.065
问题:       When recording, the character typed at the hit-enter prompt is
	    recorded twice. (Urtica Dioica)
解决方案:   Avoid recording the character twice. (Christian Brabandt)
相关文件:   src/message.c

Patch 7.4.066
问题:       MS-Windows: When there is a colon in the file name (sub-stream
	    feature) the swap file name is wrong.
解决方案:   Change the colon to "%". (Yasuhiro Matsumoto)
相关文件:   src/fileio.c, src/memline.c, src/misc1.c, src/proto/misc1.pro

Patch 7.4.067
问题:       After inserting comment leader, CTRL-\ CTRL-O does move the
	    cursor. (Wiktor Ruben)
解决方案:   Avoid moving the cursor. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.4.068
问题:       Cannot build Vim on Mac with non-Apple compilers.
解决方案:   Remove the -no-cpp-precomp flag. (Misty De Meo)
相关文件:   src/configure.in, src/auto/configure, src/osdef.sh

Patch 7.4.069
问题:       Cannot right shift lines starting with #.
解决方案:   Allow the right shift when 'cino' contains #N with N > 0.
	    (Christian Brabandt)
	    Refactor parsing 'cino', store the values in the buffer.
相关文件:   runtime/doc/indent.txt, src/buffer.c, src/edit.c, src/eval.c,
	    src/ex_getln.c, src/fold.c, src/misc1.c, src/ops.c,
	    src/proto/misc1.pro, src/proto/option.pro, src/structs.h,
	    src/option.c

Patch 7.4.070 (after 7.4.069)
问题:       Can't compile with tiny features. (Tony Mechelynck)
解决方案:   Add #ifdef.
相关文件:   src/buffer.c

Patch 7.4.071 (after 7.4.069)
问题:       Passing limits around too often.
解决方案:   Use limits from buffer.
相关文件:   src/edit.c, src/misc1.c, src/proto/misc1.pro

Patch 7.4.072
问题:       Crash when using Insert mode completion.
解决方案:   Avoid going past the end of pum_array. (idea by Francisco Lopes)
相关文件:   src/popupmnu.c

Patch 7.4.073
问题:       Setting undolevels for one buffer changes undo in another.
解决方案:   Make 'undolevels' a global-local option. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/buffer.c, src/option.c, src/option.h
	    src/structs.h, src/undo.c

Patch 7.4.074
问题:       When undo'ing all changes and creating a new change the undo
	    structure is incorrect. (Christian Brabandt)
解决方案:   When deleting the branch starting at the old header, delete the
	    whole branch, not just the first entry.
相关文件:   src/undo.c

Patch 7.4.075
问题:       Locally setting 'undolevels' is not tested.
解决方案:   Add a test. (Christian Brabandt)
相关文件:   src/testdir/test100.in, src/testdir/test100.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile, src/Makefile

Patch 7.4.076
问题:       "cgn" does not wrap around the end of the file. (Dimitar Dimitrov)
解决方案:   Restore 'wrapscan' earlier. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.4.077
问题:       DOS installer creates shortcut without a path, resulting in the
	    current directory to be C:\Windows\system32.
解决方案:   Use environment variables.
相关文件:   src/dosinst.c

Patch 7.4.078
问题:       MSVC 2013 is not supported.
解决方案:   Recognize and support MSVC 2013. (Ed Brown)
相关文件:   src/Make_mvc.mak

Patch 7.4.079
问题:       A script cannot detect whether 'hlsearch' highlighting is actually
	    displayed.
解决方案:   Add the "v:hlsearch" variable. (ZyX)
相关文件:   src/eval.c, src/ex_docmd.c,
	    src/option.c, src/screen.c, src/search.c, src/tag.c, src/vim.h,
	    src/testdir/test101.in, src/testdir/test101.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.080 (after 7.4.079)
问题:       Missing documentation for v:hlsearch.
解决方案:   Include the right file in the patch.
相关文件:   runtime/doc/eval.txt

Patch 7.4.081 (after 7.4.078)
问题:       Wrong logic when ANALYZE is "yes".
解决方案:   Use or instead of and. (KF Leong)
相关文件:   src/Make_mvc.mak

Patch 7.4.082
问题:       Using "gf" in a changed buffer suggests adding "!", which is not
	    possible. (Tim Chase)
解决方案:   Pass a flag to check_changed() whether adding ! make sense.
相关文件:   src/vim.h, src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/globals.h,
	    src/ex_cmds.c, src/ex_docmd.c

Patch 7.4.083
问题:       It's hard to avoid adding a used pattern to the search history.
解决方案:   Add the ":keeppatterns" modifier. (Christian Brabandt)
相关文件:   runtime/doc/cmdline.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/ex_getln.c, src/structs.h

Patch 7.4.084
问题:       Python: interrupt not being properly discarded. (Yggdroot Chen)
解决方案:   Discard interrupt in VimTryEnd. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.085
问题:       When inserting text in Visual block mode and moving the cursor the
	    wrong text gets repeated in other lines.
解决方案:   Use the '[ mark to find the start of the actually inserted text.
	    (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.086
问题:       Skipping over an expression when not evaluating it does not work
	    properly for dict members.
解决方案:   Skip over unrecognized expression. (ZyX)
相关文件:   src/eval.c, src/testdir/test34.in, src/testdir/test34.ok

Patch 7.4.087
问题:       Compiler warning on 64 bit Windows systems.
解决方案:   Fix type cast. (Mike Williams)
相关文件:   src/ops.c

Patch 7.4.088
问题:       When spell checking is enabled Asian characters are always marked
	    as error.
解决方案:   When 'spelllang' contains "cjk" do not mark Asian characters as
	    error. (Ken Takata)
相关文件:   runtime/doc/options.txt, runtime/doc/spell.txt, src/mbyte.c,
	    src/option.c, src/spell.c, src/structs.h

Patch 7.4.089
问题:       When editing a file in a directory mounted through sshfs Vim
	    doesn't set the security context on a renamed file.
解决方案:   Add mch_copy_sec() to vim_rename(). (Peter Backes)
相关文件:   src/fileio.c

Patch 7.4.090
问题:       Win32: When a directory name contains an exclamation mark,
	    completion doesn't complete the contents of the directory.
解决方案:   Escape the exclamation mark. (Jan Stocker)
相关文件:   src/ex_getln.c, src/testdir/test102.in, src/testdir/test102.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.091 (after 7.4.089)
问题:       Missing semicolon.
解决方案:   Add the semicolon.
相关文件:   src/fileio.c

Patch 7.4.092 (after 7.4.088)
问题:       Can't build small version.
解决方案:   Add #ifdef where the b_cjk flag is used. (Ken Takata)
相关文件:   src/spell.c

Patch 7.4.093
问题:       Configure can't use LuaJIT on ubuntu 12.04.
解决方案:   Adjust the configure regexp that locates the version number.
	    (Charles Strahan)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.094
问题:       Configure may not find that -lint is needed for gettext().
解决方案:   Check for gettext() with empty $LIBS.  (Thomas De Schampheleire)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.095 (after 7.4.093)
问题:       Regexp for LuaJIT version doesn't work on BSD.
解决方案:   Use "*" instead of "\+" and "\?". (Ozaki Kiichi)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.096
问题:       Can't change directory to an UNC path.
解决方案:   Use win32_getattrs() in mch_getperm(). (Christian Brabandt)
相关文件:   src/os_win32.c

Patch 7.4.097 (after 7.4.034)
问题:       Unexpected behavior change related to 'virtualedit'. (Ingo Karkat)
解决方案:   Update the valid cursor position. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4.098
问题:       When using ":'<,'>del" errors may be given for the visual line
	    numbers being out of range.
解决方案:   Reset Visual mode in ":del". (Lech Lorens)
相关文件:   src/ex_docmd.c, src/testdir/test103.in, src/testdir/test103.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.099
问题:       Append in blockwise Visual mode with "$" is wrong.
解决方案:   After "$" don't use the code that checks if the cursor was moved.
	    (Hirohito Higashi, Ken Takata)
相关文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.100
问题:       NFA regexp doesn't handle backreference correctly. (Ryuichi
	    Hayashida, Urtica Dioica)
解决方案:   Always add NFA_SKIP, also when it already exists at the start
	    position.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.101
问题:       Using \1 in pattern goes one line too far. (Bohr Shaw, John Little)
解决方案:   Only advance the match end for the matched characters in the last
	    line.
相关文件:   src/regexp.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.102
问题:       Crash when interrupting "z=".
解决方案:   Add safety check for word length. (Christian Brabandt, Dominique
	    Pelle)
相关文件:   src/spell.c

Patch 7.4.103
问题:       Dos installer uses an old way to escape spaces in the diff
	    command.
解决方案:   Adjust the quoting to the new default shellxquote. (Ben Fritz)
相关文件:   src/dosinst.c

Patch 7.4.104
问题:       ":help s/\_" reports an internal error. (John Beckett)
解决方案:   Check for NUL and invalid character classes.
相关文件:   src/regexp_nfa.c

Patch 7.4.105
问题:       Completing a tag pattern may give an error for invalid pattern.
解决方案:   Suppress the error, just return no matches.
相关文件:   src/tag.c

Patch 7.4.106
问题:       Can't build with Ruby using Cygwin.
解决方案:   Fix library name in makefile. (Steve Hall)
相关文件:   src/Make_cyg.mak

Patch 7.4.107
问题:       Python: When vim.eval() encounters a Vim error, a try/catch in the
	    Python code doesn't catch it. (Yggdroot Chen)
解决方案:   Throw exceptions on errors in vim.eval(). (ZyX)
相关文件:   src/ex_eval.c, src/if_py_both.h, src/proto/ex_eval.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.108
问题:       "zG" and "zW" leave temp files around on MS-Windows.
解决方案:   Delete the temp files when exiting. (Ken Takata)
相关文件:   src/memline.c, src/proto/spell.pro, src/spell.c

Patch 7.4.109
问题:       ColorScheme autocommand matches with the current buffer name.
解决方案:   Match with the colorscheme name. (Christian Brabandt)
相关文件:   runtime/doc/autocmd.txt, src/fileio.c, src/syntax.c

Patch 7.4.110
问题:       "gUgn" cannot be repeated. (Dimitar Dimitrov)
解决方案:   Don't put "gn" in a different order in the redo buffer.  Restore
	    'wrapscan' when the pattern isn't found. (Christian Wellenbrock)
相关文件:   src/normal.c, src/search.c, src/test53.in, src/test53.ok

Patch 7.4.111
问题:       Memory leak in Python OptionsAssItem. (Ken Takata)
解决方案:   Call Py_XDECREF() where needed. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.4.112
问题:       The defaults for 'directory' and 'backupdir' on MS-Windows do not
	    include a directory that exists.
解决方案:   Use $TEMP.
相关文件:   src/os_dos.h

Patch 7.4.113
问题:       MSVC static analysis gives warnings.
解决方案:   Avoid the warnings and avoid possible bugs. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.114
问题:       New GNU make outputs messages about changing directory in another
	    format.
解决方案:   Recognize the new format.
相关文件:   src/option.h

Patch 7.4.115
问题:       When using Zsh expanding ~abc doesn't work when the result
	    contains a space.
解决方案:   Off-by-one error in detecting the NUL. (Pavol Juhas)
相关文件:   src/os_unix.c

Patch 7.4.116
问题:       When a mapping starts with a space, the typed space does not show
	    up for 'showcmd'.
解决方案:   Show "<20>". (Brook Hong)
相关文件:   src/normal.c

Patch 7.4.117
问题:       Can't build with Cygwin/MingW and Perl 5.18.
解决方案:   Add a linker argument for the Perl library. (Cesar Romani)
	    Adjust CFLAGS and LIB. (Cesar Romani)
	    Move including inline.h further down. (Ken Takata)
相关文件:   src/Make_cyg.mak, src/Make_ming.mak, src/if_perl.xs

Patch 7.4.118
问题:       It's possible that redrawing the status lines causes
	    win_redr_custom() to be called recursively.
解决方案:   Protect against recursiveness. (Yasuhiro Matsumoto)
相关文件:   src/screen.c

Patch 7.4.119
问题:       Vim doesn't work well on OpenVMS.
解决方案:   Fix various problems. (Samuel Ferencik)
相关文件:   src/os_unix.c, src/os_unix.h, src/os_vms.c

Patch 7.4.120 (after 7.4.117)
问题:       Can't build with Perl 5.18 on Linux. (Lcd 47)
解决方案:   Add #ifdef. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.4.121
问题:       Completion doesn't work for ":py3d" and ":py3f". (Bohr Shaw)
解决方案:   Skip over letters after ":py3".
相关文件:   src/ex_docmd.c

Patch 7.4.122
问题:       Win32: When 'encoding' is set to "utf-8" and the active codepage
	    is cp932 then ":grep" and other commands don't work for multi-byte
	    characters.
解决方案:   (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.123
问题:       Win32: Getting user name does not use wide function.
解决方案:   Use GetUserNameW() if possible. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.124
问题:       Win32: Getting host name does not use wide function.
解决方案:   Use GetComputerNameW() if possible. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.125
问题:       Win32: Dealing with messages may not work for multi-byte chars.
解决方案:   Use pDispatchMessage(). (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.126
问题:       Compiler warnings for "const" and incompatible types.
解决方案:   Remove "const", add type cast. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.127
问题:       Perl 5.18 on Unix doesn't work.
解决方案:   Move workaround to after including vim.h. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.4.128
问题:       Perl 5.18 for MSVC doesn't work.
解决方案:   Add check in makefile and define __inline. (Ken Takata)
相关文件:   src/Make_mvc.mak, src/if_perl.xs

Patch 7.4.129
问题:       getline(-1) returns zero. (mvxxc)
解决方案:   Return an empty string.
相关文件:   src/eval.c

Patch 7.4.130
问题:       Relative line numbers mix up windows when using folds.
解决方案:   Use hasFoldingWin() instead of hasFolding(). (Lech Lorens)
相关文件:   src/misc2.c

Patch 7.4.131
问题:       Syncbind causes E315 errors in some situations. (Liang Li)
解决方案:   Set and restore curbuf in ex_syncbind(). (Christian Brabandt)
相关文件:   src/ex_docmd.c, src/testdir/test37.ok

Patch 7.4.132 (after 7.4.122)
问题:       Win32: flags and inherit_handles arguments mixed up.
解决方案:   Swap the argument. (cs86661)
相关文件:   src/os_win32.c

Patch 7.4.133
问题:       Clang warns for using NUL.
解决方案:   Change NUL to NULL. (Dominique Pelle)
相关文件:   src/eval.c, src/misc2.c

Patch 7.4.134
问题:       Spurious space in MingW Makefile.
解决方案:   Remove the space. (Michael Soyka)
相关文件:   src/Make_ming.mak

Patch 7.4.135
问题:       Missing dot in MingW test Makefile.
解决方案:   Add the dot. (Michael Soyka)
相关文件:   src/testdir/Make_ming.mak

Patch 7.4.136 (after 7.4.096)
问题:       MS-Windows: When saving a file with a UNC path the file becomes
	    read-only.
解决方案:   Don't mix up Win32 attributes and Unix attributes. (Ken Takata)
相关文件:   src/os_mswin.c, src/os_win32.c

Patch 7.4.137
问题:       Cannot use IME with Windows 8 console.
解决方案:   Change the user of ReadConsoleInput() and PeekConsoleInput().
	    (Nobuhiro Takasaki)
相关文件:   src/os_win32.c

Patch 7.4.138 (after 7.4.114)
问题:       Directory change messages are not recognized.
解决方案:   Fix using a character range literally. (Lech Lorens)
相关文件:   src/option.h

Patch 7.4.139
问题:       Crash when using :cd in autocommand. (François Ingelrest)
解决方案:   Set w_localdir to NULL after freeing it. (Dominique Pelle)
相关文件:   src/ex_docmd.c, src/window.c

Patch 7.4.140
问题:       Crash when wiping out buffer triggers autocommand that wipes out
	    only other buffer.
解决方案:   Do not delete the last buffer, make it empty. (Hirohito Higashi)
相关文件:   src/buffer.c

Patch 7.4.141
问题:       Problems when building with Borland: st_mode is signed short;
	    can't build with Python; temp files not ignored by Mercurial;
	    building with DEBUG doesn't define _DEBUG.
解决方案:   Fix the problems. (Ken Takata)
相关文件:   src/Make_bc5.mak, src/if_py_both.h, src/os_win32.c

Patch 7.4.142 (after 7.4.137)
问题:       On MS-Windows 8 IME input doesn't work correctly.
解决方案:   Work around the problem. (Nobuhiro Takasaki)
相关文件:   src/os_win32.c

Patch 7.4.143
问题:       TextChangedI is not triggered.
解决方案:   Reverse check for "ready". (lilydjwg)
相关文件:   src/edit.c

Patch 7.4.144
问题:       MingW also supports intptr_t for OPEN_OH_ARGTYPE.
解决方案:   Adjust #ifdef. (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.145
问题:       getregtype() does not return zero for unknown register.
解决方案:   Adjust documentation: return empty string for unknown register.
	    Check the register name to be valid. (Yukihiro Nakadaira)
相关文件:   runtime/doc/eval.txt, src/ops.c

Patch 7.4.146
问题:       When starting Vim with "-u NONE" v:oldfiles is NULL.
解决方案:   Set v:oldfiles to an empty list. (Yasuhiro Matsumoto)
相关文件:   src/main.c

Patch 7.4.147
问题:       Cursor moves to wrong position when using "gj" after "$" and
	    virtual editing is active.
解决方案:   Make "gj" behave differently when virtual editing is active.
	    (Hirohito Higashi)
相关文件:   src/normal.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.148
问题:       Cannot build with Cygwin and X11.
解决方案:   Include Xwindows.h instead of windows.h. (Lech Lorens)
相关文件:   src/mbyte.c

Patch 7.4.149
问题:       Get E685 error when assigning a function to an autoload variable.
	    (Yukihiro Nakadaira)
解决方案:   Instead of having a global no_autoload variable, pass an autoload
	    flag down to where it is used. (ZyX)
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok,
	    src/testdir/test60.in, src/testdir/test60.ok,
	    src/testdir/sautest/autoload/footest.vim

Patch 7.4.150
问题:       :keeppatterns is not respected for :s.
解决方案:   Check the keeppatterns flag. (Yasuhiro Matsumoto)
相关文件:   src/search.c, src/testdir/test14.in, src/testdir/test14.ok

Patch 7.4.151
问题:       Python: slices with steps are not supported.
解决方案:   Support slices in Python vim.List. (ZyX)
相关文件:   src/eval.c, src/if_py_both.h, src/if_python3.c, src/if_python.c,
	    src/proto/eval.pro, src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.152
问题:       Python: Cannot iterate over options.
解决方案:   Add options iterator. (ZyX)
相关文件:   src/if_py_both.h, src/option.c, src/proto/option.pro,
	    src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok, src/vim.h

Patch 7.4.153
问题:       Compiler warning for pointer type.
解决方案:   Add type cast.
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.4.154 (after 7.4.149)
问题:       Still a problem with auto-loading.
解决方案:   Pass no_autoload to deref_func_name(). (Yukihiro Nakadaira)
相关文件:   src/eval.c

Patch 7.4.155
问题:       ":keeppatterns /pat" does not keep search pattern offset.
解决方案:   Restore the offset after doing the search.
相关文件:   src/search.c, src/testdir/test14.in, src/testdir/test14.ok

Patch 7.4.156
问题:       Test file missing from distribution.
解决方案:   Add new directory to file list.
相关文件:   Filelist

Patch 7.4.157
问题:       Error number used twice. (Yukihiro Nakadaira)
解决方案:   Change the one not referred in the docs.
相关文件:   src/undo.c

Patch 7.4.158 (after 7.4.045)
问题:       Pattern containing \zs is not handled correctly by substitute().
解决方案:   Change how an empty match is skipped. (Yukihiro Nakadaira)
相关文件:   src/eval.c, src/testdir/test80.in, src/testdir/test80.ok

Patch 7.4.159
问题:       Completion hangs when scanning the current buffer after doing
	    keywords. (Christian Brabandt)
解决方案:   Set the first match position when starting to scan the current
	    buffer.
相关文件:   src/edit.c

Patch 7.4.160
问题:       Win32: Crash when executing external command.
解决方案:   Only close the handle when it was created. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.161
问题:       Crash in Python exception handling.
解决方案:   Only use exception variables if did_throw is set. (ZyX)
相关文件:   srcc/if_py_both.h

Patch 7.4.162
问题:       Running tests in shadow dir doesn't work.
解决方案:   Add testdir/sautest to the shadow target. (James McCoy)
相关文件:   src/Makefile

Patch 7.4.163 (after 7.4.142)
问题:       MS-Windows input doesn't work properly on Windows 7 and earlier.
解决方案:   Add a check for Windows 8. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.164 (after 7.4.163)
问题:       Problem with event handling on Windows 8.
解决方案:   Ignore duplicate WINDOW_BUFFER_SIZE_EVENTs. (Nobuhiro Takasaki)
相关文件:   src/os_win32.c

Patch 7.4.165
问题:       By default, after closing a buffer changes can't be undone.
解决方案:   In the example vimrc file set 'undofile'.
相关文件:   runtime/vimrc_example.vim

Patch 7.4.166
问题:       Auto-loading a function for code that won't be executed.
解决方案:   Do not auto-load when evaluation is off. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.167 (after 7.4.149)
问题:       Fixes are not tested.
解决方案:   Add a test for not autoloading on assignment. (Yukihiro Nakadaira)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/sautest/autoload/Test104.vim, src/testdir/test104.in,
	    src/testdir/test104.ok

Patch 7.4.168
问题:       Can't compile with Ruby 2.1.0.
解决方案:   Add support for new GC. (Kohei Suzuki)
相关文件:   src/if_ruby.c

Patch 7.4.169
问题:       ":sleep" puts cursor in the wrong column. (Liang Li)
解决方案:   Add the window offset. (Christian Brabandt)
相关文件:   src/ex_docmd.c

Patch 7.4.170
问题:       Some help tags don't work with ":help". (Tim Chase)
解决方案:   Add exceptions.
相关文件:   src/ex_cmds.c

Patch 7.4.171
问题:       Redo does not set v:count and v:count1.
解决方案:   Use a separate buffer for redo, so that we can set the counts when
	    performing redo.
相关文件:   src/getchar.c, src/globals.h, src/normal.c, src/proto/getchar.pro,
	    src/structs.h

Patch 7.4.172
问题:       The blowfish code mentions output feedback, but the code is
	    actually doing cipher feedback.
解决方案:   Adjust names and comments.
相关文件:   src/blowfish.c, src/fileio.c, src/proto/blowfish.pro,
	    src/memline.c

Patch 7.4.173
问题:       When using scrollbind the cursor can end up below the last line.
	    (mvxxc)
解决方案:   Reset w_botfill when scrolling up. (Christian Brabandt)
相关文件:   src/move.c

Patch 7.4.174
问题:       Compiler warnings for Python interface. (Tony Mechelynck)
解决方案:   Add type casts, initialize variable.
相关文件:   src/if_py_both.h

Patch 7.4.175
问题:       When a wide library function fails, falling back to the non-wide
	    function may do the wrong thing.
解决方案:   Check the platform, when the wide function is supported don't fall
	    back to the non-wide function. (Ken Takata)
相关文件:   src/os_mswin.c, src/os_win32.c

Patch 7.4.176
问题:       Dictionary.update() throws an error when used without arguments.
	    Python programmers don't expect that.
解决方案:   Make Dictionary.update() without arguments do nothing. (ZyX)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.177
问题:       Compiler warning for unused variable. (Tony Mechelynck)
解决方案:   Add #ifdef.
相关文件:   src/move.c

Patch 7.4.178
问题:       The J command does not update '[ and '] marks. (William Gardner)
解决方案:   Set the marks. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4.179
问题:       Warning for type-punned pointer. (Tony Mechelynck)
解决方案:   Use intermediate variable.
相关文件:   src/if_py_both.h

Patch 7.4.180 (after 7.4.174)
问题:       Older Python versions don't support %ld.
解决方案:   Use %d instead. (ZyX)
相关文件:   src/if_py_both.h

Patch 7.4.181
问题:       When using 'pastetoggle' the status lines are not updated. (Samuel
	    Ferencik, Jan Christoph Ebersbach)
解决方案:   Update the status lines. (Nobuhiro Takasaki)
相关文件:   src/getchar.c

Patch 7.4.182
问题:       Building with mzscheme and racket does not work. (David Chimay)
解决方案:   Adjust autoconf. (Sergey Khorev)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.183
问题:       MSVC Visual Studio update not supported.
解决方案:   Add version number. (Mike Williams)
相关文件:   src/Make_mvc.mak

Patch 7.4.184
问题:       match() does not work properly with a {count} argument.
解决方案:   Compute the length once and update it.  Quit the loop when at the
	    end. (Hirohito Higashi)
相关文件:   src/eval.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.4.185
问题:       Clang gives warnings.
解决方案:   Adjust how bigness is set. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.4.186 (after 7.4.085)
问题:       Insert in Visual mode sometimes gives incorrect results.
	    (Dominique Pelle)
解决方案:   Remember the original insert start position. (Christian Brabandt,
	    Dominique Pelle)
相关文件:   src/edit.c, src/globals.h, src/ops.c, src/structs.h

Patch 7.4.187
问题:       Delete that crosses line break splits multi-byte character.
解决方案:   Advance a character instead of a byte. (Cade Foster)
相关文件:   src/normal.c, src/testdir/test69.in, src/testdir/test69.ok

Patch 7.4.188
问题:       SIZEOF_LONG clashes with similar defines in header files.
解决方案:   Rename to a name starting with VIM_.  Also for SIZEOF_INT.
相关文件:   src/if_ruby.c, src/vim.h, src/configure.in, src/auto/configure,
	    src/config.h.in, src/fileio.c, src/if_python.c, src/message.c,
	    src/spell.c, src/feature.h, src/os_os2_cfg.h, src/os_vms_conf.h,
	    src/os_win16.h, src/structs.h

Patch 7.4.189
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/eval.c

Patch 7.4.190
问题:       Compiler warning for using %lld for off_t.
解决方案:   Add type cast.
相关文件:   src/fileio.c

Patch 7.4.191
问题:       Escaping a file name for shell commands can't be done without a
	    function.
解决方案:   Add the :S file name modifier.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test105.in, src/testdir/test105.ok,
	    runtime/doc/cmdline.txt, runtime/doc/eval.txt,
	    runtime/doc/map.txt, runtime/doc/options.txt,
	    runtime/doc/quickfix.txt, runtime/doc/usr_30.txt,
	    runtime/doc/usr_40.txt, runtime/doc/usr_42.txt,
	    runtime/doc/vi_diff.txt, src/eval.c, src/misc2.c, src/normal.c,
	    src/proto/misc2.pro

Patch 7.4.192
问题:       Memory leak when giving E853.
解决方案:   Free the argument. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.4.193
问题:       Typos in messages.
解决方案:   "then" -> "than". (Dominique Pelle)
相关文件:   src/if_py_both.h, src/spell.c

Patch 7.4.194
问题:       Can't build for Android.
解决方案:   Add #if condition. (Fredrik Fornwall)
相关文件:   src/mbyte.c

Patch 7.4.195 (after 7.4.193)
问题:       Python tests fail.
解决方案:   Change "then" to "than" in more places. (Dominique Pelle, Taro
	    Muraoka)
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
	    src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.196
问题:       Tests fail on Solaris 9 and 10.
解决方案:   Use "test -f" instead of "test -e".  (Laurent Blume)
相关文件:   src/testdir/Makefile

Patch 7.4.197
问题:       Various problems on VMS.
解决方案:   Fix several VMS problems. (Zoltan Arpadffy)
相关文件:   runtime/doc/os_vms.txt, src/Make_vms.mms, src/fileio.c,
	    src/os_unix.c, src/os_unix.h, src/os_vms.c, src/os_vms_conf.h,
	    src/proto/os_vms.pro, src/testdir/Make_vms.mms,
	    src/testdir/test72.in, src/testdir/test77a.com,
	    src/testdir/test77a.in, src/testdir/test77a.ok src/undo.c

Patch 7.4.198
问题:       Can't build Vim with Perl when -Dusethreads is not specified for
	    building Perl, and building Vim with --enable-perlinterp=dynamic.
解决方案:   Adjust #ifdefs. (Yasuhiro Matsumoto)
相关文件:   src/if_perl.xs

Patch 7.4.199
问题:       (issue 197) ]P doesn't paste over Visual selection.
解决方案:   Handle Visual mode specifically. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.4.200
问题:       Too many #ifdefs in the code.
解决方案:   Enable FEAT_VISUAL always, await any complaints
相关文件:   src/feature.h

Patch 7.4.201
问题:       'lispwords' is a global option.
解决方案:   Make 'lispwords' global-local. (Sung Pae)
相关文件:   runtime/doc/options.txt, runtime/optwin.vim, src/buffer.c,
	    src/misc1.c, src/option.c, src/option.h, src/structs.h,
	    src/testdir/test100.in, src/testdir/test100.ok

Patch 7.4.202
问题:       MS-Windows: non-ASCII font names don't work.
解决方案:   Convert between the current code page and 'encoding'. (Ken Takata)
相关文件:   src/gui_w48.c, src/os_mswin.c, src/proto/winclip.pro,
	    src/winclip.c

Patch 7.4.203
问题:       Parsing 'errorformat' is not correct.
解决方案:   Reset "multiignore" at the start of a multi-line message. (Lcd)
相关文件:   src/quickfix.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test106.in,
	    src/testdir/test106.ok

Patch 7.4.204
问题:       A mapping where the second byte is 0x80 doesn't work.
解决方案:   Unescape before checking for incomplete multi-byte char. (Nobuhiro
	    Takasaki)
相关文件:   src/getchar.c, src/testdir/test75.in, src/testdir/test75.ok

Patch 7.4.205
问题:       ":mksession" writes command to move to second argument while it
	    does not exist.  When it does exist the order might be wrong.
解决方案:   Use ":argadd" for each argument instead of using ":args" with a
	    list of names. (Nobuhiro Takasaki)
相关文件:   src/ex_docmd.c

Patch 7.4.206
问题:       Compiler warnings on 64 bit Windows.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/gui_w48.c, src/os_mswin.c

Patch 7.4.207
问题:       The cursor report sequence is sometimes not recognized and results
	    in entering replace mode.
解决方案:   Also check for the cursor report when not asked for.
相关文件:   src/term.c

Patch 7.4.208
问题:       Mercurial picks up some files that are not distributed.
解决方案:   Add patterns to the ignore list. (Cade Forester)
相关文件:   .hgignore

Patch 7.4.209
问题:       When repeating a filter command "%" and "#" are expanded.
解决方案:   Escape the command when storing for redo. (Christian Brabandt)
相关文件:   src/ex_cmds.c

Patch 7.4.210
问题:       Visual block mode plus virtual edit doesn't work well with tabs.
	    (Liang Li)
解决方案:   Take coladd into account. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.211
问题:       ":lu" is an abbreviation for ":lua", but it should be ":lunmap".
	    (ZyX)
解决方案:   Move "lunmap" to above "lua".
相关文件:   src/ex_cmds.h

Patch 7.4.212 (after 7.4.200)
问题:       Now that the +visual feature is always enabled the #ifdefs for it
	    are not useful.
解决方案:   Remove the checks for FEAT_VISUAL.
相关文件:   src/buffer.c, src/charset.c, src/edit.c, src/eval.c,
	    src/ex_cmds.c, src/ex_docmd.c, src/fold.c, src/getchar.c,
	    src/gui.c, src/gui_mac.c, src/gui_w48.c, src/main.c, src/mark.c,
	    src/menu.c, src/misc2.c, src/move.c, src/netbeans.c, src/normal.c,
	    src/ops.c, src/option.c, src/os_msdos.c, src/os_qnx.c,
	    src/quickfix.c, src/regexp.c, src/regexp_nfa.c, src/screen.c,
	    src/search.c, src/spell.c, src/syntax.c, src/term.c, src/ui.c,
	    src/undo.c, src/version.c, src/window.c, src/feature.h,
	    src/globals.h, src/option.h, src/os_win32.h, src/structs.h

Patch 7.4.213
问题:       It's not possible to open a new buffer without creating a swap
	    file.
解决方案:   Add the ":noswapfile" modifier. (Christian Brabandt)
相关文件:   runtime/doc/recover.txt, src/ex_cmds.h, src/ex_docmd.c,
	    src/memline.c, src/structs.h

Patch 7.4.214
问题:       Compilation problems on HP_nonStop (Tandem).
解决方案:   Add #defines. (Joachim Schmitz)
相关文件:   src/vim.h

Patch 7.4.215
问题:       Inconsistency: ":sp foo" does not reload "foo", unless "foo" is
	    the current buffer. (Liang Li)
解决方案:   Do not reload the current buffer on a split command.
相关文件:   runtime/doc/windows.txt, src/ex_docmd.c

Patch 7.4.216
问题:       Compiler warnings. (Tony Mechelynck)
解决方案:   Initialize variables, add #ifdef.
相关文件:   src/term.c, src/os_unix.h

Patch 7.4.217
问题:       When src/auto/configure was updated, "make clean" would run
	    configure pointlessly.
解决方案:   Do not run configure for "make clean" and "make distclean" when
	    the make program supports $MAKECMDGOALS. (Ken Takata)
相关文件:   src/Makefile

Patch 7.4.218
问题:       It's not easy to remove duplicates from a list.
解决方案:   Add the uniq() function. (Lcd)
相关文件:   runtime/doc/change.txt, runtime/doc/eval.txt,
	    runtime/doc/usr_41.txt, runtime/doc/version7.txt, src/eval.c,
	    src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.219
问题:       When 'relativenumber' or 'cursorline' are set the window is
	    redrawn much to often. (Patrick Hemmer, Dominique Pelle)
解决方案:   Check the VALID_CROW flag instead of VALID_WROW.
相关文件:   src/move.c

Patch 7.4.220
问题:       Test 105 does not work in a shadow dir. (James McCoy)
解决方案:   Omit "src/" from the checked path.
相关文件:   src/testdir/test105.in, src/testdir/test105.ok

Patch 7.4.221
问题:       Quickfix doesn't resize on ":copen 20". (issue 199)
解决方案:   Resize the window when requested. (Christian Brabandt)
相关文件:   src/quickfix.c

Patch 7.4.222
问题:       The Ruby directory is constructed from parts.
解决方案:   Use 'rubyarchhdrdir' if it exists. (James McCoy)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.223
问题:       Still using an older autoconf version.
解决方案:   Switch to autoconf 2.69.
相关文件:   src/Makefile, src/configure.in, src/auto/configure

Patch 7.4.224
问题:       /usr/bin/grep on Solaris does not support -F.
解决方案:   Add configure check to find a good grep. (Danek Duvall)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.225
问题:       Dynamic Ruby doesn't work on Solaris.
解决方案:   Always use the stubs. (Danek Duvall, Yukihiro Nakadaira)
相关文件:   src/if_ruby.c

Patch 7.4.226 (after 7.4.219)
问题:       Cursorline highlighting not redrawn when scrolling. (John
	    Marriott)
解决方案:   Check for required redraw in two places.
相关文件:   src/move.c

Patch 7.4.227 (after 7.4.225)
问题:       Can't build with Ruby 1.8.
解决方案:   Do include a check for the Ruby version. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.4.228
问题:       Compiler warnings when building with Python 3.2.
解决方案:   Make type cast depend on Python version. (Ken Takata)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.4.229
问题:       Using ":let" for listing variables and the second one is a curly
	    braces expression may fail.
解决方案:   Check for an "=" in a better way. (ZyX)
相关文件:   src/eval.c, src/testdir/test104.in, src/testdir/test104.ok

Patch 7.4.230
问题:       Error when using ":options".
解决方案:   Fix the entry for 'lispwords'. (Kenichi Ito)
相关文件:   runtime/optwin.vim

Patch 7.4.231
问题:       An error in ":options" is not caught by the tests.
解决方案:   Add a test for ":options".  Set $VIMRUNTIME for the tests so that
	    it uses the current runtime files instead of the installed ones.
相关文件:   src/Makefile, src/testdir/Makefile, src/testdir/test_options.in,
	    src/testdir/test_options.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.4.232
问题:       ":%s/\n//" uses a lot of memory. (Aidan Marlin)
解决方案:   Turn this into a join command. (Christian Brabandt)
相关文件:   src/ex_cmds.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 7.4.233
问题:       Escaping special characters for using "%" with a shell command is
	    inconsistent, parentheses are escaped but spaces are not.
解决方案:   Only escape "!". (Gary Johnson)
相关文件:   src/ex_docmd.c

Patch 7.4.234
问题:       Can't get the command that was used to start Vim.
解决方案:   Add v:progpath. (Viktor Kojouharov)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/main.c, src/vim.h

Patch 7.4.235
问题:       It is not easy to get the full path of a command.
解决方案:   Add the exepath() function.
相关文件:   src/eval.c, src/misc1.c, src/os_amiga.c, src/os_msdos.c,
	    src/os_unix.c, src/os_vms.c, src/os_win32.c,
	    src/proto/os_amiga.pro, src/proto/os_msdos.pro,
	    src/proto/os_unix.pro, src/proto/os_win32.pro,
	    runtime/doc/eval.txt

Patch 7.4.236
问题:       It's not that easy to check the Vim patch version.
解决方案:   Make has("patch-7.4.123") work. (partly by Marc Weber)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/testdir/test60.in,
	    src/testdir/test60.ok

Patch 7.4.237 (after 7.4.236)
问题:       When some patches were not included has("patch-7.4.123") may return
	    true falsely.
解决方案:   Check for the specific patch number.
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.4.238
问题:       Vim does not support the smack library.
解决方案:   Add smack support (Jose Bollo)
相关文件:   src/config.h.in, src/configure.in, src/fileio.c, src/memfile.c,
	    src/os_unix.c, src/undo.c, src/auto/configure

Patch 7.4.239
问题:       ":e +" does not position cursor at end of the file.
解决方案:   Check for "+" being the last character (ZyX)
相关文件:   src/ex_docmd.c

Patch 7.4.240
问题:       ":tjump" shows "\n" as "\\n".
解决方案:   Skip over "\" that escapes a backslash. (Gary Johnson)
相关文件:   src/tag.c

Patch 7.4.241
问题:       The string returned by submatch() does not distinguish between a
	    NL from a line break and a NL that stands for a NUL character.
解决方案:   Add a second argument to return a list. (ZyX)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/proto/regexp.pro,
	    src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok,
	    src/testdir/test80.in, src/testdir/test80.ok

Patch 7.4.242
问题:       getreg() does not distinguish between a NL used for a line break
	    and a NL used for a NUL character.
解决方案:   Add another argument to return a list. (ZyX)
相关文件:   runtime/doc/eval.txt, src/eval.c src/ops.c, src/proto/ops.pro,
	    src/vim.h, src/Makefile, src/testdir/test_eval.in,
	    src/testdir/test_eval.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms

Patch 7.4.243
问题:       Cannot use setreg() to add text that includes a NUL.
解决方案:   Make setreg() accept a list.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ops.c, src/proto/ops.pro,
	    src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.244 (after 7.4.238)
问题:       The smack feature causes stray error messages.
解决方案:   Remove the error messages.
相关文件:   src/os_unix.c

Patch 7.4.245
问题:       Crash for "vim -u NONE -N  -c '&&'".
解决方案:   Check for the pattern to be NULL. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.4.246
问题:       Configure message for detecting smack are out of sequence.
解决方案:   Put the messages in the right place. (Kazunobu Kuriyama)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.247
问题:       When passing input to system() there is no way to keep NUL and
	    NL characters separate.
解决方案:   Optionally use a list for the system() input. (ZyX)
相关文件:   runtime/doc/eval.txt, src/eval.c

Patch 7.4.248
问题:       Cannot distinguish between NL and NUL in output of system().
解决方案:   Add systemlist(). (ZyX)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_cmds2.c, src/misc1.c,
	    src/proto/misc1.pro

Patch 7.4.249
问题:       Using setreg() with a list of numbers does not work.
解决方案:   Use a separate buffer for numbers. (ZyX)
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.250
问题:       Some test files missing from distribution.
解决方案:   Add pattern for newly added tests.
相关文件:   Filelist

Patch 7.4.251
问题:       Crash when BufAdd autocommand wipes out the buffer.
解决方案:   Check for buffer to still be valid. Postpone freeing the buffer
	    structure. (Hirohito Higashi)
相关文件:   src/buffer.c, src/ex_cmds.c, src/fileio.c, src/globals.h

Patch 7.4.252
问题:       Critical error in GTK, removing timer twice.
解决方案:   Clear the timer after removing it. (James McCoy)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.253
问题:       Crash when using cpp syntax file with pattern using external
	    match. (Havard Garnes)
解决方案:   Discard match when end column is before start column.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.4.254
问题:       Smack support detection is incomplete.
解决方案:   Check for attr/xattr.h and specific macro.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.255
问题:       Configure check for smack doesn't work with all shells. (David
	    Larson)
解决方案:   Remove spaces in set command.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.256 (after 7.4.248)
问题:       Using systemlist() may cause a crash and does not handle NUL
	    characters properly.
解决方案:   Increase the reference count, allocate memory by length. (Yasuhiro
	    Matsumoto)
相关文件:   src/eval.c

Patch 7.4.257
问题:       Compiler warning, possibly for mismatch in parameter name.
解决方案:   Rename the parameter in the declaration.
相关文件:   src/ops.c

Patch 7.4.258
问题:       Configure fails if $CC contains options.
解决方案:   Remove quotes around $CC. (Paul Barker)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.259
问题:       Warning for misplaced "const".
解决方案:   Move the "const". (Yukihiro Nakadaira)
相关文件:   src/os_unix.c

Patch 7.4.260
问题:       It is possible to define a function with a colon in the name.  It
	    is possible to define a function with a lower case character if a
	    "#" appears after the name.
解决方案:   Disallow using a colon other than with "s:".  Ignore "#" after the
	    name.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/testdir/test_eval.in,
	    src/testdir/test_eval.ok

Patch 7.4.261
问题:       When updating the window involves a regexp pattern, an interactive
	    substitute to replace a "\n" with a line break fails. (Ingo
	    Karkat)
解决方案:   Set reg_line_lbr in vim_regsub() and vim_regsub_multi().
相关文件:   src/regexp.c, src/testdir/test79.in, src/testdir/test79.ok

Patch 7.4.262
问题:       Duplicate code in regexec().
解决方案:   Add line_lbr flag to regexec_nl().
相关文件:   src/regexp.c, src/regexp_nfa.c, src/regexp.h

Patch 7.4.263
问题:       GCC 4.8 compiler warning for hiding a declaration (François Gannaz)
解决方案:   Remove the second declaration.
相关文件:   src/eval.c

Patch 7.4.264 (after 7.4.260)
问题:       Can't define a function starting with "g:".  Can't assign a
	    funcref to a buffer-local variable.
解决方案:   Skip "g:" at the start of a function name.  Don't check for colons
	    when assigning to a variable.
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.265 (after 7.4.260)
问题:       Can't call a global function with "g:" in an expression.
解决方案:   Skip the "g:" when looking up the function.
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.266
问题:       Test 62 fails.
解决方案:   Set the language to C. (Christian Brabandt)
相关文件:   src/testdir/test62.in

Patch 7.4.267 (after 7.4.178)
问题:       The '[ mark is in the wrong position after "gq". (Ingo Karkat)
解决方案:   Add the setmark argument to do_join(). (Christian Brabandt)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_autoformat_join.in,
	    src/testdir/test_autoformat_join.ok, src/Makefile, src/edit.c,
	    src/ex_cmds.c, src/ex_docmd.c, src/normal.c, src/ops.c,
	    src/proto/ops.pro

Patch 7.4.268
问题:       Using exists() on a funcref for a script-local function does not
	    work.
解决方案:   Translate <SNR> to the special byte sequence.  Add a test.
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok,
	    src/testdir/test_eval_func.vim, Filelist

Patch 7.4.269
问题:       CTRL-U in Insert mode does not work after using a cursor key.
	    (Pine Wu)
解决方案:   Use the original insert start position. (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test29.in, src/testdir/test29.ok

Patch 7.4.270
问题:       Comparing pointers instead of the string they point to.
解决方案:   Use strcmp(). (Ken Takata)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.271
问题:       Compiler warning on 64 bit windows.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ops.c

Patch 7.4.272
问题:       Using just "$" does not cause an error message.
解决方案:   Check for empty environment variable name. (Christian Brabandt)
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.273
问题:       "make autoconf" and "make reconfig" may first run configure and
	    then remove the output.
解决方案:   Add these targets to the exceptions. (Ken Takata)
相关文件:   src/Makefile

Patch 7.4.274
问题:       When doing ":update" just before running an external command that
	    changes the file, the timestamp may be unchanged and the file
	    is not reloaded.
解决方案:   Also check the file size.
相关文件:   src/fileio.c

Patch 7.4.275
问题:       When changing the type of a sign that hasn't been placed there is
	    no error message.
解决方案:   Add an error message. (Christian Brabandt)
相关文件:   src/ex_cmds.c

Patch 7.4.276
问题:       The fish shell is not supported.
解决方案:   Use begin/end instead of () for fish. (Andy Russell)
相关文件:   src/ex_cmds.c, src/misc1.c, src/option.c, src/proto/misc1.pro

Patch 7.4.277
问题:       Using ":sign unplace *" may leave the cursor in the wrong position
	    (Christian Brabandt)
解决方案:   Update the cursor position when removing all signs.
相关文件:   src/buffer.c

Patch 7.4.278
问题:       list_remove() conflicts with function defined in Sun header file.
解决方案:   Rename the function. (Richard Palo)
相关文件:   src/eval.c, src/if_lua.c, src/if_py_both.h, src/proto/eval.pro

Patch 7.4.279
问题:       globpath() returns a string, making it difficult to get a list of
	    matches. (Greg Novack)
解决方案:   Add an optional argument like with glob(). (Adnan Zafar)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_getln.c, src/misc1.c,
	    src/misc2.c, src/proto/ex_getln.pro, src/proto/misc2.pro,
	    src/testdir/test97.in, src/testdir/test97.ok

Patch 7.4.280
问题:       When using a session file the relative position of the cursor is
	    not restored if there is another tab. (Nobuhiro Takasaki)
解决方案:   Update w_wrow before calculating the fraction.
相关文件:   src/window.c

Patch 7.4.281
问题:       When a session file has more than one tabpage and 'showtabline' is
	    one the positions may be slightly off.
解决方案:   Set 'showtabline' to two while positioning windows.
相关文件:   src/ex_docmd.c

Patch 7.4.282 (after 7.4.279)
问题:       Test 97 fails on Mac.
解决方案:   Do not ignore case in file names. (Jun Takimoto)
相关文件:   src/testdir/test97.in

Patch 7.4.283 (after 7.4.276)
问题:       Compiler warning about unused variable. (Charles Cooper)
解决方案:   Move the variable inside the #if block.
相关文件:   src/ex_cmds.c

Patch 7.4.284
问题:       Setting 'langmap' in the modeline can cause trouble.  E.g. mapping
	    ":" breaks many commands. (Jens-Wolfhard Schicke-Uffmann)
解决方案:   Disallow setting 'langmap' from the modeline.
相关文件:   src/option.c

Patch 7.4.285
问题:       When 'relativenumber' is set and deleting lines or undoing that,
	    line numbers are not always updated. (Robert Arkwright)
解决方案:   (Christian Brabandt)
相关文件:   src/misc1.c

Patch 7.4.286
问题:       Error messages are inconsistent. (ZyX)
解决方案:   Change "Lists" to "list".
相关文件:   src/eval.c

Patch 7.4.287
问题:       Patches for .hgignore don't work, since the file is not in the
	    distribution.
解决方案:   Add .hgignore to the distribution.  Will be effective with the
	    next version.
相关文件:   Filelist

Patch 7.4.288
问题:       When 'spellfile' is set the screen is not redrawn.
解决方案:   Redraw when updating the spelling info. (Christian Brabandt)
相关文件:   src/spell.c

Patch 7.4.289
问题:       Pattern with repeated backreference does not match with new regexp
	    engine. (Urtica Dioica)
解决方案:   Also check the end of a submatch when deciding to put a state in
	    the state list.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok, src/regexp_nfa.c

Patch 7.4.290
问题:       A non-greedy match followed by a branch is too greedy. (Ingo
	    Karkat)
解决方案:   Add NFA_MATCH when it is already in the state list if the position
	    differs.
相关文件:   src/testdir/test64.in, src/testdir/test64.ok, src/regexp_nfa.c

Patch 7.4.291
问题:       Compiler warning for int to pointer of different size when DEBUG
	    is defined.
解决方案:   use smsg() instead of EMSG3().
相关文件:   src/regexp.c

Patch 7.4.292
问题:       Searching for "a" does not match accented "a" with new regexp
	    engine, does match with old engine. (David Bürgin)
	    "ca" does not match "ca" with accented "a" with either engine.
解决方案:   Change the old engine, check for following composing character
	    also for single-byte patterns.
相关文件:   src/regexp.c, src/testdir/test95.in, src/testdir/test95.ok

Patch 7.4.293
问题:       It is not possible to ignore composing characters at a specific
	    point in a pattern.
解决方案:   Add the %C item.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test95.in,
	    src/testdir/test95.ok, runtime/doc/pattern.txt

Patch 7.4.294 (7.4.293)
问题:       Test files missing from patch.
解决方案:   Patch the test files.
相关文件:   src/testdir/test95.in, src/testdir/test95.ok

Patch 7.4.295
问题:       Various typos, bad white space and unclear comments.
解决方案:   Fix typos.  Improve white space. Update comments.
相关文件:   src/testdir/test49.in, src/macros.h, src/screen.c, src/structs.h,
	    src/gui_gtk_x11.c, src/os_unix.c

Patch 7.4.296
问题:       Can't run tests on Solaris.
解决方案:   Change the way VIMRUNTIME is set. (Laurent Blume)
相关文件:   src/testdir/Makefile

Patch 7.4.297
问题:       Memory leak from result of get_isolated_shell_name().
解决方案:   Free the memory. (Dominique Pelle)
相关文件:   src/ex_cmds.c, src/misc1.c

Patch 7.4.298
问题:       Can't have a funcref start with "t:".
解决方案:   Add "t" to the list of accepted names. (Yukihiro Nakadaira)
相关文件:   src/eval.c

Patch 7.4.299
问题:       When running configure twice DYNAMIC_PYTHON_DLL may become empty.
解决方案:   Use AC_CACHE_VAL. (Ken Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.300
问题:       The way config.cache is removed doesn't always work.
解决方案:   Always remove config.cache. (Ken Takata)
相关文件:   src/Makefile

Patch 7.4.301 (after 7.4.280)
问题:       Still a scrolling problem when loading a session file.
解决方案:   Fix off-by-one mistake. (Nobuhiro Takasaki)
相关文件:   src/window.c

Patch 7.4.302
问题:       Signs placed with 'foldcolumn' set don't show up after filler
	    lines.
解决方案:   Take filler lines into account. (Olaf Dabrunz)
相关文件:   src/screen.c

Patch 7.4.303
问题:       When using double-width characters the text displayed on the
	    command line is sometimes truncated.
解决方案:   Reset the string length. (Nobuhiro Takasaki)
相关文件:   src/screen.c

Patch 7.4.304
问题:       Cannot always use Python with Vim.
解决方案:   Add the manifest to the executable. (Jacques Germishuys)
相关文件:   src/Make_mvc.mak

Patch 7.4.305
问题:       Making 'ttymouse' empty after the xterm version was requested
	    causes problems. (Elijah Griffin)
解决方案:   Do not check for DEC mouse sequences when the xterm version was
	    requested.  Also don't request the xterm version when DEC mouse
	    was enabled.
相关文件:   src/term.c, src/os_unix.c, src/proto/term.pro, src/globals.h

Patch 7.4.306
问题:       getchar(0) does not return Esc.
解决方案:   Do not wait for an Esc sequence to be complete.  (Yasuhiro
	    Matsumoto)
相关文件:   src/eval.c, src/getchar.c

Patch 7.4.307 (after 7.4.305)
问题:       Can't build without the +termresponse feature.
解决方案:   Add proper #ifdefs.
相关文件:   src/os_unix.c, src/term.c

Patch 7.4.308
问题:       When using ":diffsplit" on an empty file the cursor is displayed
	    on the command line.
解决方案:   Limit the value of w_topfill.
相关文件:   src/diff.c

Patch 7.4.309
问题:       When increasing the size of the lower window, the upper window
	    jumps back to the top. (Ron Aaron)
解决方案:   Change setting the topline. (Nobuhiro Takasaki)
相关文件:   src/window.c

Patch 7.4.310
问题:       getpos()/setpos() don't include curswant.
解决方案:   Add a fifth number when getting/setting the cursor.
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok,
	    runtime/doc/eval.txt

Patch 7.4.311
问题:       Can't use winrestview to only restore part of the view.
解决方案:   Handle missing items in the dict. (Christian Brabandt)
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.4.312
问题:       Cannot figure out what argument list is being used for a window.
解决方案:   Add the arglistid() function. (Marcin Szamotulski)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/eval.c,
	    src/ex_docmd.c, src/globals.h, src/structs.h, src/main.c

Patch 7.4.313 (after 7.4.310)
问题:       Changing the return value of getpos() causes an error. (Jie Zhu)
解决方案:   Revert getpos() and add getcurpos().
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok,
	    runtime/doc/eval.txt

Patch 7.4.314
问题:       Completion messages can get in the way of a plugin.
解决方案:   Add 'c' flag to 'shortmess' option. (Shougo Matsu)
相关文件:   runtime/doc/options.txt, src/edit.c, src/option.h, src/screen.c

Patch 7.4.315 (after 7.4.309)
问题:       Fixes for computation of topline not tested.
解决方案:   Add test. (Hirohito Higashi)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test107.in, src/testdir/test107.ok

Patch 7.4.316
问题:       Warning from 64-bit compiler.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ex_getln.c

Patch 7.4.317
问题:       Crash when starting gvim.  Issue 230.
解决方案:   Check for a pointer to be NULL. (Christian Brabandt)
相关文件:   src/window.c

Patch 7.4.318
问题:       Check for whether a highlight group has settings ignores fg and bg
	    color settings.
解决方案:   Also check cterm and GUI color settings. (Christian Brabandt)
相关文件:   src/syntax.c

Patch 7.4.319
问题:       Crash when putting zero bytes on the clipboard.
解决方案:   Do not support the utf8_atom target when not using a Unicode
	    encoding. (Naofumi Honda)
相关文件:   src/ui.c

Patch 7.4.320
问题:       Possible crash when an BufLeave autocommand deletes the buffer.
解决方案:   Check for the window pointer being valid.  Postpone freeing the
	    window until autocommands are done. (Yasuhiro Matsumoto)
相关文件:   src/buffer.c, src/fileio.c, src/globals.h, src/window.c

Patch 7.4.321
问题:       Can't build with strawberry perl 5.20 + mingw-w64-4.9.0.
解决方案:   Define save_strlen. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.4.322
问题:       Using "msgfmt" is hard coded, cannot use "gmsgfmt".
解决方案:   Use the msgfmt command found by configure. (Danek Duvall)
相关文件:   src/config.mk.in, src/po/Makefile

Patch 7.4.323
问题:       substitute() with zero width pattern breaks multi-byte character.
解决方案:   Take multi-byte character size into account. (Yukihiro Nakadaira)
相关文件:   src/eval.c src/testdir/test69.in, src/testdir/test69.ok

Patch 7.4.324
问题:       In Ex mode, cyrillic characters are not handled. (Stas Malavin)
解决方案:   Support multi-byte characters in Ex mode. (Yukihiro Nakadaira)
相关文件:   src/ex_getln.c

Patch 7.4.325
问题:       When starting the gui and changing the window size the status line
	    may not be drawn correctly.
解决方案:   Catch new_win_height() being called recursively. (Christian
	    Brabandt)
相关文件:   src/window.c

Patch 7.4.326
问题:       Can't build Tiny version. (Elimar Riesebieter)
解决方案:   Add #ifdef.
相关文件:   src/window.c

Patch 7.4.327
问题:       When 'verbose' is set to display the return value of a function,
	    may get E724 repeatedly.
解决方案:   Do not give an error for verbose messages. Abort conversion to
	    string after an error.
相关文件:   src/eval.c

Patch 7.4.328
问题:       Selection of inner block is inconsistent.
解决方案:   Skip indent not only for '}' but all parens. (Tom McDonald)
相关文件:   src/search.c

Patch 7.4.329
问题:       When moving the cursor and then switching to another window the
	    previous window isn't scrolled. (Yukihiro Nakadaira)
解决方案:   Call update_topline() before leaving the window. (Christian
	    Brabandt)
相关文件:   src/window.c

Patch 7.4.330
问题:       Using a regexp pattern to highlight a specific position can be
	    slow.
解决方案:   Add matchaddpos() to highlight specific positions efficiently.
	    (Alexey Radkov)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt,
	    runtime/plugin/matchparen.vim, src/eval.c, src/ex_docmd.c,
	    src/proto/window.pro, src/screen.c, src/structs.h,
	    src/testdir/test63.in, src/testdir/test63.ok, src/window.c

Patch 7.4.331
问题:       Relative numbering not updated after a linewise yank.  Issue 235.
解决方案:   Redraw after the yank. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4.332
问题:       GTK: When a sign icon doesn't fit exactly there can be ugly gaps.
解决方案:   Scale the sign to fit when the aspect ratio is not too far off.
	    (Christian Brabandt)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.333
问题:       Compiler warning for unused function.
解决方案:   Put the function inside the #ifdef.
相关文件:   src/screen.c

Patch 7.4.334 (after 7.4.330)
问题:       Uninitialized variables, causing some problems.
解决方案:   Initialize the variables. (Dominique Pelle)
相关文件:   src/screen.c, src/window.c

Patch 7.4.335
问题:       No digraph for the new rouble sign.
解决方案:   Add the digraphs =R and =P.
相关文件:   src/digraph.c, runtime/doc/digraph.txt

Patch 7.4.336
问题:       Setting 'history' to a big value causes out-of-memory errors.
解决方案:   Limit the value to 10000. (Hirohito Higashi)
相关文件:   runtime/doc/options.txt, src/option.c

Patch 7.4.337
问题:       When there is an error preparing to edit the command line, the
	    command won't be executed. (Hirohito Higashi)
解决方案:   Reset did_emsg before editing.
相关文件:   src/ex_getln.c

Patch 7.4.338
问题:       Cannot wrap lines taking indent into account.
解决方案:   Add the 'breakindent' option. (many authors, final improvements by
	    Christian Brabandt)
相关文件:   runtime/doc/eval.txt, runtime/doc/options.txt, runtime/optwin.vim,
	    src/buffer.c, src/charset.c, src/edit.c, src/ex_getln.c,
	    src/getchar.c, src/misc1.c, src/misc2.c, src/ops.c, src/option.c,
	    src/option.h, src/proto/charset.pro, src/proto/misc1.pro,
	    src/proto/option.pro, src/screen.c, src/structs.h,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok,
	    src/ui.c, src/version.c

Patch 7.4.339
问题:       Local function is available globally.
解决方案:   Add "static".
相关文件:   src/option.c, src/proto/option.pro

Patch 7.4.340
问题:       Error from sed about illegal bytes when installing Vim.
解决方案:   Prepend LC_ALL=C. (Itchyny)
相关文件:   src/installman.sh

Patch 7.4.341
问题:       sort() doesn't handle numbers well.
解决方案:   Add an argument to specify sorting on numbers. (Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/testdir/test55.in,
	    src/testdir/test55.ok

Patch 7.4.342
问题:       Clang gives warnings.
解决方案:   Add an else block. (Dominique Pelle)
相关文件:   src/gui_beval.c

Patch 7.4.343
问题:       matchdelete() does not always update the right lines.
解决方案:   Fix off-by-one error.  (Ozaki Kiichi)
相关文件:   src/window.c

Patch 7.4.344
问题:       Unnecessary initializations and other things related to
	    matchaddpos().
解决方案:   Code cleanup. (Alexey Radkov)
相关文件:   runtime/doc/eval.txt, src/screen.c, src/window.c

Patch 7.4.345 (after 7.4.338)
问题:       Indent is not updated when deleting indent.
解决方案:   Remember changedtick.
相关文件:   src/misc1.c

Patch 7.4.346 (after 7.4.338)
问题:       Indent is not updated when changing 'breakindentopt'. (itchyny)
解决方案:   Do not cache "brishift". (Christian Brabandt)
相关文件:   src/misc1.c

Patch 7.4.347
问题:       test55 fails on some systems.
解决方案:   Remove the elements that all result in zero and can end up in an
	    arbitrary position.
相关文件:   src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.348
问题:       When using "J1" in 'cinoptions' a line below a continuation line
	    gets too much indent.
解决方案:   Fix parentheses in condition.
相关文件:   src/misc1.c

Patch 7.4.349
问题:       When there are matches to highlight the whole window is redrawn,
	    which is slow.
解决方案:   Only redraw everything when lines were inserted or deleted.
	    Reset b_mod_xlines when needed.  (Alexey Radkov)
相关文件:   src/screen.c, src/window.c

Patch 7.4.350
问题:       Using C indenting for Javascript does not work well for a {} block
	    inside parentheses.
解决方案:   When looking for a matching paren ignore one that is before the
	    start of a {} block.
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.351
问题:       sort() is not stable.
解决方案:   When the items are identical, compare the pointers.
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.352
问题:       With 'linebreak' a tab causes a missing line break.
解决方案:   Count a tab for what it's worth also for shorter lines.
	    (Christian Brabandt)
相关文件:   src/charset.c

Patch 7.4.353
问题:       'linebreak' doesn't work with the 'list' option.
解决方案:   Make it work. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/charset.c, src/screen.c,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_listlbr.in, src/testdir/test_listlbr.ok

Patch 7.4.354
问题:       Compiler warning.
解决方案:   Change NUL to NULL. (Ken Takata)
相关文件:   src/screen.c

Patch 7.4.355
问题:       Several problems with Javascript indenting.
解决方案:   Improve Javascript indenting.
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.356
问题:       Mercurial does not ignore memfile_test. (Daniel Hahler)
解决方案:   Add memfile_test to ignored files, remove trailing spaces.
相关文件:   .hgignore

Patch 7.4.357
问题:       After completion some characters are not redrawn.
解决方案:   Clear the command line unconditionally. (Jacob Niehus)
相关文件:   src/edit.c

Patch 7.4.358 (after 7.4.351)
问题:       Sort is not always stable.
解决方案:   Add an index instead of relying on the pointer to remain the same.
	    Idea by Jun Takimoto.
相关文件:   src/eval.c

Patch 7.4.359
问题:       When 'ttymouse' is set to 'uxterm' the xterm version is not
	    requested. (Tomas Janousek)
解决方案:   Do not mark uxterm as a conflict mouse and add
	    resume_get_esc_sequence().
相关文件:   src/term.c, src/os_unix.c, src/proto/term.pro

Patch 7.4.360
问题:       In a regexp pattern a "$" followed by \v or \V is not seen as the
	    end-of-line.
解决方案:   Handle the situation. (Ozaki Kiichi)
相关文件:   src/regexp.c

Patch 7.4.361
问题:       Lots of flickering when filling the preview window for 'omnifunc'.
解决方案:   Disable redrawing. (Hirohito Higashi)
相关文件:   src/popupmnu.c

Patch 7.4.362
问题:       When matchaddpos() uses a length smaller than the number of bytes
	    in the (last) character the highlight continues until the end of
	    the line.
解决方案:   Change condition from equal to larger-or-equal.
相关文件:   src/screen.c

Patch 7.4.363
问题:       In Windows console typing 0xCE does not work.
解决方案:   Convert 0xCE to K_NUL 3. (Nobuhiro Takasaki et al.)
相关文件:   src/os_win32.c, src/term.c

Patch 7.4.364
问题:       When the viminfo file can't be renamed there is no error message.
	    (Vladimir Berezhnoy)
解决方案:   Check for the rename to fail.
相关文件:   src/ex_cmds.c

Patch 7.4.365
问题:       Crash when using ":botright split" when there isn't much space.
解决方案:   Add a check for the minimum width/height. (Yukihiro Nakadaira)
相关文件:   src/window.c

Patch 7.4.366
问题:       Can't run the linebreak test on MS-Windows.
解决方案:   Fix the output file name. (Taro Muraoka)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.367 (after 7.4.357)
问题:       Other solution for redrawing after completion.
解决方案:   Schedule a window redraw instead of just clearing the command
	    line. (Jacob Niehus)
相关文件:   src/edit.c

Patch 7.4.368
问题:       Restoring the window sizes after closing the command line window
	    doesn't work properly if there are nested splits.
解决方案:   Restore the sizes twice. (Hirohito Higashi)
相关文件:   src/window.c

Patch 7.4.369
问题:       Using freed memory when exiting while compiled with EXITFREE.
解决方案:   Set curwin to NULL and check for that. (Dominique Pelle)
相关文件:   src/buffer.c, src/window.c

Patch 7.4.370
问题:       Linebreak test fails when encoding is not utf-8. (Danek Duvall)
解决方案:   Split the test in a single byte one and a utf-8 one. (Christian
	    Brabandt)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_listlbr.in, src/testdir/test_listlbr.ok,
	    src/testdir/test_listlbr_utf8.in, src/testdir/test_listlbr_utf8.ok

Patch 7.4.371
问题:       When 'linebreak' is set control characters are not correctly
	    displayed. (Kimmy Lindvall)
解决方案:   Set n_extra. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.372
问题:       When 'winminheight' is zero there might not be one line for the
	    current window.
解决方案:   Change the size computations. (Yukihiro Nakadaira)
相关文件:   src/window.c

Patch 7.4.373
问题:       Compiler warning for unused argument and unused variable.
解决方案:   Add UNUSED.  Move variable inside #ifdef.
相关文件:   src/charset.c, src/window.c

Patch 7.4.374
问题:       Character after "fb" command not mapped if it might be a composing
	    character.
解决方案:   Don't disable mapping when looking for a composing character.
	    (Jacob Niehus)
相关文件:   src/normal.c

Patch 7.4.375
问题:       Test 63 fails when run with GUI-only Vim.
解决方案:   Add guibg attributes. (suggested by Mike Soyka)
相关文件:   src/testdir/test63.in

Patch 7.4.376 (after 7.4.367)
问题:       Popup menu flickers too much.
解决方案:   Remove the forced redraw. (Hirohito Higashi)
相关文件:   src/edit.c

Patch 7.4.377
问题:       When 'equalalways' is set a split may report "no room" even though
	    there is plenty of room.
解决方案:   Compute the available room properly. (Yukihiro Nakadaira)
相关文件:   src/window.c

Patch 7.4.378
问题:       Title of quickfix list is not kept for setqflist(list, 'r').
解决方案:   Keep the title.  Add a test. (Lcd)
相关文件:   src/quickfix.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_qf_title.in,
	    src/testdir/test_qf_title.ok

Patch 7.4.379
问题:       Accessing freed memory after using setqflist(list, 'r'). (Lcd)
解决方案:   Reset qf_index.
相关文件:   src/quickfix.c

Patch 7.4.380
问题:       Loading python may cause Vim to exit.
解决方案:   Avoid loading the "site" module. (Taro Muraoka)
相关文件:   src/if_python.c

Patch 7.4.381
问题:       Get u_undo error when backspacing in Insert mode deletes more than
	    one line break. (Ayberk Ozgur)
解决方案:   Also decrement Insstart.lnum.
相关文件:   src/edit.c

Patch 7.4.382
问题:       Mapping characters may not work after typing Esc in Insert mode.
解决方案:   Fix the noremap flags for inserted characters. (Jacob Niehus)
相关文件:   src/getchar.c

Patch 7.4.383
问题:       Bad interaction between preview window and omnifunc.
解决方案:   Avoid redrawing the status line. (Hirohito Higashi)
相关文件:   src/popupmnu.c

Patch 7.4.384
问题:       Test 102 fails when compiled with small features.
解决方案:   Source small.vim. (Jacob Niehus)
相关文件:   src/testdir/test102.in

Patch 7.4.385
问题:       When building with tiny or small features building the .mo files
	    fails.
解决方案:   In autoconf do not setup for building the .mo files when it would
	    fail.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.386
问题:       When splitting a window the changelist position is wrong.
解决方案:   Copy the changelist position. (Jacob Niehus)
相关文件:   src/window.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_changelist.in,
	    src/testdir/test_changelist.ok

Patch 7.4.387
问题:       "4gro" replaces one character then executes "ooo". (Urtica Dioica)
解决方案:   Write the ESC in the second stuff buffer.
相关文件:   src/getchar.c, src/proto/getchar.pro, src/edit.c,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_insertcount.in, src/testdir/test_insertcount.ok

Patch 7.4.388
问题:       With 'linebreak' set and 'list' unset a Tab is not counted
	    properly. (Kent Sibilev)
解决方案:   Check the 'list' option. (Christian Brabandt)
相关文件:   src/screen.c, src/testdir/test_listlbr_utf8.in,
	    src/testdir/test_listlbr_utf8.ok

Patch 7.4.389
问题:       Still sometimes Vim enters Replace mode when starting up.
解决方案:   Use a different solution in detecting the termresponse and
	    location response. (Hayaki Saito)
相关文件:   src/globals.h, src/os_unix.c, src/term.c, src/proto/term.pro

Patch 7.4.390
问题:       Advancing pointer over end of a string.
解决方案:   Init quote character to -1 instead of zero. (Dominique Pelle)
相关文件:   src/misc1.c

Patch 7.4.391
问题:       No 'cursorline' highlighting when the cursor is on a line with
	    diff highlighting. (Benjamin Fritz)
解决方案:   Combine the highlight attributes. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.392
问题:       Not easy to detect type of command line window.
解决方案:   Add the getcmdwintype() function. (Jacob Niehus)
相关文件:   src/eval.c

Patch 7.4.393
问题:       Text drawing on newer MS-Windows systems is suboptimal.  Some
	    multi-byte characters are not displayed, even though the same font
	    in Notepad can display them. (Srinath Avadhanula)
解决方案:   Add the 'renderoptions' option to enable DirectX drawing. (Taro
	    Muraoka)
相关文件:   runtime/doc/eval.txt, runtime/doc/options.txt,
	    runtime/doc/various.txt, src/Make_cyg.mak, src/Make_ming.mak,
	    src/Make_mvc.mak, src/eval.c, src/gui_dwrite.cpp,
	    src/gui_dwrite.h, src/gui_w32.c, src/gui_w48.c, src/option.c,
	    src/option.h, src/version.c, src/vim.h, src/proto/gui_w32.pro

Patch 7.4.394 (after 7.4.393)
问题:       When using DirectX last italic character is incomplete.
解决方案:   Add one to the number of cells. (Ken Takata)
相关文件:   src/gui_w32.c

Patch 7.4.395 (after 7.4.355)
问题:       C indent is wrong below an if with wrapped condition followed by
	    curly braces. (Trevor Powell)
解决方案:   Make a copy of tryposBrace.
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.396
问题:       When 'clipboard' is "unnamed", :g/pat/d is very slow. (Praful)
解决方案:   Only set the clipboard after the last delete. (Christian Brabandt)
相关文件:   src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/globals.h,
	    src/ops.c, src/proto/ui.pro, src/ui.c

Patch 7.4.397
问题:       Matchparen only uses the topmost syntax item.
解决方案:   Go through the syntax stack to find items. (James McCoy)
	    Also use getcurpos() when possible.
相关文件:   runtime/plugin/matchparen.vim

Patch 7.4.398 (after 7.4.393)
问题:       Gcc error for the argument of InterlockedIncrement() and
	    InterlockedDecrement(). (Axel Bender)
解决方案:   Remove "unsigned" from the cRefCount_ declaration.
相关文件:   src/gui_dwrite.cpp

Patch 7.4.399
问题:       Encryption implementation is messy.  Blowfish encryption has a
	    weakness.
解决方案:   Refactor the encryption, store the state in an allocated struct
	    instead of using a save/restore mechanism.  Introduce the
	    "blowfish2" method, which does not have the weakness and encrypts
	    the whole undo file. (largely by David Leadbeater)
相关文件:   runtime/doc/editing.txt, runtime/doc/options.txt, src/Makefile,
	    src/blowfish.c, src/crypt.c, src/crypt_zip.c, src/ex_docmd.c,
	    src/fileio.c, src/globals.h, src/main.c, src/memline.c,
	    src/misc2.c, src/option.c, src/proto.h, src/proto/blowfish.pro,
	    src/proto/crypt.pro, src/proto/crypt_zip.pro,
	    src/proto/fileio.pro, src/proto/misc2.pro, src/structs.h,
	    src/undo.c, src/testdir/test71.in, src/testdir/test71.ok,
	    src/testdir/test71a.in, src/testdir/test72.in,
	    src/testdir/test72.ok

Patch 7.4.400
问题:       List of distributed files is incomplete.
解决方案:   Add recently added files.
相关文件:   Filelist

Patch 7.4.401 (after 7.4.399)
问题:       Can't build on MS-Windows.
解决方案:   Include the new files in all the Makefiles.
相关文件:   src/Make_bc3.mak, src/Make_bc5.mak, src/Make_cyg.mak,
	    src/Make_dice.mak, src/Make_djg.mak, src/Make_ivc.mak,
	    src/Make_manx.mak, src/Make_ming.mak, src/Make_morph.mak,
	    src/Make_mvc.mak, src/Make_os2.mak, src/Make_sas.mak,
	    Make_vms.mms

Patch 7.4.402
问题:       Test 72 crashes under certain conditions. (Kazunobu Kuriyama)
解决方案:   Clear the whole bufinfo_T early.
相关文件:   src/undo.c

Patch 7.4.403
问题:       Valgrind reports errors when running test 72. (Dominique Pelle)
解决方案:   Reset the local 'cryptmethod' option before storing the seed.
	    Set the seed in the memfile even when there is no block0 yet.
相关文件:   src/fileio.c, src/option.c, src/memline.c

Patch 7.4.404
问题:       Windows 64 bit compiler warnings.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/crypt.c, src/undo.c

Patch 7.4.405
问题:       Screen updating is slow when using matches.
解决方案:   Do not use the ">=" as in patch 7.4.362, check the lnum.
相关文件:   src/screen.c, src/testdir/test63.in, src/testdir/test63.ok

Patch 7.4.406
问题:       Test 72 and 100 fail on MS-Windows.
解决方案:   Set fileformat to unix in the tests. (Taro Muraoka)
相关文件:   src/testdir/test72.in, src/testdir/test100.in

Patch 7.4.407
问题:       Inserting text for Visual block mode, with cursor movement,
	    repeats the wrong text. (Aleksandar Ivanov)
解决方案:   Reset the update_Insstart_orig flag. (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.408
问题:       Visual block insert breaks a multi-byte character.
解决方案:   Calculate the position properly. (Yasuhiro Matsumoto)
相关文件:   src/ops.c, src/testdir/test_utf8.in, src/testdir/test_utf8.ok,
	    src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.409
问题:       Can't build with Perl on Fedora 20.
解决方案:   Find xsubpp in another directory. (Michael Henry)
相关文件:   src/Makefile, src/config.mk.in, src/configure.in,
	    src/auto/configure

Patch 7.4.410
问题:       Fold does not open after search when there is a CmdwinLeave
	    autocommand.
解决方案:   Restore KeyTyped. (Jacob Niehus)
相关文件:   src/ex_getln.c

Patch 7.4.411
问题:       "foo bar" sorts before "foo" with sort(). (John Little)
解决方案:   Avoid putting quotes around strings before comparing them.
相关文件:   src/eval.c

Patch 7.4.412
问题:       Can't build on Windows XP with MSVC.
解决方案:   Add SUBSYSTEM_VER to the Makefile. (Yongwei Wu)
相关文件:   src/Make_mvc.mak, src/INSTALLpc.txt

Patch 7.4.413
问题:       MS-Windows: Using US international keyboard layout, inserting dead
	    key by pressing space does not always work.  Issue 250.
解决方案:   Let MS-Windows translate the message. (John Wellesz)
相关文件:   src/gui_w48.c

Patch 7.4.414
问题:       Cannot define a command only when it's used.
解决方案:   Add the CmdUndefined autocommand event. (partly by Yasuhiro
	    Matsumoto)
相关文件:   runtime/doc/autocmd.txt, src/ex_docmd.c, src/fileio.c,
	    src/proto/fileio.pro

Patch 7.4.415 (after 7.4.414)
问题:       Cannot build.  Warning for shadowed variable. (John Little)
解决方案:   Add missing change.  Remove declaration.
相关文件:   src/vim.h, src/ex_docmd.c

Patch 7.4.416
问题:       Problem with breakindent/showbreak and tabs.
解决方案:   Handle tabs differently. (Christian Brabandt)
相关文件:   src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok,
	    src/charset.c

Patch 7.4.417
问题:       After splitting a window and setting 'breakindent' the default
	    minimum with is not respected.
解决方案:   Call briopt_check() when copying options to a new window.
相关文件:   src/option.c, src/proto/option.pro,
	    src/testdir/test_breakindent.in

Patch 7.4.418
问题:       When leaving ":append" the cursor shape is like in Insert mode.
	    (Jacob Niehus)
解决方案:   Do not have State set to INSERT when calling getline().
相关文件:   src/ex_cmds.c

Patch 7.4.419
问题:       When part of a list is locked it's possible to make changes.
解决方案:   Check if any of the list items is locked before make a change.
	    (ZyX)
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.420
问题:       It's not obvious how to add a new test.
解决方案:   Add a README file. (Christian Brabandt)
相关文件:   src/testdir/README.txt

Patch 7.4.421
问题:       Crash when searching for "\ze*". (Urtica Dioica)
解决方案:   Disallow a multi after \ze and \zs.
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.422
问题:       When using conceal with linebreak some text is not displayed
	    correctly. (Grüner Gimpel)
解决方案:   Check for conceal mode when using linebreak. (Christian Brabandt)
相关文件:   src/screen.c, src/testdir/test_listlbr.in,
	    src/testdir/test_listlbr.ok

Patch 7.4.423
问题:       expand("$shell") does not work as documented.
解决方案:   Do not escape the $ when expanding environment variables.
相关文件:   src/os_unix.c, src/misc1.c, src/vim.h

Patch 7.4.424
问题:       Get ml_get error when using Python to delete lines in a buffer
	    that is not in a window.  issue 248.
解决方案:   Do not try adjusting the cursor for a different buffer.
相关文件:   src/if_py_both.h

Patch 7.4.425
问题:       When 'showbreak' is used "gj" may move to the wrong position.
	    (Nazri Ramliy)
解决方案:   Adjust virtcol when 'showbreak' is set. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.4.426
问题:       README File missing from list of files.
解决方案:   Update the list of files.
相关文件:   Filelist

Patch 7.4.427
问题:       When an InsertCharPre autocommand executes system() typeahead may
	    be echoed and messes up the display. (Jacob Niehus)
解决方案:   Do not set cooked mode when invoked from ":silent".
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.4.428
问题:       executable() may return a wrong result on MS-Windows.
解决方案:   Change the way SearchPath() is called. (Yasuhiro Matsumoto, Ken
	    Takata)
相关文件:   src/os_win32.c

Patch 7.4.429
问题:       Build fails with fewer features. (Elimar Riesebieter)
解决方案:   Add #ifdef.
相关文件:   src/normal.c

Patch 7.4.430
问题:       test_listlbr fails when compiled with normal features.
解决方案:   Check for the +conceal feature.
相关文件:   src/testdir/test_listlbr.in

Patch 7.4.431
问题:       Compiler warning.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ex_docmd.c

Patch 7.4.432
问题:       When the startup code expands command line arguments, setting
	    'encoding' will not properly convert the arguments.
解决方案:   Call get_cmd_argsW() early in main(). (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c, src/main.c, src/os_mswin.c

Patch 7.4.433
问题:       Test 75 fails on MS-Windows.
解决方案:   Use ":normal" instead of feedkeys(). (Michael Soyka)
相关文件:   src/testdir/test75.in

Patch 7.4.434
问题:       gettabvar() is not consistent with getwinvar() and getbufvar().
解决方案:   Return a dict with all variables when the varname is empty.
	    (Yasuhiro Matsumoto)
相关文件:   src/eval.c, runtime/doc/eval.txt, src/testdir/test91.in,
	    src/testdir/test91.ok

Patch 7.4.435
问题:       Line formatting behaves differently when 'linebreak' is set.
	    (mvxxc)
解决方案:   Disable 'linebreak' temporarily. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.4.436
问题:       ml_get error for autocommand that moves the cursor of the current
	    window.
解决方案:   Check the cursor position after switching back to the current
	    buffer.  (Christian Brabandt)
相关文件:   src/fileio.c

Patch 7.4.437
问题:       New and old regexp engine are not consistent.
解决方案:   Also give an error for "\ze*" for the old regexp engine.
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.4.438
问题:       Cached values for 'cino' not reset for ":set all&".
解决方案:   Call parse_cino(). (Yukihiro Nakadaira)
相关文件:   src/option.c

Patch 7.4.439
问题:       Duplicate message in message history.  Some quickfix messages
	    appear twice. (Gary Johnson)
解决方案:   Do not reset keep_msg too early. (Hirohito Higashi)
相关文件:   src/main.c

Patch 7.4.440
问题:       Omni complete popup drawn incorrectly.
解决方案:   Call validate_cursor() instead of check_cursor(). (Hirohito
	    Higashi)
相关文件:   src/edit.c

Patch 7.4.441
问题:       Endless loop and other problems when 'cedit' is set to CTRL-C.
解决方案:   Do not call ex_window() when ex_normal_busy or got_int was set.
	    (Yasuhiro Matsumoto)
相关文件:   src/ex_getln.c

Patch 7.4.442 (after 7.4.434)
问题:       Using uninitialized variable.
解决方案:   Pass the first window of the tabpage.
相关文件:   src/eval.c

Patch 7.4.443
问题:       Error reported by ubsan when running test 72.
解决方案:   Add type cast to unsigned. (Dominique Pelle)
相关文件:   src/undo.c

Patch 7.4.444
问题:       Reversed question mark not recognized as punctuation. (Issue 258)
解决方案:   Add the Supplemental Punctuation range.
相关文件:   src/mbyte.c

Patch 7.4.445
问题:       Clipboard may be cleared on startup.
解决方案:   Set clip_did_set_selection to -1 during startup. (Christian
	    Brabandt)
相关文件:   src/main.c, src/ui.c

Patch 7.4.446
问题:       In some situations, when setting up an environment to trigger an
	    autocommand, the environment is not properly restored.
解决方案:   Check the return value of switch_win() and call restore_win()
	    always.  (Daniel Hahler)
相关文件:   src/eval.c, src/misc2.c, src/window.c

Patch 7.4.447
问题:       Spell files from Hunspell may generate a lot of errors.
解决方案:   Add the IGNOREEXTRA flag.
相关文件:   src/spell.c, runtime/doc/spell.txt

Patch 7.4.448
问题:       Using ETO_IGNORELANGUAGE causes problems.
解决方案:   Remove this flag. (Paul Moore)
相关文件:   src/gui_w32.c

Patch 7.4.449
问题:       Can't easily close the help window. (Chris Gaal)
解决方案:   Add ":helpclose". (Christian Brabandt)
相关文件:   runtime/doc/helphelp.txt, runtime/doc/index.txt, src/ex_cmds.c,
	    src/ex_cmds.h, src/proto/ex_cmds.pro

Patch 7.4.450
问题:       Not all commands that edit another buffer support the +cmd
	    argument.
解决方案:   Add the +cmd argument to relevant commands. (Marcin Szamotulski)
相关文件:   runtime/doc/windows.txt, src/ex_cmds.h, src/ex_docmd.c

Patch 7.4.451
问题:       Calling system() with empty input gives an error for writing the
	    temp file.
解决方案:   Do not try writing if the string length is zero. (Olaf Dabrunz)
相关文件:   src/eval.c

Patch 7.4.452
问题:       Can't build with tiny features. (Tony Mechelynck)
解决方案:   Use "return" instead of "break".
相关文件:   src/ex_cmds.c

Patch 7.4.453
问题:       Still can't build with tiny features.
解决方案:   Add #ifdef.
相关文件:   src/ex_cmds.c

Patch 7.4.454
问题:       When using a Visual selection of multiple words and doing CTRL-W_]
	    it jumps to the tag matching the word under the cursor, not the
	    selected text.  (Patrick hemmer)
解决方案:   Do not reset Visual mode. (idea by Christian Brabandt)
相关文件:   src/window.c

Patch 7.4.455
问题:       Completion for :buf does not use 'wildignorecase'. (Akshay H)
解决方案:   Pass the 'wildignorecase' flag around.
相关文件:   src/buffer.c

Patch 7.4.456
问题:       'backupcopy' is global, cannot write only some files in a
	    different way.
解决方案:   Make 'backupcopy' global-local. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/buffer.c, src/fileio.c, src/option.c,
	    src/option.h, src/proto/option.pro, src/structs.h

Patch 7.4.457
问题:       Using getchar() in an expression mapping may result in
	    K_CURSORHOLD, which can't be recognized.
解决方案:   Add the <CursorHold> key.  (Hirohito Higashi)
相关文件:   src/misc2.c

Patch 7.4.458
问题:       Issue 252: Cursor moves in a zero-height window.
解决方案:   Check for zero height. (idea by Christian Brabandt)
相关文件:   src/move.c

Patch 7.4.459
问题:       Can't change the icon after building Vim.
解决方案:   Load the icon from a file on startup. (Yasuhiro Matsumoto)
相关文件:   src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
	    src/proto/os_mswin.pro

Patch 7.4.460 (after 7.4.454)
问题:       Can't build without the quickfix feature. (Erik Falor)
解决方案:   Add a #ifdef.
相关文件:   src/window.c

Patch 7.4.461
问题:       MS-Windows: When collate is on the number of copies is too high.
解决方案:   Only set the collated/uncollated count when collate is on.
	    (Yasuhiro Matsumoto)
相关文件:   src/os_mswin.c

Patch 7.4.462
问题:       Setting the local value of 'backupcopy' empty gives an error.
	    (Peter Mattern)
解决方案:   When using an empty value set the flags to zero. (Hirohito
	    Higashi)
相关文件:   src/option.c

Patch 7.4.463
问题:       Test 86 and 87 may hang on MS-Windows.
解决方案:   Call inputrestore() after inputsave(). (Ken Takata)
相关文件:   src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.464 (after 7.4.459)
问题:       Compiler warning.
解决方案:   Add type cast. (Ken Takata)
相关文件:   src/gui_w32.c

Patch 7.4.465 (after 7.4.016)
问题:       Crash when expanding a very long string.
解决方案:   Use wcsncpy() instead of wcscpy(). (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.466 (after 7.4.460)
问题:       CTRL-W } does not open preview window. (Erik Falor)
解决方案:   Don't set g_do_tagpreview for CTRL-W }.
相关文件:   src/window.c

Patch 7.4.467
问题:       'linebreak' does not work well together with Visual mode.
解决方案:   Disable 'linebreak' while applying an operator.  Fix the test.
	    (Christian Brabandt)
相关文件:   src/normal.c, src/screen.c, src/testdir/test_listlbr.in,
	    src/testdir/test_listlbr.ok

Patch 7.4.468
问题:       Issue 26: CTRL-C does not interrupt after it was mapped and then
	    unmapped.
解决方案:   Reset mapped_ctrl_c. (Christian Brabandt)
相关文件:   src/getchar.c

Patch 7.4.469 (after 7.4.467)
问题:       Can't build with MSVC. (Ken Takata)
解决方案:   Move the assignment after the declarations.
相关文件:   src/normal.c

Patch 7.4.470
问题:       Test 11 and 100 do not work properly on Windows.
解决方案:   Avoid using feedkeys(). (Ken Takata)
相关文件:   src/testdir/Make_dos.mak, src/testdir/test11.in,
	    src/testdir/test100.in

Patch 7.4.471
问题:       MS-Windows: When printer name contains multi-byte, the name is
	    displayed as ???.
解决方案:   Convert the printer name from the active codepage to 'encoding'.
	    (Yasuhiro Matsumoto)
相关文件:   src/os_mswin.c

Patch 7.4.472
问题:       The "precedes" entry in 'listchar' will be drawn when 'showbreak'
	    is set and 'list' is not.
解决方案:   Only draw this character when 'list' is on. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.473
问题:       Cursor movement is incorrect when there is a number/sign/fold
	    column and 'sbr' is displayed.
解决方案:   Adjust the column for 'sbr'. (Christian Brabandt)
相关文件:   src/charset.c

Patch 7.4.474
问题:       AIX compiler can't handle // comment.  Issue 265.
解决方案:   Remove that line.
相关文件:   src/regexp_nfa.c

Patch 7.4.475
问题:       Can't compile on a system where Xutf8SetWMProperties() is not in
	    the X11 library.  Issue 265.
解决方案:   Add a configure check.
相关文件:   src/configure.in, src/auto/configure, src/config.h.in,
	    src/os_unix.c

Patch 7.4.476
问题:       MingW: compiling with "XPM=no" doesn't work.
解决方案:   Check for the "no" value. (KF Leong)  Also for Cygwin. (Ken
	    Takata)
相关文件:   src/Make_ming.mak, src/Make_cyg.mak

Patch 7.4.477
问题:       When using ":%diffput" and the other file is empty an extra empty
	    line remains.
解决方案:   Set the buf_empty flag.
相关文件:   src/diff.c

Patch 7.4.478
问题:       Using byte length instead of character length for 'showbreak'.
解决方案:   Compute the character length. (Marco Hinz)
相关文件:   src/charset.c

Patch 7.4.479
问题:       MS-Windows: The console title can be wrong.
解决方案:   Take the encoding into account. When restoring the title use the
	    right function. (Yasuhiro Matsumoto)
相关文件:   src/os_mswin.c, src/os_win32.c

Patch 7.4.480 (after 7.4.479)
问题:       MS-Windows: Can't build.
解决方案:   Remove goto, use a flag instead.
相关文件:   src/os_win32.c

Patch 7.4.481 (after 7.4.471)
问题:       Compiler warning on MS-Windows.
解决方案:   Add type casts. (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.482
问题:       When 'balloonexpr' results in a list, the text has a trailing
	    newline. (Lcd)
解决方案:   Remove one trailing newline.
相关文件:   src/gui_beval.c

Patch 7.4.483
问题:       A 0x80 byte is not handled correctly in abbreviations.
解决方案:   Unescape special characters. Add a test. (Christian Brabandt)
相关文件:   src/getchar.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_mapping.in,
	    src/testdir/test_mapping.ok

Patch 7.4.484 (after 7.4.483)
问题:       Compiler warning on MS-Windows. (Ken Takata)
解决方案:   Add type cast.
相关文件:   src/getchar.c

Patch 7.4.485 (after 7.4.484)
问题:       Abbreviations don't work. (Toothpik)
解决方案:   Move the length computation inside the for loop.  Compare against
	    the unescaped key.
相关文件:   src/getchar.c

Patch 7.4.486
问题:       Check for writing to a yank register is wrong.
解决方案:   Negate the check. (Zyx).  Also clean up the #ifdefs.
相关文件:   src/ex_docmd.c, src/ex_cmds.h

Patch 7.4.487
问题:       ":sign jump" may use another window even though the file is
	    already edited in the current window.
解决方案:   First check if the file is in the current window. (James McCoy)
相关文件:   src/window.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_signs.in,
	    src/testdir/test_signs.ok

Patch 7.4.488
问题:       test_mapping fails for some people.
解决方案:   Set the 'encoding' option. (Ken Takata)
相关文件:   src/testdir/test_mapping.in

Patch 7.4.489
问题:       Cursor movement still wrong when 'lbr' is set and there is a
	    number column. (Hirohito Higashi)
解决方案:   Add correction for number column. (Hiroyuki Takagi)
相关文件:   src/charset.c

Patch 7.4.490
问题:       Cannot specify the buffer to use for "do" and "dp", making them
	    useless for three-way diff.
解决方案:   Use the count as the buffer number. (James McCoy)
相关文件:   runtime/doc/diff.txt, src/diff.c, src/normal.c, src/proto/diff.pro

Patch 7.4.491
问题:       When winrestview() has a negative "topline" value there are
	    display errors.
解决方案:   Correct a negative value to 1. (Hirohito Higashi)
相关文件:   src/eval.c

Patch 7.4.492
问题:       In Insert mode, after inserting a newline that inserts a comment
	    leader, CTRL-O moves to the right. (ZyX) Issue 57.
解决方案:   Correct the condition for moving the cursor back to the NUL.
	    (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test4.in, src/testdir/test4.ok

Patch 7.4.493
问题:       A TextChanged autocommand is triggered when saving a file.
	    (William Gardner)
解决方案:   Update last_changedtick after calling unchanged(). (Christian
	    Brabandt)
相关文件:   src/fileio.c

Patch 7.4.494
问题:       Cursor shape is wrong after a CompleteDone autocommand.
解决方案:   Update the cursor and mouse shape after ":normal" restores the
	    state. (Jacob Niehus)
相关文件:   src/ex_docmd.c

Patch 7.4.495
问题:       XPM isn't used correctly in the Cygwin Makefile.
解决方案:   Include the rules like in Make_ming.mak. (Ken Takata)
相关文件:   src/Make_cyg.mak

Patch 7.4.496
问题:       Many lines are both in Make_cyg.mak and Make_ming.mak
解决方案:   Move the common parts to one file. (Ken Takata)
相关文件:   src/INSTALLpc.txt, src/Make_cyg.mak, src/Make_cyg_ming.mak,
	    src/Make_ming.mak, src/Make_mvc.mak, Filelist

Patch 7.4.497
问题:       With some regexp patterns the NFA engine uses many states and
	    becomes very slow.  To the user it looks like Vim freezes.
解决方案:   When the number of states reaches a limit fall back to the old
	    engine. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/Makefile, src/regexp.c, src/regexp.h,
	    src/regexp_nfa.c, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Makefile, src/testdir/samples/re.freeze.txt,
	    src/testdir/bench_re_freeze.in, src/testdir/bench_re_freeze.vim,
	    Filelist

Patch 7.4.498 (after 7.4.497)
问题:       Typo in DOS makefile.
解决方案:   Change exists to exist. (Ken Takata)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.499
问题:       substitute() can be slow with long strings.
解决方案:   Store a pointer to the end, instead of calling strlen() every
	    time. (Ozaki Kiichi)
相关文件:   src/eval.c

Patch 7.4.500
问题:       Test 72 still fails once in a while.
解决方案:   Don't set 'fileformat' to unix, reset it. (Ken Takata)
相关文件:   src/testdir/test72.in

Patch 7.4.501 (after 7.4.497)
问题:       Typo in file pattern.
解决方案:   Insert a slash and remove a dot.
相关文件:   Filelist

Patch 7.4.502
问题:       Language mapping also applies to mapped characters.
解决方案:   Add the 'langnoremap' option, when on 'langmap' does not apply to
	    mapped characters. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, runtime/vimrc_example.vim, src/macros.h,
	    src/option.c, src/option.h

Patch 7.4.503
问题:       Cannot append a list of lines to a file.
解决方案:   Add the append option to writefile(). (Yasuhiro Matsumoto)
相关文件:   runtime/doc/eval.txt, src/Makefile, src/eval.c,
	    src/testdir/test_writefile.in, src/testdir/test_writefile.ok

Patch 7.4.504
问题:       Restriction of the MS-Windows installer that the path must end in
	    "Vim" prevents installing more than one version.
解决方案:   Remove the restriction. (Tim Lebedkov)
相关文件:   nsis/gvim.nsi

Patch 7.4.505
问题:       On MS-Windows when 'encoding' is a double-byte encoding a file
	    name longer than MAX_PATH bytes but shorter than that in
	    characters causes problems.
解决方案:   Fail on file names longer than MAX_PATH bytes. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.506
问题:       MS-Windows: Cannot open a file with 259 characters.
解决方案:   Fix off-by-one error. (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.507 (after 7.4.496)
问题:       Building with MingW and Perl.
解决方案:   Remove quotes. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.508
问题:       When generating ja.sjis.po the header is not correctly adjusted.
解决方案:   Check for the right header string. (Ken Takata)
相关文件:   src/po/sjiscorr.c

Patch 7.4.509
问题:       Users are not aware their encryption is weak.
解决方案:   Give a warning when prompting for the key.
相关文件:   src/crypt.c, src/ex_docmd.c, src/fileio.c, src/main.c,
	    src/proto/crypt.pro

Patch 7.4.510
问题:       "-fwrapv" argument breaks use of cproto.
解决方案:   Remove the alphabetic arguments in a drastic way.
相关文件:   src/Makefile

Patch 7.4.511
问题:       Generating proto for if_ruby.c uses type not defined elsewhere.
解决方案:   Do not generate a prototype for
	    rb_gc_writebarrier_unprotect_promoted()
相关文件:   src/if_ruby.c

Patch 7.4.512
问题:       Cannot generate prototypes for Win32 files and VMS.
解决方案:   Add typedefs and #ifdef
相关文件:   src/os_win32.c, src/gui_w32.c, src/os_vms.c

Patch 7.4.513
问题:       Crash because reference count is wrong for list returned by
	    getreg().
解决方案:   Increment the reference count. (Kimmy Lindvall)
相关文件:   src/eval.c

Patch 7.4.514 (after 7.4.492)
问题:       Memory access error. (Dominique Pelle)
解决方案:   Update tpos. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.4.515
问题:       In a help buffer the global 'foldmethod' is used.  (Paul Marshall)
解决方案:   Reset 'foldmethod' when starting to edit a help file.  Move the
	    code to a separate function.
相关文件:   src/ex_cmds.c

Patch 7.4.516
问题:       Completing a function name containing a # does not work.  Issue
	    253.
解决方案:   Recognize the # character. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.4.517
问题:       With a wrapping line the cursor may not end up in the right place.
	    (Nazri Ramliy)
解决方案:   Adjust n_extra for a Tab that wraps. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.518
问题:       Using status line height in width computations.
解决方案:   Use one instead. (Hirohito Higashi)
相关文件:   src/window.c

Patch 7.4.519 (after 7.4.497)
问题:       Crash when using syntax highlighting.
解决方案:   When regprog is freed and replaced, store the result.
相关文件:   src/buffer.c, src/regexp.c, src/syntax.c, src/spell.c,
	    src/ex_cmds2.c, src/fileio.c, src/proto/fileio.pro,
	    src/proto/regexp.pro, src/os_unix.c

Patch 7.4.520
问题:       Sun PCK locale is not recognized.
解决方案:   Add PCK in the table. (Keiichi Oono)
相关文件:   src/mbyte.c

Patch 7.4.521
问题:       When using "vep" a mark is moved to the next line. (Maxi Padulo,
	    Issue 283)
解决方案:   Decrement the line number. (Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4.522
问题:       Specifying wrong buffer size for GetLongPathName().
解决方案:   Use the actual size. (Ken Takata)
相关文件:   src/eval.c

Patch 7.4.523
问题:       When the X11 server is stopped and restarted, while Vim is kept in
	    the background, copy/paste no longer works. (Issue 203)
解决方案:   Setup the clipboard again. (Christian Brabandt)
相关文件:   src/os_unix.c

Patch 7.4.524
问题:       When using ":ownsyntax" spell checking is messed up. (Issue 78)
解决方案:   Use the window-local option values. (Christian Brabandt)
相关文件:   src/option.c, src/syntax.c

Patch 7.4.525
问题:       map() leaks memory when there is an error in the expression.
解决方案:   Call clear_tv(). (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.4.526
问题:       matchstr() fails on long text. (Daniel Hahler)
解决方案:   Return NFA_TOO_EXPENSIVE from regexec_nl(). (Christian Brabandt)
相关文件:   src/regexp.c

Patch 7.4.527
问题:       Still confusing regexp failure and NFA_TOO_EXPENSIVE.
解决方案:   NFA changes equivalent of 7.4.526.
相关文件:   src/regexp_nfa.c

Patch 7.4.528
问题:       Crash when using matchadd() (Yasuhiro Matsumoto)
解决方案:   Copy the match regprog.
相关文件:   src/screen.c

Patch 7.4.529
问题:       No test for what 7.4.517 fixes.
解决方案:   Adjust the tests for breakindent. (Christian Brabandt)
相关文件:   src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok

Patch 7.4.530
问题:       Many commands take a count or range that is not using line
	    numbers.
解决方案:   For each command specify what kind of count it uses.  For windows,
	    buffers and arguments have "$" and "." have a relevant meaning.
	    (Marcin Szamotulski)
相关文件:   runtime/doc/editing.txt, runtime/doc/tabpage.txt,
	    runtime/doc/windows.txt, src/Makefile, src/ex_cmds.h,
	    src/ex_docmd.c, src/testdir/Make_amiga.mak
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_argument_count.in,
	    src/testdir/test_argument_count.ok,
	    src/testdir/test_close_count.in, src/testdir/test_close_count.ok,
	    src/window.c

Patch 7.4.531
问题:       Comments about parsing an Ex command are wrong.
解决方案:   Correct the step numbers.
相关文件:   src/ex_docmd.c

Patch 7.4.532
问题:       When using 'incsearch' "2/pattern/e" highlights the first match.
解决方案:   Move the code to set extra_col inside the loop for count.  (Ozaki
	    Kiichi)
相关文件:   src/search.c

Patch 7.4.533
问题:       ":hardcopy" leaks memory in case of errors.
解决方案:   Free memory in all code paths. (Christian Brabandt)
相关文件:   src/hardcopy.c

Patch 7.4.534
问题:       Warnings when compiling if_ruby.c.
解决方案:   Avoid the warnings. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.4.535 (after 7.4.530)
问题:       Can't build with tiny features.
解决方案:   Add #ifdefs and skip a test.
相关文件:   src/ex_docmd.c, src/testdir/test_argument_count.in

Patch 7.4.536
问题:       Test 63 fails when using a black&white terminal.
解决方案:   Add attributes for a non-color terminal. (Christian Brabandt)
相关文件:   src/testdir/test63.in

Patch 7.4.537
问题:       Value of v:hlsearch reflects an internal variable.
解决方案:   Make the value reflect whether search highlighting is actually
	    displayed. (Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/testdir/test101.in,
	    src/testdir/test101.ok, src/vim.h

Patch 7.4.538
问题:       Tests fail with small features plus Python.
解决方案:   Disallow weird combination of options.  Do not set "fdm" when
	    folding is disabled.
相关文件:   src/option.c, src/ex_cmds.c, src/configure.in, src/auto/configure,
	    src/feature.h

Patch 7.4.539 (after 7.4.530)
问题:       Crash when computing buffer count.  Problem with range for user
	    commands.  Line range wrong in Visual area.
解决方案:   Avoid segfault in compute_buffer_local_count().  Check for
	    CMD_USER when checking type of range. (Marcin Szamotulski)
相关文件:   runtime/doc/windows.txt, src/ex_docmd.c

Patch 7.4.540 (after 7.4.539)
问题:       Cannot build with tiny and small features. (Taro Muraoka)
解决方案:   Add #ifdef around CMD_USER.
相关文件:   src/ex_docmd.c

Patch 7.4.541
问题:       Crash when doing a range assign.
解决方案:   Check for NULL pointer. (Yukihiro Nakadaira)
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.542
问题:       Using a range for window and buffer commands has a few problems.
	    Cannot specify the type of range for a user command.
解决方案:   Add the -addr argument for user commands.  Fix problems. (Marcin
	    Szamotulski)
相关文件:   src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok src/testdir/Make_amiga.mak
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, runtime/doc/map.txt, src/Makefile,
	    src/ex_cmds.h, src/ex_docmd.c, src/ex_getln.c,
	    src/proto/ex_docmd.pro, src/vim.h,

Patch 7.4.543
问题:       Since patch 7.4.232 "1,3s/\n//" joins two lines instead of three.
	    (Eliseo Martínez)  Issue 287
解决方案:   Correct the line count. (Christian Brabandt)
	    Also set the last used search pattern.
相关文件:   src/ex_cmds.c, src/search.c, src/proto/search.pro

Patch 7.4.544
问题:       Warnings for unused arguments when compiling with a combination of
	    features.
解决方案:   Add "UNUSED".
相关文件:   src/if_cscope.c

Patch 7.4.545
问题:       Highlighting for multi-line matches is not correct.
解决方案:   Stop highlight at the end of the match. (Hirohito Higashi)
相关文件:   src/screen.c

Patch 7.4.546
问题:       Repeated use of vim_snprintf() with a number.
解决方案:   Move these vim_snprintf() calls into a function.
相关文件:   src/window.c

Patch 7.4.547
问题:       Using "vit" does not select a multi-byte character at the end
	    correctly.
解决方案:   Advance the cursor over the multi-byte character. (Christian
	    Brabandt)
相关文件:   src/search.c

Patch 7.4.548
问题:       Compilation fails with native version of MinGW-w64, because
	    it doesn't have x86_64-w64-mingw32-windres.exe.
解决方案:   Use windres instead. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.549
问题:       Function name not recognized correctly when inside a function.
解决方案:   Don't check for an alpha character. (Ozaki Kiichi)
相关文件:   src/eval.c, src/testdir/test_nested_function.in,
	    src/testdir/test_nested_function.ok, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile

Patch 7.4.550
问题:       curs_rows() function is always called with the second argument
	    false.
解决方案:   Remove the argument. (Christian Brabandt)
	    validate_botline_win() can then also be removed.
相关文件:   src/move.c

Patch 7.4.551
问题:       "ygn" may yank too much. (Fritzophrenic)  Issue 295.
解决方案:   Check the width of the next match. (Christian Brabandt)
相关文件:   src/search.c, src/testdir/test53.in, src/testdir/test53.ok

Patch 7.4.552
问题:       Langmap applies to Insert mode expression mappings.
解决方案:   Check for Insert mode. (Daniel Hahler)
相关文件:   src/getchar.c, src/testdir/test_mapping.in,
	    src/testdir/test_mapping.ok

Patch 7.4.553
问题:       Various small issues.
解决方案:   Fix those issues.
相关文件:   src/ex_cmds.h, src/gui.h, src/message.c, src/testdir/test39.in,
	    src/proto/eval.pro, src/proto/misc1.pro, src/proto/ops.pro,
	    src/proto/screen.pro, src/proto/window.pro. src/os_unix.c,
	    src/Make_vms.mms, src/proto/os_vms.pro, src/INSTALL

Patch 7.4.554
问题:       Missing part of patch 7.4.519.
解决方案:   Copy back regprog after calling vim_regexec.
相关文件:   src/quickfix.c

Patch 7.4.555
问题:       test_close_count may fail for some combination of features.
解决方案:   Require normal features.
相关文件:   src/testdir/test_close_count.in

Patch 7.4.556
问题:       Failed commands in Python interface not handled correctly.
解决方案:   Restore window and buffer on failure.
相关文件:   src/if_py_both.h

Patch 7.4.557
问题:       One more small issue.
解决方案:   Update function proto.
相关文件:   src/proto/window.pro

Patch 7.4.558
问题:       When the X server restarts Vim may get stuck.
解决方案:   Destroy the application context and create it again.  (Issue 203)
相关文件:   src/os_unix.c

Patch 7.4.559
问题:       Appending a block in the middle of a tab does not work correctly
	    when virtualedit is set.
解决方案:   Decrement spaces and count, don't reset them. (James McCoy)
相关文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.560
问题:       Memory leak using :wviminfo. Issue 296.
解决方案:   Free memory when needed. (idea by Christian Brabandt)
相关文件:   src/ops.c

Patch 7.4.561
问题:       Ex range handling is wrong for buffer-local user commands.
解决方案:   Check for CMD_USER_BUF. (Marcin Szamotulski)
相关文件:   src/ex_docmd.c, src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.562
问题:       Segfault with wide screen and error in 'rulerformat'. (Ingo Karkat)
解决方案:   Check there is enough space. (Christian Brabandt)
相关文件:   src/buffer.c, src/screen.c

Patch 7.4.563
问题:       No test for replacing on a tab in Virtual replace mode.
解决方案:   Add a test. (Elias Diem)
相关文件:   src/testdir/test48.in, src/testdir/test48.ok

Patch 7.4.564
问题:       FEAT_OSFILETYPE is used even though it's never defined.
解决方案:   Remove the code. (Christian Brabandt)
相关文件:   src/fileio.c

Patch 7.4.565
问题:       Ranges for arguments, buffers, tabs, etc. are not checked to be
	    valid but limited to the maximum.  This can cause the wrong thing
	    to happen.
解决方案:   Give an error for an invalid value. (Marcin Szamotulski)
	    Use windows range for ":wincmd".
相关文件:   src/ex_docmd.c, src/ex_cmds.h, src/testdir/test62.in,
	    src/testdir/test_argument_count.in,
	    src/testdir/test_argument_count.ok,
	    src/testdir/test_close_count.in,
	    src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.566
问题:       :argdo, :bufdo, :windo and :tabdo don't take a range.
解决方案:   Support the range. (Marcin Szamotulski)
相关文件:   runtime/doc/editing.txt, runtime/doc/tabpage.txt,
	    runtime/doc/windows.txt, src/ex_cmds.h, src/ex_cmds2.c,
	    src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.567
问题:       Non-ascii vertical separator characters are always redrawn.
解决方案:   Compare only the one byte that's stored. (Thiago Padilha)
相关文件:   src/screen.c

Patch 7.4.568
问题:       Giving an error for ":0wincmd w" is a problem for some plugins.
解决方案:   Allow the zero in the range. (Marcin Szamotulski)
相关文件:   src/ex_docmd.c, src/testdir/test_command_count.ok

Patch 7.4.569 (after 7.4.468)
问题:       Having CTRL-C interrupt or not does not check the mode of the
	    mapping. (Ingo Karkat)
解决方案:   Use a bitmask with the map mode. (Christian Brabandt)
相关文件:   src/getchar.c, src/structs.h, src/testdir/test_mapping.in,
	    src/testdir/test_mapping.ok, src/ui.c, src/globals.h

Patch 7.4.570
问题:       Building with dynamic library does not work for Ruby 2.2.0
解决方案:   Change #ifdefs and #defines. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.4.571 (after 7.4.569)
问题:       Can't build with tiny features. (Ike Devolder)
解决方案:   Add #ifdef.
相关文件:   src/getchar.c

Patch 7.4.572
问题:       Address type of :wincmd depends on the argument.
解决方案:   Check the argument.
相关文件:   src/ex_docmd.c, src/window.c, src/proto/window.pro

Patch 7.4.573 (after 7.4.569)
问题:       Mapping CTRL-C in Visual mode doesn't work. (Ingo Karkat)
解决方案:   Call get_real_state() instead of using State directly.
相关文件:   src/ui.c, src/testdir/test_mapping.in, src/testdir/test_mapping.ok

Patch 7.4.574
问题:       No error for eval('$').
解决方案:   Check for empty name. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.575
问题:       Unicode character properties are outdated.
解决方案:   Update the tables with the latest version.
相关文件:   src/mbyte.c

Patch 7.4.576
问题:       Redrawing problem with 'relativenumber' and 'linebreak'.
解决方案:   Temporarily reset 'linebreak' and restore it in more places.
	    (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.4.577
问题:       Matching with a virtual column has a lot of overhead on very long
	    lines. (Issue 310)
解决方案:   Bail out early if there can't be a match. (Christian Brabandt)
	    Also check for CTRL-C at every position.
相关文件:   src/regexp_nfa.c

Patch 7.4.578
问题:       Using getcurpos() after "$" in an empty line returns a negative
	    number.
解决方案:   Don't add one when this would overflow. (Hirohito Higashi)
相关文件:   src/eval.c

Patch 7.4.579
问题:       Wrong cursor positioning when 'linebreak' is set and lines wrap.
解决方案:   Fix it. (Christian Brabandt)
相关文件:   src/charset.c, src/screen.c

Patch 7.4.580
问题:       ":52wincmd v" still gives an invalid range error. (Charles
	    Campbell)
解决方案:   Skip over white space.
相关文件:   src/ex_docmd.c

Patch 7.4.581
问题:       Compiler warnings for uninitialized variables. (John Little)
解决方案:   Initialize the variables.
相关文件:   src/ops.c

Patch 7.4.582 (after 7.4.577)
问题:       Can't match "%>80v" properly. (Axel Bender)
解决方案:   Correctly handle ">". (Christian Brabandt)
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.583
问题:       With tiny features test 16 may fail.
解决方案:   Source small.vim. (Christian Brabandt)
相关文件:   src/testdir/test16.in

Patch 7.4.584
问题:       With tiny features test_command_count may fail.
解决方案:   Source small.vim. (Christian Brabandt)
相关文件:   src/testdir/test_command_count.in

Patch 7.4.585
问题:       Range for :bdelete does not work. (Ronald Schild)
解决方案:   Also allow unloaded buffers.
相关文件:   src/ex_cmds.h, src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.586
问题:       Parallel building of the documentation html files is not reliable.
解决方案:   Remove a cyclic dependency. (Reiner Herrmann)
相关文件:   runtime/doc/Makefile

Patch 7.4.587
问题:       Conceal does not work properly with 'linebreak'. (cs86661)
解决方案:   Save and restore boguscols. (Christian Brabandt)
相关文件:   src/screen.c, src/testdir/test_listlbr_utf8.in,
	    src/testdir/test_listlbr_utf8.ok

Patch 7.4.588
问题:       ":0argedit foo" puts the new argument in the second place instead
	    of the first.
解决方案:   Adjust the range type. (Ingo Karkat)
相关文件:   src/ex_cmds.h, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_argument_0count.in,
	    src/testdir/test_argument_0count.ok

Patch 7.4.589
问题:       In the MS-Windows console Vim can't handle greek characters when
	    encoding is utf-8.
解决方案:   Escape K_NUL. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.590
问题:       Using ctrl_x_mode as if it contains flags.
解决方案:   Don't use AND with CTRL_X_OMNI. (Hirohito Higashi)
相关文件:   src/edit.c

Patch 7.4.591 (after 7.4.587)
问题:       test_listlbr_utf8 fails when the conceal feature is not available.
解决方案:   Check for the conceal feature. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_listlbr_utf8.in

Patch 7.4.592
问题:       When doing ":e foobar" when already editing "foobar" and 'buftype'
	    is "nofile" the buffer is cleared. (Xavier de Gaye)
解决方案:   Do no clear the buffer.
相关文件:   src/ex_cmds.c

Patch 7.4.593
问题:       Crash when searching for "x\{0,90000}". (Dominique Pelle)
解决方案:   Bail out from the NFA engine when the max limit is much higher
	    than the min limit.
相关文件:   src/regexp_nfa.c, src/regexp.c, src/vim.h

Patch 7.4.594
问题:       Using a block delete while 'breakindent' is set does not work
	    properly.
解决方案:   Use "line" instead of "prev_pend" as the first argument to
	    lbr_chartabsize_adv().  (Hirohito Higashi)
相关文件:   src/ops.c, src/testdir/test_breakindent.in,
	    src/testdir/test_breakindent.ok

Patch 7.4.595
问题:       The test_command_count test fails when using Japanese.
解决方案:   Force the language to C. (Hirohito Higashi)
相关文件:   src/testdir/test_command_count.in

Patch 7.4.596 (after 7.4.592)
问题:       Tiny build doesn't compile.  (Ike Devolder)
解决方案:   Add #ifdef.
相关文件:   src/ex_cmds.c

Patch 7.4.597
问题:       Cannot change the result of systemlist().
解决方案:   Initialize v_lock. (Yukihiro Nakadaira)
相关文件:   src/eval.c

Patch 7.4.598
问题:       ":tabdo windo echo 'hi'" causes "* register not to be changed.
	    (Salman Halim)
解决方案:   Change how clip_did_set_selection is used and add
	    clipboard_needs_update and global_change_count.  (Christian
	    Brabandt)
相关文件:   src/main.c, src/ui.c, src/testdir/test_eval.in,
	    src/testdir/test_eval.ok

Patch 7.4.599
问题:       Out-of-memory error.
解决方案:   Avoid trying to allocate a negative amount of memory, use size_t
	    instead of int. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 7.4.600
问题:       Memory wasted in struct because of aligning.
解决方案:   Split pos in lnum and col. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 7.4.601
问题:       It is not possible to have feedkeys() insert characters.
解决方案:   Add the 'i' flag.
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.4.602
问题:       ":set" does not accept hex numbers as documented.
解决方案:   Use vim_str2nr(). (ZyX)
相关文件:   src/option.c, runtime/doc/options.txt

Patch 7.4.603
问题:       'foldcolumn' may be set such that it fills the whole window, not
	    leaving space for text.
解决方案:   Reduce the foldcolumn width when there is not sufficient room.
	    (idea by Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.604
问题:       Running tests changes viminfo.
解决方案:   Disable viminfo.
相关文件:   src/testdir/test_breakindent.in

Patch 7.4.605
问题:       The # register is not writable, it cannot be restored after
	    jumping around.
解决方案:   Make the # register writable. (Marcin Szamotulski)
相关文件:   runtime/doc/change.txt, src/ops.c, src/buffer.c, src/globals.h

Patch 7.4.606
问题:       May crash when using a small window.
解决方案:   Avoid dividing by zero. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.4.607 (after 7.4.598)
问题:       Compiler warnings for unused variables.
解决方案:   Move them inside #ifdef. (Kazunobu Kuriyama)
相关文件:   src/ui.c

Patch 7.4.608 (after 7.4.598)
问题:       test_eval fails when the clipboard feature is missing.
解决方案:   Skip part of the test. Reduce the text used.
相关文件:   src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.609
问题:       For complicated list and dict use the garbage collector can run
	    out of stack space.
解决方案:   Use a stack of dicts and lists to be marked, thus making it
	    iterative instead of recursive. (Ben Fritz)
相关文件:   src/eval.c, src/if_lua.c, src/if_py_both.h, src/if_python.c,
	    src/if_python3.c, src/proto/eval.pro, src/proto/if_lua.pro,
	    src/proto/if_python.pro, src/proto/if_python3.pro, src/structs.h

Patch 7.4.610
问题:       Some function headers may be missing from generated .pro files.
解决方案:   Add PROTO to the #ifdef.
相关文件:   src/option.c, src/syntax.c

Patch 7.4.611 (after 7.4.609)
问题:       Syntax error.
解决方案:   Change statement to return.
相关文件:   src/if_python3.c

Patch 7.4.612
问题:       test_eval fails on Mac.
解决方案:   Use the * register instead of the + register. (Jun Takimoto)
相关文件:   src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.613
问题:       The NFA engine does not implement the 'redrawtime' time limit.
解决方案:   Implement the time limit.
相关文件:   src/regexp_nfa.c

Patch 7.4.614
问题:       There is no test for what patch 7.4.601 fixes.
解决方案:   Add a test. (Christian Brabandt)
相关文件:   src/testdir/test_mapping.in, src/testdir/test_mapping.ok

Patch 7.4.615
问题:       Vim hangs when freeing a lot of objects.
解决方案:   Do not go back to the start of the list every time.  (Yasuhiro
	    Matsumoto and Ariya Mizutani)
相关文件:   src/eval.c

Patch 7.4.616
问题:       Cannot insert a tab in front of a block.
解决方案:   Correctly compute aop->start. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.617
问题:       Wrong ":argdo" range does not cause an error.
解决方案:   Reset "cmd" to NULL. (Marcin Szamotulski, Ingo Karkat)
相关文件:   src/ex_docmd.c

Patch 7.4.618 (after 7.4.609)
问题:       luaV_setref() is missing a return statement. (Ozaki Kiichi)
解决方案:   Put the return statement back.
相关文件:   src/if_lua.c

Patch 7.4.619 (after 7.4.618)
问题:       luaV_setref() not returning the correct value.
解决方案:   Return one.
相关文件:   src/if_lua.c

Patch 7.4.620
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Initialize "did_free". (Ben Fritz)
相关文件:   src/eval.c

Patch 7.4.621 (after 7.4.619)
问题:       Returning 1 in the wrong function. (Raymond Ko)
解决方案:   Return 1 in the right function (hopefully).
相关文件:   src/if_lua.c

Patch 7.4.622
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/regexp_nfa.c

Patch 7.4.623
问题:       Crash with pattern: \(\)\{80000}  (Dominique Pelle)
解决方案:   When the max limit is large fall back to the old engine.
相关文件:   src/regexp_nfa.c

Patch 7.4.624
问题:       May leak memory or crash when vim_realloc() returns NULL.
解决方案:   Handle a NULL value properly. (Mike Williams)
相关文件:   src/if_cscope.c, src/memline.c, src/misc1.c, src/netbeans.c

Patch 7.4.625
问题:       Possible NULL pointer dereference.
解决方案:   Check for NULL before using it. (Mike Williams)
相关文件:   src/if_py_both.h

Patch 7.4.626
问题:       MSVC with W4 gives useless warnings.
解决方案:   Disable more warnings. (Mike Williams)
相关文件:   src/vim.h

Patch 7.4.627
问题:       The last screen cell is not updated.
解决方案:   Respect the "tn" termcap feature. (Hayaki Saito)
相关文件:   runtime/doc/term.txt, src/option.c, src/screen.c, src/term.c,
	    src/term.h

Patch 7.4.628
问题:       Compiler warning for variable might be clobbered by longjmp.
解决方案:   Add volatile. (Michael Jarvis)
相关文件:   src/main.c

Patch 7.4.629
问题:       Coverity warning for Out-of-bounds read.
解决方案:   Increase MAXWLEN to 254. (Eliseo Martínez)
相关文件:   src/spell.c

Patch 7.4.630
问题:       When using Insert mode completion combined with autocommands the
	    redo command may not work.
解决方案:   Do not save the redo buffer when executing autocommands. (Yasuhiro
	    Matsumoto)
相关文件:   src/fileio.c

Patch 7.4.631
问题:       The default conceal character is documented to be a space but it's
	    initially a dash. (Christian Brabandt)
解决方案:   Make the initial value a space.
相关文件:   src/globals.h

Patch 7.4.632 (after 7.4.592)
问题:       7.4.592 breaks the netrw plugin, because the autocommands are
	    skipped.
解决方案:   Roll back the change.
相关文件:   src/ex_cmds.c

Patch 7.4.633
问题:       After 7.4.630 the problem persists.
解决方案:   Also skip redo when calling a user function.
相关文件:   src/eval.c

Patch 7.4.634
问题:       Marks are not restored after redo + undo.
解决方案:   Fix the way marks are restored. (Olaf Dabrunz)
相关文件:   src/undo.c, src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_marks.in, src/testdir/test_marks.ok

Patch 7.4.635
问题:       If no NL or CR is found in the first block of a file then the
	    'fileformat' may be set to "mac". (Issue 77)
解决方案:   Check if a CR was found. (eswald)
相关文件:   src/fileio.c

Patch 7.4.636
问题:       A search with end offset gets stuck at end of file. (Gary Johnson)
解决方案:   When a search doesn't move the cursor repeat it with a higher
	    count. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test44.in, src/testdir/test44.ok

Patch 7.4.637
问题:       Incorrectly read the number of buffer for which an autocommand
	    should be registered.
解决方案:   Reverse check for "<buffer=abuf>". (Lech Lorens)
相关文件:   src/fileio.c

Patch 7.4.638
问题:       Can't build with Lua 5.3 on Windows.
解决方案:   use luaL_optinteger() instead of LuaL_optlong(). (Ken Takata)
相关文件:   src/if_lua.c

Patch 7.4.639
问题:       Combination of linebreak and conceal doesn't work well.
解决方案:   Fix the display problems. (Christian Brabandt)
相关文件:   src/screen.c, src/testdir/test88.in, src/testdir/test88.ok,
	    src/testdir/test_listlbr_utf8.in, src/testdir/test_listlbr_utf8.ok

Patch 7.4.640
问题:       After deleting characters in Insert mode such that lines are
	    joined undo does not work properly. (issue 324)
解决方案:   Use Insstart instead of Insstart_orig. (Christian Brabandt)
相关文件:   src/edit.c

Patch 7.4.641
问题:       The tabline menu was using ":999tabnew" which is now invalid.
解决方案:   Use ":$tabnew" instead. (Florian Degner)
相关文件:   src/normal.c

Patch 7.4.642
问题:       When using "gf" escaped spaces are not handled.
解决方案:   Recognize escaped spaces.
相关文件:   src/vim.h, src/window.c, src/misc2.c

Patch 7.4.643
问题:       Using the default file format for Mac files. (Issue 77)
解决方案:   Reset the try_mac counter in the right place. (Oswald)
相关文件:   src/fileio.c, src/testdir/test30.in, src/testdir/test30.ok

Patch 7.4.644
问题:       Stratus VOS doesn't have sync().
解决方案:   Use fflush(). (Karli Aurelia)
相关文件:   src/memfile.c

Patch 7.4.645
问题:       When splitting the window in a BufAdd autocommand while still in
	    the first, empty buffer the window count is wrong.
解决方案:   Do not reset b_nwindows to zero and don't increment it.
相关文件:   src/buffer.c, src/ex_cmds.c

Patch 7.4.646
问题:       ":bufdo" may start at a deleted buffer.
解决方案:   Find the first not deleted buffer. (Shane Harper)
相关文件:   src/ex_cmds2.c, src/testdir/test_command_count.in,
	    src/testdir/test_command_count.ok

Patch 7.4.647
问题:       After running the tests on MS-Windows many files differ from their
	    originals as they were checked out.
解决方案:   Use a temp directory for executing the tests. (Ken Takata, Taro
	    Muraoka)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.648 (after 7.4.647)
问题:       Tests broken on MS-Windows.
解决方案:   Delete wrong copy line. (Ken Takata)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.649
问题:       Compiler complains about ignoring return value of fwrite().
	    (Michael Jarvis)
解决方案:   Add (void).
相关文件:   src/misc2.c

Patch 7.4.650
问题:       Configure check may fail because the dl library is not used.
解决方案:   Put "-ldl" in LIBS rather than LDFLAGS. (Ozaki Kiichi)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.651 (after 7.4.582)
问题:       Can't match "%>80v" properly for multi-byte characters.
解决方案:   Multiply the character number by the maximum number of bytes in a
	    character. (Yasuhiro Matsumoto)
相关文件:   src/regexp_nfa.c

Patch 7.4.652
问题:       Xxd lacks a few features.
解决方案:   Use 8 characters for the file position.  Add the -e and -o
	    arguments. (Vadim Vygonets)
相关文件:   src/xxd/xxd.c, runtime/doc/xxd.1

Patch 7.4.653
问题:       Insert mode completion with complete() may have CTRL-L work like
	    CTRL-P.
解决方案:   Handle completion with complete() differently. (Yasuhiro
	    Matsumoto, Christian Brabandt, Hirohito Higashi)
相关文件:   src/edit.c

Patch 7.4.654
问题:       glob() and globpath() cannot include links to non-existing files.
	    (Charles Campbell)
解决方案:   Add an argument to include all links with glob(). (James McCoy)
	    Also for globpath().
相关文件:   src/vim.h, src/eval.c, src/ex_getln.c

Patch 7.4.655
问题:       Text deleted by "dit" depends on indent of closing tag.
	    (Jan Parthey)
解决方案:   Do not adjust oap->end in do_pending_operator(). (Christian
	    Brabandt)
相关文件:   src/normal.c, src/search.c, src/testdir/test53.in,
	    src/testdir/test53.ok

Patch 7.4.656 (after 7.4.654)
问题:       Missing changes for glob() in one file.
解决方案:   Add the missing changes.
相关文件:   src/misc1.c

Patch 7.4.657 (after 7.4.656)
问题:       Compiler warnings for pointer mismatch.
解决方案:   Add a typecast. (John Marriott)
相关文件:   src/misc1.c

Patch 7.4.658
问题:       'formatexpr' is evaluated too often.
解决方案:   Only invoke it when beyond the 'textwidth' column, as it is
	    documented. (James McCoy)
相关文件:   src/edit.c

Patch 7.4.659
问题:       When 'ruler' is set the preferred column is reset. (Issue 339)
解决方案:   Don't set curswant when redrawing the status lines.
相关文件:   src/option.c

Patch 7.4.660
问题:       Using freed memory when g:colors_name is changed in the colors
	    script. (oni-link)
解决方案:   Make a copy of the variable value.
相关文件:   src/syntax.c

Patch 7.4.661
问题:       Using "0 CTRL-D" in Insert mode may have CursorHoldI interfere.
	    (Gary Johnson)
解决方案:   Don't store K_CURSORHOLD as the last character. (Christian
	    Brabandt)
相关文件:   src/edit.c

Patch 7.4.662
问题:       When 'M' is in the 'cpo' option then selecting a text object in
	    parentheses does not work correctly.
解决方案:   Keep 'M' in 'cpo' when finding a match. (Hirohito Higashi)
相关文件:   src/search.c, src/testdir/Make_amiga.mak,
	    src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
	    src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
	    src/testdir/Makefile, src/testdir/test_textobjects.in,
	    src/testdir/test_textobjects.ok

Patch 7.4.663
问题:       When using netbeans a buffer is not found in another tab.
解决方案:   When 'switchbuf' is set to "usetab" then switch to another tab
	    when possible. (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.4.664
问题:       When 'compatible' is reset 'numberwidth' is set to 4, but the
	    effect doesn't show until a change is made.
解决方案:   Check if 'numberwidth' changed. (Christian Brabandt)
相关文件:   src/screen.c, src/structs.h

Patch 7.4.665
问题:       'linebreak' does not work properly with multi-byte characters.
解决方案:   Compute the pointer offset with mb_head_off().  (Yasuhiro
	    Matsumoto)
相关文件:   src/screen.c

Patch 7.4.666
问题:       There is a chance that Vim may lock up.
解决方案:   Handle timer events differently. (Aaron Burrow)
相关文件:   src/os_unix.c

Patch 7.4.667
问题:       'colorcolumn' isn't drawn in a closed fold while 'cursorcolumn'
	    is. (Carlos Pita)
解决方案:   Make it consistent. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.668
问题:       Can't use a glob pattern as a regexp pattern.
解决方案:   Add glob2regpat(). (Christian Brabandt)
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.4.669
问题:       When netbeans is active the sign column always shows up.
解决方案:   Only show the sign column once a sign has been added. (Xavier de
	    Gaye)
相关文件:   src/buffer.c, src/edit.c, src/move.c, src/netbeans.c,
	    src/screen.c, src/structs.h

Patch 7.4.670
问题:       Using 'cindent' for Javascript is less than perfect.
解决方案:   Improve indenting of continuation lines. (Hirohito Higashi)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.671 (after 7.4.665)
问题:       Warning for shadowing a variable.
解决方案:   Rename off to mb_off. (Kazunobu Kuriyama)
相关文件:   src/screen.c

Patch 7.4.672
问题:       When completing a shell command, directories in the current
	    directory are not listed.
解决方案:   When "." is not in $PATH also look in the current directory for
	    directories.
相关文件:   src/ex_getln.c, src/vim.h, src/misc1.c, src/eval.c,
	    src/os_amiga.c, src/os_msdos.c, src/os_unix.c, src/os_vms.c,
	    src/proto/os_amiga.pro, src/proto/os_msdos.pro,
	    src/proto/os_unix.pro, src/proto/os_win32.pro

Patch 7.4.673
问题:       The first syntax entry gets sequence number zero, which doesn't
	    work. (Clinton McKay)
解决方案:   Start at number one. (Bjorn Linse)
相关文件:   src/syntax.c

Patch 7.4.674 (after 7.4.672)
问题:       Missing changes in one file.
解决方案:   Also change the win32 file.
相关文件:   src/os_win32.c

Patch 7.4.675
问题:       When a FileReadPost autocommand moves the cursor inside a line it
	    gets moved back.
解决方案:   When checking whether an autocommand moved the cursor store the
	    column as well. (Christian Brabandt)
相关文件:   src/ex_cmds.c

Patch 7.4.676
问题:       On Mac, when not using the default Python framework configure
	    doesn't do the right thing.
解决方案:   Use a linker search path. (Kazunobu Kuriyama)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.677 (after 7.4.676)
问题:       Configure fails when specifying a python-config-dir. (Lcd)
解决方案:   Check if PYTHONFRAMEWORKPREFIX is set.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.678
问题:       When using --remote the directory may end up being wrong.
解决方案:   Use localdir() to find out what to do. (Xaizek)
相关文件:   src/main.c

Patch 7.4.679
问题:       Color values greater than 255 cause problems on MS-Windows.
解决方案:   Truncate to 255 colors. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.680
问题:       CTRL-W in Insert mode does not work well for multi-byte
	    characters.
解决方案:   Use mb_get_class(). (Yasuhiro Matsumoto)
相关文件:   src/edit.c, src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
	    src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
	    src/testdir/Make_vms.mms, src/testdir/Makefile,
	    src/testdir/test_erasebackword.in,
	    src/testdir/test_erasebackword.ok,

Patch 7.4.681
问题:       MS-Windows: When Vim is minimized the window height is computed
	    incorrectly.
解决方案:   When minimized use the previously computed size. (Ingo Karkat)
相关文件:   src/gui_w32.c

Patch 7.4.682
问题:       The search highlighting and match highlighting replaces the
	    cursorline highlighting, this doesn't look good.
解决方案:   Combine the highlighting. (Yasuhiro Matsumoto)
相关文件:   src/screen.c

Patch 7.4.683
问题:       Typo in the vimtutor command.
解决方案:   Fix the typo. (Corey Farwell, github pull 349)
相关文件:   vimtutor.com

Patch 7.4.684
问题:       When starting several Vim instances in diff mode, the temp files
	    used may not be unique. (Issue 353)
解决方案:   Add an argument to vim_tempname() to keep the file.
相关文件:   src/diff.c, src/eval.c, src/ex_cmds.c, src/fileio.c,
	    src/hardcopy.c, src/proto/fileio.pro, src/if_cscope.c,
	    src/memline.c, src/misc1.c, src/os_unix.c, src/quickfix.c,
	    src/spell.c

Patch 7.4.685
问题:       When there are illegal utf-8 characters the old regexp engine may
	    go past the end of a string.
解决方案:   Only advance to the end of the string. (Dominique Pelle)
相关文件:   src/regexp.c

Patch 7.4.686
问题:       "zr" and "zm" do not take a count.
解决方案:   Implement the count, restrict the fold level to the maximum
	    nesting depth.  (Marcin Szamotulski)
相关文件:   runtime/doc/fold.txt, src/normal.c

Patch 7.4.687
问题:       There is no way to use a different in Replace mode for a terminal.
解决方案:   Add t_SR. (Omar Sandoval)
相关文件:   runtime/doc/options.txt, runtime/doc/term.txt,
	    runtime/syntax/vim.vim, src/option.c, src/term.c, src/term.h

Patch 7.4.688
问题:       When "$" is in 'cpo' the popup menu isn't undrawn correctly.
	    (Issue 166)
解决方案:   When using the popup menu remove the "$".
相关文件:   src/edit.c

Patch 7.4.689
问题:       On MS-Windows, when 'autochdir' is set, diff mode with files in
	    different directories does not work. (Axel Bender)
解决方案:   Remember the current directory and use it where needed. (Christian
	    Brabandt)
相关文件:   src/main.c

Patch 7.4.690
问题:       Memory access errors when changing indent in Ex mode. Also missing
	    redraw when using CTRL-U. (Knil Ino)
解决方案:   Update pointers after calling ga_grow().
相关文件:   src/ex_getln.c

Patch 7.4.691 (after 7.4.689)
问题:       Can't build with MzScheme.
解决方案:   Change "cwd" into the global variable "start_dir".
相关文件:   src/main.c

Patch 7.4.692
问题:       Defining SOLARIS for no good reason. (Danek Duvall)
解决方案:   Remove it.
相关文件:   src/os_unix.h

Patch 7.4.693
问题:       Session file is not correct when there are multiple tab pages.
解决方案:   Reset the current window number for each tab page. (Jacob Niehus)
相关文件:   src/ex_docmd.c

Patch 7.4.694
问题:       Running tests changes the .viminfo file.
解决方案:   Disable viminfo in the text objects test.
相关文件:   src/testdir/test_textobjects.in

Patch 7.4.695
问题:       Out-of-bounds read, detected by Coverity.
解决方案:   Remember the value of cmap for the first matching encoding.  Reset
            cmap to that value if first matching encoding is going to be used.
            (Eliseo Martínez)
相关文件:   src/hardcopy.c

Patch 7.4.696
问题:       Not freeing memory when encountering an error.
解决方案:   Free the stack before returning. (Eliseo Martínez)
相关文件:   src/regexp_nfa.c

Patch 7.4.697
问题:       The filename used for ":profile" must be given literally.
解决方案:   Expand "~" and environment variables. (Marco Hinz)
相关文件:   src/ex_cmds2.c

Patch 7.4.698
问题:       Various problems with locked and fixed lists and dictionaries.
解决方案:   Disallow changing locked items, fix a crash, add tests. (Olaf
            Dabrunz)
相关文件:   src/structs.h, src/eval.c, src/testdir/test55.in,
            src/testdir/test55.ok

Patch 7.4.699
问题:       E315 when trying to delete a fold. (Yutao Yuan)
解决方案:   Make sure the fold doesn't go beyond the last buffer line.
            (Christian Brabandt)
相关文件:   src/fold.c

Patch 7.4.700
问题:       Fold can't be opened after ":move". (Ein Brown)
解决方案:   Delete the folding information and update it afterwards.
            (Christian Brabandt)
相关文件:   src/ex_cmds.c, src/fold.c, src/testdir/test45.in,
            src/testdir/test45.ok

Patch 7.4.701
问题:       Compiler warning for using uninitialized variable. (Yasuhiro
            Matsumoto)
解决方案:   Initialize it.
相关文件:   src/hardcopy.c

Patch 7.4.702
问题:       Joining an empty list does unnecessary work.
解决方案:   Let join() return early. (Marco Hinz)
相关文件:   src/eval.c

Patch 7.4.703
问题:       Compiler warning for start_dir unused when building unittests.
解决方案:   Move start_dir inside the #ifdef.
相关文件:   src/main.c

Patch 7.4.704
问题:       Searching for a character matches an illegal byte and causes
            invalid memory access. (Dominique Pelle)
解决方案:   Do not match an invalid byte when search for a character in a
            string.  Fix equivalence classes using negative numbers, which
            result in illegal bytes.
相关文件:   src/misc2.c, src/regexp.c, src/testdir/test44.in

Patch 7.4.705
问题:       Can't build with Ruby 2.2.
解决方案:   Add #ifdefs to handle the incompatible change. (Andrei Olsen)
相关文件:   src/if_ruby.c

Patch 7.4.706
问题:       Window drawn wrong when 'laststatus' is zero and there is a
            command-line window. (Yclept Nemo)
解决方案:   Set the status height a bit later. (Christian Brabandt)
相关文件:   src/window.c

Patch 7.4.707
问题:       Undo files can have their executable bit set.
解决方案:   Strip of the executable bit. (Mikael Berthe)
相关文件:   src/undo.c

Patch 7.4.708
问题:       gettext() is called too often.
解决方案:   Do not call gettext() for messages until they are actually used.
            (idea by Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.709
问题:       ":tabmove" does not work as documented.
解决方案:   Make it work consistently.  Update documentation and add tests.
            (Hirohito Higashi)
相关文件:   src/window.c, runtime/doc/tabpage.txt, src/ex_docmd.c,
            src/testdir/test62.in, src/testdir/test62.ok

Patch 7.4.710
问题:       It is not possible to make spaces visible in list mode.
解决方案:   Add the "space" item to 'listchars'. (David Bürgin, issue 350)
相关文件:   runtime/doc/options.txt, src/globals.h, src/message.h,
            src/screen.c, src/testdir/test_listchars.in,
            src/testdir/test_listchars.ok, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile

Patch 7.4.711 (after 7.4.710)
问题:       Missing change in one file.
解决方案:   Also change option.c
相关文件:   src/option.c

Patch 7.4.712 (after 7.4.710)
问题:       Missing change in another file.
解决方案:   Also change message.c
相关文件:   src/message.c

Patch 7.4.713
问题:       Wrong condition for #ifdef.
解决方案:   Change USR_EXRC_FILE2 to USR_VIMRC_FILE2. (Mikael Fourrier)
相关文件:   src/os_unix.h

Patch 7.4.714
问题:       Illegal memory access when there are illegal bytes.
解决方案:   Check the byte length of the character. (Dominique Pelle)
相关文件:   src/regexp.c

Patch 7.4.715
问题:       Invalid memory access when there are illegal bytes.
解决方案:   Get the length from the text, not from the character. (Dominique
            Pelle)
相关文件:   src/regexp_nfa.c

Patch 7.4.716
问题:       When using the 'c' flag of ":substitute" and selecting "a" or "l"
            at the prompt the flags are not remembered for ":&&". (Ingo
            Karkat)
解决方案:   Save the flag values and restore them. (Hirohito Higashi)
相关文件:   src/ex_cmds.c

Patch 7.4.717
问题:       ":let list += list" can change a locked list.
解决方案:   Check for the lock earlier. (Olaf Dabrunz)
相关文件:   src/eval.c, src/testdir/test55.in, src/testdir/test55.ok

Patch 7.4.718
问题:       Autocommands triggered by quickfix cannot get the current title
            value.
解决方案:   Set w:quickfix_title earlier. (Yannick)
            Also move the check for a title into the function.
相关文件:   src/quickfix.c

Patch 7.4.719
问题:       Overflow when adding MAXCOL to a pointer.
解决方案:   Subtract pointers instead. (James McCoy)
相关文件:   src/screen.c

Patch 7.4.720
问题:       Can't build with Visual Studio 2015.
解决方案:   Recognize the "version 14" numbers and omit /nodefaultlib when
            appropriate. (Paul Moore)
相关文件:   src/Make_mvc.mak

Patch 7.4.721
问题:       When 'list' is set Visual mode does not highlight anything in
            empty lines. (mgaleski)
解决方案:   Check the value of lcs_eol in another place. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.722
问题:       0x202f is not recognized as a non-breaking space character.
解决方案:   Add 0x202f to the list. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/message.c, src/screen.c

Patch 7.4.723
问题:       For indenting, finding the C++ baseclass can be slow.
解决方案:   Cache the result. (Hirohito Higashi)
相关文件:   src/misc1.c

Patch 7.4.724
问题:       Vim icon does not show in Windows context menu. (issue 249)
解决方案:   Load the icon in GvimExt.
相关文件:   src/GvimExt/gvimext.cpp, src/GvimExt/gvimext.h

Patch 7.4.725
问题:       ":call setreg('"', [])" reports an internal error.
解决方案:   Make the register empty. (Yasuhiro Matsumoto)
相关文件:   src/ops.c

Patch 7.4.726 (after 7.4.724)
问题:       Cannot build GvimExt.
解决方案:   Set APPVER to 5.0.  (KF Leong)
相关文件:   src/GvimExt/Makefile

Patch 7.4.727 (after 7.4.724)
问题:       Cannot build GvimExt with MingW.
解决方案:   Add -lgdi32.  (KF Leong)
相关文件:   src/GvimExt/Make_ming.mak

Patch 7.4.728
问题:       Can't build with some version of Visual Studio 2015.
解决方案:   Recognize another version 14 number. (Sinan)
相关文件:   src/Make_mvc.mak

Patch 7.4.729 (after 7.4.721)
问题:       Occasional crash with 'list' set.
解决方案:   Fix off-by-one error. (Christian Brabandt)
相关文件:   src/screen.c

Patch 7.4.730
问题:       When setting the crypt key and using a swap file, text may be
            encrypted twice or unencrypted text remains in the swap file.
            (Issue 369)
解决方案:   Call ml_preserve() before re-encrypting.  Set correct index for
            next pointer block.
相关文件:   src/memfile.c, src/memline.c, src/proto/memline.pro, src/option.c

Patch 7.4.731
问题:       The tab menu shows "Close tab" even when it doesn't work.
解决方案:   Don't show "Close tab" for the last tab. (John Marriott)
相关文件:   src/gui_w48.c, src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c

Patch 7.4.732
问题:       The cursor line is not always updated for the "O" command.
解决方案:   Reset the VALID_CROW flag. (Christian Brabandt)
相关文件:   src/normal.c

Patch 7.4.733
问题:       test_listchars breaks on MS-Windows. (Kenichi Ito)
解决方案:   Set fileformat to "unix". (Christian Brabandt)
相关文件:   src/testdir/test_listchars.in

Patch 7.4.734
问题:       ml_get error when using "p" in a Visual selection in the last
            line.
解决方案:   Change the behavior at the last line. (Yukihiro Nakadaira)
相关文件:   src/normal.c, src/ops.c, src/testdir/test94.in,
            src/testdir/test94.ok

Patch 7.4.735
问题:       Wrong argument for sizeof().
解决方案:   Use a pointer argument. (Chris Hall)
相关文件:   src/eval.c

Patch 7.4.736
问题:       Invalid memory access.
解决方案:   Avoid going over the end of a NUL terminated string. (Dominique
            Pelle)
相关文件:   src/regexp.c

Patch 7.4.737
问题:       On MS-Windows vimgrep over arglist doesn't work (Issue 361)
解决方案:   Only escape backslashes in ## expansion when it is not used as the
            path separator. (James McCoy)
相关文件:   src/ex_docmd.c

Patch 7.4.738 (after 7.4.732)
问题:       Can't compile without the syntax highlighting feature.
解决方案:   Add #ifdef around use of w_p_cul. (Hirohito Higashi)
相关文件:   src/normal.c, src/screen.c

Patch 7.4.739
问题:       In a string "\U" only takes 4 digits, while after CTRL-V U eight
            digits can be used.
解决方案:   Make "\U" also take eight digits. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.4.740
问题:       ":1quit" works like ":.quit". (Bohr Shaw)
解决方案:   Don't exit Vim when a range is specified. (Christian Brabandt)
相关文件:   src/ex_docmd.c, src/testdir/test13.in, src/testdir/test13.ok

Patch 7.4.741
问题:       When using += with ":set" a trailing comma is not recognized.
            (Issue 365)
解决方案:   Don't add a second comma. Add a test. (partly by Christian
            Brabandt)
相关文件:   src/option.c, src/testdir/test_set.in, src/testdir/test_set.ok,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.742
问题:       Cannot specify a vertical split when loading a buffer for a
            quickfix command.
解决方案:   Add the "vsplit" value to 'switchbuf'. (Brook Hong)
相关文件:   runtime/doc/options.txt, src/buffer.c, src/option.h

Patch 7.4.743
问题:       "p" in Visual mode causes an unexpected line split.
解决方案:   Advance the cursor first. (Yukihiro Nakadaira)
相关文件:   src/ops.c, src/testdir/test94.in, src/testdir/test94.ok

Patch 7.4.744
问题:       No tests for Ruby and Perl.
解决方案:   Add minimal tests. (Ken Takata)
相关文件:   src/testdir/test_perl.in, src/testdir/test_perl.ok,
            src/testdir/test_ruby.in, src/testdir/test_ruby.ok,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.745
问题:       The entries added by matchaddpos() are returned by getmatches()
            but can't be set with setmatches(). (Lcd)
解决方案:   Fix setmatches(). (Christian Brabandt)
相关文件:   src/eval.c, src/testdir/test63.in, src/testdir/test63.ok

Patch 7.4.746
问题:       ":[count]tag" is not always working. (cs86661)
解决方案:   Set cur_match a bit later. (Hirohito Higashi)
相关文件:   src/tag.c,

Patch 7.4.747
问题:       ":cnext" may jump to the wrong column when setting
            'virtualedit=all' (cs86661)
解决方案:   Reset the coladd field. (Hirohito Higashi)
相关文件:   src/quickfix.c

Patch 7.4.748 (after 7.4.745)
问题:       Buffer overflow.
解决方案:   Make the buffer larger. (Kazunobu Kuriyama)
相关文件:   src/eval.c

Patch 7.4.749 (after 7.4.741)
问题:       For some options two consecutive commas are OK. (Nikolai Pavlov)
解决方案:   Add the P_ONECOMMA flag.
相关文件:   src/option.c

Patch 7.4.750
问题:       Cannot build with clang 3.5 on Cygwin with perl enabled.
解决方案:   Strip "-fdebug-prefix-map" in configure. (Ken Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.751
问题:       It is not obvious how to enable the address sanitizer.
解决方案:   Add commented-out flags in the Makefile. (Dominique Pelle)
            Also add missing test targets.
相关文件:   src/Makefile

Patch 7.4.752
问题:       Unicode 8.0 not supported.
解决方案:   Update tables for Unicode 8.0.  Avoid E36 when running the script.
            (James McCoy)
相关文件:   runtime/tools/unicode.vim, src/mbyte.c

Patch 7.4.753
问题:       Appending in Visual mode with 'linebreak' set does not work
            properly.  Also when 'selection' is "exclusive". (Ingo Karkat)
解决方案:   Recalculate virtual columns. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok, src/testdir/test_listlbr_utf8.in,
            src/testdir/test_listlbr_utf8.ok

Patch 7.4.754
问题:       Using CTRL-A in Visual mode does not work well. (Gary Johnson)
解决方案:   Make it increment all numbers in the Visual area. (Christian
            Brabandt)
相关文件:   runtime/doc/change.txt, src/normal.c, src/ops.c,
            src/proto/ops.pro, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.755
问题:       It is not easy to count the number of characters.
解决方案:   Add the skipcc argument to strchars(). (Hirohito Higashi, Ken
            Takata)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/testdir/test_utf8.in,
            src/testdir/test_utf8.ok

Patch 7.4.756
问题:       Can't use strawberry Perl 5.22 x64 on MS-Windows.
解决方案:   Add new defines and #if. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak, src/if_perl.xs

Patch 7.4.757
问题:       Cannot detect the background color of a terminal.
解决方案:   Add T_RBG to request the background color if possible. (Lubomir
            Rintel)
相关文件:   src/main.c, src/term.c, src/term.h, src/proto/term.pro

Patch 7.4.758
问题:       When 'conceallevel' is 1 and quitting the command-line window with
            CTRL-C the first character ':' is erased.
解决方案:   Reset 'conceallevel' in the command-line window. (Hirohito
            Higashi)
相关文件:   src/ex_getln.c

Patch 7.4.759
问题:       Building with Lua 5.3 doesn't work, symbols have changed.
解决方案:   Use the new names for the new version. (Felix Schnizlein)
相关文件:   src/if_lua.c

Patch 7.4.760
问题:       Spelling mistakes are not displayed after ":syn spell".
解决方案:   Force a redraw after ":syn spell" command. (Christian Brabandt)
相关文件:   src/syntax.c

Patch 7.4.761 (after 7.4.757)
问题:       The request-background termcode implementation is incomplete.
解决方案:   Add the missing pieces.
相关文件:   src/option.c, src/term.c

Patch 7.4.762 (after 7.4.757)
问题:       Comment for may_req_bg_color() is wrong. (Christ van Willegen)
解决方案:   Rewrite the comment.
相关文件:   src/term.c

Patch 7.4.763 (after 7.4.759)
问题:       Building with Lua 5.1 doesn't work.
解决方案:   Define lua_replace and lua_remove. (KF Leong)
相关文件:   src/if_lua.c

Patch 7.4.764 (after 7.4.754)
问题:       test_increment fails on MS-Windows. (Ken Takata)
解决方案:   Clear Visual mappings. (Taro Muraoka)
相关文件:   src/testdir/test_increment.in

Patch 7.4.765 (after 7.4.754)
问题:       CTRL-A and CTRL-X in Visual mode do not always work well.
解决方案:   Improvements for increment and decrement. (Christian Brabandt)
相关文件:   src/normal.c, src/ops.c, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.766 (after 7.4.757)
问题:       Background color check does not work on Tera Term.
解决方案:   Also recognize ST as a termination character. (Hirohito Higashi)
相关文件:   src/term.c

Patch 7.4.767
问题:       --remote-tab-silent can fail on MS-Windows.
解决方案:   Use single quotes to avoid problems with backslashes. (Idea by
            Weiyong Mao)
相关文件:   src/main.c

Patch 7.4.768
问题:       :diffoff only works properly once.
解决方案:   Also make :diffoff work when used a second time. (Olaf Dabrunz)
相关文件:   src/diff.c

Patch 7.4.769 (after 7.4 768)
问题:       Behavior of :diffoff is not tested.
解决方案:   Add a bit of testing. (Olaf Dabrunz)
相关文件:   src/testdir/test47.in, src/testdir/test47.ok

Patch 7.4.770 (after 7.4.766)
问题:       Background color response with transparency is not ignored.
解决方案:   Change the way escape sequences are recognized. (partly by
            Hirohito Higashi)
相关文件:   src/ascii.h, src/term.c

Patch 7.4.771
问题:       Search does not handle multi-byte character at the start position
            correctly.
解决方案:   Take byte size of character into account. (Yukihiro Nakadaira)
相关文件:   src/search.c, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_search_mbyte.in,
            src/testdir/test_search_mbyte.ok

Patch 7.4.772
问题:       Racket 6.2 is not supported on MS-Windows.
解决方案:   Check for the "racket" subdirectory. (Weiyong Mao)
相关文件:   src/Make_mvc.mak, src/if_mzsch.c

Patch 7.4.773
问题:       'langmap' is used in command-line mode when checking for mappings.
            Issue 376.
解决方案:   Do not use 'langmap' in command-line mode. (Larry Velazquez)
相关文件:   src/getchar.c, src/testdir/test_mapping.in,
            src/testdir/test_mapping.ok

Patch 7.4.774
问题:       When using the CompleteDone autocommand event it's difficult to
            get to the completed items.
解决方案:   Add the v:completed_items variable. (Shougo Matsu)
相关文件:   runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/edit.c,
            src/eval.c, src/macros.h, src/proto/eval.pro, src/vim.h

Patch 7.4.775
问题:       It is not possible to avoid using the first item of completion.
解决方案:   Add the "noinsert" and "noselect" values to 'completeopt'. (Shougo
            Matsu)
相关文件:   runtime/doc/options.txt, src/edit.c, src/option.c

Patch 7.4.776
问题:       Equivalence class for 'd' does not work correctly.
解决方案:   Fix 0x1e0f and 0x1d0b. (Dominique Pelle)
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.4.777
问题:       The README file doesn't look nice on github.
解决方案:   Add a markdown version of the README file.
相关文件:   Filelist, README.md

Patch 7.4.778
问题:       Coverity warns for uninitialized variable.
解决方案:   Change condition of assignment.
相关文件:   src/ops.c

Patch 7.4.779
问题:       Using CTRL-A in a line without a number moves the cursor. May
            cause a crash when at the start of the line. (Urtica Dioica)
解决方案:   Do not move the cursor if no number was changed.
相关文件:   src/ops.c

Patch 7.4.780
问题:       Compiler complains about uninitialized variable and clobbered
            variables.
解决方案:   Add Initialization.  Make variables static.
相关文件:   src/ops.c, src/main.c

Patch 7.4.781
问题:       line2byte() returns one less when 'bin' and 'noeol' are set.
解决方案:   Only adjust the size for the last line. (Rob Wu)
相关文件:   src/memline.c

Patch 7.4.782
问题:       Still a few problems with CTRL-A and CTRL-X in Visual mode.
解决方案:   Fix the reported problems. (Christian Brabandt)
相关文件:   src/charset.c, src/eval.c, src/ex_cmds.c, src/ex_getln.c,
            src/misc2.c, src/normal.c, src/ops.c, src/option.c,
            src/proto/charset.pro, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.783
问题:       copy_chars() and copy_spaces() are inefficient.
解决方案:   Use memset() instead. (Dominique Pelle)
相关文件:   src/ex_getln.c, src/misc2.c, src/ops.c, src/proto/misc2.pro,
            src/screen.c

Patch 7.4.784
问题:       Using both "noinsert" and "noselect" in 'completeopt' does not
            work properly.
解决方案:   Change the ins_complete() calls. (Ozaki Kiichi)
相关文件:   src/edit.c

Patch 7.4.785
问题:       On some systems automatically adding the missing EOL causes
            problems. Setting 'binary' has too many side effects.
解决方案:   Add the 'fixeol' option, default on. (Pavel Samarkin)
相关文件:   src/buffer.c, src/fileio.c, src/memline.c, src/netbeans.c,
            src/ops.c, src/option.c, src/option.h, src/os_unix.c,
            src/os_win32.c, src/structs.h, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_fixeol.in,
            src/testdir/test_fixeol.ok, runtime/doc/options.txt,
            runtime/optwin.vim

Patch 7.4.786
问题:       It is not possible for a plugin to adjust to a changed setting.
解决方案:   Add the OptionSet autocommand event. (Christian Brabandt)
相关文件:   runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/eval.c,
            src/fileio.c, src/option.c, src/proto/eval.pro,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok, src/vim.h

Patch 7.4.787 (after 7.4.786)
问题:       snprintf() isn't available everywhere.
解决方案:   Use vim_snprintf(). (Ken Takata)
相关文件:   src/option.c

Patch 7.4.788 (after 7.4.787)
问题:       Can't build without the crypt feature. (John Marriott)
解决方案:   Add #ifdef's.
相关文件:   src/option.c

Patch 7.4.789 (after 7.4.788)
问题:       Using freed memory and crash. (Dominique Pelle)
解决方案:   Correct use of pointers. (Hirohito Higashi)
相关文件:   src/option.c

Patch 7.4.790 (after 7.4.786)
问题:       Test fails when the autochdir feature is not available.  Test
            output contains the test script.
解决方案:   Check for the autochdir feature. (Kazunobu Kuriyama)  Only write
            the relevant test output.
相关文件:   src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 7.4.791
问题:       The buffer list can be very long.
解决方案:   Add an argument to ":ls" to specify the type of buffer to list.
            (Marcin Szamotulski)
相关文件:   runtime/doc/windows.txt, src/buffer.c, src/ex_cmds.h

Patch 7.4.792
问题:       Can only conceal text by defining syntax items.
解决方案:   Use matchadd() to define concealing. (Christian Brabandt)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_docmd.c,
            src/proto/window.pro, src/screen.c, src/structs.h,
            src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_match_conceal.in,
            src/testdir/test_match_conceal.ok, src/window.c

Patch 7.4.793
问题:       Can't specify when not to ring the bell.
解决方案:   Add the 'belloff' option. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, src/edit.c, src/ex_getln.c,
            src/hangulin.c, src/if_lua.c, src/if_mzsch.c, src/if_tcl.c,
            src/message.c, src/misc1.c, src/normal.c, src/option.c,
            src/option.h, src/proto/misc1.pro, src/search.c, src/spell.c

Patch 7.4.794
问题:       Visual Studio 2015 is not recognized.
解决方案:   Add the version numbers to the makefile. (Taro Muraoka)
相关文件:   src/Make_mvc.mak

Patch 7.4.795
问题:       The 'fixeol' option is not copied to a new window.
解决方案:   Copy the option value. (Yasuhiro Matsumoto)
相关文件:   src/option.c

Patch 7.4.796
问题:       Warning from 64 bit compiler.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/ops.c

Patch 7.4.797
问题:       Crash when using more lines for the command line than
            'maxcombine'.
解决方案:   Use the correct array index.  Also, do not try redrawing when
            exiting.  And use screen_Columns instead of Columns.
相关文件:   src/screen.c

Patch 7.4.798 (after 7.4.753)
问题:       Repeating a change in Visual mode does not work as expected.
            (Urtica Dioica)
解决方案:   Make redo in Visual mode work better. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.799
问题:       Accessing memory before an allocated block.
解决方案:   Check for not going before the start of a pattern. (Dominique
            Pelle)
相关文件:   src/fileio.c

Patch 7.4.800
问题:       Using freed memory when triggering CmdUndefined autocommands.
解决方案:   Set pointer to NULL. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.4.801 (after 7.4.769)
问题:       Test for ":diffoff" doesn't catch all potential problems.
解决方案:   Add a :diffthis and a :diffoff command. (Olaf Dabrunz)
相关文件:   src/testdir/test47.in

Patch 7.4.802
问题:       Using "A" in Visual mode while 'linebreak' is set is not tested.
解决方案:   Add a test for this, verifies the problem is fixed. (Ingo Karkat)
相关文件:   src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.803
问题:       C indent does not support C11 raw strings. (Mark Lodato)
解决方案:   Do not change indent inside the raw string.
相关文件:   src/search.c, src/misc1.c, src/edit.c, src/ops.c,
            src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.804
问题:       Xxd doesn't have a license notice.
解决方案:   Add license as indicated by Juergen.
相关文件:   src/xxd/xxd.c

Patch 7.4.805
问题:       The ruler shows "Bot" even when there are only filler lines
            missing. (Gary Johnson)
解决方案:   Use "All" when the first line and one filler line are visible.
相关文件:   src/buffer.c

Patch 7.4.806
问题:       CTRL-A in Visual mode doesn't work properly with "alpha" in
            'nrformats'.
解决方案:   Make it work. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.807 (after 7.4.798)
问题:       After CTRL-V CTRL-A mode isn't updated. (Hirohito Higashi)
解决方案:   Clear the command line or update the displayed command.
相关文件:   src/normal.c

Patch 7.4.808
问题:       On MS-Windows 8 IME input doesn't work correctly.
解决方案:   Read console input before calling MsgWaitForMultipleObjects().
            (vim-jp, Nobuhiro Takasaki)
相关文件:   src/os_win32.c

Patch 7.4.809 (after 7.4.802)
问题:       Test is duplicated.
解决方案:   Roll back 7.4.802.
相关文件:   src/testdir/test39.in, src/testdir/test39.ok

Patch 7.4.810
问题:       With a sequence of commands using buffers in diff mode E749 is
            given. (itchyny)
解决方案:   Skip unloaded buffer. (Hirohito Higashi)
相关文件:   src/diff.c

Patch 7.4.811
问题:       Invalid memory access when using "exe 'sc'".
解决方案:   Avoid going over the end of the string. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.4.812
问题:       Gcc sanitizer complains about using a NULL pointer to memmove().
解决方案:   Only call memmove when there is something to move. (Vittorio
            Zecca)
相关文件:   src/memline.c

Patch 7.4.813
问题:       It is not possible to save and restore character search state.
解决方案:   Add getcharsearch() and setcharsearch().  (James McCoy)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/proto/search.pro,
            src/search.c, src/testdir/test_charsearch.in,
            src/testdir/test_charsearch.ok, src/testdir/Makefile,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms

Patch 7.4.814
问题:       Illegal memory access with "sy match a fold".
解决方案:   Check for empty string. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 7.4.815
问题:       Invalid memory access when doing ":call g:".
解决方案:   Check for an empty name. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.4.816
问题:       Invalid memory access when doing ":fun X(".
解决方案:   Check for missing ')'. (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.4.817
问题:       Invalid memory access in file_pat_to_reg_pat().
解决方案:   Use vim_isspace() instead of checking for a space only. (Dominique
            Pelle)
相关文件:   src/fileio.c

Patch 7.4.818
问题:       'linebreak' breaks c% if the last Visual selection was block.
            (Chris Morganiser, Issue 389)
解决方案:   Handle Visual block mode differently. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.819
问题:       Beeping when running the tests.
解决方案:   Fix 41 beeps. (Roland Eggner)
相关文件:   src/testdir/test17.in, src/testdir/test29.in,
            src/testdir/test4.in, src/testdir/test61.in,
            src/testdir/test82.in, src/testdir/test83.in,
            src/testdir/test90.in, src/testdir/test95.in,
            src/testdir/test_autoformat_join.in

Patch 7.4.820
问题:       Invalid memory access in file_pat_to_reg_pat.
解决方案:   Avoid looking before the start of a string. (Dominique Pelle)
相关文件:   src/fileio.c

Patch 7.4.821
问题:       Coverity reports a few problems.
解决方案:   Avoid the warnings. (Christian Brabandt)
相关文件:   src/ex_docmd.c, src/option.c, src/screen.c

Patch 7.4.822
问题:       More problems reported by coverity.
解决方案:   Avoid the warnings. (Christian Brabandt)
相关文件:   src/os_unix.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_getln.c, src/fold.c, src/gui.c, src/gui_w16.c,
            src/gui_w32.c, src/if_cscope.c, src/if_xcmdsrv.c, src/move.c,
            src/normal.c, src/regexp.c, src/syntax.c, src/ui.c, src/window.c

Patch 7.4.823
问题:       Cursor moves after CTRL-A on alphabetic character.
解决方案:   (Hirohito Higashi, test by Christian Brabandt)
相关文件:   src/testdir/test_increment.in, src/testdir/test_increment.ok,
            src/ops.c

Patch 7.4.824 (after 7.4.813)
问题:       Can't compile without the multi-byte feature. (John Marriott)
解决方案:   Add #ifdef.
相关文件:   src/eval.c

Patch 7.4.825
问题:       Invalid memory access for ":syn keyword x a[".
解决方案:   Do not skip over the NUL. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 7.4.826
问题:       Compiler warnings and errors.
解决方案:   Make it build properly without the multi-byte feature.
相关文件:   src/eval.c, src/search.c

Patch 7.4.827
问题:       Not all test targets are in the Makefile.
解决方案:   Add the missing targets.
相关文件:   src/Makefile

Patch 7.4.828
问题:       Crash when using "syn keyword x c". (Dominique Pelle)
解决方案:   Initialize the keyword table. (Raymond Ko, PR 397)
相关文件:   src/syntax.c

Patch 7.4.829
问题:       Crash when clicking in beval balloon. (Travis Lebsock)
解决方案:   Use PostMessage() instead of DestroyWindow(). (Raymond Ko, PR 298)
相关文件:   src/gui_w32.c

Patch 7.4.830
问题:       Resetting 'encoding' when doing ":set all&" causes problems.
            (Bjorn Linse) Display is not updated.
解决方案:   Do not reset 'encoding'. Do a full redraw.
相关文件:   src/option.c

Patch 7.4.831
问题:       When expanding `=expr` on the command line and encountering an
            error, the command is executed anyway.
解决方案:   Bail out when an error is detected.
相关文件:   src/misc1.c

Patch 7.4.832
问题:       $HOME in `=$HOME . '/.vimrc'` is expanded too early.
解决方案:   Skip over `=expr` when expanding environment names.
相关文件:   src/misc1.c

Patch 7.4.833
问题:       More side effects of ":set all&" are missing. (Björn Linse)
解决方案:   Call didset_options() and add didset_options2() to collect more
            side effects to take care of.  Still not everything...
相关文件:   src/option.c

Patch 7.4.834
问题:       gettabvar() doesn't work after Vim start. (Szymon Wrozynski)
解决方案:   Handle first window in tab still being NULL. (Christian Brabandt)
相关文件:   src/eval.c, src/testdir/test91.in, src/testdir/test91.ok

Patch 7.4.835
问题:       Comparing utf-8 sequences does not handle different byte sizes
            correctly.
解决方案:   Get the byte size of each character. (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.4.836
问题:       Accessing uninitialized memory.
解决方案:   Add missing calls to init_tv(). (Dominique Pelle)
相关文件:   src/eval.c

Patch 7.4.837
问题:       Compiler warning with MSVC compiler when using +sniff.
解决方案:   Use Sleep() instead of _sleep(). (Tux)
相关文件:   src/if_sniff.c

Patch 7.4.838 (after 7.4.833)
问题:       Can't compile without the crypt feature. (John Marriott)
解决方案:   Add #ifdef.
相关文件:   src/option.c

Patch 7.4.839
问题:       Compiler warning on 64-bit system.
解决方案:   Add cast to int. (Mike Williams)
相关文件:   src/search.c

Patch 7.4.840 (after 7.4.829)
问题:       Tooltip window stays open.
解决方案:   Send a WM_CLOSE message. (Jurgen Kramer)
相关文件:   src/gui_w32.c

Patch 7.4.841
问题:       Can't compile without the multi-byte feature. (John Marriott)
解决方案:   Add more #ifdef's.
相关文件:   src/option.c

Patch 7.4.842 (after 7.4.840)
问题:       Sending too many messages to close the balloon.
解决方案:   Only send a WM_CLOSE message. (Jurgen Kramer)
相关文件:   src/gui_w32.c

Patch 7.4.843 (after 7.4.835)
问题:       Still possible to go beyond the end of a string.
解决方案:   Check for NUL also in second string. (Dominique Pelle)
相关文件:   src/misc2.c

Patch 7.4.844
问题:       When '#' is in 'isident' the is# comparator doesn't work.
解决方案:   Don't use vim_isIDc(). (Yasuhiro Matsumoto)
相关文件:   src/eval.c, src/testdir/test_comparators.in,
            src/testdir/test_comparators.ok, src/testdir/Makefile,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms

Patch 7.4.845
问题:       Compiler warning for possible loss of data.
解决方案:   Add a type cast. (Erich Ritz)
相关文件:   src/misc1.c

Patch 7.4.846
问题:       Some GitHub users don't know how to use issues.
解决方案:   Add a file that explains the basics of contributing.
相关文件:   Filelist, CONTRIBUTING.md

Patch 7.4.847
问题:       "vi)d" may leave a character behind.
解决方案:   Skip over multi-byte character. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.4.848
问题:       CTRL-A on hex number in Visual block mode is incorrect.
解决方案:   Account for the "0x". (Hirohito Higashi)
相关文件:   src/charset.c, src/testdir/test_increment.in,
            src/testdir/test_increment.ok

Patch 7.4.849
问题:       Moving the cursor in Insert mode starts new undo sequence.
解决方案:   Add CTRL-G U to keep the undo sequence for the following cursor
            movement command. (Christian Brabandt)
相关文件:   runtime/doc/insert.txt, src/edit.c, src/testdir/test_mapping.in,
            src/testdir/test_mapping.ok

Patch 7.4.850 (after 7.4.846)
问题:       <Esc> does not show up.
解决方案:   Use &gt; and &lt;. (Kazunobu Kuriyama)
相关文件:   CONTRIBUTING.md

Patch 7.4.851
问题:       Saving and restoring the console buffer does not work properly.
解决方案:   Instead of ReadConsoleOutputA/WriteConsoleOutputA use
            CreateConsoleScreenBuffer and SetConsoleActiveScreenBuffer.
            (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.852
问题:       On MS-Windows console Vim uses ANSI APIs for keyboard input and
            console output, it cannot input/output Unicode characters.
解决方案:   Use Unicode APIs for console I/O. (Ken Takata, Yasuhiro Matsumoto)
相关文件:   src/os_win32.c, src/ui.c, runtime/doc/options.txt

Patch 7.4.853
问题:       "zt" in diff mode does not always work properly. (Gary Johnson)
解决方案:   Don't count filler lines twice. (Christian Brabandt)
相关文件:   src/move.c

Patch 7.4.854 (after 7.4.850)
问题:       Missing information about runtime files.
解决方案:   Add section about runtime files. (Christian Brabandt)
相关文件:   CONTRIBUTING.md

Patch 7.4.855
问题:       GTK: font glitches for combining characters
解决方案:   Use pango_shape_full() instead of pango_shape(). (luchr, PR #393)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.856
问题:       "zt" still doesn't work well with filler lines. (Gary Johnson)
解决方案:   Check for filler lines above the cursor. (Christian Brabandt)
相关文件:   src/move.c

Patch 7.4.857
问题:       Dragging the current tab with the mouse doesn't work properly.
解决方案:   Take the current tabpage index into account. (Hirohito Higashi)
相关文件:   src/normal.c

Patch 7.4.858
问题:       It's a bit clumsy to execute a command on a list of matches.
解决方案:   Add the ":ldo", ":lfdo", ":cdo" and ":cfdo" commands. (Yegappan
            Lakshmanan)
相关文件:   runtime/doc/cmdline.txt, runtime/doc/editing.txt,
            runtime/doc/index.txt, runtime/doc/quickfix.txt,
            runtime/doc/tabpage.txt, runtime/doc/windows.txt, src/ex_cmds.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_os2.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile, src/testdir/test_cdo.in,
            src/testdir/test_cdo.ok

Patch 7.4.859
问题:       Vim doesn't recognize all htmldjango files.
解决方案:   Recognize a comment. (Daniel Hahler, PR #410)
相关文件:   runtime/filetype.vim

Patch 7.4.860
问题:       Filetype detection is outdated.
解决方案:   Include all recent and not-so-recent changes.
相关文件:   runtime/filetype.vim

Patch 7.4.861 (after 7.4.855)
问题:       pango_shape_full() is not always available.
解决方案:   Add a configure check.
相关文件:   src/configure.in, src/auto/configure, src/config.h.in,
            src/gui_gtk_x11.c

Patch 7.4.862 (after 7.4.861)
问题:       Still problems with pango_shape_full() not available.
解决方案:   Change AC_TRY_COMPILE to AC_TRY_LINK.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.863 (after 7.4.856)
问题:       plines_nofill() used without the diff feature.
解决方案:   Define PLINES_NOFILL().
相关文件:   src/macros.h, src/move.c

Patch 7.4.864 (after 7.4.858)
问题:       Tiny build fails.
解决方案:   Put qf_ items inside #ifdef.
相关文件:   src/ex_docmd.c

Patch 7.4.865
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize.
相关文件:   src/ex_cmds2.c

Patch 7.4.866
问题:       Crash when changing the 'tags' option from a remote command.
            (Benjamin Fritz)
解决方案:   Instead of executing messages immediately, use a queue, like for
            netbeans. (James Kolb)
相关文件:   src/ex_docmd.c, src/getchar.c, src/gui_gtk_x11.c, src/gui_w48.c,
            src/gui_x11.c, src/if_xcmdsrv.c, src/misc2.c, src/os_unix.c,
            src/proto/if_xcmdsrv.pro, src/proto/misc2.pro, src/macros.h

Patch 7.4.867 (after 7.4.866)
问题:       Can't build on MS-Windows. (Taro Muraoka)
解决方案:   Adjust #ifdef.
相关文件:   src/misc2.c

Patch 7.4.868
问题:       'smarttab' is also effective when 'paste' is enabled. (Alexander
            Monakov)
解决方案:   Disable 'smarttab' when 'paste' is set. (Christian Brabandt)
            Do the same for 'expandtab'.
相关文件:   src/option.c, src/structs.h

Patch 7.4.869
问题:       MS-Windows: scrolling may cause text to disappear when using an
            Intel GPU.
解决方案:   Call GetPixel(). (Yohei Endo)
相关文件:   src/gui_w48.c

Patch 7.4.870
问题:       May get into an invalid state when using getchar() in an
            expression mapping.
解决方案:   Anticipate mod_mask to change. (idea by Yukihiro Nakadaira)
相关文件:   src/getchar.c

Patch 7.4.871
问题:       Vim leaks memory, when 'wildignore' filters out all matches.
解决方案:   Free the files array when it becomes empty.
相关文件:   src/misc1.c

Patch 7.4.872
问题:       Not using CI services available.
解决方案:   Add configuration files for travis and appveyor. (Ken Takata,
            vim-jp, PR #401)
相关文件:   .travis.yml, appveyor.yml, Filelist

Patch 7.4.873 (after 7.4.866)
问题:       Compiler warning for unused variable. (Tony Mechelynck)
解决方案:   Remove the variable.  Also fix int vs long_u mixup.
相关文件:   src/if_xcmdsrv.c

Patch 7.4.874
问题:       MS-Windows: When Vim runs inside another application, the size
            isn't right.
解决方案:   When in child mode compute the size differently. (Agorgianitis
            Loukas)
相关文件:   src/gui_w48.c

Patch 7.4.875
问题:       Not obvious how to contribute.
解决方案:   Add a remark about CONTRIBUTING.md to README.md
相关文件:   README.md

Patch 7.4.876
问题:       Windows7: when using vim.exe with msys or msys2, conhost.exe
            (console window provider on Windows7) will freeze or crash.
解决方案:   Make original screen buffer active, before executing external
            program.  And when the program is finished, revert to vim's one.
            (Taro Muraoka)
相关文件:   src/os_win32.c

Patch 7.4.877 (after 7.4.843)
问题:       ":find" sometimes fails. (Excanoe)
解决方案:   Compare current characters instead of previous ones.
相关文件:   src/misc2.c

Patch 7.4.878
问题:       Coverity error for clearing only one byte of struct.
解决方案:   Clear the whole struct. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.4.879
问题:       Can't see line numbers in nested function calls.
解决方案:   Add line number to the file name. (Alberto Fanjul)
相关文件:   src/eval.c

Patch 7.4.880
问题:       No build and coverage status.
解决方案:   Add links to the README file. (Christian Brabandt)
相关文件:   README.md

Patch 7.4.881 (after 7.4.879)
问题:       Test 49 fails.
解决方案:   Add line number to check of call stack.
相关文件:   src/testdir/test49.vim

Patch 7.4.882
问题:       When leaving the command line window with CTRL-C while a
            completion menu is displayed the menu isn't removed.
解决方案:   Force a screen update. (Hirohito Higashi)
相关文件:   src/edit.c

Patch 7.4.883 (after 7.4.818)
问题:       Block-mode replace works characterwise instead of blockwise after
            column 147. (Issue #422)
解决方案:   Set Visual mode. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.884
问题:       Travis also builds on a tag push.
解决方案:   Filter out tag pushes. (Kenichi Ito)
相关文件:   .travis.yml

Patch 7.4.885
问题:       When doing an upwards search without wildcards the search fails if
            the initial directory doesn't exist.
解决方案:   Fix the non-wildcard case. (Stefan Kempf)
相关文件:   src/misc2.c

Patch 7.4.886 (after 7.4.876)
问题:       Windows7: Switching screen buffer causes flicker when using
            system().
解决方案:   Instead of actually switching screen buffer, duplicate the handle.
            (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.887
问题:       Using uninitialized memory for regexp with back reference.
            (Dominique Pelle)
解决方案:   Initialize end_lnum.
相关文件:   src/regexp_nfa.c

Patch 7.4.888
问题:       The OptionSet autocommands are not triggered from setwinvar().
解决方案:   Do not use switch_win() when not needed. (Hirohito Higashi)
相关文件:   src/eval.c

Patch 7.4.889
问题:       Triggering OptionSet from setwinvar() isn't tested.
解决方案:   Add a test. (Christian Brabandt)
相关文件:   src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 7.4.890
问题:       Build failure when using dynamic python but not python3.
解决方案:   Adjust the #if to also include DYNAMIC_PYTHON3 and UNIX.
相关文件:   src/if_python3.c

Patch 7.4.891
问题:       Indentation of array initializer is wrong.
解决方案:   Avoid that calling find_start_rawstring() changes the position
            returned by find_start_comment(), add a test. (Hirohito Higashi)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.892
问题:       On MS-Windows the iconv DLL may have a different name.
解决方案:   Also try libiconv2.dll and libiconv-2.dll. (Yasuhiro Matsumoto)
相关文件:   src/mbyte.c

Patch 7.4.893
问题:       C indenting is wrong below a "case (foo):" because it is
            recognized as a C++ base class construct.  Issue #38.
解决方案:   Check for the case keyword.
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.894
问题:       vimrun.exe is picky about the number of spaces before -s.
解决方案:   Skip all spaces. (Cam Sinclair)
相关文件:   src/vimrun.c

Patch 7.4.895
问题:       Custom command line completion does not work for a command
            containing digits.
解决方案:   Skip over the digits. (suggested by Yasuhiro Matsumoto)
相关文件:   src/ex_docmd.c

Patch 7.4.896
问题:       Editing a URL, which netrw should handle, doesn't work.
解决方案:   Avoid changing slashes to backslashes. (Yasuhiro Matsumoto)
相关文件:   src/fileio.c, src/os_mswin.c

Patch 7.4.897
问题:       Freeze and crash when there is a sleep in a remote command.
            (Karl Yngve Lervåg)
解决方案:   Remove a message from the queue before dealing with it. (James
            Kolb)
相关文件:   src/if_xcmdsrv.c

Patch 7.4.898
问题:       The 'fixendofline' option is set on with ":edit".
解决方案:   Don't set the option when clearing a buffer. (Yasuhiro Matsumoto)
相关文件:   src/buffer.c

Patch 7.4.899
问题:       README file is not optimal.
解决方案:   Move buttons, update some text. (closes #460)
相关文件:   README.txt, README.md

Patch 7.4.900 (after 7.4.899)
问题:       README file can still be improved
解决方案:   Add a couple of links. (Christian Brabandt)
相关文件:   README.md

Patch 7.4.901
问题:       When a BufLeave autocommand changes folding in a way it syncs
            undo, undo can be corrupted.
解决方案:   Prevent undo sync. (Jacob Niehus)
相关文件:   src/popupmnu.c

Patch 7.4.902
问题:       Problems with using the MS-Windows console.
解决方案:   Revert patches 7.4.851, 7.4.876 and 7.4.886 until we find a better
            solution. (suggested by Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.903
问题:       MS-Windows: When 'encoding' differs from the current code page,
            expanding wildcards may cause illegal memory access.
解决方案:   Allocate a longer buffer. (Ken Takata)
相关文件:   src/misc1.c

Patch 7.4.904
问题:       Vim does not provide .desktop files.
解决方案:   Include and install .desktop files. (James McCoy, closes #455)
相关文件:   Filelist, runtime/vim.desktop, runtime/gvim.desktop, src/Makefile

Patch 7.4.905
问题:       Python interface can produce error "vim.message' object has no
            attribute 'isatty'".
解决方案:   Add dummy isatty(), readable(), etc. (closes #464)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.906
问题:       On MS-Windows the viminfo file is (always) given the hidden
            attribute. (raulnac)
解决方案:   Check the hidden attribute in a different way. (Ken Takata)
相关文件:   src/ex_cmds.c, src/os_win32.c, src/os_win32.pro

Patch 7.4.907
问题:       Libraries for dynamically loading interfaces can only be defined
            at compile time.
解决方案:   Add options to specify the dll names. (Kazuki Sakamoto,
            closes #452)
相关文件:   runtime/doc/if_lua.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_pyth.txt, runtime/doc/if_ruby.txt,
            runtime/doc/options.txt, src/if_lua.c, src/if_perl.xs,
            src/if_python.c, src/if_python3.c, src/if_ruby.c, src/option.c,
            src/option.h

Patch 7.4.908 (after 7.4.907)
问题:       Build error with MingW compiler. (Cesar Romani)
解决方案:   Change #if into #ifdef.
相关文件:   src/if_perl.xs

Patch 7.4.909 (after 7.4.905)
问题:       "make install" fails.
解决方案:   Only try installing desktop files if the destination directory
            exists.
相关文件:   src/Makefile

Patch 7.4.910 (after 7.4.905)
问题:       Compiler complains about type punned pointer.
解决方案:   Use another way to increment the ref count.
相关文件:   src/if_py_both.h

Patch 7.4.911
问题:       t_Ce and t_Cs are documented but not supported. (Hirohito Higashi)
解决方案:   Define the options.
相关文件:   src/option.c

Patch 7.4.912
问题:       Wrong indenting for C++ constructor.
解决方案:   Recognize ::.  (Anhong)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 7.4.913
问题:       No utf-8 support for the hangul input feature.
解决方案:   Add utf-8 support. (Namsh)
相关文件:   src/gui.c, src/hangulin.c, src/proto/hangulin.pro, src/screen.c,
            src/ui.c, runtime/doc/hangulin.txt, src/feature.h

Patch 7.4.914
问题:       New compiler warning: logical-not-parentheses
解决方案:   Silence the warning.
相关文件:   src/term.c

Patch 7.4.915
问题:       When removing from 'path' and then adding, a comma may go missing.
            (Malcolm Rowe)
解决方案:   Fix the check for P_ONECOMMA. (closes #471)
相关文件:   src/option.c, src/testdir/test_options.in,
            src/testdir/test_options.ok

Patch 7.4.916
问题:       When running out of memory while copying a dict memory may be
            freed twice. (ZyX)
解决方案:   Do not call the garbage collector when running out of memory.
相关文件:   src/misc2.c

Patch 7.4.917
问题:       Compiler warning for comparing signed and unsigned.
解决方案:   Add a type cast.
相关文件:   src/hangulin.c

Patch 7.4.918
问题:       A digit in an option name has problems.
解决方案:   Rename 'python3dll' to 'pythonthreedll'.
相关文件:   src/option.c, src/option.h, runtime/doc/options.txt

Patch 7.4.919
问题:       The dll options are not in the options window.
解决方案:   Add the dll options.  And other fixes.
相关文件:   runtime/optwin.vim

Patch 7.4.920
问题:       The rubydll option is not in the options window.
解决方案:   Add the rubydll option.
相关文件:   runtime/optwin.vim

Patch 7.4.921 (after 7.4.906)
问题:       Missing proto file update. (Randall W. Morris)
解决方案:   Add the missing line for mch_ishidden.
相关文件:   src/proto/os_win32.pro

Patch 7.4.922
问题:       Leaking memory with ":helpt {dir-not-exists}".
解决方案:   Free dirname. (Dominique Pelle)
相关文件:   src/ex_cmds.c

Patch 7.4.923
问题:       Prototypes not always generated.
解决方案:   Change #if to OR with PROTO.
相关文件:   src/window.c

Patch 7.4.924
问题:       DEVELOPER_DIR gets reset by configure.
解决方案:   Do not reset DEVELOPER_DIR when there is no --with-developer-dir
            argument. (Kazuki Sakamoto, closes #482)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.925
问题:       User may yank or put using the register being recorded in.
解决方案:   Add the recording register in the message. (Christian Brabandt,
            closes #470)
相关文件:   runtime/doc/options.txt, runtime/doc/repeat.txt, src/ops.c,
            src/option.h, src/screen.c

Patch 7.4.926
问题:       Completing the longest match doesn't work properly with multi-byte
            characters.
解决方案:   When using multi-byte characters use another way to find the
            longest match. (Hirohito Higashi)
相关文件:   src/ex_getln.c, src/testdir/test_utf8.in, src/testdir/test_utf8.ok

Patch 7.4.927
问题:       Ruby crashes when there is a runtime error.
解决方案:   Use ruby_options() instead of ruby_process_options(). (Damien)
相关文件:   src/if_ruby.c

Patch 7.4.928
问题:       A clientserver message interrupts handling keys of a mapping.
解决方案:   Have mch_inchar() send control back to WaitForChar when it is
            interrupted by server message. (James Kolb)
相关文件:   src/os_unix.c

Patch 7.4.929
问题:       "gv" after paste selects one character less if 'selection' is
            "exclusive".
解决方案:   Increment the end position. (Christian Brabandt)
相关文件:   src/normal.c, src/testdir/test94.in, src/testdir/test94.ok

Patch 7.4.930
问题:       MS-Windows: Most users appear not to like the window border.
解决方案:   Remove WS_EX_CLIENTEDGE. (Ian Halliday)
相关文件:   src/gui_w32.c

Patch 7.4.931 (after 7.4.929)
问题:       Test 94 fails on some systems.
解决方案:   Set 'encoding' to utf-8.
相关文件:   src/testdir/test94.in

Patch 7.4.932 (after 7.4.926)
问题:       test_utf8 has confusing dummy command.
解决方案:   Use a real command instead of a colon.
相关文件:   src/testdir/test_utf8.in

Patch 7.4.933 (after 7.4.926)
问题:       Crash when using longest completion match.
解决方案:   Fix array index.
相关文件:   src/ex_getln.c

Patch 7.4.934
问题:       Appveyor also builds on a tag push.
解决方案:   Add a skip_tags line. (Kenichi Ito, closes #489)
相关文件:   appveyor.yml

Patch 7.4.935 (after 7.4.932)
问题:       test_utf8 fails on MS-Windows when executed with gvim.
解决方案:   Use the insert flag on feedkeys() to put the string before the
            ":" that was already read when checking for available chars.
相关文件:   src/testdir/test_utf8.in

Patch 7.4.936
问题:       Crash when dragging with the mouse.
解决方案:   Add safety check for NULL pointer. Check mouse position for valid
            value. (Hirohito Higashi)
相关文件:   src/window.c, src/term.c

Patch 7.4.937
问题:       Segfault reading uninitialized memory.
解决方案:   Do not read match \z0, it does not exist. (Marius Gedminas, closes
            #497)
相关文件:   src/regexp_nfa.c

Patch 7.4.938
问题:       X11 and GTK have more mouse buttons than Vim supports.
解决方案:   Recognize more mouse buttons. (Benoit Pierre, closes #498)
相关文件:   src/gui_gtk_x11.c, src/gui_x11.c

Patch 7.4.939
问题:       Memory leak when encountering a syntax error.
解决方案:   Free the memory. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.4.940
问题:       vt52 terminal codes are not correct.
解决方案:   Move entries outside of #if. (Random)  Adjustments based on
            documented codes.
相关文件:   src/term.c

Patch 7.4.941
问题:       There is no way to ignore case only for tag searches.
解决方案:   Add the 'tagcase' option. (Gary Johnson)
相关文件:   runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/tagsrch.txt, runtime/doc/usr_29.txt,
            runtime/optwin.vim, src/Makefile, src/buffer.c, src/option.c,
            src/option.h, src/structs.h, src/tag.c,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/test_tagcase.in, src/testdir/test_tagcase.ok

Patch 7.4.942 (after 7.4.941)
问题:       test_tagcase breaks for small builds.
解决方案:   Bail out of the test early. (Hirohito Higashi)
相关文件:   src/testdir/test_tagcase.in

Patch 7.4.943
问题:       Tests are not run.
解决方案:   Add test_writefile to makefiles. (Ken Takata)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.944
问题:       Writing tests for Vim script is hard.
解决方案:   Add assertEqual(), assertFalse() and assertTrue() functions.  Add
            the v:errors variable.  Add the runtest script. Add a first new
            style test script.
相关文件:   src/eval.c, src/vim.h, src/misc2.c, src/testdir/Makefile,
            src/testdir/runtest.vim, src/testdir/test_assert.vim,
            runtime/doc/eval.txt

Patch 7.4.945 (after 7.4.944)
问题:       New style testing is incomplete.
解决方案:   Add the runtest script to the list of distributed files.
            Add the new functions to the function overview.
            Rename the functions to match Vim function style.
            Move undolevels testing into a new style test script.
相关文件:   Filelist, runtime/doc/usr_41.txt, runtime/doc/eval.txt,
            src/testdir/test_assert.vim, src/testdir/Makefile,
            src/testdir/test_undolevels.vim, src/testdir/test100.in,
            src/testdir/test100.ok

Patch 7.4.946 (after 7.4.945)
问题:       Missing changes in source file.
解决方案:   Include changes to the eval.c file.
相关文件:   src/eval.c

Patch 7.4.947
问题:       Test_listchars fails with MingW. (Michael Soyka)
解决方案:   Add the test to the ones that need the fileformat fixed.
            (Christian Brabandt)
相关文件:   src/testdir/Make_ming.mak

Patch 7.4.948
问题:       Can't build when the insert_expand feature is disabled.
解决方案:   Add #ifdefs. (Dan Pasanen, closes #499)
相关文件:   src/eval.c, src/fileio.c

Patch 7.4.949
问题:       When using 'colorcolumn' and there is a sign with a fullwidth
            character the highlighting is wrong. (Andrew Stewart)
解决方案:   Only increment vcol when in the right state. (Christian Brabandt)
相关文件:   src/screen.c, src/testdir/test_listlbr_utf8.in,
            src/testdir/test_listlbr_utf8.ok

Patch 7.4.950
问题:       v:errors is not initialized.
解决方案:   Initialize it to an empty list. (Thinca)
相关文件:   src/eval.c

Patch 7.4.951
问题:       Sorting number strings does not work as expected. (Luc Hermitte)
解决方案:   Add the "N" argument to sort()
相关文件:   src/eval.c, runtime/doc/eval.txt, src/testdir/test_alot.vim,
            src/testdir/test_sort.vim, src/testdir/Makefile

Patch 7.4.952
问题:       'lispwords' is tested in the old way.
解决方案:   Make a new style test for 'lispwords'.
相关文件:   src/testdir/test_alot.vim, src/testdir/test_lispwords.vim,
            src/testdir/test100.in, src/testdir/test100.ok,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.953
问题:       When a test script navigates to another buffer the .res file is
            created with the wrong name.
解决方案:   Use the "testname" for the .res file. (Damien)
相关文件:   src/testdir/runtest.vim

Patch 7.4.954
问题:       When using Lua there may be a crash. (issue #468)
解决方案:   Avoid using an uninitialized tv. (Yukihiro Nakadaira)
相关文件:   src/if_lua.c

Patch 7.4.955
问题:       Vim doesn't recognize .pl6 and .pod6 files.
解决方案:   Recognize them as perl6 and pod6. (Mike Eve, closes #511)
相关文件:   runtime/filetype.vim

Patch 7.4.956
问题:       A few more file name extensions not recognized.
解决方案:   Add .asciidoc, .bzl, .gradle, etc.
相关文件:   runtime/filetype.vim

Patch 7.4.957
问题:       Test_tagcase fails when using another language than English.
解决方案:   Set the messages language to C. (Kenichi Ito)
相关文件:   src/testdir/test_tagcase.in

Patch 7.4.958
问题:       Vim checks if the directory "$TMPDIR" exists.
解决方案:   Do not check if the name starts with "$".
相关文件:   src/fileio.c

Patch 7.4.959
问题:       When setting 'term' the clipboard ownership is lost.
解决方案:   Do not call clip_init(). (James McCoy)
相关文件:   src/term.c

Patch 7.4.960
问题:       Detecting every version of nmake is clumsy.
解决方案:   Use a tiny C program to get the version of _MSC_VER. (Ken Takata)
相关文件:   src/Make_mvc.mak

Patch 7.4.961
问题:       Test107 fails in some circumstances.
解决方案:   When using "zt", "zb" and "z=" recompute the fraction.
相关文件:   src/normal.c, src/window.c, src/proto/window.pro

Patch 7.4.962
问题:       Cannot run the tests with gvim.  Cannot run individual new tests.
解决方案:   Add the -f flag. Add new test targets in Makefile.
相关文件:   src/Makefile, src/testdir/Makefile

Patch 7.4.963
问题:       test_listlbr_utf8 sometimes fails.
解决方案:   Don't use a literal multibyte character but <C-V>uXXXX. Do not
            dump the screen highlighting. (Christian Brabandt, closes #518)
相关文件:   src/testdir/test_listlbr_utf8.in, src/testdir/test_listlbr_utf8.ok

Patch 7.4.964
问题:       Test 87 doesn't work in a shadow directory.
解决方案:   Handle the extra subdirectory. (James McCoy, closes #515)
相关文件:   src/testdir/test87.in

Patch 7.4.965
问题:       On FreeBSD /dev/fd/ files are special.
解决方案:   Use is_dev_fd_file() also for FreeBSD. (Derek Schrock, closes #521)
相关文件:   src/fileio.c

Patch 7.4.966
问题:       Configure doesn't work with a space in a path.
解决方案:   Put paths in quotes. (James McCoy, closes #525)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.967
问题:       Cross compilation on MS-windows doesn't work well.
解决方案:   Tidy up cross compilation across architectures with Visual Studio.
            (Mike Williams)
相关文件:   src/Make_mvc.mak

Patch 7.4.968
问题:       test86 and test87 are flaky in Appveyor.
解决方案:   Reduce the count from 8 to 7. (suggested by ZyX)
相关文件:   src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.969
问题:       Compiler warnings on Windows x64 build.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/option.c

Patch 7.4.970
问题:       Rare crash in getvcol(). (Timo Mihaljov)
解决方案:   Check for the buffer being NULL in init_preedit_start_col.
            (Hirohito Higashi, Christian Brabandt)
相关文件:   src/mbyte.c

Patch 7.4.971
问题:       The asin() function can't be used.
解决方案:   Sort the function table properly. (Watiko)
相关文件:   src/eval.c

Patch 7.4.972
问题:       Memory leak when there is an error in setting an option.
解决方案:   Free the saved value (Christian Brabandt)
相关文件:   src/option.c

Patch 7.4.973
问题:       When pasting on the command line line breaks result in literal
            <CR> characters. This makes pasting a long file name difficult.
解决方案:   Skip the characters.
相关文件:   src/ex_getln.c, src/ops.c

Patch 7.4.974
问题:       When using :diffsplit the cursor jumps to the first line.
解决方案:   Put the cursor on the line related to where the cursor was before
            the split.
相关文件:   src/diff.c

Patch 7.4.975
问题:       Using ":sort" on a very big file sometimes causes text to be
            corrupted. (John Beckett)
解决方案:   Copy the line into a buffer before calling ml_append().
相关文件:   src/ex_cmds.c

Patch 7.4.976
问题:       When compiling Vim for MSYS2 (linked with msys-2.0.dll), the Win32
            clipboard is not enabled.
解决方案:   Recognize MSYS like CYGWIN. (Ken Takata)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.977
问题:       'linebreak' does not work properly when using "space" in
            'listchars'.
解决方案:   (Hirohito Higashi, Christian Brabandt)
相关文件:   src/screen.c, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok

Patch 7.4.978
问题:       test_cdo fails when using another language than English.
解决方案:   Set the language to C. (Dominique Pelle, Kenichi Ito)
相关文件:   src/testdir/test_cdo.in

Patch 7.4.979
问题:       When changing the crypt key the blocks read from disk are not
            decrypted.
解决方案:   Also call ml_decrypt_data() when mf_old_key is set. (Ken Takata)
相关文件:   src/memfile.c

Patch 7.4.980
问题:       Tests for :cdo, :ldo, etc. are outdated.
解决方案:   Add new style tests for these commands. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/test_cdo.in, src/testdir/test_cdo.ok,
            src/testdir/test_cdo.vim

Patch 7.4.981
问题:       An error in a test script goes unnoticed.
解决方案:   Source the test script inside try/catch. (Hirohito Higashi)
相关文件:   src/testdir/runtest.vim

Patch 7.4.982
问题:       Keeping the list of tests updated is a hassle.
解决方案:   Move the list to a separate file, so that it only needs to be
            updated in one place.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/Make_all.mak

Patch 7.4.983
问题:       Executing one test after "make testclean" doesn't work.
解决方案:   Add a dependency on test1.out.
相关文件:   src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile,
            src/testdir/Make_all.mak

Patch 7.4.984
问题:       searchpos() always starts searching in the first column, which is
            not what some people expect. (Brett Stahlman)
解决方案:   Add the 'z' flag: start at the specified column.
相关文件:   src/vim.h, src/eval.c, src/search.c,
            src/testdir/test_searchpos.vim, src/testdir/test_alot.vim,
            runtime/doc/eval.txt

Patch 7.4.985
问题:       Can't build with Ruby 2.3.0.
解决方案:   Use the new TypedData_XXX macro family instead of Data_XXX. Use
            TypedData. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.4.986
问题:       Test49 doesn't work on MS-Windows.  test70 is listed twice.
解决方案:   Move test49 to the group not used on Amiga and MS-Windows.
            Remove test70 from SCRIPTS_WIN32.
相关文件:   src/testdir/Make_all.mak, src/testdir/Make_dos.mak

Patch 7.4.987 (after 7.4.985)
问题:       Can't build with Ruby 1.9.2.
解决方案:   Require Rub 2.0 for defining USE_TYPEDDATA.
相关文件:   src/if_ruby.c

Patch 7.4.988 (after 7.4.982)
问题:       Default test target is test49.out.
解决方案:   Add a build rule before including Make_all.mak.
相关文件:   src/testdir/Make_dos.mak, src/testdir/Make_amiga.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_os2.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.989
问题:       Leaking memory when hash_add() fails. Coverity error 99126.
解决方案:   When hash_add() fails free the memory.
相关文件:   src/eval.c

Patch 7.4.990
问题:       Test 86 fails on AppVeyor.
解决方案:   Do some registry magic. (Ken Takata)
相关文件:   appveyor.yml

Patch 7.4.991
问题:       When running new style tests the output is not visible.
解决方案:   Add the testdir/messages file and show it.  Update the list of
            test names.
相关文件:   src/Makefile, src/testdir/Makefile, src/testdir/runtest.vim

Patch 7.4.992
问题:       Makefiles for MS-Windows in src/po are outdated.
解决方案:   Make them work. (Ken Takata, Taro Muraoka)
相关文件:   src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak,
            src/po/README_mingw.txt, src/po/README_mvc.txt

Patch 7.4.993
问题:       Test 87 is flaky on AppVeyor.
解决方案:   Reduce the minimum background thread count.
相关文件:   src/testdir/test86.in, src/testdir/test87.in

Patch 7.4.994
问题:       New style tests are not run on MS-Windows.
解决方案:   Add the new style tests.
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.995
问题:       gdk_pixbuf_new_from_inline() is deprecated.
解决方案:   Generate auto/gui_gtk_gresources.c. (Kazunobu Kuriyama,
            closes #507)
相关文件:   src/Makefile, src/auto/configure, src/config.h.in,
            src/config.mk.in, src/configure.in, src/gui_gtk.c,
            src/gui_gtk_gresources.xml, src/gui_gtk_x11.c,
            src/proto/gui_gtk_gresources.pro,
            pixmaps/stock_vim_build_tags.png, pixmaps/stock_vim_find_help.png,
            pixmaps/stock_vim_save_all.png,
            pixmaps/stock_vim_session_load.png,
            pixmaps/stock_vim_session_new.png,
            pixmaps/stock_vim_session_save.png, pixmaps/stock_vim_shell.png,
            pixmaps/stock_vim_window_maximize.png,
            pixmaps/stock_vim_window_maximize_width.png,
            pixmaps/stock_vim_window_minimize.png,
            pixmaps/stock_vim_window_minimize_width.png,
            pixmaps/stock_vim_window_split.png,
            pixmaps/stock_vim_window_split_vertical.png

Patch 7.4.996
问题:       New GDK files and testdir/Make_all.mak missing from distribution.
            PC build instructions are outdated.
解决方案:   Add the file to the list.  Update PC build instructions.
相关文件:   Filelist, Makefile

Patch 7.4.997
问题:       "make shadow" was sometimes broken.
解决方案:   Add a test for it. (James McCoy, closes #520)
相关文件:   .travis.yml

Patch 7.4.998
问题:       Running tests in shadow directory fails.  Test 49 fails.
解决方案:   Link more files for the shadow directory. Make test 49 ends up in
            the right buffer.
相关文件:   src/Makefile, src/testdir/test49.in

Patch 7.4.999
问题:       "make shadow" creates a broken link. (Tony Mechelynck)
解决方案:   Remove vimrc.unix from the list.
相关文件:   src/Makefile

Patch 7.4.1000
问题:       Test 49 is slow and doesn't work on MS-Windows.
解决方案:   Start moving parts of test 49 to test_viml.
相关文件:   src/Makefile, src/testdir/runtest.vim, src/testdir/test_viml.vim,
            src/testdir/test49.vim, src/testdir/test49.ok

Patch 7.4.1001 (after 7.4.1000)
问题:       test_viml isn't run.
解决方案:   Include change in makefile.
相关文件:   src/testdir/Make_all.mak

Patch 7.4.1002
问题:       Cannot run an individual test on MS-Windows.
解决方案:   Move the rule to run test1 downwards. (Ken Takata)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.1003
问题:       Travis could check a few more things.
解决方案:   Run autoconf on one of the builds. (James McCoy, closes #510)
            Also build with normal features.
相关文件:   .travis.yml

Patch 7.4.1004
问题:       Using Makefile when auto/config.mk does not exist results in
            warnings.
解决方案:   Use default values for essential variables.
相关文件:   src/Makefile

Patch 7.4.1005
问题:       Vim users are not always happy.
解决方案:   Make them happy.
相关文件:   src/ex_cmds.h, src/ex_cmds.c, src/proto/ex_cmds.pro

Patch 7.4.1006
问题:       The fix in patch 7.3.192 is not tested.
解决方案:   Add a test, one for each regexp engine. (Elias Diem)
相关文件:   src/testdir/test44.in, src/testdir/test44.ok,
            src/testdir/test99.in, src/testdir/test99.ok

Patch 7.4.1007
问题:       When a symbolic link points to a file in the root directory, the
            swapfile is not correct.
解决方案:   Do not try getting the full name of a file in the root directory.
            (Milly, closes #501)
相关文件:   src/os_unix.c

Patch 7.4.1008
问题:       The OS/2 code pollutes the source while nobody uses it these days.
解决方案:   Drop the support for OS/2.
相关文件:   src/feature.h, src/globals.h, src/macros.h, src/option.h,
            src/os_unix.c, src/os_unix.h, src/proto/os_unix.pro, src/vim.h,
            src/digraph.c, src/eval.c, src/ex_cmds.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/getchar.c, src/memline.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/option.c,
            src/term.c, src/ui.c, src/window.c, src/os_os2_cfg.h,
            src/Make_os2.mak, src/testdir/Make_os2.mak, src/testdir/os2.vim,
            src/INSTALL, runtime/doc/os_os2.txt

Patch 7.4.1009
问题:       There are still #ifdefs for ARCHIE.
解决方案:   Remove references to ARCHIE, the code was removed in Vim 5.
相关文件:   src/ex_cmds.c, src/ex_docmd.c, src/fileio.c, src/main.c,
            src/memline.c, src/option.c, src/term.c

Patch 7.4.1010
问题:       Some developers are unhappy while running tests.
解决方案:   Add a test and some color.
相关文件:   src/ex_cmds.c, src/testdir/test_assert.vim

Patch 7.4.1011
问题:       Can't build with Strawberry Perl.
解决方案:   Include stdbool.h. (Ken Takata, closes #328)
相关文件:   Filelist, src/Make_mvc.mak, src/if_perl_msvc/stdbool.h

Patch 7.4.1012
问题:       Vim overwrites the value of $PYTHONHOME.
解决方案:   Do not set $PYTHONHOME if it is already set. (Kazuki Sakamoto,
            closes #500)
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.4.1013
问题:       The local value of 'errorformat' is not used for ":lexpr" and
            ":cexpr".
解决方案:   Use the local value if it exists. (Christian Brabandt) Adjust the
            help for this.
相关文件:   runtime/doc/quickfix.txt, src/quickfix.c

Patch 7.4.1014
问题:       `fnamemodify('.', ':.')` returns an empty string in Cygwin.
解决方案:   Use CCP_RELATIVE in the call to cygwin_conv_path. (Jacob Niehus,
            closes #505)
相关文件:   src/os_unix.c

Patch 7.4.1015
问题:       The column is not restored properly when the matchparen plugin is
            used in Insert mode and the cursor is after the end of the line.
解决方案:   Set the curswant flag. (Christian Brabandt).  Also fix
            highlighting the match of the character before the cursor.
相关文件:   src/eval.c, runtime/plugin/matchparen.vim

Patch 7.4.1016
问题:       Still a few OS/2 pieces remain.
解决方案:   Delete more.
相关文件:   Filelist, README_os2.txt, testdir/todos.vim, src/xxd/Make_os2.mak

Patch 7.4.1017
问题:       When there is a backslash in an option ":set -=" doesn't work.
解决方案:   Handle a backslash better. (Jacob Niehus)  Add a new test, merge
            in old test.
相关文件:   src/testdir/test_cdo.vim, src/testdir/test_set.vim,
            src/testdir/test_alot.vim, src/option.c, src/testdir/test_set.in,
            src/testdir/test_set.ok, src/Makefile

Patch 7.4.1018 (after 7.4.1017)
问题:       Failure running tests.
解决方案:   Add missing change to list of old style tests.
相关文件:   src/testdir/Make_all.mak

Patch 7.4.1019
问题:       Directory listing of "src" is too long.
解决方案:   Rename the resources file to make it shorter.
相关文件:   src/gui_gtk_gresources.xml, src/gui_gtk_res.xml, src/Makefile,
            Filelist

Patch 7.4.1020
问题:       On MS-Windows there is no target to run tests with gvim.
解决方案:   Add the testgvim target.
相关文件:   src/Make_mvc.mak

Patch 7.4.1021
问题:       Some makefiles are outdated.
解决方案:   Add a note to warn developers.
相关文件:   src/Make_manx.mak, src/Make_bc3.mak, src/Make_bc5.mak,
            src/Make_djg.mak, src/Make_w16.mak

Patch 7.4.1022
问题:       The README file contains some outdated information.
解决方案:   Update the information about supported systems.
相关文件:   README.txt, README.md

Patch 7.4.1023
问题:       The distribution files for MS-Windows use CR-LF, which is
            inconsistent with what one gets from github.
解决方案:   Use LF in the distribution files.
相关文件:   Makefile

Patch 7.4.1024
问题:       Interfaces for MS-Windows are outdated.
解决方案:   Use Python 2.7.10, Python 3.4.4, Perl 5.22, TCL 8.6.
相关文件:   src/bigvim.bat

Patch 7.4.1025
问题:       Version in installer needs to be updated manually.
解决方案:   Generate a file with the version number. (Guopeng Wen)
相关文件:   Makefile, nsis/gvim.nsi, nsis/gvim_version.nsh

Patch 7.4.1026
问题:       When using MingW the tests do not clean up all files.  E.g. test
            17 leaves Xdir1 behind. (Michael Soyka)
解决方案:   Also delete directories, like Make_dos.mak.  Delete files after
            directories to reduce warnings.
相关文件:   src/testdir/Make_ming.mak, src/testdir/Make_dos.mak

Patch 7.4.1027
问题:       No support for binary numbers.
解决方案:   Add "bin" to 'nrformats'. (Jason Schulz)
相关文件:   runtime/doc/change.txt, runtime/doc/eval.txt,
            runtime/doc/version7.txt, src/charset.c, src/eval.c,
            src/ex_cmds.c, src/ex_getln.c, src/misc2.c, src/ops.c,
            src/option.c, src/proto/charset.pro, src/spell.c,
            src/testdir/test57.in, src/testdir/test57.ok,
            src/testdir/test58.in, src/testdir/test58.ok,
            src/testdir/test_increment.in, src/testdir/test_increment.ok,
            src/vim.h

Patch 7.4.1028
问题:       Nsis version file missing from the distribution.
解决方案:   Add the file to the list.
相关文件:   Filelist

Patch 7.4.1029 (after 7.4.1027)
问题:       test_increment fails on systems with 32 bit long.
解决方案:   Only test with 32 bits.
相关文件:   src/testdir/test_increment.in, src/testdir/test_increment.ok

Patch 7.4.1030
问题:       test49 is still slow.
解决方案:   Move more tests from old to new style.
相关文件:   src/testdir/test_viml.vim, src/testdir/test49.vim,
            src/testdir/test49.ok, src/testdir/runtest.vim

Patch 7.4.1031
问题:       Can't build with Python interface using MingW.
解决方案:   Update the Makefile. (Yasuhiro Matsumoto)
相关文件:   src/INSTALLpc.txt, src/Make_cyg_ming.mak

Patch 7.4.1032
问题:       message from assert_false() does not look nice.
解决方案:   Handle missing sourcing_name. Use right number of spaces. (Watiko)
            Don't use line number if it's zero.
相关文件:   src/eval.c

Patch 7.4.1033
问题:       Memory use on MS-Windows is very conservative.
解决方案:   Use the global memory status to estimate amount of memory.
            (Mike Williams)
相关文件:   src/os_win32.c, src/os_win32.h, src/proto/os_win32.pro

Patch 7.4.1034
问题:       There is no test for the 'backspace' option behavior.
解决方案:   Add a test. (Hirohito Higashi)
相关文件:   src/testdir/test_alot.vim, src/testdir/test_backspace_opt.vim

Patch 7.4.1035
问题:       An Ex range gets adjusted for folded lines even when the range is
            not using line numbers.
解决方案:   Only adjust line numbers for folding. (Christian Brabandt)
相关文件:   runtime/doc/fold.txt, src/ex_docmd.c

Patch 7.4.1036
问题:       Only terminals with up to 256 colors work properly.
解决方案:   Use the 256 color behavior for all terminals with 256 or more
            colors. (Robert de Bath, closes #504)
相关文件:   src/syntax.c

Patch 7.4.1037
问题:       Using "q!" when there is a modified hidden buffer does not unload
            the current buffer, resulting in the need to abandon it again.
解决方案:   When using "q!" unload the current buffer when needed. (Yasuhiro
            Matsumoto, Hirohito Higashi)
相关文件:   src/testdir/test31.in, src/testdir/test31.ok,
            runtime/doc/editing.txt, src/ex_cmds2.c, src/ex_docmd.c,
            src/gui.c, src/gui_gtk_x11.c, src/os_unix.c,
            src/proto/ex_cmds2.pro

Patch 7.4.1038
问题:       Still get a warning for a deprecated function with gdk-pixbuf
            2.31.
解决方案:   Change minimum minor version from 32 to 31.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1039 (after 7.4.1037)
问题:       Test 31 fails with small build.
解决方案:   Bail out for small build. (Hirohito Higashi)
相关文件:   src/testdir/test31.in

Patch 7.4.1040
问题:       The tee command is not available on MS-Windows.
解决方案:   Adjust tee.c for MSVC and add a makefile. (Yasuhiro Matsumoto)
相关文件:   src/tee/tee.c, src/tee/Make_mvc.mak, src/Make_mvc.mak

Patch 7.4.1041
问题:       Various small things.
解决方案:   Add file to list of distributed files.  Adjust README.  Fix typo.
相关文件:   Filelist, src/testdir/README.txt, src/testdir/test_charsearch.in,
            src/INSTALLmac.txt

Patch 7.4.1042
问题:       g-CTRL-G shows the word count, but there is no way to get the word
            count in a script.
解决方案:   Add the wordcount() function. (Christian Brabandt)
相关文件:   runtime/doc/editing.txt, runtime/doc/eval.txt,
            runtime/doc/usr_41.txt, src/eval.c, src/normal.c, src/ops.c,
            src/proto/ops.pro, src/testdir/test_wordcount.in,
            src/testdir/test_wordcount.ok, src/testdir/Make_all.mak

Patch 7.4.1043
问题:       Another small thing.
解决方案:   Now really update the Mac install text.
相关文件:   src/INSTALLmac.txt

Patch 7.4.1044 (after 7.4.1042)
问题:       Can't build without the +eval feature.
解决方案:   Add #ifdef.
相关文件:   src/ops.c

Patch 7.4.1045
问题:       Having shadow and coverage on the same build results in the source
            files not being available in the coverage view.
解决方案:   Move using shadow to the normal build.
相关文件:   .travis.yml

Patch 7.4.1046
问题:       No test coverage for menus.
解决方案:   Load the standard menus and check there is no error.
相关文件:   src/testdir/test_menu.vim, src/testdir/test_alot.vim

Patch 7.4.1047 (after patch 7.4.1042)
问题:       Tests fail on MS-Windows.
解决方案:   Set 'selection' to inclusive.
相关文件:   src/testdir/test_wordcount.in

Patch 7.4.1048 (after patch 7.4.1047)
问题:       Wordcount test still fail on MS-Windows.
解决方案:   Set 'fileformat' to "unix".
相关文件:   src/testdir/test_wordcount.in

Patch 7.4.1049 (after patch 7.4.1048)
问题:       Wordcount test still fails on MS-Windows.
解决方案:   Set 'fileformats' to "unix".
相关文件:   src/testdir/test_wordcount.in

Patch 7.4.1050
问题:       Warning for unused var with tiny features. (Tony Mechelynck)
解决方案:   Add #ifdef.  Use vim_snprintf().  Reduce number of statements.
相关文件:   src/ops.c

Patch 7.4.1051
问题:       Segfault when unletting "count".
解决方案:   Check for readonly and locked first. (Dominique Pelle)
            Add a test.
相关文件:   src/eval.c, src/testdir/test_alot.vim, src/testdir/test_unlet.vim

Patch 7.4.1052
问题:       Illegal memory access with weird syntax command. (Dominique Pelle)
解决方案:   Check for column past end of line.
相关文件:   src/syntax.c

Patch 7.4.1053
问题:       Insufficient testing for quickfix commands.
解决方案:   Add a new style quickfix test. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/test_quickfix.vim

Patch 7.4.1054
问题:       Illegal memory access.
解决方案:   Check for missing pattern. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 7.4.1055
问题:       Running "make newtests" in src/testdir has no output.
解决方案:   List the messages file when a test fails. (Christian Brabandt)
            Update the list of tests.
相关文件:   src/Makefile, src/testdir/Makefile

Patch 7.4.1056
问题:       Don't know why finding spell suggestions is slow.
解决方案:   Add some code to gather profiling information.
相关文件:   src/spell.c

Patch 7.4.1057
问题:       Typos in the :options window.
解决方案:   Fix the typos. (Dominique Pelle)
相关文件:   runtime/optwin.vim

Patch 7.4.1058
问题:       It is not possible to test code that is only reached when memory
            allocation fails.
解决方案:   Add the alloc_fail() function.  Try it out with :vimgrep.
相关文件:   runtime/doc/eval.txt, src/globals.h, src/eval.c, src/quickfix.c,
            src/misc2.c, src/proto/misc2.pro, src/testdir/test_quickfix.vim

Patch 7.4.1059
问题:       Code will never be executed.
解决方案:   Remove the code.
相关文件:   src/quickfix.c

Patch 7.4.1060
问题:       Instructions for writing tests are outdated.
解决方案:   Mention Make_all.mak.  Add steps for new style tests.
相关文件:   src/testdir/README.txt

Patch 7.4.1061
问题:       Compiler warning for ignoring return value of fwrite().
解决方案:   Do use the return value. (idea: Charles Campbell)
相关文件:   src/misc2.c, src/proto/misc2.pro

Patch 7.4.1062
问题:       Building with Ruby on MS-Windows requires a lot of arguments.
解决方案:   Make it simpler. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1063
问题:       TCL_VER_LONG and DYNAMIC_TCL_VER are not set when building with
            Cygwin and MingW.
解决方案:   Add TCL_VER_LONG and DYNAMIC_TCL_VER to the makefile. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1064
问题:       When a spell file has single letter compounding creating
            suggestions takes an awful long time.
解决方案:   Add the NOCOMPOUNDSUGS flag.
相关文件:   runtime/doc/spell.txt, src/spell.c

Patch 7.4.1065
问题:       Cannot use the "dll" options on MS-Windows.
解决方案:   Support the options on all platforms.  Use the built-in name as
            the default, so that it's clear what Vim is looking for.
相关文件:   src/if_python.c, src/if_python3.c, src/if_lua.c, src/if_perl.xs,
            src/if_ruby.c, src/option.c, runtime/doc/options.txt, src/Makefile

Patch 7.4.1066 (after 7.4.1065)
问题:       Build fails on MS-Windows.
解决方案:   Adjust the #ifdefs for "dll" options.
相关文件:   src/option.h

Patch 7.4.1067 (after 7.4.1065)
问题:       Can't build with MingW and Python on MS-Windows.
解决方案:   Move the build flags to CFLAGS.
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1068
问题:       Wrong way to check for unletting internal variables.
解决方案:   Use a better way. (Olaf Dabrunz)
相关文件:   src/testdir/test_unlet.c, src/eval.c

Patch 7.4.1069
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/misc2.c

Patch 7.4.1070
问题:       The Tcl interface can't be loaded dynamically on Unix.
解决方案:   Make it possible to load it dynamically. (Ken Takata)
相关文件:   runtime/doc/if_tcl.txt, runtime/doc/options.txt,
            runtime/doc/quickref.txt, runtime/optwin.vim, src/Makefile,
            src/config.h.in, src/configure.in, src/auto/configure,
            src/if_tcl.c, src/option.c, src/option.h

Patch 7.4.1071
问题:       New style tests are executed in arbitrary order.
解决方案:   Sort the test function names. (Hirohito Higashi)
            Fix the quickfix test that depended on the order.
相关文件:   src/testdir/runtest.vim, src/testdir/test_quickfix.vim

Patch 7.4.1072
问题:       Increment test is old style.
解决方案:   Make the increment test a new style test. (Hirohito Higashi)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_increment.in, src/testdir/test_increment.ok,
            src/testdir/test_increment.vim

Patch 7.4.1073
问题:       Alloc_id depends on numbers, may use the same one twice.  It's not
            clear from the number what it's for.
解决方案:   Use an enum.  Add a function to lookup the enum value from the
            name.
相关文件:   src/misc2.c, src/vim.h, src/alloc.h, src/globals.h,
            src/testdir/runtest.vim, src/proto/misc2.pro,
            src/testdir/test_quickfix.vim

Patch 7.4.1074
问题:       Warning from VC2015 compiler.
解决方案:   Add a type cast. (Mike Williams)
相关文件:   src/gui_dwrite.cpp

Patch 7.4.1075
问题:       Crash when using an invalid command.
解决方案:   Fix generating the error message. (Dominique Pelle)
相关文件:   src/ex_docmd.c

Patch 7.4.1076
问题:       CTRL-A does not work well in right-left mode.
解决方案:   Remove reversing the line, add a test. (Hirohito Higashi)
相关文件:   src/ops.c, src/testdir/test_increment.vim

Patch 7.4.1077
问题:       The build instructions for MS-Windows are incomplete.
解决方案:   Add explanations for how to build with various interfaces. (Ken
            Takata)
相关文件:   src/INSTALLpc.txt

Patch 7.4.1078
问题:       MSVC: "make clean" doesn't cleanup in the tee directory.
解决方案:   Add the commands to cleanup tee. (Erich Ritz)
相关文件:   src/Make_mvc.mak

Patch 7.4.1079 (after 7.4.1073)
问题:       New include file missing from distribution.  Missing changes to
            quickfix code.
解决方案:   Add alloc.h to the list of distributed files. Use the enum in
            quickfix code.
相关文件:   Filelist, src/quickfix.c

Patch 7.4.1080
问题:       VS2015 has a function HandleToLong() that is shadowed by the macro
            that Vim defines.
解决方案:   Do not define HandleToLong() for MSVC version 1400 and later.
            (Mike Williams)
相关文件:   src/gui_w32.c

Patch 7.4.1081
问题:       No test for what previously caused a crash.
解决方案:   Add test for unletting errmsg.
相关文件:   src/testdir/test_unlet.vim

Patch 7.4.1082
问题:       The Tcl interface is always skipping memory free on exit.
解决方案:   Only skip for dynamically loaded Tcl.
相关文件:   src/if_tcl.c

Patch 7.4.1083
问题:       Building GvimExt with VS2015 may fail.
解决方案:   Adjust the makefile. (Mike Williams)
相关文件:   src/GvimExt/Makefile

Patch 7.4.1084
问题:       Using "." to repeat CTRL-A in Visual mode increments the wrong
            numbers.
解决方案:   Append right size to the redo buffer. (Ozaki Kiichi)
相关文件:   src/normal.c, src/testdir/test_increment.vim

Patch 7.4.1085
问题:       The CTRL-A and CTRL-X commands do not update the '[ and '] marks.
解决方案:   (Yukihiro Nakadaira)
相关文件:   src/ops.c, src/testdir/test_marks.in, src/testdir/test_marks.ok

Patch 7.4.1086
问题:       Crash with an extremely long buffer name.
解决方案:   Limit the return value of vim_snprintf(). (Dominique Pelle)
相关文件:   src/buffer.c

Patch 7.4.1087
问题:       CTRL-A and CTRL-X do not work properly with blockwise visual
            selection if there is a mix of Tab and spaces.
解决方案:   Add OP_NR_ADD and OP_NR_SUB. (Hirohito Higashi)
相关文件:   src/testdir/test_increment.vim, src/normal.c, src/ops.c,
            src/proto/ops.pro, src/vim.h

Patch 7.4.1088
问题:       Coverity warns for uninitialized variables.  Only one is an actual
            problem.
解决方案:   Move the conditions.  Don't use endpos if handling an error.
相关文件:   src/ops.c

Patch 7.4.1089
问题:       Repeating CTRL-A doesn't work.
解决方案:   Call prep_redo_cmd(). (Hirohito Higashi)
相关文件:   src/normal.c, src/testdir/test_increment.vim

Patch 7.4.1090
问题:       No tests for :hardcopy and related options.
解决方案:   Add test_hardcopy.
相关文件:   src/testdir/test_hardcopy.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 7.4.1091
问题:       When making a change while need_wait_return is set there is a two
            second delay.
解决方案:   Do not assume the ATTENTION prompt was given when need_wait_return
            was set already.
相关文件:   src/misc1.c

Patch 7.4.1092
问题:       It is not simple to test for an exception and give a proper error
            message.
解决方案:   Add assert_exception().
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.4.1093
问题:       Typo in test goes unnoticed.
解决方案:   Fix the typo. Give error for wrong arguments to cursor().
            (partly by Hirohito Higashi) Add a test for cursor().
相关文件:   src/testdir/test_searchpos.vim, src/testdir/test_cursor_func.vim,
            src/eval.c, src/testdir/test_alot.vim

Patch 7.4.1094
问题:       Test for :hardcopy fails on MS-Windows.
解决方案:   Check for the +postscript feature.
相关文件:   src/testdir/test_hardcopy.vim

Patch 7.4.1095
问题:       Can't build GvimExt with SDK 7.1.
解决方案:   Support using setenv.bat instead of vcvars32.bat. (Ken Takata)
相关文件:   src/Make_mvc.mak, src/GvimExt/Makefile

Patch 7.4.1096
问题:       Need several lines to verify a command produces an error.
解决方案:   Add assert_fails(). (suggested by Nikolai Pavlov)
            Make the quickfix alloc test actually work.
相关文件:   src/testdir/test_quickfix.vim, src/eval.c, runtime/doc/eval.txt,
            src/misc2.c, src/alloc.h

Patch 7.4.1097
问题:       Looking up the alloc ID for tests fails.
解决方案:   Fix the line computation.  Use assert_fails() for unlet test.
相关文件:   src/testdir/runtest.vim, src/testdir/test_unlet.vim

Patch 7.4.1098
问题:       Still using old style C function declarations.
解决方案:   Always define __ARGS() to include types.  Turn a few functions
            into ANSI style to find out if this causes problems for anyone.
相关文件:   src/vim.h, src/os_unix.h, src/eval.c, src/main.c

Patch 7.4.1099
问题:       It's not easy to know if Vim supports blowfish. (Smu Johnson)
解决方案:   Add has('crypt-blowfish') and has('crypt-blowfish2').
相关文件:   src/eval.c

Patch 7.4.1100
问题:       Cygwin makefiles are unused.
解决方案:   Remove them.
相关文件:   src/GvimExt/Make_ming.mak, src/GvimExt/Make_cyg.mak,
            src/xxd/Make_ming.mak, src/xxd/Make_cyg.mak

Patch 7.4.1101
问题:       With 'rightleft' and concealing the cursor may move to the wrong
            position.
解决方案:   Compute the column differently when 'rightleft' is set. (Hirohito
            Higashi)
相关文件:   src/screen.c

Patch 7.4.1102
问题:       Debugger has no stack backtrace support.
解决方案:   Add "backtrace", "frame", "up" and "down" commands. (Alberto
            Fanjul, closes #433)
相关文件:   runtime/doc/repeat.txt, src/eval.c, src/ex_cmds2.c, src/globals.h,
            src/testdir/Make_all.mak, src/testdir/test108.in,
            src/testdir/test108.ok

Patch 7.4.1103 (after 7.4.1100)
问题:       Removed file still in distribution.
解决方案:   Remove Make_cyg.mak from the list of files.
相关文件:   Filelist

Patch 7.4.1104
问题:       Various problems building with MzScheme/Racket.
解决方案:   Make it work with new versions of Racket. (Yukihiro Nakadaira, Ken
            Takata)
相关文件:   runtime/doc/if_mzsch.txt, src/INSTALLpc.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/auto/configure,
            src/configure.in, src/if_mzsch.c

Patch 7.4.1105
问题:       When using slices there is a mixup of variable name and namespace.
解决方案:   Recognize variables that can't be a namespace. (Hirohito Higashi)
相关文件:   src/eval.c, src/testdir/test_eval.in, src/testdir/test_eval.ok

Patch 7.4.1106
问题:       The nsis script can't be used from the appveyor build.
解决方案:   Add "ifndef" to allow for variables to be set from the command
            line. Remove duplicate SetCompressor command. Support using other
            gettext binaries. (Ken Takata)  Update build instructions to use
            libintl-8.dll.
相关文件:   Makefile, nsis/gvim.nsi, src/os_win32.c, src/proto/os_win32.pro,
            src/main.c, os_w32exe.c

Patch 7.4.1107
问题:       Vim can create a directory but not delete it.
解决方案:   Add an argument to delete() to make it possible to delete a
            directory, also recursively.
相关文件:   src/fileio.c, src/eval.c, src/proto/fileio.pro,
            src/testdir/test_delete.vim, src/testdir/test_alot.vim,
            runtime/doc/eval.txt

Patch 7.4.1108
问题:       Expanding "~" halfway a file name.
解决方案:   Handle the file name as one name. (Marco Hinz)  Add a test.
            Closes #564.
相关文件:   src/testdir/test27.in, src/testdir/test27.ok,
            src/testdir/test_expand.vim, src/testdir/test_alot.vim,
            src/Makefile, src/misc2.c

Patch 7.4.1109 (after 7.4.1107)
问题:       MS-Windows doesn't have rmdir().
解决方案:   Add mch_rmdir().
相关文件:   src/os_win32.c, src/proto/os_win32.pro

Patch 7.4.1110
问题:       Test 108 fails when language is French.
解决方案:   Force English messages. (Dominique Pelle)
相关文件:   src/testdir/test108.in

Patch 7.4.1111
问题:       test_expand fails on MS-Windows.
解决方案:   Always use forward slashes.  Remove references to test27.
相关文件:   src/testdir/runtest.vim, src/testdir/test_expand.vim,
            src/testdir/Make_dos.mak, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_ming.mak

Patch 7.4.1112
问题:       When using ":next" with an illegal file name no error is reported.
解决方案:   Give an error message.
相关文件:   src/ex_cmds2.c

Patch 7.4.1113 (after 7.4.1105)
问题:       Using {ns} in variable name does not work. (lilydjwg)
解决方案:   Fix recognizing colon.  Add a test.
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1114 (after 7.4.1107)
问题:       delete() does not work well with symbolic links.
解决方案:   Recognize symbolic links.
相关文件:   src/eval.c, src/fileio.c, src/os_unix.c, src/proto/os_unix.pro,
            src/testdir/test_delete.vim, runtime/doc/eval.txt

Patch 7.4.1115
问题:       MS-Windows: make clean in testdir doesn't clean everything.
解决方案:   Add command to delete X* directories. (Ken Takata)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.1116
问题:       delete(x, 'rf') does not delete files starting with a dot.
解决方案:   Also delete files starting with a dot.
相关文件:   src/misc1.c, src/fileio.c, src/vim.h

Patch 7.4.1117 (after 7.4.1116)
问题:       No longer get "." and ".." in directory list.
解决方案:   Do not skip "." and ".." unless EW_DODOT is set.
相关文件:   src/misc1.c

Patch 7.4.1118
问题:       Tests hang in 24 line terminal.
解决方案:   Set the 'more' option off.
相关文件:   src/testdir/runtest.vim

Patch 7.4.1119
问题:       argidx() has a wrong value after ":%argdelete". (Yegappan
            Lakshmanan)
解决方案:   Correct the value of w_arg_idx.  Add a test.
相关文件:   src/ex_cmds2.c, src/testdir/test_arglist.vim,
            src/testdir/Make_all.mak

Patch 7.4.1120
问题:       delete(x, 'rf') fails if a directory is empty. (Lcd)
解决方案:   Ignore not finding matches in an empty directory.
相关文件:   src/fileio.c, src/misc1.c, src/vim.h, src/testdir/test_delete.vim

Patch 7.4.1121
问题:       test_expand leaves files behind.
解决方案:   Edit another file before deleting, otherwise the swap file
            remains.
相关文件:   src/testdir/test_expand.vim

Patch 7.4.1122
问题:       Test 92 and 93 fail when using gvim on a system with a non utf-8
            locale.
解决方案:   Avoid using .gvimrc by adding -U NONE. (Yukihiro Nakadaira)
相关文件:   src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/Makefile

Patch 7.4.1123
问题:       Using ":argadd" when there are no arguments results in the second
            argument to be the current one. (Yegappan Lakshmanan)
解决方案:   Correct the w_arg_idx value.
相关文件:   src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 7.4.1124
问题:       MS-Windows: dead key behavior is not ideal.
解决方案:   Handle dead keys differently when not in Insert or Select mode.
            (John Wellesz, closes #399)
相关文件:   src/gui_w48.c

Patch 7.4.1125
问题:       There is no perleval().
解决方案:   Add perleval(). (Damien)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/eval.c,
            src/if_perl.xs, src/proto/if_perl.pro, src/testdir/Make_all.mak,
            src/testdir/test_perl.vim

Patch 7.4.1126
问题:       Can only get the directory of the current window.
解决方案:   Add window and tab arguments to getcwd() and haslocaldir().
            (Thinca, Hirohito Higashi)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_getcwd.in, src/testdir/test_getcwd.ok,
            runtime/doc/eval.txt, patching file src/eval.c

Patch 7.4.1127
问题:       Both old and new style tests for Perl.
解决方案:   Merge the old tests with the new style tests.
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test_perl.in,
            src/testdir/test_perl.ok, src/testdir/test_perl.vim

Patch 7.4.1128
问题:       MS-Windows: delete() does not recognize junctions.
解决方案:   Add mch_isrealdir() for MS-Windows. Update mch_is_symbolic_link().
            (Ken Takata)
相关文件:   src/fileio.c, src/os_win32.c, src/proto/os_win32.pro

Patch 7.4.1129
问题:       Python None value can't be converted to a Vim value.
解决方案:   Just use zero. (Damien)
相关文件:   src/if_py_both.h, src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok,

Patch 7.4.1130
问题:       Memory leak in :vimgrep.
解决方案:   Call FreeWild(). (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 7.4.1131
问题:       New lines in the viminfo file are dropped.
解决方案:   Copy lines starting with "|".  Fix that when using :rviminfo in a
            function global variables were restored as function-local
            variables.
相关文件:   src/eval.c, src/structs.h, src/ex_cmds.c, src/misc2.c,
            src/proto/misc2.pro, src/testdir/test_viminfo.vim,
            src/testdir/Make_all.mak, src/testdir/test74.in,
            src/testdir/test74.ok

Patch 7.4.1132
问题:       Old style tests for the argument list.
解决方案:   Add more new style tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_arglist.vim, src/testdir/test_argument_0count.in,
            src/testdir/test_argument_0count.ok,
            src/testdir/test_argument_count.in, src/Makefile,
            src/testdir/test_argument_count.ok, src/testdir/Make_all.mak

Patch 7.4.1133
问题:       Generated function prototypes still have __ARGS().
解决方案:   Generate function prototypes without __ARGS().
相关文件:   src/Makefile, src/if_ruby.c, src/os_win32.c,
            src/proto/blowfish.pro, src/proto/buffer.pro,
            src/proto/charset.pro, src/proto/crypt.pro,
            src/proto/crypt_zip.pro, src/proto/diff.pro,
            src/proto/digraph.pro, src/proto/edit.pro, src/proto/eval.pro,
            src/proto/ex_cmds2.pro, src/proto/ex_cmds.pro,
            src/proto/ex_docmd.pro, src/proto/ex_eval.pro,
            src/proto/ex_getln.pro, src/proto/fileio.pro, src/proto/fold.pro,
            src/proto/getchar.pro, src/proto/gui_athena.pro,
            src/proto/gui_beval.pro, src/proto/gui_gtk_gresources.pro,
            src/proto/gui_gtk.pro, src/proto/gui_gtk_x11.pro,
            src/proto/gui_mac.pro, src/proto/gui_motif.pro,
            src/proto/gui_photon.pro, src/proto/gui.pro,
            src/proto/gui_w16.pro, src/proto/gui_w32.pro,
            src/proto/gui_x11.pro, src/proto/gui_xmdlg.pro,
            src/proto/hangulin.pro, src/proto/hardcopy.pro,
            src/proto/hashtab.pro, src/proto/if_cscope.pro,
            src/proto/if_lua.pro, src/proto/if_mzsch.pro,
            src/proto/if_ole.pro, src/proto/if_perl.pro,
            src/proto/if_perlsfio.pro, src/proto/if_python3.pro,
            src/proto/if_python.pro, src/proto/if_ruby.pro,
            src/proto/if_tcl.pro, src/proto/if_xcmdsrv.pro,
            src/proto/main.pro, src/proto/mark.pro, src/proto/mbyte.pro,
            src/proto/memfile.pro, src/proto/memline.pro, src/proto/menu.pro,
            src/proto/message.pro, src/proto/misc1.pro, src/proto/misc2.pro,
            src/proto/move.pro, src/proto/netbeans.pro, src/proto/normal.pro,
            src/proto/ops.pro, src/proto/option.pro, src/proto/os_amiga.pro,
            src/proto/os_beos.pro, src/proto/os_mac_conv.pro,
            src/proto/os_msdos.pro, src/proto/os_mswin.pro,
            src/proto/os_qnx.pro, src/proto/os_unix.pro, src/proto/os_vms.pro,
            src/proto/os_win16.pro, src/proto/os_win32.pro,
            src/proto/popupmnu.pro, src/proto/pty.pro, src/proto/quickfix.pro,
            src/proto/regexp.pro, src/proto/screen.pro, src/proto/search.pro,
            src/proto/sha256.pro, src/proto/spell.pro, src/proto/syntax.pro,
            src/proto/tag.pro, src/proto/termlib.pro, src/proto/term.pro,
            src/proto/ui.pro, src/proto/undo.pro, src/proto/version.pro,
            src/proto/winclip.pro, src/proto/window.pro,
            src/proto/workshop.pro

Patch 7.4.1134
问题:       The arglist test fails on MS-Windows.
解决方案:   Only check for failure of argedit on Unix.
相关文件:   src/testdir/test_arglist.vim

Patch 7.4.1135
问题:       One more arglist test fails on MS-Windows.
解决方案:   Don't edit "Y" after editing "y".
相关文件:   src/testdir/test_arglist.vim

Patch 7.4.1136
问题:       Wrong argument to assert_exception() causes a crash. (reported by
            Coverity)
解决方案:   Check for NULL pointer.  Add a test.
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1137
问题:       Illegal memory access when using :copen and :cclose.
解决方案:   Avoid that curbuf is invalid. (suggestion by Justin M. Keyes)
            Add a test.
相关文件:   src/window.c, src/testdir/test_quickfix.vim

Patch 7.4.1138
问题:       When running gvim in the foreground some icons are missing.
            (Taylor Venable)
解决方案:   Move the call to gui_gtk_register_resource(). (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1139
问题:       MS-Windows: getftype() returns "file" for symlink to directory.
解决方案:   Make it return "dir". (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.1140
问题:       Recognizing <sid> does not work when the language is Turkish.
            (Christian Brabandt)
解决方案:   Use MB_STNICMP() instead of STNICMP().
相关文件:   src/eval.c

Patch 7.4.1141
问题:       Using searchpair() with a skip expression that uses syntax
            highlighting sometimes doesn't work. (David Fishburn)
解决方案:   Reset next_match_idx. (Christian Brabandt)
相关文件:   src/syntax.c

Patch 7.4.1142
问题:       Cannot define keyword characters for a syntax file.
解决方案:   Add the ":syn iskeyword" command. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, runtime/doc/syntax.txt, src/buffer.c,
            src/option.c, src/structs.h, src/syntax.c,
            src/testdir/Make_all.mak, src/testdir/test_syntax.vim

Patch 7.4.1143
问题:       Can't sort on floating point numbers.
解决方案:   Add the "f" flag to ":sort".  (Alex Jakushev)  Also add the "f"
            flag to sort().
相关文件:   runtime/doc/change.txt, src/ex_cmds.c, src/testdir/test_sort.vim,
            src/testdir/test57.in, src/testdir/test57.ok, src/eval.c

Patch 7.4.1144 (after 7.4.1143)
问题:       Can't build on several systems.
解决方案:   Include float.h. (Christian Robinson, closes #570 #571)
相关文件:   src/ex_cmds.c

Patch 7.4.1145
问题:       Default features are conservative.
解决方案:   Make the default feature set for most of today's systems "huge".
相关文件:   src/feature.h, src/configure.in, src/auto/configure

Patch 7.4.1146
问题:       Can't build with Python 3 interface using MingW.
解决方案:   Update the Makefile. (Yasuhiro Matsumoto, Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1147
问题:       Conflict for "chartab". (Kazunobu Kuriyama)
解决方案:   Rename the global one to something less obvious.  Move it into
            src/chartab.c.
相关文件:   src/macros.h, src/globals.h, src/charset.c, src/main.c,
            src/option.c, src/screen.c, src/vim.h

Patch 7.4.1148
问题:       Default for MingW and Cygwin is still "normal".
解决方案:   Use "huge" as default. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1149 (after 7.4.1013)
问题:       Using the local value of 'errorformat' causes more problems than
            it solves.
解决方案:   Revert 7.4.1013.
相关文件:   runtime/doc/quickfix.txt, src/quickfix.c

Patch 7.4.1150
问题:       'langmap' applies to the first character typed in Select mode.
            (David Watson)
解决方案:   Check for SELECTMODE. (Christian Brabandt, closes #572)
            Add the 'x' flag to feedkeys().
相关文件:   src/getchar.c, src/normal.c, src/testdir/test_langmap.vim,
            src/ex_docmd.c, src/proto/ex_docmd.pro, src/testdir/Make_all.mak,
            runtime/doc/eval.txt

Patch 7.4.1151 (after 7.4.1150)
问题:       Missing change to eval.c
解决方案:   Also change feedkeys().
相关文件:   src/eval.c

Patch 7.4.1152
问题:       Langmap test fails with normal build.
解决方案:   Check for +langmap feature.
相关文件:   src/testdir/test_langmap.vim

Patch 7.4.1153
问题:       Autocommands triggered by quickfix cannot always get the current
            title value.
解决方案:   Call qf_fill_buffer() later. (Christian Brabandt)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1154
问题:       No support for JSON.
解决方案:   Add jsonencode() and jsondecode().  Also add v:false, v:true,
            v:null and v:none.
相关文件:   src/json.c, src/eval.c, src/proto.h, src/structs.h, src/vim.h,
            src/if_lua.c, src/if_mzsch.c, src/if_ruby.c, src/if_py_both.h,
            src/globals.h, src/Makefile, src/Make_bc3.mak, src/Make_bc5.mak,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_ivc.mak,
            src/Make_manx.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_sas.mak, src/Make_vms.mms, src/proto/json.pro,
            src/proto/eval.pro, src/testdir/test_json.vim,
            src/testdir/test_alot.vim, Filelist, runtime/doc/eval.txt

Patch 7.4.1155
问题:       Build with normal features fails.
解决方案:   Always define dict_lookup().
相关文件:   src/eval.c

Patch 7.4.1156
问题:       Coverity warns for NULL pointer and ignoring return value.
解决方案:   Check for NULL pointer. When dict_add() returns FAIL free the item.
相关文件:   src/json.c

Patch 7.4.1157
问题:       type() does not work for v:true, v:none, etc.
解决方案:   Add new type numbers.
相关文件:   src/eval.c, src/testdir/test_json.vim, src/testdir/test_viml.vim

Patch 7.4.1158
问题:       Still using __ARGS().
解决方案:   Remove __ARGS() from eval.c
相关文件:   src/eval.c

Patch 7.4.1159
问题:       Automatically generated function prototypes use __ARGS.
解决方案:   Remove __ARGS from osdef.sh.
相关文件:   src/osdef.sh, src/osdef1.h.in, src/osdef2.h.in

Patch 7.4.1160
问题:       No error for jsondecode('"').
解决方案:   Give an error message for missing double quote.
相关文件:   src/json.c

Patch 7.4.1161
问题:       ":argadd" without argument is supposed to add the current buffer
            name to the arglist.
解决方案:   Make it work as documented. (Coot, closes #577)
相关文件:   src/ex_cmds.h, src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 7.4.1162
问题:       Missing error number in MzScheme. (Dominique Pelle)
解决方案:   Add a proper error number.
相关文件:   src/if_mzsch.c

Patch 7.4.1163
问题:       Expressions "0 + v:true" and "'' . v:true" cause an error.
解决方案:   Return something sensible when using a special variable as a
            number or as a string. (suggested by Damien)
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1164
问题:       No tests for comparing special variables.  Error in jsondecode()
            not reported.  test_json does not work with Japanese system.
解决方案:   Set scriptencoding. (Ken Takata) Add a few more tests. Add error.
相关文件:   src/json.c, src/testdir/test_viml.vim, src/testdir/test_json.vim

Patch 7.4.1165
问题:       When defining DYNAMIC_ICONV_DLL in the makefile, the build fails.
解决方案:   Add #ifdef's. (Taro Muraoka)  Try the newer version first.
相关文件:   src/mbyte.c, src/os_win32.c

Patch 7.4.1166
问题:       Can't encode a Funcref into JSON.  jsonencode() doesn't handle the
            same list or dict twice properly.  (Nikolai Pavlov)
解决方案:   Give an error.  Reset copyID when the list or dict is finished.
相关文件:   src/json.c, src/proto/json.pro, src/testdir/test_json.vim

Patch 7.4.1167
问题:       No tests for "is" and "isnot" with the new variables.
解决方案:   Add tests.
相关文件:   src/testdir/test_viml.vim

Patch 7.4.1168
问题:       This doesn't give the right result: eval(string(v:true)). (Nikolai
            Pavlov)
解决方案:   Make the string "v:true" instead of "true".
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1169
问题:       The socket I/O is intertwined with the netbeans code.
解决方案:   Start refactoring the netbeans communication to split off the
            socket I/O.  Add the +channel feature.
相关文件:   src/channel.c, src/netbeans.c, src/proto/channel.pro,
            src/proto/netbeans.pro, src/proto/gui_w32.pro, src/gui_w32.c,
            src/eval.c, src/os_mswin.c, src/ui.c, src/macros.h, Makefile,
            src/proto.h, src/feature.h, src/os_unix.c, src/vim.h,
            src/configure.in, src/auto/configure, src/config.mk.in,
            src/config.aap.in, src/config.h.in, src/Make_bc5.mak,
            src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1170 (after 7.4.1169)
问题:       Missing changes in src/Makefile, Filelist.
解决方案:   Add the missing changes.
相关文件:   Filelist, src/Makefile

Patch 7.4.1171
问题:       Makefile dependencies are outdated.
解决方案:   Run "make depend". Add GTK resource dependencies.
相关文件:   src/Makefile

Patch 7.4.1172 (after 7.4.1169)
问题:       Configure is overly positive.
解决方案:   Insert "test".
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1173 (after 7.4.1168)
问题:       No test for new behavior of v:true et al.
解决方案:   Add a test.
相关文件:   src/testdir/test_viml.vim

Patch 7.4.1174
问题:       Netbeans contains dead code inside #ifndef INIT_SOCKETS.
解决方案:   Remove the dead code.
相关文件:   src/netbeans.c

Patch 7.4.1175 (after 7.4.1169)
问题:       Can't build with Mingw and Cygwin.
解决方案:   Remove extra "endif". (Christian J. Robinson)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1176
问题:       Missing change to proto file.
解决方案:   Update the proto file. (Charles Cooper)
相关文件:   src/proto/gui_w32.pro

Patch 7.4.1177
问题:       The +channel feature is not in :version output. (Tony Mechelynck)
解决方案:   Add the feature string.
相关文件:   src/version.c

Patch 7.4.1178
问题:       empty() doesn't work for the new special variables.
解决方案:   Make empty() work. (Damien)
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1179
问题:       test_writefile and test_viml do not delete the tempfile.
解决方案:   Delete the tempfile. (Charles Cooper)  Add DeleteTheScript().
相关文件:   src/testdir/test_writefile.in, src/testdir/test_viml.vim

Patch 7.4.1180
问题:       Crash with invalid argument to glob2regpat().
解决方案:   Check for NULL. (Justin M. Keyes, closes #596)  Add a test.
相关文件:   src/eval.c, src/testdir/test_glob2regpat.vim,
            src/testdir/test_alot.vim

Patch 7.4.1181
问题:       free_tv() can't handle special variables. (Damien)
解决方案:   Add the variable type.
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1182
问题:       Still socket code intertwined with netbeans.
解决方案:   Move code from netbeans.c to channel.c
相关文件:   src/channel.c, src/netbeans.c, src/proto/channel.pro,
            src/proto/netbeans.pro, src/gui.c, src/gui_w48.c

Patch 7.4.1183 (after 7.4.1182)
问题:       MS-Windows build is broken.
解决方案:   Remove init in wrong place.
相关文件:   src/channel.c

Patch 7.4.1184 (after 7.4.1182)
问题:       MS-Windows build is still broken.
解决方案:   Change nbsock to ch_fd.
相关文件:   src/channel.c

Patch 7.4.1185
问题:       Can't build with TCL on some systems.
解决方案:   Rename the channel_ functions.
相关文件:   src/if_tcl.c

Patch 7.4.1186
问题:       Error messages for security context are hard to translate.
解决方案:   Use one string with %s. (Ken Takata)
相关文件:   src/os_unix.c

Patch 7.4.1187
问题:       MS-Windows channel code only supports one channel.  Doesn't build
            without netbeans support.
解决方案:   Get the channel index from the socket in the message. Closes #600.
相关文件:   src/channel.c, src/netbeans.c, src/gui_w48.c,
            src/proto/channel.pro, src/proto/netbeans.pro

Patch 7.4.1188
问题:       Using older JSON standard.
解决方案:   Update the link.  Adjust the text a bit.
相关文件:   src/json.c, runtime/doc/eval.txt

Patch 7.4.1189 (after 7.4.1165)
问题:       Using another language on MS-Windows does not work. (Yongwei Wu)
解决方案:   Undo the change to try loading libintl-8.dll first.
相关文件:   src/os_win32.c

Patch 7.4.1190
问题:       On OSX the default flag for dlopen() is different.
解决方案:   Add RTLD_LOCAL in the configure check. (sv99, closes #604)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1191
问题:       The channel feature isn't working yet.
解决方案:   Add the connect(), disconnect(), sendexpr() and sendraw()
            functions.  Add initial documentation.  Add a demo server.
相关文件:   src/channel.c, src/eval.c, src/proto/channel.pro,
            src/proto/eval.pro, runtime/doc/channel.txt, runtime/doc/eval.txt,
            runtime/doc/Makefile, runtime/tools/demoserver.py

Patch 7.4.1192
问题:       Can't build with FEAT_EVAL but without FEAT_MBYTE. (John
            Marriott)
解决方案:   Add #ifdef for FEAT_MBYTE.
相关文件:   src/json.c

Patch 7.4.1193
问题:       Can't build the channel feature on MS-Windows.
解决方案:   Add #ifdef HAVE_POLL.
相关文件:   src/channel.c

Patch 7.4.1194
问题:       Compiler warning for not using return value of fwrite().
解决方案:   Return OK/FAIL. (Charles Campbell)
相关文件:   src/channel.c, src/proto/channel.pro

Patch 7.4.1195
问题:       The channel feature does not work in the MS-Windows console.
解决方案:   Add win32 console support. (Yasuhiro Matsumoto)
相关文件:   src/channel.c, src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
            src/proto/gui_w32.pro, src/proto/os_mswin.pro, src/vim.h

Patch 7.4.1196
问题:       Still using __ARGS.
解决方案:   Remove __ARGS in several files. (script by Hirohito Higashi)
相关文件:   src/arabic.c, src/buffer.c, src/charset.c, src/crypt_zip.c,
            src/diff.c, src/digraph.c, src/edit.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c

Patch 7.4.1197
问题:       Still using __ARGS.
解决方案:   Remove __ARGS in several files. (script by Hirohito Higashi)
相关文件:   src/ex_eval.c, src/ex_getln.c, src/farsi.c, src/fileio.c,
            src/fold.c, src/getchar.c, src/gui.c, src/gui_at_fs.c,
	    src/gui_at_sb.c, src/gui_athena.c, src/gui_beval.c,
	    src/gui_motif.c, src/gui_w32.c, src/gui_w48.c

Patch 7.4.1198
问题:       Still using __ARGS.
解决方案:   Remove __ARGS in several files. (script by Hirohito Higashi)
            Also remove use of HAVE_STDARG_H.
相关文件:   src/gui_x11.c, src/hangulin.c, src/hardcopy.c, src/hashtab.c,
            src/if_cscope.c, src/if_python3.c, src/if_sniff.c,
            src/if_xcmdsrv.c, src/main.c, src/mark.c, src/mbyte.c,
            src/memfile.c, src/memfile_test.c, src/memline.c, src/menu.c,
            src/message.c, src/misc1.c, src/misc2.c, src/move.c,
            src/netbeans.c, src/normal.c

Patch 7.4.1199
问题:       Still using __ARGS.
解决方案:   Remove __ARGS in several files. (script by Hirohito Higashi)
相关文件:   src/ops.c, src/option.c, src/os_amiga.c, src/os_mac_conv.c,
            src/os_unix.c, src/os_vms.c, src/os_w32exe.c, src/popupmnu.c,
            src/pty.c, src/quickfix.c, src/regexp.c, src/regexp_nfa.c,
            src/screen.c, src/search.c, src/sha256.c, src/spell.c,
            src/syntax.c, src/tag.c, src/term.c, src/termlib.c, src/ui.c,
            src/undo.c, src/version.c, src/window.c

Patch 7.4.1200
问题:       Still using __ARGS.
解决方案:   Remove __ARGS in several files. (script by Hirohito Higashi)
相关文件:   src/blowfish.c, src/ex_cmds2.c, src/ex_getln.c, src/fold.c,
            src/gui_beval.c, src/gui_w32.c, src/os_unix.c, src/os_win16.c,
            src/pty.c, src/regexp.c, src/syntax.c, src/xpm_w32.c,
            src/ex_cmds.h, src/globals.h, src/gui_at_sb.h, src/gui_beval.h,
            src/if_cscope.h, src/if_sniff.h, src/nbdebug.h, src/os_unix.h,
            src/proto.h, src/structs.h, src/vim.h, src/xpm_w32.h,
            src/if_perl.xs, src/proto/if_lua.pro, src/proto/pty.pro,
            runtime/tools/xcmdsrv_client.c,
            src/Makefile

Patch 7.4.1201
问题:       One more file still using __ARGS.
解决方案:   Remove __ARGS in the last file. (script by Hirohito Higashi)
相关文件:   src/gui_at_sb.c

Patch 7.4.1202
问题:       Still one more file still using __ARGS.
解决方案:   Remove __ARGS in the last file. (script by Hirohito Higashi)
            (closes #612)
相关文件:   src/proto/os_mac_conv.pro, src/os_mac_conv.c, src/Makefile

Patch 7.4.1203
问题:       Still more files still using __ARGS.
解决方案:   Remove __ARGS in really the last files.
相关文件:   src/proto/if_mzsch.pro, src/if_mzsch.c, src/vim.h,
            src/proto/gui_gtk_gresources.pro, src/proto/gui_mac.pro,
            src/proto/if_ole.pro, src/proto/os_qnx.pro, src/Makefile

Patch 7.4.1204
问题:       Latin1 characters cause encoding conversion.
解决方案:   Remove the characters.
相关文件:   src/gui_motif.c

Patch 7.4.1205
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/arabic.c, src/blowfish.c, src/buffer.c, src/channel.c,
            src/charset.c, src/crypt.c, src/crypt_zip.c, src/diff.c,
            src/digraph.c, src/edit.c, src/eval.c

Patch 7.4.1206
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/farsi.c, src/fileio.c

Patch 7.4.1207
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/fold.c, src/getchar.c, src/gui_at_fs.c, src/gui_athena.c,
            src/gui_at_sb.c, src/gui_beval.c, src/gui.c, src/gui_gtk.c,
            src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c

Patch 7.4.1208
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/gui_photon.c, src/gui_w32.c, src/gui_w48.c, src/gui_x11.c,
            src/hangulin.c, src/hardcopy.c, src/hashtab.c, src/if_cscope.c,
            src/if_mzsch.c, src/if_perlsfio.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_sniff.c, src/if_tcl.c,
            src/if_xcmdsrv.c, src/integration.c

Patch 7.4.1209 (after 7.4.1207)
问题:       Can't build with Athena. (Elimar Riesebieter)
解决方案:   Fix function declarations.
相关文件:   src/gui_athena.c, src/gui_x11.c, src/gui_at_sb.c, src/gui_at_fs.c

Patch 7.4.1210
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c, src/message.c

Patch 7.4.1211
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/misc1.c, src/misc2.c, src/move.c, src/netbeans.c,
            src/normal.c, src/ops.c, src/option.c

Patch 7.4.1212 (after 7.4.1207)
问题:       Can't build with Motif.
解决方案:   Fix function declaration.(Dominique Pelle)
相关文件:   src/gui_motif.c

Patch 7.4.1213
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/os_amiga.c, src/os_mac_conv.c, src/os_msdos.d, src/os_mswin.c,
            src/os_qnx.c, src/os_unix.c, src/os_vms.c, src/os_win16.c,
            src/os_win32.c, src/popupmnu.c, src/pty.c, src/quickfix.c,
            src/regexp.c, src/regexp_nfa.c, src/screen.c

Patch 7.4.1214
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/search.c, src/sha256.c, src/spell.c, src/syntax.c, src/tag.c,
            src/term.c, src/termlib.c, src/ui.c, src/undo.c

Patch 7.4.1215
问题:       Using old style function declarations.
解决方案:   Change to new style function declarations. (script by Hirohito
            Higashi)
相关文件:   src/version.c, src/winclip.c, src/window.c, src/workshop.c,
            src/xpm_w32.c, runtime/doc/doctags.c,
            runtime/tools/xcmdsrv_client.c, src/po/sjiscorr.c, src/xxd/xxd.c

Patch 7.4.1216
问题:       Still using HAVE_STDARG_H.
解决方案:   Assume it's always defined.
相关文件:   src/eval.c, src/misc2.c, src/vim.h, src/proto.h, src/configure.in,
            src/auto/configure, config.h.in, src/os_amiga.h, src/os_msdos.h,
            src/os_vms_conf.h, src/os_win32.h

Patch 7.4.1217
问题:       Execution of command on channel doesn't work yet.
解决方案:   Implement the "ex" and "normal" commands.
相关文件:   src/channel.c, src/proto/channel.pro, src/misc2.c, src/eval.c,
            src/ex_docmd.c, src/proto/ex_docmd.pro, src/feature.h

Patch 7.4.1218
问题:       Missing change in configure.  More changes for function style.
解决方案:   Avoid the typos.
相关文件:   src/configure.in, src/config.h.in, runtime/tools/ccfilter.c,
            src/os_msdos.c

Patch 7.4.1219
问题:       Build fails with +channel but without +float.
解决方案:   Add #ifdef.
相关文件:   src/ex_cmds.c

Patch 7.4.1220
问题:       Warnings for unused variables in tiny build. (Tony Mechelynck)
解决方案:   Move declarations inside #ifdef. (Hirohito Higashi)
相关文件:   src/ex_cmds.c

Patch 7.4.1221
问题:       Including netbeans and channel support in small and tiny builds.
            Build fails with some interfaces.
解决方案:   Only include these features in small build and above.  Let
            configure fail if trying to enable an interface that won't build.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1222
问题:       ":normal" command and others missing in tiny build.
解决方案:   Graduate FEAT_EX_EXTRA.
相关文件:   src/feature.h, src/charset.c, src/eval.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/getchar.c,
            src/normal.c, src/ui.c, src/version.c, src/globals.h

Patch 7.4.1223
问题:       Crash when setting v:errors to a number.
解决方案:   Free the typval without assuming its type. (Yasuhiro Matsumoto)
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1224
问题:       Build problems with GTK on BSD. (Mike Williams)
解决方案:   Don't use "$<". Skip building gui_gtk_gresources.h when it doesn't
            work. (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 7.4.1225
问题:       Still a few old style function declarations.
解决方案:   Make them new style. (Hirohito Higashi)
相关文件:   runtime/tools/blink.c, src/eval.c, src/ex_cmds2.c, src/ex_getln.c,
            src/fileio.c, src/gui_w32.c, src/gui_x11.c, src/if_perl.xs,
            src/os_unix.c, src/po/sjiscorr.c, src/pty.c

Patch 7.4.1226
问题:       GRESOURCE_HDR is unused.
解决方案:   Remove it. (Kazunobu Kuriyama)
相关文件:   src/configure.in, src/auto/configure, src/config.mk.in

Patch 7.4.1227
问题:       Compiler warnings.
解决方案:   Add UNUSED.  Add type cast. (Yegappan Lakshmanan)
相关文件:   src/getchar.c, src/os_macosx.m

Patch 7.4.1228
问题:       copy() and deepcopy() fail with special variables. (Nikolai
            Pavlov)
解决方案:   Make it work.  Add a test.  Closes #614.
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1229
问题:       "eval" and "expr" channel commands don't work yet.
解决方案:   Implement them.  Update the error numbers.  Also add "redraw".
相关文件:   src/channel.c, src/eval.c, src/json.c, src/ex_docmd.c,
            src/proto/channel.pro, src/proto/json.pro, src/proto/ex_docmd.pro,
            runtime/doc/channel.txt

Patch 7.4.1230
问题:       Win32: opening a channel may hang.  Not checking for messages
            while waiting for characters.
解决方案:   Add a zero timeout.  Call parse_queued_messages(). (Yasuhiro
            Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.1231
问题:       JSON messages are not parsed properly.
解决方案:   Queue received messages.
相关文件:   src/eval.c src/channel.c, src/json.c, src/proto/eval.pro,
            src/proto/channel.pro, src/proto/json.pro, src/structs.h

Patch 7.4.1232
问题:       Compiler warnings when the Sniff feature is enabled.
解决方案:   Add UNUSED.
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1233
问题:       Channel command may cause a crash.
解决方案:   Check for NULL argument. (Damien)
相关文件:   src/channel.c

Patch 7.4.1234
问题:       Demo server only runs with Python 2.
解决方案:   Make it run with Python 3 as well. (Ken Takata)
相关文件:   runtime/tools/demoserver.py

Patch 7.4.1235 (after 7.4.1231)
问题:       Missing change to eval.c.
解决方案:   Include that change.
相关文件:   src/eval.c

Patch 7.4.1236
问题:       When "syntax manual" was used switching between buffers removes
            the highlighting.
解决方案:   Set the syntax option without changing the value. (Anton
            Lindqvist)
相关文件:   runtime/syntax/manual.vim

Patch 7.4.1237
问题:       Can't translate message without adding a line break.
解决方案:   Join the two parts of the message.
相关文件:   src/memline.c

Patch 7.4.1238
问题:       Can't handle two messages right after each other.
解决方案:   Find the end of the JSON.  Read more when incomplete.  Add a C
            test for the JSON decoding.
相关文件:   src/channel.c, src/json.c, src/proto/json.pro, src/eval.c,
            src/Makefile, src/json_test.c, src/memfile_test.c, src/structs.h

Patch 7.4.1239
问题:       JSON message after the first one is dropped.
解决方案:   Put remainder of message back in the queue.
相关文件:   src/channel.c

Patch 7.4.1240
问题:       Visual studio tools are noisy.
解决方案:   Suppress startup info. (Mike Williams)
相关文件:   src/GvimExt/Makefile, src/Make_mvc.mak, src/tee/Make_mvc.mak

Patch 7.4.1241 (after 7.4.1238)
问题:       Missing change in Makefile due to diff mismatch
解决方案:   Update the list of object files.
相关文件:   src/Makefile

Patch 7.4.1242 (after 7.4.1238)
问题:       json_test fails without the eval feature.
解决方案:   Add #ifdef.
相关文件:   src/json_test.c

Patch 7.4.1243
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize it. (Elias Diem)
相关文件:   src/json.c

Patch 7.4.1244
问题:       The channel functions don't sort together.
解决方案:   Use a common "ch_" prefix.
相关文件:   src/eval.c, runtime/doc/eval.txt, runtime/tools/demoserver.py

Patch 7.4.1245
问题:       File missing from distribution.
解决方案:   Add json_test.c.
相关文件:   Filelist

Patch 7.4.1246
问题:       The channel functionality isn't tested.
解决方案:   Add a test using a Python test server.
相关文件:   src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel.py,
            src/testdir/Make_all.mak

Patch 7.4.1247
问题:       The channel test doesn't run on MS-Windows.
解决方案:   Make it work on the MS-Windows console. (Ken Takata)
相关文件:   src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1248
问题:       Can't reliably stop the channel test server.  Can't start the
            server if the python file is not executable.
解决方案:   Use "pkill" instead of "killall".  Run the python file as an
            argument instead of as an executable.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1249
问题:       Crash when the process a channel is connected to exits.
解决方案:   Use the file descriptor properly.  Add a test. (Damien)
            Also add a test for eval().
相关文件:   src/channel.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 7.4.1250
问题:       Running tests in shadow directory fails.
解决方案:   Also link testdir/*.py
相关文件:   src/Makefile

Patch 7.4.1251
问题:       New test file missing from distribution.
解决方案:   Add src/testdir/*.py.
相关文件:   Filelist

Patch 7.4.1252
问题:       The channel test server may receive two messages concatenated.
解决方案:   Split the messages.
相关文件:   src/testdir/test_channel.py

Patch 7.4.1253
问题:       Python test server not displaying second of two commands.
            Solaris doesn't have "pkill --full".
解决方案:   Also echo the second command. Use "pkill -f".
相关文件:   src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1254
问题:       Opening a second channel causes a crash. (Ken Takata)
解决方案:   Don't re-allocate the array with channels.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1255
问题:       Crash for channel "eval" command without third argument.
解决方案:   Check for missing argument.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1256
问题:       On Mac sys.exit(0) doesn't kill the test server.
解决方案:   Use self.server.shutdown(). (Jun Takimoto)
相关文件:   src/testdir/test_channel.py

Patch 7.4.1257
问题:       Channel test fails in some configurations.
解决方案:   Add check for the +channel feature.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1258
问题:       The channel test can fail if messages arrive later.
解决方案:   Add a short sleep. (Jun Takimoto)
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1259
问题:       No test for what patch 7.3.414 fixed.
解决方案:   Add a test. (Elias Diem)
相关文件:   src/testdir/test_increment.vim

Patch 7.4.1260
问题:       The channel feature doesn't work on Win32 GUI.
解决方案:   Use WSAGetLastError(). (Ken Takata)
相关文件:   src/channel.c, src/testdir/test_channel.vim, src/vim.h

Patch 7.4.1261
问题:       Pending channel messages are garbage collected. Leaking memory in
            ch_sendexpr().  Leaking memory for a decoded JSON string.
解决方案:   Mark the message list as used. Free the encoded JSON.  Don't save
            the JSON string.
相关文件:   src/eval.c, src/channel.c, src/json.c, src/proto/channel.pro

Patch 7.4.1262
问题:       The channel callback is not invoked.
解决方案:   Make a list of pending callbacks.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1263
问题:       ch_open() hangs when the server isn't running.
解决方案:   Add a timeout. Use a dict to pass arguments. (Yasuhiro Matsumoto)
相关文件:   runtime/doc/eval.txt, runtime/doc/channel.txt, src/channel.c,
            src/eval.c, src/netbeans.c, src/os_win32.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1264
问题:       Crash when receiving an empty array.
解决方案:   Check for array with wrong number of arguments. (Damien)
相关文件:   src/channel.c, src/eval.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 7.4.1265
问题:       Not all channel commands are tested.
解决方案:   Add a test for "normal", "expr" and "redraw".
相关文件:   src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1266
问题:       A BufAdd autocommand may cause an ml_get error (Christian
            Brabandt)
解决方案:   Increment RedrawingDisabled earlier.
相关文件:   src/ex_cmds.c

Patch 7.4.1267
问题:       Easy to miss handling all types of variables.
解决方案:   Change the variable type into an enum.
相关文件:   src/structs.h, src/eval.c

Patch 7.4.1268
问题:       Waittime is used as seconds instead of milliseconds. (Hirohito
            Higashi)
解决方案:   Divide by 1000.
相关文件:   src/channel.c

Patch 7.4.1269
问题:       Encoding {'key':v:none} to JSON doesn't give an error (Tyru)
解决方案:   Give an error.
相关文件:   src/json.c, src/testdir/test_json.vim

Patch 7.4.1270
问题:       Warnings for missing values in switch.
解决方案:   Change switch to if-else or add values.
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 7.4.1271
问题:       assert_false(v:false) reports an error. (Nikolai Pavlov)
解决方案:   Recognize v:true and v:false. (Closes #625)
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1272 (after 7.4.1270)
问题:       Using future enum value.
解决方案:   Remove it.
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.4.1273 (after 7.4.1271)
问题:       assert_false(v:false) still fails.
解决方案:   Fix the typo.
相关文件:   src/eval.c

Patch 7.4.1274
问题:       Cannot run a job.
解决方案:   Add job_start(), job_status() and job_stop(). Currently only works
            for Unix.
相关文件:   src/eval.c, src/structs.h, runtime/doc/eval.txt, src/os_unix.c,
            src/proto/os_unix.pro, src/feature.h, src/version.c,
            src/testdir/test_channel.vim

Patch 7.4.1275 (after 7.4.1274)
问题:       Build fails on MS-Windows.
解决方案:   Fix wrong #ifdef.
相关文件:   src/eval.c

Patch 7.4.1276
问题:       Warning for not using return value of fcntl().
解决方案:   Explicitly ignore the return value.
相关文件:   src/fileio.c, src/channel.c, src/memfile.c, src/memline.c

Patch 7.4.1277
问题:       Compiler can complain about missing enum value in switch with some
            combination of features.
解决方案:   Remove #ifdefs around case statements.
相关文件:   src/eval.c

Patch 7.4.1278
问题:       When jsonencode() fails it still returns something.
解决方案:   Return an empty string on failure.
相关文件:   src/json.c, src/channel.c, src/testdir/test_json.vim,
            src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1279
问题:       jsonencode() is not producing strict JSON.
解决方案:   Add jsencode() and jsdecode().  Make jsonencode() and jsondecode()
            strict.
相关文件:   src/json.c, src/json_test.c, src/proto/json.pro, src/channel.c,
            src/proto/channel.pro, src/eval.c, src/vim.h, src/structs.h,
            runtime/doc/eval.txt, runtime/doc/channel.txt,
            src/testdir/test_json.vim

Patch 7.4.1280
问题:       Missing case value.
解决方案:   Add VAR_JOB.
相关文件:   src/if_python.c, src/if_python3.c

Patch 7.4.1281
问题:       No test for skipping over code that isn't evaluated.
解决方案:   Add a test with code that would fail when not skipped.
相关文件:   src/testdir/test_viml.vim

Patch 7.4.1282
问题:       Crash when evaluating the pattern of ":catch" causes an error.
            (Dominique Pelle)
解决方案:   Block error messages at this point.
相关文件:   src/ex_eval.c

Patch 7.4.1283
问题:       The job feature isn't available on MS-Windows.
解决方案:   Add the job feature.  Fix argument of job_stop(). (Yasuhiro
            Matsumoto)
相关文件:   src/eval.c, src/feature.h, src/os_win32.c, src/proto/os_win32.pro

Patch 7.4.1284 (after 7.4.1282)
问题:       Test 49 fails.
解决方案:   Check for a different error message.
相关文件:   src/testdir/test49.vim

Patch 7.4.1285
问题:       Cannot measure elapsed time.
解决方案:   Add reltimefloat().
相关文件:   src/ex_cmds2.c, src/eval.c, src/proto/ex_cmds2.pro,
            src/testdir/test_reltime.vim, src/testdir/test_alot.vim

Patch 7.4.1286
问题:       ch_open() with a timeout doesn't work correctly.
解决方案:   Change how select() is used.  Don't give an error on timeout.
            Add a test for ch_open() failing.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1287 (after 7.4.1286)
问题:       Channel test fails.
解决方案:   Use reltimefloat().
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1288
问题:       ch_sendexpr() does not use JS encoding.
解决方案:   Use the encoding that fits the channel mode.  Refuse using
            ch_sendexpr() on a raw channel.
相关文件:   src/channel.c, src/proto/channel.pro, src/eval.c

Patch 7.4.1289
问题:       Channel test fails on MS-Windows, connect() takes too long.
解决方案:   Adjust the test for MS-Windows using "waittime".
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1290
问题:       Coverity complains about unnecessary check for NULL.
解决方案:   Remove the check.
相关文件:   src/eval.c

Patch 7.4.1291
问题:       On MS-Windows the channel test server doesn't quit.
解决方案:   Use return instead of break. (Ken Takata)
相关文件:   src/testdir/test_channel.py

Patch 7.4.1292
问题:       Some compilers complain about uninitialized variable, even though
            all possible cases are handled. (Dominique Pelle)
解决方案:   Add a default initialization.
相关文件:   src/eval.c

Patch 7.4.1293
问题:       Sometimes a channel may hang waiting for a message that was
            already discarded. (Ken Takata)
解决方案:   Store the ID of the message blocking on in the channel.
相关文件:   src/channel.c

Patch 7.4.1294
问题:       job_stop() only kills the started process.
解决方案:   Send the signal to the process group. (Olaf Dabrunz)
相关文件:   src/os_unix.c

Patch 7.4.1295
问题:       string(job) doesn't work well on MS-Windows.
解决方案:   Use the process ID. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.1296
问题:       Cursor changes column with up motion when the matchparen plugin
            saves and restores the cursor position. (Martin Kunev)
解决方案:   Make sure curswant is updated before invoking the autocommand.
相关文件:   src/edit.c

Patch 7.4.1297
问题:       On Mac test_channel leaves python instances running.
解决方案:   Use a small waittime to make ch_open() work. (Ozaki Kiichi)
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1298
问题:       When the channel test fails in an unexpected way the server keeps
            running.
解决方案:   Use try/catch. (Ozaki Kiichi)
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1299
问题:       When the server sends a message with ID zero the channel handler
            is not invoked. (Christian J. Robinson)
解决方案:   Recognize zero value for the request ID.  Add a test for invoking
            the channel handler.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1300
问题:       Cannot test CursorMovedI because there is typeahead.
解决方案:   Add disable_char_avail_for_testing().
相关文件:   src/eval.c, src/getchar.c, src/globals.h,
            src/testdir/test_cursor_func.vim, src/testdir/README.txt

Patch 7.4.1301
问题:       Missing options in ch_open().
解决方案:   Add s:chopt like in the other calls. (Ozaki Kiichi)
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1302
问题:       Typo in struct field name. (Ken Takata)
解决方案:   Rename jf_pi to jv_pi.
相关文件:   src/eval.c, src/os_win32.c, src/structs.h

Patch 7.4.1303
问题:       A Funcref is not accepted as a callback.
解决方案:   Make a Funcref work. (Damien)
相关文件:   src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1304
问题:       Function names are difficult to read.
解决方案:   Rename jsonencode to json_encode, jsondecode to json_decode,
            jsencode to js_encode and jsdecode to js_decode.
相关文件:   src/eval.c, runtime/doc/eval.txt, src/testdir/test_json.vim

Patch 7.4.1305
问题:       "\%1l^#.*" does not match on a line starting with "#".
解决方案:   Do not clear the start-of-line flag. (Christian Brabandt)
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test36.in,
            src/testdir/test36.ok

Patch 7.4.1306
问题:       Job control doesn't work well on MS-Windows.
解决方案:   Various fixes. (Ken Takata, Ozaki Kiichi, Yukihiro Nakadaira,
            Yasuhiro Matsumoto)
相关文件:   src/Make_mvc.mak, src/eval.c, src/os_unix.c, src/os_win32.c,
            src/proto/os_unix.pro, src/proto/os_win32.pro, src/structs.h

Patch 7.4.1307
问题:       Some channel tests fail on MS-Windows.
解决方案:   Disable the failing tests temporarily.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1308 (after 7.4.1307)
问题:       Typo in test.
解决方案:   Change endf to endif.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1309
问题:       When a test fails not all relevant info is listed.
解决方案:   Add the errors to the messages.
相关文件:   src/testdir/runtest.vim

Patch 7.4.1310
问题:       Jobs don't open a channel.
解决方案:   Create pipes and add them to the channel.  Add ch_logfile().
            Only Unix for now.
相关文件:   src/channel.c, src/eval.c, src/os_unix.c, src/structs.h,
            src/gui_w48.c, src/proto/channel.pro, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py, runtime/doc/eval.txt

Patch 7.4.1311 (after 7.4.1310)
问题:       sock_T is defined too late.
解决方案:   Move it up.
相关文件:   src/vim.h

Patch 7.4.1312 (after 7.4.1311)
问题:       sock_T is not defined without the +channel feature.
解决方案:   Always define it.
相关文件:   src/vim.h

Patch 7.4.1313
问题:       MS-Windows: Using socket after it was closed causes an exception.
解决方案:   Don't give an error when handling WM_NETBEANS.  Re-enable tests
            for MS-Windows.
相关文件:   src/gui_w48.c, src/testdir/test_channel.vim

Patch 7.4.1314
问题:       Warning for uninitialized variable.
解决方案:   Initialize it. (Dominique Pelle)
相关文件:   src/channel.c

Patch 7.4.1315
问题:       Using a channel handle does not allow for freeing it when unused.
解决方案:   Add the Channel variable type.
相关文件:   src/structs.h, src/channel.c, src/misc2.c, src/eval.c,
            src/if_python.c, src/if_python3.c, src/json.c, src/gui_w48.c,
            src/netbeans.c, src/proto/channel.pro, src/os_unix.c,
            src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1316
问题:       Can't build MS-Windows console version. (Tux)
解决方案:   Add #ifdefs.
相关文件:   src/eval.c

Patch 7.4.1317
问题:       MS-Windows: channel test fails.
解决方案:   Temporarily disable Test_connect_waittime().
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1318
问题:       Channel with pipes doesn't work in GUI.
解决方案:   Register input handlers for pipes.
相关文件:   src/structs.h, src/feature.h, src/channel.c, src/eval.c,
            src/os_unix.c, src/os_win32.c, src/gui_w48.c, src/proto/channel.pro

Patch 7.4.1319 (after 7.4.1318)
问题:       Tests fail on MS-Windows and on Unix with GUI.
解决方案:   Fix unregistering.
相关文件:   src/structs.h, src/channel.c, src/os_unix.c, src/os_win32.c,
            src/proto/channel.pro

Patch 7.4.1320
问题:       Building with Cygwin or MingW with channel but without Netbeans
            doesn't work.
解决方案:   Set NETBEANS to "no" when not used.
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1321
问题:       Compiler complains about missing statement.
解决方案:   Add an empty statement. (Andrei Olsen)
相关文件:   src/os_win32.c

Patch 7.4.1322
问题:       Crash when unletting the variable that holds the channel in a
            callback function.  (Christian Robinson)
解决方案:   Increase the reference count while invoking the callback.
相关文件:   src/eval.c, src/channel.c, src/proto/eval.pro,
            src/testdir/test_channel.vim

Patch 7.4.1323
问题:       Do not get warnings when building with MingW.
解决方案:   Remove the -w flag. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1324
问题:       Channels with pipes don't work on MS-Windows.
解决方案:   Add pipe I/O support. (Yasuhiro Matsumoto)
相关文件:   src/channel.c, src/os_win32.c, src/proto/channel.pro,
            src/structs.h, src/vim.h, src/testdir/test_channel.vim

Patch 7.4.1325
问题:       Channel test fails on difference between Unix and DOS line endings.
解决方案:   Strip off CR.  Make assert show difference better.
相关文件:   src/eval.c, src/channel.c

Patch 7.4.1326
问题:       Build rules are bit too complicated.
解决方案:   Remove -lwsock32 from Netbeans, it's already added for the channel
            feature that it depends on. (Tony Mechelynck)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1327
问题:       Channel test doesn't work if Python executable is python.exe.
解决方案:   Find py.exe or python.exe. (Ken Takata)
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1328
问题:       Can't compile with +job but without +channel. (John Marriott)
解决方案:   Add more #ifdefs.
相关文件:   src/os_unix.c

Patch 7.4.1329
问题:       Crash when using channel that failed to open.
解决方案:   Check for NULL.  Update messages. (Yukihiro Nakadaira)
相关文件:   src/channel.c, src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1330
问题:       fd_read() has an unused argument.
解决方案:   Remove the timeout. (Yasuhiro Matsumoto)
相关文件:   src/channel.c

Patch 7.4.1331
问题:       Crash when closing the channel in a callback. (Christian J.
            Robinson)
解决方案:   Take the callback out of the list before invoking it.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1332
问题:       Problem using Python3 when compiled with MingW.
解决方案:   Define PYTHON3_HOME as a wide character string. (Yasuhiro
            Matsumoto)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1333
问题:       Channel test fails on non-darwin builds.
解决方案:   Add the "osx" feature and test for that. (Kazunobu Kuriyama)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1334
问题:       Many compiler warnings with MingW.
解决方案:   Add type casts. (Yasuhiro Matsumoto)
相关文件:   src/channel.c, src/dosinst.h, src/eval.c, src/ex_cmds2.c,
            src/ex_getln.c, src/fileio.c, src/if_cscope.c, src/if_perl.xs,
            src/if_python.c, src/if_python3.c, src/if_ruby.c, src/main.c,
            src/mbyte.c, src/misc1.c, src/option.c, src/os_mswin.c,
            src/os_win32.c

Patch 7.4.1335
问题:       Can't build on MS-Windows with +job but without +channel. (Cesar
            Romani)
解决方案:   Add #ifdefs. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.1336
问题:       Channel NL mode is not supported yet.
解决方案:   Add NL mode support to channels.
相关文件:   src/channel.c, src/netbeans.c, src/structs.h, src/os_win32.c,
            src/proto/channel.pro, src/proto/os_unix.pro,
            src/proto/os_win32.pro, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1337 (after 7.4.1336)
问题:       Part of the change is missing.
解决方案:   Add changes to eval.c
相关文件:   src/eval.c


Patch 7.4.1338 (after 7.4.1336)
问题:       Another part of the change is missing.
解决方案:   Type os_unix.c right this time.
相关文件:   src/os_unix.c

Patch 7.4.1339
问题:       Warnings when building the GUI with MingW. (Cesar Romani)
解决方案:   Add type casts. (Yasuhiro Matsumoto)
相关文件:   src/edit.c, src/gui_w32.c, src/gui_w48.c, src/os_mswin.c,
            src/os_win32.c

Patch 7.4.1340 (after 7.4.1339)
问题:       Merge left extra #endif behind.
解决方案:   Remove the #endif
相关文件:   src/os_win32.c

Patch 7.4.1341
问题:       It's difficult to add more arguments to ch_sendraw() and
            ch_sendexpr().
解决方案:   Make the third option a dictionary.
相关文件:   src/eval.c, src/structs.h, src/channel.c, src/os_unix.c,
            src/os_win32.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1342
问题:       On Mac OS/X the waittime must be > 0 for connect to work.
解决方案:   Use select() in a different way. (partly by Kazunobu Kuriyama)
            Always use a waittime of 1 or more.
相关文件:   src/eval.c, src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1343
问题:       Can't compile with +job but without +channel. (Andrei Olsen)
解决方案:   Move get_job_options up and adjust #ifdef.
相关文件:   src/eval.c

Patch 7.4.1344
问题:       Can't compile Win32 GUI with tiny features.
解决方案:   Add #ifdef. (Christian Brabandt)
相关文件:   src/gui_w32.c

Patch 7.4.1345
问题:       A few more compiler warnings. (Axel Bender)
解决方案:   Add type casts.
相关文件:   src/gui_w32.c, src/gui_w48.c

Patch 7.4.1346
问题:       Compiler warnings in build with -O2.
解决方案:   Add initializations.
相关文件:   src/eval.c

Patch 7.4.1347
问题:       When there is any error Vim will use a non-zero exit code.
解决方案:   When using ":silent!" do not set the exit code. (Yasuhiro
            Matsumoto)
相关文件:   src/message.c

Patch 7.4.1348
问题:       More compiler warnings. (John Marriott)
解决方案:   Add type casts, remove unused variable.
相关文件:   src/gui_w32.c

Patch 7.4.1349
问题:       And some more MingW compiler warnings. (Cesar Romani)
解决方案:   Add type casts.
相关文件:   src/if_mzsch.c

Patch 7.4.1350
问题:       When the test server fails to start Vim hangs.
解决方案:   Check that there is actually something to read from the tty fd.
相关文件:   src/os_unix.c

Patch 7.4.1351
问题:       When the port isn't opened yet when ch_open() is called it may
            fail instead of waiting for the specified time.
解决方案:   Loop when select() succeeds but when connect() failed. Also use
            channel logging for jobs.  Add ch_log().
相关文件:   src/channel.c, src/eval.c, src/netbeans.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1352
问题:       The test script lists all functions before executing them.
解决方案:   Only list the function currently being executed.
相关文件:   src/testdir/runtest.vim

Patch 7.4.1353
问题:       Test_connect_waittime is skipped for MS-Windows.
解决方案:   Add the test back, it works now.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1354
问题:       MS-Windows: Mismatch between default compile options and what the
            code expects.
解决方案:   Change the default WINVER from 0x0500 to 0x0501. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.1355
问题:       Win32 console and GUI handle channels differently.
解决方案:   Consolidate code between Win32 console and GUI.
相关文件:   src/channel.c, src/eval.c, src/gui_w48.c, src/os_win32.c,
            src/proto/channel.pro

Patch 7.4.1356
问题:       Job and channel options parsing is scattered.
解决方案:   Move all option value parsing to get_job_options();
相关文件:   src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1357 (after 7.4.1356)
问题:       Error for returning value from void function.
解决方案:   Don't do that.
相关文件:   src/eval.c

Patch 7.4.1358
问题:       Compiler warning when not building with +crypt.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/undo.c

Patch 7.4.1359 (after 7.4.1356)
问题:       Channel test ch_sendexpr() times out.
解决方案:   Increase the timeout
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1360
问题:       Can't remove a callback with ch_setoptions().
解决方案:   When passing zero or an empty string remove the callback.
相关文件:   src/channel.c, src/proto/channel.pro, src/testdir/test_channel.vim

Patch 7.4.1361
问题:       Channel test fails on Solaris.
解决方案:   Use the 1 msec waittime for all systems.
相关文件:   src/channel.c

Patch 7.4.1362 (after 7.4.1356)
问题:       Using uninitialized value.
解决方案:   Initialize jo_set.
相关文件:   src/eval.c

Patch 7.4.1363
问题:       Compiler warnings with tiny build.
解决方案:   Add #ifdefs.
相关文件:   src/gui_w48.c, src/gui_w32.c

Patch 7.4.1364
问题:       The Win 16 code is not maintained and unused.
解决方案:   Remove the Win 16 support.
相关文件:   src/gui_w16.c, src/gui_w32.c, src/gui_w48.c, src/Make_w16.mak,
            src/Makefile, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/proto/gui_w16.pro, src/proto/os_win16.pro, src/guiw16rc.h,
            src/vim16.rc, src/vim16.def, src/tools16.bmp, src/eval.c,
            src/gui.c, src/misc2.c, src/option.c, src/os_msdos.c,
            src/os_mswin.c, src/os_win16.c, src/os_win16.h, src/version.c,
            src/winclip.c, src/feature.h, src/proto.h, src/vim.h, Filelist

Patch 7.4.1365
问题:       Cannot execute a single test function.
解决方案:   Add an argument to filter the functions with. (Yasuhiro Matsumoto)
相关文件:   src/testdir/runtest.vim

Patch 7.4.1366
问题:       Typo in test and resulting error in test result.
解决方案:   Fix the typo and correct the result. (James McCoy, closes #650)
相关文件:   src/testdir/test_charsearch.in, src/testdir/test_charsearch.ok

Patch 7.4.1367
问题:       Compiler warning for unreachable code.
解决方案:   Remove a "break". (Danek Duvall)
相关文件:   src/json.c

Patch 7.4.1368
问题:       One more Win16 file remains.
解决方案:   Delete it.
相关文件:   src/proto/os_win16.pro

Patch 7.4.1369
问题:       Channels don't have a queue for stderr.
解决方案:   Have a queue for each part of the channel.
相关文件:   src/channel.c, src/eval.c, src/structs.h, src/netbeans.c,
            src/gui_w32.c, src/proto/channel.pro

Patch 7.4.1370
问题:       The Python test script may keep on running.
解决方案:   Join the threads. (Yasuhiro Matsumoto)
相关文件:   src/testdir/test_channel.py

Patch 7.4.1371
问题:       X11 GUI callbacks don't specify the part of the channel.
解决方案:   Pass the fd instead of the channel ID.
相关文件:   src/channel.c

Patch 7.4.1372
问题:       channel read implementation is incomplete.
解决方案:   Add ch_read() and options for ch_readraw().
相关文件:   src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1373
问题:       Calling a Vim function over a channel requires turning the
            arguments into a string.
解决方案:   Add the "call" command. (Damien)  Also merge "expr" and "eval"
            into one.
相关文件:   src/channel.c, src/testdir/test_channel.py,
            src/testdir/test_channel.vim

Patch 7.4.1374
问题:       Channel test hangs on MS-Windows.
解决方案:   Disable the ch_read() that is supposed to time out.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1375
问题:       Still some Win16 code.
解决方案:   Remove FEAT_GUI_W16.(Hirohito Higashi)
相关文件:   src/eval.c, src/ex_cmds.h, src/feature.h, src/gui.h, src/menu.c,
            src/misc1.c, src/option.c, src/proto.h, src/structs.h, src/term.c,
            src/vim.h, runtime/doc/gui_w16.txt

Patch 7.4.1376
问题:       ch_setoptions() cannot set all options.
解决方案:   Support more options.
相关文件:   src/channel.c, src/eval.c, src/structs.h, runtime/doc/channel.txt,
            src/testdir/test_channel.vim

Patch 7.4.1377
问题:       Test_connect_waittime() is flaky.
解决方案:   Ignore the "Connection reset by peer" error.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1378
问题:       Can't change job settings after it started.
解决方案:   Add job_setoptions() with the "stoponexit" flag.
相关文件:   src/eval.c, src/main.c, src/structs.h, src/proto/eval.pro,
            src/testdir/test_channel.vim

Patch 7.4.1379
问题:       Channel test fails on Win32 console.
解决方案:   Don't sleep when timeout is zero. Call channel_wait() before
            channel_read(). Channels are not polled during ":sleep". (Yukihiro
            Nakadaira)
相关文件:   src/channel.c, src/misc2.c, src/gui_w32.c, src/os_win32.c

Patch 7.4.1380
问题:       The job exit callback is not implemented.
解决方案:   Add the "exit-cb" option.
相关文件:   src/structs.h, src/eval.c, src/channel.c, src/proto/eval.pro,
            src/misc2.c, src/macros.h, src/testdir/test_channel.vim

Patch 7.4.1381 (after 7.4.1380)
问题:       Exit value not available on MS-Windows.
解决方案:   Set the exit value.
相关文件:   src/structs.h, src/os_win32.c

Patch 7.4.1382
问题:       Can't get the job of a channel.
解决方案:   Add ch_getjob().
相关文件:   src/eval.c, runtime/doc/channel.txt, runtime/doc/eval.txt

Patch 7.4.1383
问题:       GvimExt only loads the old libintl.dll.
解决方案:   Also try loading libint-8.dll. (Ken Takata, closes #608)
相关文件:   src/GvimExt/gvimext.cpp, src/GvimExt/gvimext.h

Patch 7.4.1384
问题:       It is not easy to use a set of plugins and their dependencies.
解决方案:   Add packages, ":loadplugin", 'packpath'.
相关文件:   src/main.c, src/ex_cmds2.c, src/option.c, src/option.h,
            src/ex_cmds.h, src/eval.c, src/version.c, src/proto/ex_cmds2.pro,
            runtime/doc/repeat.txt, runtime/doc/options.txt,
            runtime/optwin.vim

Patch 7.4.1385
问题:       Compiler warning for using array.
解决方案:   Use the right member name. (Yegappan Lakshmanan)
相关文件:   src/eval.c

Patch 7.4.1386
问题:       When the Job exit callback is invoked, the job may be freed too
            soon. (Yasuhiro Matsumoto)
解决方案:   Increase refcount.
相关文件:   src/eval.c

Patch 7.4.1387
问题:       Win16 docs still referenced.
解决方案:   Remove Win16 files from the docs Makefile. (Kenichi Ito)
相关文件:   runtime/doc/Makefile

Patch 7.4.1388
问题:       Compiler warning. (Cesar Romani)
解决方案:   Initialize variable.
相关文件:   src/ex_cmds2.c

Patch 7.4.1389
问题:       Incomplete function declaration.
解决方案:   Add "void". (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.1390
问题:       When building with GTK and glib-compile-resources cannot be found
            building Vim fails. (Michael Gehring)
解决方案:   Make GLIB_COMPILE_RESOURCES empty instead of leaving it at "no".
            (nuko8, closes #655)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1391
问题:       Warning for uninitialized variable.
解决方案:   Set it to zero. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.4.1392
问题:       Some tests fail for Win32 console version.
解决方案:   Move the tests to SCRIPTS_MORE2.  Pass VIMRUNTIME. (Christian
            Brabandt)
相关文件:   src/testdir/Make_all.mak

Patch 7.4.1393
问题:       Starting a job hangs in the GUI. (Takuya Fujiwara)
解决方案:   Don't check if ch_job is NULL when checking for an error.
            (Yasuhiro Matsumoto)
相关文件:   src/channel.c

Patch 7.4.1394
问题:       Can't sort inside a sort function.
解决方案:   Use a struct to store the sort parameters. (Jacob Niehus)
相关文件:   src/eval.c, src/testdir/test_sort.vim

Patch 7.4.1395
问题:       Using DETACH in quotes is not compatible with the Netbeans
            interface. (Xavier de Gaye)
解决方案:   Remove the quotes, only use them for JSON and JS mode.
相关文件:   src/netbeans.c, src/channel.c

Patch 7.4.1396
问题:       Compiler warnings for conversions.
解决方案:   Add type cast.
相关文件:   src/ex_cmds2.c

Patch 7.4.1397
问题:       Sort test fails on MS-Windows.
解决方案:   Correct the compare function.
相关文件:   src/testdir/test_sort.vim

Patch 7.4.1398
问题:       The close-cb option is not implemented yet.
解决方案:   Implement close-cb. (Yasuhiro Matsumoto)
相关文件:   src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.py, src/testdir/test_channel.vim

Patch 7.4.1399
问题:       The MS-DOS code does not build.
解决方案:   Remove the old MS-DOS code.
相关文件:   Filelist, src/Make_bc3.mak, src/Make_bc5.mak, src/Make_djg.mak,
            src/Makefile, src/blowfish.c, src/buffer.c, src/diff.c,
            src/digraph.c, src/dosinst.h, src/eval.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/feature.h,
            src/fileio.c, src/getchar.c, src/globals.h, src/macros.h,
            src/main.c, src/mbyte.c, src/memfile.c, src/memline.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/option.c,
            src/option.h, src/os_msdos.c, src/os_msdos.h, src/proto.h,
            src/proto/os_msdos.pro, src/regexp.c, src/screen.c, src/structs.h,
            src/syntax.c, src/term.c, src/undo.c, src/uninstal.c,
            src/version.c, src/vim.h, src/window.c, src/xxd/Make_bc3.mak,
            src/xxd/Make_djg.mak


Patch 7.4.1400
问题:       Perl eval doesn't work properly on 64-bit big-endian machine.
解决方案:   Use 32 bit type for the key. (Danek Duvall)
相关文件:   src/if_perl.xs

Patch 7.4.1401
问题:       Having 'autochdir' set during startup and using diff mode doesn't
            work. (Axel Bender)
解决方案:   Don't use 'autochdir' while still starting up. (Christian
            Brabandt)
相关文件:   src/buffer.c

Patch 7.4.1402
问题:       GTK 3 is not supported.
解决方案:   Add GTK 3 support. (Kazunobu Kuriyama)
相关文件:   runtime/doc/eval.txt, runtime/doc/gui.txt,
            runtime/doc/gui_x11.txt, src/auto/configure, src/channel.c,
            src/config.h.in, src/configure.in, src/eval.c, src/gui.h,
            src/gui_beval.c, src/gui_beval.h, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_f.h, src/gui_gtk_x11.c, src/if_mzsch.c, src/mbyte.c,
            src/netbeans.c, src/structs.h, src/version.c

Patch 7.4.1403
问题:       Can't build without the quickfix feature.
解决方案:   Add #ifdefs. Call ex_ni() for unimplemented commands. (Yegappan
            Lakshmanan)
相关文件:   src/ex_cmds2.c, src/popupmnu.c

Patch 7.4.1404
问题:       ch_read() doesn't time out on MS-Windows.
解决方案:   Instead of WM_NETBEANS use select(). (Yukihiro Nakadaira)
相关文件:   src/channel.c, src/gui_w32.c, src/os_win32.c, src/structs.h,
            src/testdir/test_channel.vim, src/vim.h

Patch 7.4.1405
问题:       Completion menu flickers.
解决方案:   Delay showing the popup menu. (Shougo Matsu, Justin M. Keyes,
	    closes #656)
相关文件:   src/edit.c

Patch 7.4.1406
问题:       Leaking memory in cs_print_tags_priv().
解决方案:   Free tbuf. (idea by Forrest Fleming)
相关文件:   src/if_cscope.c

Patch 7.4.1407
问题:       json_encode() does not handle NaN and inf properly. (David
            Barnett)
解决方案:   For JSON turn them into "null".  For JS use "NaN" and "Infinity".
            Add isnan().
相关文件:   src/eval.c, src/json.c, src/testdir/test_json.vim

Patch 7.4.1408
问题:       MS-Windows doesn't have isnan() and isinf().
解决方案:   Use _isnan() and _isinf().
相关文件:   src/eval.c, src/json.c

Patch 7.4.1409 (after 7.4.1402)
问题:       Configure includes GUI despite --disable-gui flag.
解决方案:   Add SKIP_GTK3. (Kazunobu Kuriyama)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1410
问题:       Leaking memory in cscope interface.
解决方案:   Free memory when no tab is found. (Christian Brabandt)
相关文件:   src/if_cscope.c

Patch 7.4.1411
问题:       Compiler warning for indent. (Ajit Thakkar)
解决方案:   Indent normally.
相关文件:   src/ui.c

Patch 7.4.1412
问题:       Compiler warning for indent. (Dominique Pelle)
解决方案:   Fix the indent.
相关文件:   src/farsi.c

Patch 7.4.1413
问题:       When calling ch_close() the close callback is invoked, even though
            the docs say it isn't. (Christian J. Robinson)
解决方案:   Don't call the close callback.
相关文件:   src/eval.c, src/channel.c, src/netbeans.c, src/proto/channel.pro

Patch 7.4.1414
问题:       Appveyor only builds one feature set.
解决方案:   Build a combination of features and GUI/console. (Christian
            Brabandt)
相关文件:   appveyor.yml, src/appveyor.bat

Patch 7.4.1415 (after 7.4.1414)
问题:       Dropped the skip-tags setting.
解决方案:   Put it back.
相关文件:   appveyor.yml

Patch 7.4.1416
问题:       Using "u_char" instead of "char_u", which doesn't work everywhere.
            (Jörg Plate)
解决方案:   Use "char_u" always.
相关文件:   src/integration.c, src/macros.h

Patch 7.4.1417 (after 7.4.1414)
问题:       Missing appveyor.bat from the distribution.
解决方案:   Add it to the list of files.
相关文件:   Filelist

Patch 7.4.1418
问题:       job_stop() on MS-Windows does not really stop the job.
解决方案:   Make the default to stop the job forcefully. (Ken Takata)
            Make MS-Windows and Unix more similar.
相关文件:   src/os_win32.c, src/os_unix.c, runtime/doc/eval.txt

Patch 7.4.1419
问题:       Tests slowed down because of the "not a terminal" warning.
解决方案:   Add the --not-a-term command line argument.
相关文件:   src/main.c, src/testdir/Makefile, src/Make_all.mak,
            src/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            runtime/doc/starting.txt

Patch 7.4.1420 (after 7.4.1419)
问题:       Missing makefile.
解决方案:   Type the path correctly.
相关文件:   src/testdir/Make_all.mak

Patch 7.4.1421
问题:       May free a channel when a callback may need to be invoked.
解决方案:   Keep the channel when refcount is zero.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1422
问题:       Error when reading fails uses wrong errno.  Keeping channel open
            after job stops results in test failing.
解决方案:   Move the error up.  Add ch_job_killed.
相关文件:   src/channel.c, src/eval.c, src/structs.h

Patch 7.4.1423
问题:       Channel test fails on MS-Windows.
解决方案:   Do not give an error message when reading fails, assume the other
            end exited.
相关文件:   src/channel.c

Patch 7.4.1424
问题:       Not using --not-a-term when running tests on MS-Windows.
解决方案:   Use NO_PLUGIN. (Christian Brabandt)
相关文件:   src/testdir/Make_dos.mak

Patch 7.4.1425
问题:       There are still references to MS-DOS support.
解决方案:   Remove most of the help txt and install instructions. (Ken Takata)
相关文件:   src/INSTALLpc.txt, runtime/doc/os_msdos.txt, csdpmi4b.zip,
            Filelist

Patch 7.4.1426
问题:       The "out-io" option for jobs is not implemented yet.
解决方案:   Implement the "buffer" value: append job output to a buffer.
相关文件:   src/eval.c, src/channel.c, src/structs.h, src/netbeans.c,
            runtime/doc/channel.txt

Patch 7.4.1427
问题:       Trailing comma in enums is not ANSI C.
解决方案:   Remove the trailing commas.
相关文件:   src/alloc.h, src/gui_mac.c

Patch 7.4.1428
问题:       Compiler warning for non-virtual destructor.
解决方案:   Make it virtual. (Yasuhiro Matsumoto)
相关文件:   src/gui_dwrite.cpp

Patch 7.4.1429
问题:       On MS-Windows, when not use renderoptions=type:directx, drawing
            emoji will be broken.
解决方案:   Fix usage of unicodepdy. (Yasuhiro Matsumoto)
相关文件:   src/gui_w32.c

Patch 7.4.1430
问题:       When encoding JSON, turning NaN and Infinity into null without
            giving an error is not useful.
解决方案:   Pass NaN and Infinity on.  If the receiver can't handle them it
            will generate the error.
相关文件:   src/json.c, src/testdir/test_json.vim, runtime/doc/eval.txt

Patch 7.4.1431
问题:       Including header files twice.
解决方案:   Remove the extra includes.
相关文件:   src/if_cscope.h

Patch 7.4.1432
问题:       Typo in button text.
解决方案:   Fix the typo. (Dominique Pelle)
相关文件:   src/gui_gtk.c

Patch 7.4.1433
问题:       The Sniff interface is no longer useful, the tool has not been
            available for may years.
解决方案:   Delete the Sniff interface and related code.
相关文件:   src/if_sniff.c, src/if_sniff.h, src/charset.c, src/edit.c,
            src/eval.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c,
            src/gui_gtk_x11.c, src/gui_w32.c, src/gui_x11.c, src/normal.c,
            src/os_unix.c, src/os_win32.c, src/term.c, src/ui.c,
            src/version.c, src/ex_cmds.h, src/feature.h, src/keymap.h,
            src/structs.h, src/vim.h, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/configure.in, src/auto/configure,
            src/config.h.in, src/config.mk.in, runtime/doc/if_sniff.txt,
            src/config.aap.in, src/main.aap

Patch 7.4.1434
问题:       JSON encoding doesn't handle surrogate pair.
解决方案:   Improve multi-byte handling of JSON. (Yasuhiro Matsumoto)
相关文件:   src/json.c, src/testdir/test_json.vim

Patch 7.4.1435
问题:       It is confusing that ch_sendexpr() and ch_sendraw() wait for a
            response.
解决方案:   Add ch_evalexpr() and ch_evalraw().
相关文件:   src/eval.c, runtime/doc/channel.txt, runtime/doc/eval.txt,
            src/testdir/test_channel.vim

Patch 7.4.1436 (after 7.4.1433)
问题:       Sniff files still referenced in distribution.
解决方案:   Remove sniff files from distribution.
相关文件:   Filelist

Patch 7.4.1437
问题:       Old system doesn't have isinf() and NAN. (Ben Fritz)
解决方案:   Adjust #ifdefs.  Detect isnan() and isinf() functions with
            configure. Use a replacement when missing. (Kazunobu Kuriyama)
相关文件:   src/eval.c, src/json.c, src/macros.h, src/message.c,
            src/config.h.in, src/configure.in, src/auto/configure

Patch 7.4.1438
问题:       Can't get buffer number of a channel.
解决方案:   Add ch_getbufnr().
相关文件:   src/eval.c, src/channel.c, src/testdir/test_channel.vim,
            runtime/doc/channel.txt, runtime/doc/eval.txt

Patch 7.4.1439 (after 7.4.1434)
问题:       Using uninitialized variable.
解决方案:   Initialize vc_type.
相关文件:   src/json.c

Patch 7.4.1440 (after 7.4.1437)
问题:       Can't build on Windows.
解决方案:   Change #ifdefs.  Only define isnan when used.
相关文件:   src/macros.h, src/eval.c, src/json.c

Patch 7.4.1441
问题:       Using empty name instead of no name for channel buffer.
解决方案:   Remove the empty name.
相关文件:   src/channel.c

Patch 7.4.1442
问题:       MS-Windows: more compilation warnings for destructor.
解决方案:   Add "virtual". (Ken Takata)
相关文件:   src/if_ole.cpp

Patch 7.4.1443
问题:       Can't build GTK3 with small features.
解决方案:   Use gtk_widget_get_window().  Fix typos. (Dominique Pelle)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1444
问题:       Can't build with JSON but without multi-byte.
解决方案:   Fix pointer name.
相关文件:   src/json.c

Patch 7.4.1445
问题:       Memory corruption when 'encoding' is not utf-8.
解决方案:   Convert decoded string later.
相关文件:   src/json.c

Patch 7.4.1446
问题:       Crash when using json_decode().
解决方案:   Terminate string with a NUL byte.
相关文件:   src/json.c

Patch 7.4.1447
问题:       Memory leak when using ch_read(). (Dominique Pelle)
            No log message when stopping a job and a few other situations.
            Too many "Nothing to read" messages.  Channels are not freed.
解决方案:   Free the listtv.  Add more log messages. Remove "Nothing to read"
            message.  Remove the channel from the job when its refcount
            becomes zero.
相关文件:   src/eval.c, src/channel.c

Patch 7.4.1448
问题:       JSON tests fail if 'encoding' is not utf-8.
解决方案:   Force encoding to utf-8.
相关文件:   src/testdir/test_json.vim

Patch 7.4.1449
问题:       Build fails with job feature but without channel feature.
解决方案:   Add #ifdef.
相关文件:   src/eval.c

Patch 7.4.1450
问题:       Json encoding still fails when encoding is not utf-8.
解决方案:   Set 'encoding' before :scriptencoding.  Run the json test
            separately to avoid affecting other tests.
相关文件:   src/testdir/test_json.vim, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim

Patch 7.4.1451
问题:       Vim hangs when a channel has a callback but isn't referenced.
解决方案:   Have channel_unref() only return TRUE when the channel was
            actually freed.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1452
问题:       When a callback adds a syntax item either the redraw doesn't
            happen right away or in the GUI the cursor is in the wrong
            position for a moment. (Jakson Alves de Aquino)
解决方案:   Redraw after the callback was invoked.
相关文件:   src/channel.c

Patch 7.4.1453
问题:       Missing --not-a-term.
解决方案:   Add the argument.
相关文件:   src/testdir/Make_amiga.mak

Patch 7.4.1454
问题:       The exit callback test is flaky.
解决方案:   Loop to wait for a short time up to a second.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1455
问题:       JSON decoding test for surrogate pairs is in the wrong place.
解决方案:   Move the test lines. (Ken Takata)
相关文件:   src/testdir/test_json.vim

Patch 7.4.1456
问题:       Test 87 fails with Python 3.5.
解决方案:   Work around difference. (Taro Muraoka)
相关文件:   src/testdir/test87.in

Patch 7.4.1457
问题:       Opening a channel with select() is not done properly.
解决方案:   Also used read-fds. Use getsockopt() to check for errors. (Ozaki
            Kiichi)
相关文件:   src/channel.c

Patch 7.4.1458
问题:       When a JSON channel has a callback it may never be cleared.
解决方案:   Do not write "DETACH" into a JS or JSON channel.
相关文件:   src/channel.c

Patch 7.4.1459 (after 7.4.1457)
问题:       MS-Windows doesn't know socklen_t.
解决方案:   Use previous method for WIN32.
相关文件:   src/channel.c

Patch 7.4.1460
问题:       Syntax error in rarely used code.
解决方案:   Fix the mch_rename() declaration. (Ken Takata)
相关文件:   src/os_unix.c, src/proto/os_unix.pro

Patch 7.4.1461
问题:       When starting job on MS-Windows all parts of the command are put
            in quotes.
解决方案:   Only use quotes when needed. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.1462
问题:       Two more rarely used functions with errors.
解决方案:   Add proper argument types. (Dominique Pelle)
相关文件:   src/misc2.c, src/termlib.c

Patch 7.4.1463
问题:       Configure doesn't find isinf() and isnan() on some systems.
解决方案:   Use a configure check that includes math.h.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.1464
问题:       When the argument of sort() is zero or empty it fails.
解决方案:   Make zero work as documented. (suggested by Yasuhiro Matsumoto)
相关文件:   src/eval.c, src/testdir/test_sort.vim

Patch 7.4.1465
问题:       Coverity reported possible use of NULL pointer when using buffer
            output with JSON mode.
解决方案:   Make it actually possible to use JSON mode with a buffer.
            Re-encode the JSON to append it to the buffer.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1466
问题:       Coverity reports dead code.
解决方案:   Remove the two lines.
相关文件:   src/channel.c

Patch 7.4.1467
问题:       Can't build without the float feature.
解决方案:   Add #ifdefs. (Nick Owens, closes #667)
相关文件:   src/eval.c, src/json.c

Patch 7.4.1468
问题:       Sort test doesn't test with "1" argument.
解决方案:   Also test ignore-case sorting. (Yasuhiro Matsumoto)
相关文件:   src/testdir/test_sort.vim

Patch 7.4.1469
问题:       Channel test sometimes fails, especially on OS/X. (Kazunobu
            Kuriyama)
解决方案:   Change the && into ||, call getsockopt() in more situations.
            (Ozaki Kiichi)
相关文件:   src/channel.c

Patch 7.4.1470
问题:       Coverity reports missing restore.
解决方案:   Move json_encode() call up.
相关文件:   src/channel.c

Patch 7.4.1471
问题:       Missing out-of-memory check.  And Coverity warning.
解决方案:   Bail out when msg is NULL.
相关文件:   src/channel.c

Patch 7.4.1472
问题:       Coverity warning for not using return value.
解决方案:   Add "(void)".
相关文件:   src/os_unix.c

Patch 7.4.1473
问题:       Can't build without the autocommand feature.
解决方案:   Add #ifdefs. (Yegappan Lakshmanan)
相关文件:   src/edit.c, src/main.c, src/syntax.c

Patch 7.4.1474
问题:       Compiler warnings without the float feature.
解决方案:   Move #ifdefs. (John Marriott)
相关文件:   src/eval.c

Patch 7.4.1475
问题:       When using hangulinput with utf-8 a CSI character is
            misinterpreted.
解决方案:   Convert CSI to K_CSI. (SungHyun Nam)
相关文件:   src/ui.c

Patch 7.4.1476
问题:       Function arguments marked as unused while they are not.
解决方案:   Remove UNUSED. (Yegappan Lakshmanan)
相关文件:   src/diff.c, src/eval.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/window.c

Patch 7.4.1477
问题:       Test_reltime is flaky, it depends on timing.
解决方案:   When it fails run it a second time.
相关文件:   src/testdir/runtest.vim

Patch 7.4.1478
问题:       ":loadplugin" doesn't take care of ftdetect files.
解决方案:   Also load ftdetect scripts when appropriate.
相关文件:   src/ex_cmds2.c

Patch 7.4.1479
问题:       No testfor ":loadplugin".
解决方案:   Add a test.  Fix how option is being set.
相关文件:   src/ex_cmds2.c, src/testdir/test_loadplugin.vim,
            src/testdir/Make_all.mak

Patch 7.4.1480
问题:       Cannot add a pack directory without loading a plugin.
解决方案:   Add the :packadd command.
相关文件:   src/ex_cmds.h, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_loadplugin.vim, runtime/doc/repeat.txt

Patch 7.4.1481
问题:       Can't build with small features.
解决方案:   Add #ifdef.
相关文件:   src/ex_cmds2.c

Patch 7.4.1482
问题:       "timeout" option not supported on ch_eval*().
解决方案:   Get and use the timeout option from the argument.
相关文件:   src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1483
问题:       A one-time callback is not used for a raw channel.
解决方案:   Use a one-time callback when it exists.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1484
问题:       Channel "err-io" value "out" is not supported.
解决方案:   Connect stderr to stdout if wanted.
相关文件:   src/os_unix.c, src/os_win32.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1485
问题:       Job input from buffer is not implemented.
解决方案:   Implement it.  Add "in-top" and "in-bot" options.
相关文件:   src/structs.h, src/eval.c, src/channel.c, src/proto/channel.pro,
            src/os_unix.c, src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1486
问题:       ":loadplugin" is not optimal, some people find it confusing.
解决方案:   Only use ":packadd" with an optional "!".
相关文件:   src/ex_cmds.h, src/ex_cmds2.c, src/testdir/test_loadplugin.vim,
            src/testdir/test_packadd.vim, src/testdir/Make_all.mak,
            runtime/doc/repeat.txt

Patch 7.4.1487
问题:       For WIN32 isinf() is defined as a macro.
解决方案:   Define it as an inline function. (ZyX)
相关文件:   src/macros.h

Patch 7.4.1488 (after 7.4.1475)
问题:       Not using key when result from hangul_string_convert() is NULL.
解决方案:   Fall back to not converted string.
相关文件:   src/ui.c

Patch 7.4.1489 (after 7.4.1487)
问题:       "inline" is not supported by old MSVC.
解决方案:   use "__inline". (Ken Takata)
相关文件:   src/macros.h

Patch 7.4.1490
问题:       Compiler warning for unused function.
解决方案:   Add #ifdef. (Dominique Pelle)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1491
问题:       Visual-block shift breaks multi-byte characters.
解决方案:   Compute column differently. (Yasuhiro Matsumoto) Add a test.
相关文件:   src/ops.c, src/testdir/test_visual.vim, src/testdir/Make_all.mak

Patch 7.4.1492
问题:       No command line completion for ":packadd".
解决方案:   Implement completion. (Hirohito Higashi)
相关文件:   src/ex_docmd.c, src/ex_getln.c, src/testdir/test_packadd.vim,
            src/vim.h

Patch 7.4.1493
问题:       Wrong callback invoked for zero-id messages.
解决方案:   Don't use the first one-time callback when the sequence number
            doesn't match.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1494
问题:       clr_history() does not work properly.
解决方案:   Increment hisptr. Add a test. (Yegappan Lakshmanan)
相关文件:   src/ex_getln.c, src/testdir/test_history.vim,
            src/testdir/Make_all.mak

Patch 7.4.1495
问题:       Compiler warnings when building on Unix with the job feature but
            without the channel feature.
解决方案:   Move #ifdefs. (Dominique Pelle)
相关文件:   src/os_unix.c

Patch 7.4.1496
问题:       Crash when built with GUI but it's not active. (Dominique Pelle)
解决方案:   Check gui.in_use.
相关文件:   src/channel.c

Patch 7.4.1497
问题:       Cursor drawing problem with GTK 3.
解决方案:   Handle blinking differently. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1498
问题:       Error for locked item when using json_decode(). (Shougo Matsu)
解决方案:   Initialize v_lock.
相关文件:   src/json.c

Patch 7.4.1499
问题:       No error message when :packadd does not find anything.
解决方案:   Add an error message. (Hirohito Higashi)
相关文件:   runtime/doc/repeat.txt, src/ex_cmds.h, src/ex_cmds2.c,
            src/globals.h, src/testdir/test_packadd.vim

Patch 7.4.1500
问题:       Should_free flag set to FALSE.
解决方案:   Set it to TRUE. (Neovim 4415)
相关文件:   src/ex_eval.c

Patch 7.4.1501
问题:       Garbage collection with an open channel is not tested.
解决方案:   Call garbagecollect() in the test.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1502
问题:       Writing last-but-one line of buffer to a channel isn't implemented
            yet.
解决方案:   Implement it.  Fix leaving a swap file behind.
相关文件:   src/channel.c, src/structs.h, src/memline.c, src/proto/channel.pro

Patch 7.4.1503
问题:       Crash when using ch_getjob(). (Damien)
解决方案:   Check for a NULL job.
相关文件:   src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1504 (after 7.4.1502)
问题:       No test for reading last-but-one line.
解决方案:   Add a test.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1505
问题:       When channel log is enabled get too many "looking for messages"
            log entries.
解决方案:   Only give the message after another message.
相关文件:   src/channel.c

Patch 7.4.1506
问题:       Job cannot read from a file.
解决方案:   Implement reading from a file for Unix.
相关文件:   src/eval.c, src/os_unix.c, src/os_win32.c,
            src/testdir/test_channel.vim

Patch 7.4.1507
问题:       Crash when starting a job fails.
解决方案:   Check for the channel to be NULL.  (idea by Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.1508
问题:       Can't build GvimExt with MingW.
解决方案:   Adjust the makefile. (Ben Fritz)
相关文件:   src/GvimExt/Make_ming.mak

Patch 7.4.1509
问题:       Keeping both a variable for a job and the channel it refers to is
            a hassle.
解决方案:   Allow passing the job where a channel is expected. (Damien)
相关文件:   src/eval.c, src/testdir/test_channel.vim

Patch 7.4.1510
问题:       Channel test fails on AppVeyor.
解决方案:   Wait longer than 10 msec if needed.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1511
问题:       Statusline highlighting is sometimes wrong.
解决方案:   Check for Highlight type. (Christian Brabandt)
相关文件:   src/buffer.c

Patch 7.4.1512
问题:       Channel input from file not supported on MS-Windows.
解决方案:   Implement it. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1513
问题:       "J" fails if there are not enough lines. (Christian Neukirchen)
解决方案:   Reduce the count, only fail on the last line.
相关文件:   src/normal.c, src/testdir/test_join.vim, src/testdir/test_alot.vim

Patch 7.4.1514
问题:       Channel output to file not implemented yet.
解决方案:   Implement it for Unix.
相关文件:   src/os_unix.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1515
问题:       Channel test is a bit flaky.
解决方案:   Instead of a fixed sleep time wait until an expression evaluates
            to true.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1516
问题:       Cannot change file permissions.
解决方案:   Add setfperm().
相关文件:   src/eval.c, runtime/doc/eval.txt, src/testdir/test_alot.vim,
            src/testdir/test_file_perm.vim

Patch 7.4.1517
问题:       Compiler warning with 64bit compiler.
解决方案:   Add typecast. (Mike Williams)
相关文件:   src/channel.c

Patch 7.4.1518
问题:       Channel with disconnected in/out/err is not supported.
解决方案:   Implement it for Unix.
相关文件:   src/eval.c, src/os_unix.c, src/structs.h,
            src/testdir/test_channel.vim, src/testdir/test_channel_pipe.py

Patch 7.4.1519 (after 7.4.1514)
问题:       Channel output to file not implemented for MS-Windows.
解决方案:   Implement it. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1520
问题:       Channel test: Waiting for a file to appear doesn't work.
解决方案:   In waitFor() ignore errors.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1521 (after 7.4.1516)
问题:       File permission test fails on MS-Windows.
解决方案:   Expect a different permission.
相关文件:   src/testdir/test_file_perm.vim

Patch 7.4.1522
问题:       Cannot write channel err to a buffer.
解决方案:   Implement it.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1523
问题:       Writing channel to a file fails on MS-Windows.
解决方案:   Disable it for now.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1524
问题:       Channel test fails on BSD.
解决方案:   Break out of the loop when connect() succeeds. (Ozaki Kiichi)
相关文件:   src/channel.c

Patch 7.4.1525
问题:       On a high resolution screen the toolbar icons are too small.
解决方案:   Add "huge" and "giant" to 'toolbariconsize'. (Brian Gix)
相关文件:   src/gui_gtk_x11.c, src/option.h

Patch 7.4.1526
问题:       Writing to file and not connecting a channel doesn't work for
            MS-Windows.
解决方案:   Make it work. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.1527
问题:       Channel test is flaky on MS-Windows.
解决方案:   Limit the select() timeout to 50 msec and try with a new socket if
            it fails.
相关文件:   src/channel.c

Patch 7.4.1528
问题:       Using "ever" for packages is confusing.
解决方案:   Use "start", as it's related to startup.
相关文件:   src/ex_cmds2.c, runtime/doc/repeat.txt

Patch 7.4.1529
问题:       Specifying buffer number for channel not implemented yet.
解决方案:   Implement passing a buffer number.
相关文件:   src/structs.h, src/channel.c, src/eval.c,
            src/testdir/test_channel.vim

Patch 7.4.1530
问题:       MS-Windows job_start() closes wrong handle.
解决方案:   Close hThread on the process info. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.1531
问题:       Compiler warning for uninitialized variable. (Dominique Pelle)
解决方案:   Always give the variable a value.
相关文件:   src/channel.c

Patch 7.4.1532
问题:       MS-Windows channel leaks file descriptor.
解决方案:   Use CreateFile with the right options. (Yasuhiro Matsumoto)
相关文件:   src/os_win32.c

Patch 7.4.1533
问题:       Using feedkeys() with an empty string disregards 'x' option.
解决方案:   Make 'x' work with an empty string. (Thinca)
相关文件:   src/eval.c, src/testdir/test_alot.vim,
            src/testdir/test_feedkeys.vim

Patch 7.4.1534
问题:       Compiler warning for shadowed variable. (Kazunobu Kuriyama)
解决方案:   Rename it.
相关文件:   src/eval.c

Patch 7.4.1535
问题:       The feedkeys test has a one second delay.
解决方案:   Avoid need_wait_return() to delay. (Hirohito Higashi)
相关文件:   src/eval.c

Patch 7.4.1536
问题:       Cannot re-use a channel for another job.
解决方案:   Add the "channel" option to job_start().
相关文件:   src/channel.c, src/eval.c, src/structs.h, src/os_unix.c,
            src/os_win32.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1537
问题:       Too many feature flags for pipes, jobs and channels.
解决方案:   Only use FEAT_JOB_CHANNEL.
相关文件:   src/structs.h, src/feature.h, src/configure.in,
            src/auto/configure, src/config.h.in, src/channel.c, src/eval.c,
            src/gui.c, src/main.c, src/memline.c, src/misc2.c, src/os_mswin.c,
            src/os_unix.c, src/os_win32.c, src/ui.c, src/version.c,
            src/macros.h, src/proto.h, src/vim.h, src/Make_cyg_ming.mak,
            src/Make_bc5.mak, src/Make_mvc.mak

Patch 7.4.1538
问题:       Selection with the mouse does not work in command line mode.
解决方案:   Use cairo functions. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1539
问题:       Too much code in eval.c.
解决方案:   Move job and channel code to channel.c.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro,
            src/proto/eval.pro

Patch 7.4.1540
问题:       Channel test is a bit flaky.
解决方案:   Increase expected wait time.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1541
问题:       Missing job_info().
解决方案:   Implement it.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1542
问题:       job_start() with a list is not tested.
解决方案:   Call job_start() with a list.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1543
问题:       Channel log methods are not tested.
解决方案:   Log job activity and check it.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1544
问题:       On Win32 escaping the command does not work properly.
解决方案:   Reset 'ssl' when escaping the command. (Yasuhiro Matsumoto)
相关文件:   src/channel.c

Patch 7.4.1545
问题:       GTK3: horizontal cursor movement in Visual selection not good.
解决方案:   Make it work better. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1546
问题:       Sticky type checking is more annoying than useful.
解决方案:   Remove the error for changing a variable type.
相关文件:   src/eval.c, src/testdir/test_assign.vim,
            src/testdir/test_alot.vim, runtime/doc/eval.txt

Patch 7.4.1547
问题:       Getting a cterm highlight attribute that is not set results in the
            string "-1".
解决方案:   Return an empty string. (Taro Muraoka)
相关文件:   src/syntax.c, src/testdir/test_alot.vim,
            src/testdir/test_syn_attr.vim

Patch 7.4.1548 (after 7.4.1546)
问题:       Two tests fail.
解决方案:   Adjust the expected error number. Remove check for type.
相关文件:   src/testdir/test101.ok, src/testdir/test55.in,
            src/testdir/test55.ok

Patch 7.4.1549 (after 7.4.1547)
问题:       Test for syntax attributes fails in Win32 GUI.
解决方案:   Use an existing font name.
相关文件:   src/testdir/test_syn_attr.vim

Patch 7.4.1550
问题:       Cannot load packages early.
解决方案:   Add the ":packloadall" command.
相关文件:   src/ex_cmds.h, src/ex_cmds2.c, src/main.c,
            src/proto/ex_cmds2.pro, src/testdir/test_packadd.vim

Patch 7.4.1551
问题:       Cannot generate help tags in all doc directories.
解决方案:   Make ":helptags ALL" work.
相关文件:   src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/ex_cmds.c, src/vim.h
            src/testdir/test_packadd.vim

Patch 7.4.1552
问题:       ":colorscheme" does not use 'packpath'.
解决方案:   Also use in "start" and "opt" directories in 'packpath'.
相关文件:   src/ex_cmds2.c, src/gui.c, src/hardcopy.c, src/os_mswin.c,
            src/spell.c, src/tag.c, src/if_py_both.h, src/vim.h,
            src/digraph.c, src/eval.c, src/ex_docmd.c, src/main.c,
            src/option.c, src/syntax.c, src/testdir/test_packadd.vim

Patch 7.4.1553
问题:       ":runtime" does not use 'packpath'.
解决方案:   Add "what" argument.
相关文件:   src/ex_cmds2.c, src/vim.h, runtime/doc/repeat.txt,
            src/testdir/test_packadd.vim

Patch 7.4.1554
问题:       Completion for :colorscheme does not use 'packpath'.
解决方案:   Make it work, add a test. (Hirohito Higashi)
相关文件:   src/ex_getln.c, src/testdir/test_packadd.vim

Patch 7.4.1555
问题:       List of test targets incomplete.
解决方案:   Add newly added tests.
相关文件:   src/Makefile

Patch 7.4.1556
问题:       "make install" changes the help tags file, causing it to differ
            from the repository.
解决方案:   Move it aside and restore it.
相关文件:   src/Makefile

Patch 7.4.1557
问题:       Windows cannot be identified.
解决方案:   Add a unique window number to each window and functions to use it.
相关文件:   src/structs.h, src/window.c, src/eval.c, src/proto/eval.pro,
            src/proto/window.pro, src/testdir/test_window_id.vim,
            src/testdir/Make_all.mak, runtime/doc/eval.txt

Patch 7.4.1558
问题:       It is not easy to find out what windows display a buffer.
解决方案:   Add win_findbuf().
相关文件:   src/eval.c, src/window.c, src/proto/window.pro,
            src/testdir/test_window_id.vim, runtime/doc/eval.txt

Patch 7.4.1559
问题:       Passing cookie to a callback is clumsy.
解决方案:   Change function() to take arguments and return a partial.
相关文件:   src/structs.h, src/channel.c, src/eval.c, src/if_python.c,
            src/if_python3.c, src/if_py_both.h, src/json.c,
            src/proto/eval.pro, src/testdir/test_partial.vim,
            src/testdir/test_alot.vim, runtime/doc/eval.txt

Patch 7.4.1560
问题:       Dict options with a dash are more difficult to use.
解决方案:   Use an underscore, so that dict.err_io can be used.
相关文件:   src/channel.c, src/structs.h, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 7.4.1561 (after 7.4.1559)
问题:       Missing update to proto file.
解决方案:   Change the proto file.
相关文件:   src/proto/channel.pro

Patch 7.4.1562
问题:       ":helptags ALL" crashes. (Lcd)
解决方案:   Don't free twice.
相关文件:   src/ex_cmds.c

Patch 7.4.1563
问题:       Partial test fails on windows.
解决方案:   Return 1 or -1 from compare function.
相关文件:   src/testdir/test_partial.vim

Patch 7.4.1564
问题:       An empty list in function() causes an error.
解决方案:   Handle an empty list like there is no list of arguments.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1565
问题:       Crash when assert_equal() runs into a NULL string.
解决方案:   Check for NULL. (Dominique) Add a test.
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1566
问题:       Compiler warning for shadowed variable. (Kazunobu Kuriyama)
解决方案:   Remove the inner one.
相关文件:   src/eval.c

Patch 7.4.1567
问题:       Crash in assert_fails().
解决方案:   Check for NULL. (Dominique Pelle)  Add a test.
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 7.4.1568
问题:       Using CTRL-] in help on option in parentheses doesn't work.
解决方案:   Skip the "(" in "('". (Hirohito Higashi)
相关文件:   src/ex_cmds.c

Patch 7.4.1569
问题:       Using old style tests for quickfix.
解决方案:   Change them to new style tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/test106.in,
            src/testdir/test106.ok, src/testdir/test_qf_title.in,
            src/testdir/test_qf_title.ok, src/testdir/test_quickfix.vim

Patch 7.4.1570
问题:       There is no way to avoid the message when editing a file.
解决方案:   Add the "F" flag to 'shortmess'. (Shougo Matsu, closes #686)
相关文件:   runtime/doc/options.txt, src/buffer.c, src/ex_cmds.c,
            src/option.h

Patch 7.4.1571
问题:       No test for ":help".
解决方案:   Add a test for what 7.4.1568 fixed. (Hirohito Higashi)
相关文件:   src/testdir/test_alot.vim, src/testdir/test_help_tagjump.vim

Patch 7.4.1572
问题:       Setting 'compatible' in test influences following tests.
解决方案:   Turn 'compatible' off again.
相关文件:   src/testdir/test_backspace_opt.vim

Patch 7.4.1573
问题:       Tests get stuck at the more prompt.
解决方案:   Move the backspace test out of test_alot.
相关文件:   src/testdir/test_alot.vim, src/testdir/Make_all.mak

Patch 7.4.1574
问题:       ":undo 0" does not work. (Florent Fayolle)
解决方案:   Make it undo all the way. (closes #688)
相关文件:   src/undo.c, src/testdir/test_undolevels.vim,
            src/testdir/test_ex_undo.vim, src/testdir/test_alot.vim

Patch 7.4.1575
问题:       Using wrong size for struct.
解决方案:   Use the size for wide API. (Ken Takata)
相关文件:   src/gui_w32.c

Patch 7.4.1576
问题:       Write error of viminfo file is not handled properly. (Christian
            Neukirchen)
解决方案:   Check the return value of fclose(). (closes #682)
相关文件:   src/ex_cmds.c

Patch 7.4.1577
问题:       Cannot pass "dict.Myfunc" around as a partial.
解决方案:   Create a partial when expected.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1578
问题:       There is no way to invoke a function later or periodically.
解决方案:   Add timer support.
相关文件:   src/eval.c, src/ex_cmds2.c, src/screen.c, src/ex_docmd.c,
            src/feature.h, src/gui.c, src/proto/eval.pro,
            src/proto/ex_cmds2.pro, src/proto/screen.pro, src/structs.h,
            src/version.c, src/testdir/test_alot.vim,
            src/testdir/test_timers.vim, runtime/doc/eval.txt

Patch 7.4.1579 (after 7.4.1578)
问题:       Missing changes in channel.c
解决方案:   Include the changes.
相关文件:   src/channel.c

Patch 7.4.1580
问题:       Crash when using function reference. (Luchr)
解决方案:   Set initial refcount. (Ken Takata, closes #690)
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1581
问题:       Using ":call dict.func()" where the function is a partial does
            not work.  Using "dict.func()" where the function does not take a
            Dictionary does not work.
解决方案:   Handle partial properly in ":call". (Yasuhiro Matsumoto)
相关文件:   src/eval.c, src/testdir/test_partial.vim, src/testdir/test55.ok

Patch 7.4.1582
问题:       Get E923 when using function(dict.func, [], dict). (Kent Sibilev)
            Storing a function with a dict in a variable drops the dict if the
            function is script-local.
解决方案:   Translate the function name.  Use dict arg if present.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1583
问题:       Warning for uninitialized variable.
解决方案:   Initialize it. (Dominique)
相关文件:   src/ex_cmds2.c

Patch 7.4.1584
问题:       Timers don't work for Win32 console.
解决方案:   Add check_due_timer() in WaitForChar().
相关文件:   src/os_win32.c

Patch 7.4.1585
问题:       Partial is not recognized everywhere.
解决方案:   Check for partial in trans_function_name(). (Yasuhiro Matsumoto)
            Add a test.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1586
问题:       Nesting partials doesn't work.
解决方案:   Append arguments. (Ken Takata)
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1587
问题:       Compiler warnings with 64 bit compiler.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/ex_cmds2.c

Patch 7.4.1588
问题:       Old style test for quickfix.
解决方案:   Turn test 96 into a new style test.
相关文件:   src/testdir/Make_all.mak, src/testdir/test96.in,
            src/testdir/test96.ok, src/testdir/test_quickfix.vim

Patch 7.4.1589
问题:       Combining dict and args with partial doesn't always work.
解决方案:   Use the arguments from the partial.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1590
问题:       Warning for shadowed variable. (Christian Brabandt)
解决方案:   Move the variable into a local block.
相关文件:   src/eval.c

Patch 7.4.1591
问题:       The quickfix title is truncated.
解决方案:   Save the command before it is truncated. (Anton Lindqvist)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1592
问题:       Quickfix code using memory after being freed. (Dominique Pelle)
解决方案:   Detect that the window was closed. (Hirohito Higashi)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1593
问题:       Using channel timeout instead of request timeout. (Coverity)
解决方案:   Remove the extra assignment.
相关文件:   src/channel.c

Patch 7.4.1594
问题:       Timers don't work on Unix.
解决方案:   Add missing code.
相关文件:   src/os_unix.c

Patch 7.4.1595
问题:       Not checking for failed open(). (Coverity)
解决方案:   Check file descriptor not being negative.
相关文件:   src/os_unix.c

Patch 7.4.1596
问题:       Memory leak. (Coverity)
解决方案:   Free the pattern.
相关文件:   src/ex_cmds2.c

Patch 7.4.1597
问题:       Memory leak when out of memory. (Coverity)
解决方案:   Free the name.
相关文件:   src/eval.c

Patch 7.4.1598
问题:       When starting the GUI fails a swap file is left behind. (Joerg
            Plate)
解决方案:   Preserve files before exiting. (closes #692)
相关文件:   src/main.c, src/gui.c

Patch 7.4.1599
问题:       No link to Coverity.
解决方案:   Add Coverity badge in README.
相关文件:   README.md

Patch 7.4.1600
问题:       libs directory is not useful.
解决方案:   Remove arp.library, it was only for very old Amiga versions.
相关文件:   libs/arp.library, Filelist

Patch 7.4.1601
问题:       README files take a lot of space in the top directory.
解决方案:   Move most of them to "READMEdir".
相关文件:   Filelist, Makefile, README.txt.info, README_ami.txt,
            README_ami.txt.info, README_amibin.txt, README_amibin.txt.info,
            README_amisrc.txt, README_amisrc.txt.info, README_bindos.txt,
            README_dos.txt, README_extra.txt, README_mac.txt, README_ole.txt,
            README_os2.txt, README_os390.txt, README_src.txt,
            README_srcdos.txt, README_unix.txt, README_vms.txt,
            README_w32s.txt, READMEdir/README.txt.info,
            READMEdir/README_ami.txt, READMEdir/README_ami.txt.info,
            READMEdir/README_amibin.txt, READMEdir/README_amibin.txt.info,
            READMEdir/README_amisrc.txt, READMEdir/README_amisrc.txt.info,
            READMEdir/README_bindos.txt, READMEdir/README_dos.txt,
            READMEdir/README_extra.txt, READMEdir/README_mac.txt,
            READMEdir/README_ole.txt, READMEdir/README_os2.txt,
            READMEdir/README_os390.txt, READMEdir/README_src.txt,
            READMEdir/README_srcdos.txt, READMEdir/README_unix.txt,
            READMEdir/README_vms.txt, READMEdir/README_w32s.txt,

Patch 7.4.1602
问题:       Info files take space in the top directory.
解决方案:   Move them to "READMEdir".
相关文件:   Filelist, src.info, Contents.info, runtime.info, vimdir.info,
            Vim.info, Xxd.info, READMEdir/src.info, READMEdir/Contents.info,
            READMEdir/runtime.info, READMEdir/vimdir.info, READMEdir/Vim.info,
            READMEdir/Xxd.info

Patch 7.4.1603
问题:       Timer with an ":echo" command messes up display.
解决方案:   Redraw depending on the mode. (Hirohito Higashi)  Avoid the more
            prompt being used recursively.
相关文件:   src/screen.c, src/message.c

Patch 7.4.1604
问题:       Although emoji characters are ambiguous width, best is to treat
            them as full width.
解决方案:   Update the Unicode character tables. Add the 'emoji' options.
            (Yasuhiro Matsumoto)
相关文件:   runtime/doc/options.txt, runtime/optwin.vim,
            runtime/tools/unicode.vim, src/mbyte.c, src/option.c, src/option.h

Patch 7.4.1605
问题:       Catching exception that won't be thrown.
解决方案:   Remove try/catch.
相关文件:   src/testdir/test55.in

Patch 7.4.1606
问题:       Having type() handle a Funcref that is or isn't a partial
            differently causes problems for existing scripts.
解决方案:   Make type() return the same value. (Thinca)
相关文件:   src/eval.c, src/testdir/test_viml.vim

Patch 7.4.1607
问题:       Comparing a function that exists on two dicts is not backwards
            compatible. (Thinca)
解决方案:   Only compare the function, not what the partial adds.
相关文件:   src/eval.c, src/testdir/test_alot.vim, src/testdir/test_expr.vim

Patch 7.4.1608
问题:       string() doesn't handle a partial.
解决方案:   Make a string from a partial.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1609
问题:       Contents file is only for Amiga distro.
解决方案:   Move it to "READMEdir".  Update some info.
相关文件:   Filelist, Contents, READMEdir/Contents

Patch 7.4.1610
问题:       Compiler warnings for non-virtual destructor.
解决方案:   Mark the classes final. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/gui_dwrite.cpp, src/if_ole.cpp

Patch 7.4.1611
问题:       The versplit feature makes the code unnecessary complicated.
解决方案:   Remove FEAT_VERTSPLIT, always support vertical splits when
            FEAT_WINDOWS is defined.
相关文件:   src/buffer.c, src/charset.c, src/eval.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/gui.c, src/if_lua.c,
            src/if_mzsch.c, src/if_ruby.c, src/main.c, src/misc1.c,
            src/misc2.c, src/move.c, src/normal.c, src/option.c,
            src/quickfix.c, src/screen.c, src/syntax.c, src/term.c, src/ui.c,
            src/window.c, src/globals.h, src/gui.h, src/if_py_both.h,
            src/option.h, src/structs.h, src/term.h
            src/feature.h, src/vim.h, src/version.c

Patch 7.4.1612 (after 7.4.1611)
问题:       Can't build with small features.
解决方案:   Move code and #ifdefs.
相关文件:   src/ex_getln.c

Patch 7.4.1613 (after 7.4.1612)
问题:       Still can't build with small features.
解决方案:   Adjust #ifdefs.
相关文件:   src/ex_getln.c

Patch 7.4.1614
问题:       Still quickfix test in old style.
解决方案:   Turn test 10 into a new style test.
相关文件:   src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test10.in,
            src/testdir/test10.ok, src/testdir/test_quickfix.vim,
            src/testdir/test10a.in, src/testdir/test10a.ok

Patch 7.4.1615
问题:       Build fails with tiny features.
解决方案:   Adjust #ifdefs.
相关文件:   src/normal.c, src/window.c

Patch 7.4.1616
问题:       Malformed channel request causes a hang.
解决方案:   Drop malformed message. (Damien)
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1617
问题:       When a JSON message is split it isn't decoded.
解决方案:   Wait a short time for the rest of the message to arrive.
相关文件:   src/channel.c, src/json.c, src/structs.h,
            src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1618
问题:       Starting job with output to buffer changes options in the current
            buffer.
解决方案:   Set "curbuf" earlier. (Yasuhiro Matsumoto)
相关文件:   src/channel.c

Patch 7.4.1619
问题:       When 'fileformats' is set in the vimrc it applies to new buffers
            but not the initial buffer.
解决方案:   Set 'fileformat' when starting up. (Mike Williams)
相关文件:   src/option.c

Patch 7.4.1620
问题:       Emoji characters are not considered as a kind of word character.
解决方案:   Give emoji characters a word class number. (Yasuhiro Matsumoto)
相关文件:   src/mbyte.c

Patch 7.4.1621
问题:       Channel test doesn't work with Python 2.6.
解决方案:   Add number in formatting placeholder. (Wiredool)
相关文件:   src/testdir/test_channel.py

Patch 7.4.1622
问题:       Channel demo doesn't work with Python 2.6.
解决方案:   Add number in formatting placeholder
相关文件:   runtime/tools/demoserver.py

Patch 7.4.1623
问题:       All Channels share the message ID, it keeps getting bigger.
解决方案:   Use a message ID per channel.
相关文件:   src/channel.c, src/proto/channel.pro, src/structs.h

Patch 7.4.1624
问题:       Can't get info about a channel.
解决方案:   Add ch_info().
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1625
问题:       Trying to close file descriptor that isn't open.
解决方案:   Check for negative number.
相关文件:   src/os_unix.c

Patch 7.4.1626 (after 7.4.1624)
问题:       Missing changes to structs.
解决方案:   Include the changes.
相关文件:   src/structs.h

Patch 7.4.1627
问题:       Channel out_cb and err_cb are not tested.
解决方案:   Add a test.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1628
问题:       64-bit Compiler warning.
解决方案:   Change type of variable. (Mike Williams)
相关文件:   src/channel.c

Patch 7.4.1629
问题:       Handling emoji characters as full width has problems with
            backwards compatibility.
解决方案:   Remove ambiguous and double width characters from the emoji table.
            Use a separate table for the character class.
            (partly by Yasuhiro Matsumoto)
相关文件:   runtime/tools/unicode.vim, src/mbyte.c

Patch 7.4.1630
问题:       Unicode table for double width is outdated.
解决方案:   Update to the latest Unicode standard.
相关文件:   src/mbyte.c

Patch 7.4.1631
问题:       Compiler doesn't understand switch on all enum values. (Tony
            Mechelynck)
解决方案:   Initialize variable.
相关文件:   src/channel.c

Patch 7.4.1632
问题:       List of test targets is outdated.
解决方案:   Update to current list of test targets.
相关文件:   src/Makefile

Patch 7.4.1633
问题:       If the help tags file was removed "make install" fails. (Tony
            Mechelynck)
解决方案:   Only try moving the file if it exists.
相关文件:   src/Makefile

Patch 7.4.1634
问题:       Vertical movement after CTRL-A ends up in the wrong column.
            (Urtica Dioica)
解决方案:   Set curswant when appropriate. (Hirohito Higashi)
相关文件:   src/ops.c, src/testdir/test_increment.vim

Patch 7.4.1635
问题:       Channel test is a bit flaky.
解决方案:   Remove 'DETACH' if it's there.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1636
问题:       When 'F' is in 'shortmess' the prompt for the encryption key isn't
            displayed. (Toothpik)
解决方案:   Reset msg_silent.
相关文件:   src/ex_getln.c

Patch 7.4.1637
问题:       Can't build with older MinGW compiler.
解决方案:   Change option from c++11 to gnu++11. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1638
问题:       When binding a function to a dict the reference count is wrong.
解决方案:   Decrement dict reference count, only reference the function when
            actually making a copy. (Ken Takata)
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1639
问题:       Invoking garbage collection may cause a double free.
解决方案:   Don't free the dict in a partial when recursive is FALSE.
相关文件:   src/eval.c

Patch 7.4.1640
问题:       Crash when an autocommand changes a quickfix list. (Dominique)
解决方案:   Check whether an entry is still valid. (Yegappan Lakshmanan,
            Hirohito Higashi)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1641
问题:       Using unterminated string.
解决方案:   Add NUL before calling vim_strsave_shellescape(). (James McCoy)
相关文件:   src/eval.c, src/testdir/test105.in, src/testdir/test105.ok

Patch 7.4.1642
问题:       Handling emoji characters as full width has problems with
            backwards compatibility.
解决方案:   Only put characters in the 1f000 range in the emoji table.
相关文件:   runtime/tools/unicode.vim, src/mbyte.c

Patch 7.4.1643 (after 7.4.1641)
问题:       Terminating file name has side effects.
解决方案:   Restore the character. (mostly by James McCoy, closes #713)
相关文件:   src/eval.c, src/testdir/test105.in, src/testdir/test105.ok

Patch 7.4.1644
问题:       Using string() on a partial that exists in the dictionary it binds
            results in an error. (Nikolai Pavlov)
解决方案:   Make string() not fail on a recursively nested structure. (Ken
            Takata)
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1645
问题:       When a dict contains a partial it can't be redefined as a
            function. (Nikolai Pavlov)
解决方案:   Remove the partial when overwriting with a function.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1646
问题:       Using Python vim.bindeval() on a partial doesn't work. (Nikolai
            Pavlov)
解决方案:   Add VAR_PARTIAL support in Python.
相关文件:   src/if_py_both.h, src/testdir/test_partial.vim

Patch 7.4.1647
问题:       Using freed memory after setqflist() and ":caddbuffer".  (Dominique)
解决方案:   Set qf_ptr when adding the first item to the quickfix list.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1648
问题:       Compiler has a problem copying a string into di_key[]. (Yegappan
            Lakshmanan)
解决方案:   Add dictitem16_T.
相关文件:   src/structs.h, src/eval.c

Patch 7.4.1649
问题:       The matchit plugin needs to be copied to be used.
解决方案:   Put the matchit plugin in an optional package.
相关文件:   Filelist, runtime/macros/matchit.vim, runtime/macros/matchit.txt,
            runtime/macros/README.txt, src/Makefile,
            runtime/pack/dist/opt/matchit/plugin/matchit.vim,
            runtime/pack/dist/opt/matchit/doc/matchit.txt,
            runtime/pack/dist/opt/matchit/doc/tags,
            runtime/doc/usr_05.txt, runtime/doc/usr_toc.txt

Patch 7.4.1650
问题:       Quickfix test fails.
解决方案:   Accept any number of matches.
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.1651
问题:       Some dead (MSDOS) code remains.
解决方案:   Remove the unused lines. (Ken Takata)
相关文件:   src/misc1.c

Patch 7.4.1652
问题:       Old style test for fnamemodify().
解决方案:   Turn it into a new style test.
相关文件:   src/testdir/test105.in, src/testdir/test105.ok,
            src/testdir/test_fnamemodify.vim, src/testdir/test_alot.vim,
            src/testdir/Make_all.mak

Patch 7.4.1653 (after 7.4.1649)
问题:       Users who loaded matchit.vim manually have to change their
            startup. (Gary Johnson)
解决方案:   Add a file in the old location that loads the package.
相关文件:   runtime/macros/matchit.vim, Filelist

Patch 7.4.1654
问题:       Crash when using expand('%:S') in a buffer without a name.
解决方案:   Don't set a NUL. (James McCoy, closes #714)
相关文件:   src/eval.c, src/testdir/test_fnamemodify.vim

Patch 7.4.1655
问题:       remote_expr() hangs. (Ramel)
解决方案:   Check for messages in the waiting loop.
相关文件:   src/if_xcmdsrv.c

Patch 7.4.1656
问题:       Crash when using partial with a timer.
解决方案:   Increment partial reference count. (Hirohito Higashi)
相关文件:   src/eval.c, src/testdir/test_timers.vim

Patch 7.4.1657
问题:       On Unix in a terminal: channel messages are not handled right away.
            (Jackson Alves de Aquino)
解决方案:   Break the loop for timers when something was received.
相关文件:   src/os_unix.c

Patch 7.4.1658
问题:       A plugin does not know when VimEnter autocommands were already
            triggered.
解决方案:   Add the v:vim_did_enter variable.
相关文件:   src/eval.c, src/main.c, src/vim.h, src/testdir/test_autocmd.vim,
            src/testdir/test_alot.vim, runtime/doc/autocmd.txt,
            runtime/doc/eval.txt

Patch 7.4.1659 (after 7.4.1657)
问题:       Compiler warning for argument type. (Manuel Ortega)
解决方案:   Remove "&".
相关文件:   src/os_unix.c

Patch 7.4.1660
问题:       has('patch-7.4.1') doesn't work.
解决方案:   Fix off-by-one error. (Thinca)
相关文件:   src/eval.c, src/testdir/test_expr.vim, src/testdir/test60.in,
            src/testdir/test60.ok

Patch 7.4.1661
问题:       No test for special characters in channel eval command.
解决方案:   Testing sending and receiving text with special characters.
相关文件:   src/testdir/test_channel.vim, src/testdir/test_channel.py

Patch 7.4.1662
问题:       No test for an invalid Ex command on a channel.
解决方案:   Test handling an invalid command gracefully.  Avoid getting an
            error message, do write it to the channel log.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel.py

Patch 7.4.1663
问题:       In tests it's often useful to check if a pattern matches.
解决方案:   Add assert_match().
相关文件:   src/eval.c, src/testdir/test_assert.vim,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1664
问题:       Crash in :cgetexpr.
解决方案:   Check for NULL pointer. (Dominique) Add a test.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1665
问题:       Crash when calling job_start() with a NULL string. (Dominique)
解决方案:   Check for an invalid argument.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1666
问题:       When reading JSON from a channel all readahead is used.
解决方案:   Use the fill function to reduce overhead.
相关文件:   src/channel.c, src/json.c, src/structs.h

Patch 7.4.1667
问题:       Win32: waiting on a pipe with fixed sleep time.
解决方案:   Start with a short delay and increase it when looping.
相关文件:   src/channel.c

Patch 7.4.1668
问题:       channel_get_all() does multiple allocations.
解决方案:   Compute the size and allocate once.
相关文件:   src/channel.c

Patch 7.4.1669
问题:       When writing buffer lines to a pipe Vim may block.
解决方案:   Avoid blocking, write more lines later.
相关文件:   src/channel.c, src/misc2.c, src/os_unix.c, src/structs.h,
            src/vim.h, src/proto/channel.pro, src/testdir/test_channel.vim

Patch 7.4.1670
问题:       Completion doesn't work well for a variable containing "#".
解决方案:   Recognize the "#". (Watiko)
相关文件:   src/eval.c

Patch 7.4.1671
问题:       When help exists in multiple languages, adding @ab while "ab" is
            the default help language is unnecessary.
解决方案:   Leave out "@ab" when not needed. (Ken Takata)
相关文件:   src/ex_getln.c

Patch 7.4.1672
问题:       The Dvorak support is a bit difficult to install.
解决方案:   Turn it into an optional package.
相关文件:   runtime/macros/dvorak, runtime/macros/README.txt,
            runtime/pack/dist/opt/dvorak/plugin/dvorak.vim,
            runtime/pack/dist/opt/dvorak/dvorak/enable.vim,
            runtime/pack/dist/opt/dvorak/dvorak/disable.vim

Patch 7.4.1673
问题:       The justify plugin has to be copied or sourced to be used.
解决方案:   Turn it into a package.
相关文件:   runtime/macros/justify.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/justify/plugin/justify.vim, Filelist

Patch 7.4.1674
问题:       The editexisting plugin has to be copied or sourced to be used.
解决方案:   Turn it into a package.
相关文件:   runtime/macros/editexisting.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/editexisting/plugin/editexisting.vim,
            Filelist

Patch 7.4.1675
问题:       The swapmous plugin has to be copied or sourced to be used.
解决方案:   Turn it into the swapmouse package.
相关文件:   runtime/macros/swapmous.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/swapmouse/plugin/swapmouse.vim, Filelist

Patch 7.4.1676
问题:       The shellmenu plugin has to be copied or sourced to be used.
解决方案:   Turn it into a package.
相关文件:   runtime/macros/shellmenu.vim, runtime/macros/README.txt,
            runtime/pack/dist/opt/shellmenu/plugin/shellmenu.vim, Filelist

Patch 7.4.1677
问题:       A reference to the removed file_select plugin remains.
解决方案:   Remove it.
相关文件:   runtime/macros/README.txt

Patch 7.4.1678
问题:       Warning for unused argument.
解决方案:   Add UNUSED. (Dominique Pelle)
相关文件:   src/if_mzsch.c

Patch 7.4.1679
问题:       Coverity: copying value of v_lock without initializing it.
解决方案:   Init v_lock in rettv_list_alloc() and rettv_dict_alloc().
相关文件:   src/eval.c

Patch 7.4.1680
问题:       Coverity warns for not checking name length (false positive).
解决方案:   Only copy the characters we know are there.
相关文件:   src/channel.c

Patch 7.4.1681
问题:       Coverity warns for fixed size buffer length (false positive).
解决方案:   Add a check for the name length.
相关文件:   src/eval.c

Patch 7.4.1682
问题:       Coverity: no check for NULL.
解决方案:   Add check for invalid argument to assert_match().
相关文件:   src/eval.c

Patch 7.4.1683
问题:       Generated .bat files do not support --nofork.
解决方案:   Add check for --nofork.  Also add "setlocal". (Kevin Cantú,
            closes #659)
相关文件:   src/dosinst.c

Patch 7.4.1684
问题:       README text is slightly outdated.
解决方案:   Mention the READMEdir directory.
相关文件:   README.md, README.txt

Patch 7.4.1685
问题:       There is no easy way to get all the information about a match.
解决方案:   Add matchstrpos(). (Ozaki Kiichi)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/eval.c,
            src/testdir/test_alot.vim, src/testdir/test_matchstrpos.vim

Patch 7.4.1686
问题:       When running tests $HOME/.viminfo is written. (James McCoy)
解决方案:   Add 'nviminfo' to the 'viminfo' option. (closes #722)
相关文件:   src/testdir/test_backspace_opt.vim, src/testdir/test_viminfo.vim,
            src/testdir/runtest.vim.

Patch 7.4.1687
问题:       The channel close_cb option does not work.
解决方案:   Use jo_close_partial instead of jo_err_partial. (Damien)
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1688
问题:       MzScheme does not support partial.
解决方案:   Add minimal partial support. (Ken Takata)
相关文件:   src/if_mzsch.c

Patch 7.4.1689
问题:       Ruby interface has inconsistent coding style.
解决方案:   Fix the coding style. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.4.1690
问题:       Can't compile with the conceal feature but without multi-byte.
解决方案:   Adjust #ifdef. (Owen Leibman)
相关文件:   src/eval.c, src/window.c

Patch 7.4.1691
问题:       When switching to a new buffer and an autocommand applies syntax
            highlighting an ml_get error may occur.
解决方案:   Check "syn_buf" against the buffer in the window. (Alexander von
            Buddenbrock, closes #676)
相关文件:   src/syntax.c

Patch 7.4.1692
问题:       feedkeys('i', 'x') gets stuck, waits for a character to be typed.
解决方案:   Behave like ":normal". (Yasuhiro Matsumoto)
相关文件:   src/eval.c, src/testdir/test_feedkeys.vim

Patch 7.4.1693
问题:       Building the Perl interface gives compiler warnings.
解决方案:   Remove a pragma. Add noreturn attributes. (Damien)
相关文件:   src/if_perl.xs

Patch 7.4.1694
问题:       Win32 gvim doesn't work with "dvorakj" input method.
解决方案:   Wait for QS_ALLINPUT instead of QS_ALLEVENTS. (Yukihiro Nakadaira)
相关文件:   src/gui_w32.c

Patch 7.4.1695
问题:       ":syn reset" clears the effect ":syn iskeyword". (James McCoy)
解决方案:   Remove clearing the syntax keywords.
相关文件:   src/syntax.c

Patch 7.4.1696
问题:       When using :stopinsert in a silent mapping the "INSERT" message
            isn't cleared. (Coacher)
解决方案:   Always clear the message. (Christian Brabandt, closes #718)
相关文件:   src/ex_docmd.c, src/proto/screen.pro, src/screen.c

Patch 7.4.1697
问题:       Display problems when the 'ambiwidth' and 'emoji' options are not
            set properly or the terminal doesn't behave as expected.
解决方案:   After drawing an ambiguous width character always position the
            cursor.
相关文件:   src/mbyte.c, src/screen.c, src/proto/mbyte.pro

Patch 7.4.1698
问题:       Two tests fail when running tests with MinGW. (Michael Soyka)
解决方案:   Convert test_getcwd.ok test_wordcount.ok to unix fileformat.
相关文件:   src/testdir/Make_ming.mak

Patch 7.4.1699
问题:       :packadd does not work the same when used early or late.
解决方案:   Always load plugins matching "plugin/**/*.vim".
相关文件:   src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 7.4.1700
问题:       Equivalence classes are not properly tested.
解决方案:   Add tests for multi-byte and latin1. Fix an error. (Owen Leibman)
相关文件:   src/regexp.c, src/testdir/Make_all.mak,
            src/testdir/test_alot_latin.vim, src/testdir/test_alot_utf8.vim,
            src/testdir/test_regexp_latin.vim,
            src/testdir/test_regexp_utf8.vim

Patch 7.4.1701
问题:       Equivalence classes still tested in old style tests.
解决方案:   Remove the duplicate.
相关文件:   src/testdir/test44.in, src/testdir/test44.ok,
            src/testdir/test99.in, src/testdir/test99.ok

Patch 7.4.1702
问题:       Using freed memory when parsing 'printoptions' fails.
解决方案:   Save the old options and restore them in case of an error.
            (Dominique)
相关文件:   src/hardcopy.c, src/testdir/test_hardcopy.vim

Patch 7.4.1703
问题:       Can't assert for not equal and not matching.
解决方案:   Add assert_notmatch() and assert_notequal().
相关文件:   src/eval.c, runtime/doc/eval.txt, src/testdir/test_assert.vim

Patch 7.4.1704
问题:       Using freed memory with "wincmd p". (Dominique Pelle)
解决方案:   Also clear "prevwin" in other tab pages.
相关文件:   src/window.c

Patch 7.4.1705
问题:       The 'guifont' option does not allow for a quality setting.
解决方案:   Add the "q" item, supported on MS-Windows. (Yasuhiro Matsumoto)
相关文件:   runtime/doc/options.txt, src/gui_w32.c, src/os_mswin.c,
            src/proto/os_mswin.pro

Patch 7.4.1706
问题:       Old style function declaration breaks build.
解决方案:   Remove __ARGS().
相关文件:   src/proto/os_mswin.pro

Patch 7.4.1707
问题:       Cannot use empty dictionary key, even though it can be useful.
解决方案:   Allow using an empty dictionary key.
相关文件:   src/hashtab.c, src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1708
问题:       New regexp engine does not work properly with EBCDIC.
解决方案:   Define equivalence class characters. (Owen Leibman)
相关文件:   src/regexp_nfa.c

Patch 7.4.1709
问题:       Mistake in #ifdef.
解决方案:   Change PROOF_QUALITY to DRAFT_QUALITY. (Ken Takata)
相关文件:   src/os_mswin.c

Patch 7.4.1710
问题:       Not all output of an external command is read.
解决方案:   Avoid timing out when the process has exited. (closes #681)
相关文件:   src/os_unix.c

Patch 7.4.1711
问题:       When using try/catch in 'statusline' it is still considered an
            error and the status line will be disabled.
解决方案:   Check did_emsg instead of called_emsg. (haya14busa, closes #729)
相关文件:   src/screen.c, src/testdir/test_statusline.vim,
            src/testdir/test_alot.vim

Patch 7.4.1712
问题:       For plugins in packages, plugin authors need to take care of all
            dependencies.
解决方案:   When loading "start" packages and for :packloadall, first add all
            directories to 'runtimepath' before sourcing plugins.
相关文件:   src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 7.4.1713
问题:       GTK GUI doesn't work on Wayland.
解决方案:   Specify that only the X11 backend is allowed. (Simon McVittie)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1714
问题:       Non-GUI specific settings in the gvimrc_example file.
解决方案:   Move some settings to the vimrc_example file.  Remove setting
            'hlsearch' again. (suggested by Hirohito Higashi)
相关文件:   runtime/vimrc_example.vim, runtime/gvimrc_example.vim

Patch 7.4.1715
问题:       Double free when a partial is in a cycle with a list or dict.
            (Nikolai Pavlov)
解决方案:   Do not free a nested list or dict used by the partial.
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1716
问题:       'autochdir' doesn't work for the first file. (Rob Hoelz)
解决方案:   Call DO_AUTOCHDIR after startup. (Christian Brabandt, closes #704)
相关文件:   src/main.c

Patch 7.4.1717
问题:       Leaking memory when opening a channel fails.
解决方案:   Unreference partials in job options.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1718
问题:       Coverity: not using return value of set_ref_in_item().
解决方案:   Use the return value.
相关文件:   src/eval.c

Patch 7.4.1719
问题:       Leaking memory when there is a cycle involving a job and a
            partial.
解决方案:   Add a copyID to job and channel.  Set references in items referred
            by them.  Go through all jobs and channels to find unreferenced
            items.  Also, decrement reference counts when garbage collecting.
相关文件:   src/eval.c, src/channel.c, src/netbeans.c, src/globals.h,
            src/ops.c, src/regexp.c, src/tag.c, src/proto/channel.pro,
            src/proto/eval.pro, src/testdir/test_partial.vim, src/structs.h

Patch 7.4.1720
问题:       Tests fail without the job feature.
解决方案:   Skip tests when the job feature is not present.
相关文件:   src/testdir/test_partial.vim

Patch 7.4.1721
问题:       The vimtbar files are unused.
解决方案:   Remove them. (Ken Takata)
相关文件:   src/vimtbar.dll, src/vimtbar.h, src/vimtbar.lib, Filelist

Patch 7.4.1722
问题:       Crash when calling garbagecollect() after starting a job.
解决方案:   Set the copyID on job and channel. (Hirohito Higashi, Ozaki
            Kiichi)
相关文件:   src/eval.c

Patch 7.4.1723
问题:       When using try/catch in 'tabline' it is still considered an
            error and the tabline will be disabled.
解决方案:   Check did_emsg instead of called_emsg. (haya14busa, closes #746)
相关文件:   src/screen.c, src/testdir/test_tabline.vim,
            src/testdir/test_alot.vim

Patch 7.4.1724 (after 7.4.1723)
问题:       Tabline test fails in GUI.
解决方案:   Remove 'e' from 'guioptions'.
相关文件:   src/testdir/test_tabline.vim

Patch 7.4.1725
问题:       Compiler errors for non-ANSI compilers.
解决方案:   Remove // comment.  Remove comma at end of enum. (Michael Jarvis)
相关文件:   src/eval.c

Patch 7.4.1726
问题:       ANSI compiler complains about string length.
解决方案:   Split long string in two parts. (Michael Jarvis)
相关文件:   src/ex_cmds.c

Patch 7.4.1727
问题:       Cannot detect a crash in tests when caused by garbagecollect().
解决方案:   Add garbagecollect_for_testing().  Do not free a job if is still
            useful.
相关文件:   src/channel.c, src/eval.c, src/getchar.c, src/main.c, src/vim.h,
            src/proto/eval.pro, src/testdir/runtest.vim,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1728
问题:       The help for functions require a space after the "(".
解决方案:   Make CTRL-] on a function name ignore the arguments. (Hirohito
            Higashi)
相关文件:   src/ex_cmds.c, src/testdir/test_help_tagjump.vim,
            runtime/doc/eval.txt

Patch 7.4.1729
问题:       The Perl interface cannot use 'print' operator for writing
            directly in standard IO.
解决方案:   Add a minimal implementation of PerlIO Layer feature and try to
            use it for STDOUT/STDERR. (Damien)
相关文件:   src/if_perl.xs, src/testdir/test_perl.vim

Patch 7.4.1730
问题:       It is not easy to get a character out of a string.
解决方案:   Add strgetchar() and strcharpart().
相关文件:   src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1731
问题:       Python: turns partial into simple funcref.
解决方案:   Use partials like partials. (Nikolai Pavlov, closes #734)
相关文件:   runtime/doc/if_pyth.txt, src/eval.c, src/if_py_both.h,
            src/if_python.c, src/if_python3.c, src/proto/eval.pro,
            src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.1732
问题:       Folds may close when using autocomplete. (Anmol Sethi)
解决方案:   Increment/decrement disable_fold. (Christian Brabandt, closes
            #643)
相关文件:   src/edit.c, src/fold.c, src/globals.h

Patch 7.4.1733
问题:       "make install" doesn't know about cross-compiling. (Christian
            Neukirchen)
解决方案:   Add CROSS_COMPILING. (closes #740)
相关文件:   src/configure.in, src/auto/configure, src/config.mk.in,
            src/Makefile

Patch 7.4.1734 (after 7.4.1730)
问题:       Test fails when not using utf-8.
解决方案:   Split test in regular and utf-8 part.
相关文件:   src/testdir/test_expr.vim, src/testdir/test_expr_utf8.vim,
            src/testdir/test_alot_utf8.vim

Patch 7.4.1735
问题:       It is not possible to only see part of the message history.  It is
            not possible to clear messages.
解决方案:   Add a count to ":messages" and a clear argument. (Yasuhiro
            Matsumoto)
相关文件:   runtime/doc/message.txt, src/ex_cmds.h, src/message.c,
            src/testdir/test_messages.vim, src/testdir/test_alot.vim

Patch 7.4.1736 (after 7.4.1731)
问题:       Unused variable.
解决方案:   Remove it. (Yasuhiro Matsumoto)
相关文件:   src/if_py_both.h

Patch 7.4.1737
问题:       Argument marked as unused is used.
解决方案:   Remove UNUSED.
相关文件:   src/message.c

Patch 7.4.1738
问题:       Count for ":messages" depends on number of lines.
解决方案:   Add ADDR_OTHER address type.
相关文件:   src/ex_cmds.h

Patch 7.4.1739
问题:       Messages test fails on MS-Windows.
解决方案:   Adjust the asserts.  Skip the "messages maintainer" line if not
            showing all messages.
相关文件:   src/message.c, src/testdir/test_messages.vim

Patch 7.4.1740
问题:       syn-cchar defined with matchadd() does not appear if there are no
            other syntax definitions which matches buffer text.
解决方案:   Check for startcol. (Ozaki Kiichi, haya14busa, closes #757)
相关文件:   src/screen.c, src/testdir/Make_all.mak,
            src/testdir/test_alot_utf8.vim, src/testdir/test_match_conceal.in,
            src/testdir/test_match_conceal.ok,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_undolevels.vim

Patch 7.4.1741
问题:       Not testing utf-8 characters.
解决方案:   Move the right asserts to the test_expr_utf8 test.
相关文件:   src/testdir/test_expr.vim, src/testdir/test_expr_utf8.vim

Patch 7.4.1742
问题:       strgetchar() does not work correctly.
解决方案:   use mb_cptr2len().  Add a test. (Naruhiko Nishino)
相关文件:   src/eval.c, src/testdir/test_expr_utf8.vim

Patch 7.4.1743
问题:       Clang warns for uninitialized variable. (Michael Jarvis)
解决方案:   Initialize it.
相关文件:   src/if_py_both.h

Patch 7.4.1744
问题:       Python: Converting a sequence may leak memory.
解决方案:   Decrement a reference. (Nikolai Pavlov)
相关文件:   src/if_py_both.h

Patch 7.4.1745
问题:       README file is not clear about where to get Vim.
解决方案:   Add links to github, releases and the Windows installer.
            (Suggested by Christian Brabandt)
相关文件:   README.md, README.txt

Patch 7.4.1746
问题:       Memory leak in Perl.
解决方案:   Decrement the reference count.  Add a test. (Damien)
相关文件:   src/if_perl.xs, src/testdir/test_perl.vim

Patch 7.4.1747
问题:       Coverity: missing check for NULL pointer.
解决方案:   Check for out of memory.
相关文件:   src/if_py_both.h

Patch 7.4.1748
问题:       "gD" does not find match in first column of first line. (Gary
            Johnson)
解决方案:   Accept match at the cursor.
相关文件:   src/normal.c, src/testdir/test_goto.vim, src/testdir/test_alot.vim

Patch 7.4.1749
问题:       When using GTK 3.20 there are a few warnings.
解决方案:   Use new functions when available. (Kazunobu Kuriyama)
相关文件:   src/gui_beval.c src/gui_gtk_x11.c

Patch 7.4.1750
问题:       When a buffer gets updated while in command line mode, the screen
            may be messed up.
解决方案:   Postpone the redraw when the screen is scrolled.
相关文件:   src/channel.c

Patch 7.4.1751
问题:       Crash when 'tagstack' is off. (Dominique Pelle)
解决方案:   Fix it. (Hirohito Higashi)
相关文件:   src/tag.c, src/testdir/test_alot.vim, src/testdir/test_tagjump.vim

Patch 7.4.1752
问题:       When adding to the quickfix list the current position is reset.
解决方案:   Do not reset the position when not needed. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1753
问题:       "noinsert" in 'completeopt' is sometimes ignored.
解决方案:   Set the variables when the 'completeopt' was set. (Ozaki Kiichi)
相关文件:   src/edit.c, src/option.c, src/proto/edit.pro

Patch 7.4.1754
问题:       When 'filetype' was set and reloading a buffer which does not
            cause it to be set, the syntax isn't loaded. (KillTheMule)
解决方案:   Remember whether the FileType event was fired and fire it if not.
            (Anton Lindqvist, closes #747)
相关文件:   src/fileio.c, src/testdir/test_syntax.vim

Patch 7.4.1755
问题:       When using getreg() on a non-existing register a NULL list is
            returned. (Bjorn Linse)
解决方案:   Allocate an empty list. Add a test.
相关文件:   src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1756
问题:       "dll" options are not expanded.
解决方案:   Expand environment variables. (Ozaki Kiichi)
相关文件:   src/option.c, src/testdir/test_alot.vim,
            src/testdir/test_expand_dllpath.vim

Patch 7.4.1757
问题:       When using complete() it may set 'modified' even though nothing
            was inserted.
解决方案:   Use Down/Up instead of Next/Previous match. (Shougo Matsu, closes
	    #745)
相关文件:   src/edit.c

Patch 7.4.1758
问题:       Triggering CursorHoldI when in CTRL-X mode causes problems.
解决方案:   Do not trigger CursorHoldI in CTRL-X mode. Add "!" flag to
            feedkeys() (test with that didn't work though).
相关文件:   src/edit.c, src/eval.c

Patch 7.4.1759
问题:       When using feedkeys() in a timer the inserted characters are not
            used right away.
解决方案:   Break the wait loop when characters have been added to typebuf.
            use this for testing CursorHoldI.
相关文件:   src/gui.c, src/os_win32.c, src/os_unix.c,
            src/testdir/test_autocmd.vim

Patch 7.4.1760 (after 7.4.1759)
问题:       Compiler warning for unused variable.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/os_win32.c

Patch 7.4.1761
问题:       Coverity complains about ignoring return value.
解决方案:   Add "(void)" to get rid of the warning.
相关文件:   src/eval.c

Patch 7.4.1762
问题:       Coverity: useless assignments.
解决方案:   Remove them.
相关文件:   src/search.c

Patch 7.4.1763
问题:       Coverity: useless assignment.
解决方案:   Add #if 0.
相关文件:   src/spell.c

Patch 7.4.1764
问题:       C++ style comment. (Ken Takata)
解决方案:   Finish the work started here: don't call perror() when stderr
            isn't working.
相关文件:   src/os_unix.c

Patch 7.4.1765
问题:       Undo options are not together in the options window.
解决方案:   Put them together.  (Gary Johnson)
相关文件:   runtime/optwin.vim

Patch 7.4.1766
问题:       Building instructions for MS-Windows are outdated.
解决方案:   Mention setting SDK_INCLUDE_DIR. (Ben Franklin, closes #771)  Move
            outdated instructions further down.
相关文件:   src/INSTALLpc.txt

Patch 7.4.1767
问题:       When installing Vim on a GTK system the icon cache is not updated.
解决方案:   Update the GTK icon cache when possible. (Kazunobu Kuriyama)
相关文件:   src/Makefile, src/configure.in, src/config.mk.in,
            src/auto/configure

Patch 7.4.1768
问题:       Arguments of setqflist() are not checked properly.
解决方案:   Add better checks, add a test. (Nikolai Pavlov, Hirohito Higashi,
            closes #661)
相关文件:   src/eval.c, src/testdir/test_quickfix.vim

Patch 7.4.1769
问题:       No "closed", "errors" and "encoding" attribute on Python output.
解决方案:   Add attributes and more tests. (Roland Puntaier, closes #622)
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c,
            src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.1770
问题:       Cannot use true color in the terminal.
解决方案:   Add the 'guicolors' option. (Nikolai Pavlov)
相关文件:   runtime/doc/options.txt, runtime/doc/term.txt,
            runtime/doc/various.txt, src/auto/configure, src/config.h.in,
            src/configure.in, src/eval.c, src/globals.h, src/hardcopy.c,
            src/option.c, src/option.h, src/proto/term.pro, src/screen.c,
            src/structs.h, src/syntax.c, src/term.c, src/term.h,
            src/version.c, src/vim.h

Patch 7.4.1771 (after 7.4.1768)
问题:       Warning for unused variable.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/eval.c

Patch 7.4.1772 (after 7.4.1767)
问题:       Installation fails when $GTK_UPDATE_ICON_CACHE is empty.
解决方案:   Add quotes. (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 7.4.1773 (after 7.4.1770)
问题:       Compiler warnings. (Dominique Pelle)
解决方案:   Add UNUSED. Add type cast. Avoid a buffer overflow.
相关文件:   src/syntax.c, src/term.c

Patch 7.4.1774 (after 7.4.1770)
问题:       Cterm true color feature has warnings.
解决方案:   Add type casts.
相关文件:   src/screen.c, src/syntax.c, src/term.c

Patch 7.4.1775
问题:       The rgb.txt file is not installed.
解决方案:   Install the file. (Christian Brabandt)
相关文件:   src/Makefile

Patch 7.4.1776
问题:       Using wrong buffer length.
解决方案:   use the right name. (Kazunobu Kuriyama)
相关文件:   src/term.c

Patch 7.4.1777
问题:       Newly added features can escape the sandbox.
解决方案:   Add checks for restricted and secure. (Yasuhiro Matsumoto)
相关文件:   src/eval.c

Patch 7.4.1778
问题:       When using the term truecolor feature, the t_8f and t_8b termcap
            options are not set by default.
解决方案:   Move the values to before BT_EXTRA_KEYS. (Christian Brabandt)
相关文件:   src/term.c

Patch 7.4.1779
问题:       Using negative index in strcharpart(). (Yegappan Lakshmanan)
解决方案:   Assume single byte when using a negative index.
相关文件:   src/eval.c

Patch 7.4.1780
问题:       Warnings reported by cppcheck.
解决方案:   Fix the warnings. (Dominique Pelle)
相关文件:   src/ex_cmds2.c, src/json.c, src/misc1.c, src/ops.c,
            src/regexp_nfa.c

Patch 7.4.1781
问题:       synIDattr() does not respect 'guicolors'.
解决方案:   Change the condition for the mode. (Christian Brabandt)
相关文件:   src/eval.c

Patch 7.4.1782
问题:       strcharpart() does not work properly with some multi-byte
            characters.
解决方案:   Use mb_cptr2len() instead of mb_char2len(). (Hirohito Higashi)
相关文件:   src/eval.c, src/testdir/test_expr_utf8.vim

Patch 7.4.1783
问题:       The old regexp engine doesn't handle character classes correctly.
            (Manuel Ortega)
解决方案:   Use regmbc() instead of regc().  Add a test.
相关文件:   src/regexp.c, src/testdir/test_regexp_utf8.vim

Patch 7.4.1784
问题:       The termtruecolor feature is enabled differently from many other
            features.
解决方案:   Enable the termtruecolor feature for the big build, not through
            configure.
相关文件:   src/configure.in, src/config.h.in, src/auto/configure,
            src/feature.h

Patch 7.4.1785 (after 7.4.1783)
问题:       Regexp test fails on windows.
解决方案:   set 'isprint' to the right value for testing.
相关文件:   src/testdir/test_regexp_utf8.vim

Patch 7.4.1786
问题:       Compiled-in colors do not match rgb.txt.
解决方案:   Use the rgb.txt colors. (Kazunobu Kuriyama)
相关文件:   src/term.c

Patch 7.4.1787
问题:       When a job ends the close callback is invoked before other
            callbacks. On Windows the close callback is not called.
解决方案:   First invoke out/err callbacks before the close callback.
            Make the close callback work on Windows.
相关文件:   src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel_pipe.py

Patch 7.4.1788
问题:       NSIS script is missing packages.
解决方案:   Add the missing directories. (Ken Takata)
相关文件:   nsis/gvim.nsi

Patch 7.4.1789
问题:       Cannot use ch_read() in the close callback.
解决方案:   Do not discard the channel if there is readahead.  Do not discard
            readahead if there is a close callback.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 7.4.1790
问题:       Leading white space in a job command matters. (Andrew Stewart)
解决方案:   Skip leading white space.
相关文件:   src/os_unix.c

Patch 7.4.1791
问题:       Channel could be garbage collected too early.
解决方案:   Don't free a channel or remove it from a job when it is still
            useful.
相关文件:   src/channel.c

Patch 7.4.1792
问题:       Color name decoding is implemented several times.
解决方案:   Move it to term.c. (Christian Brabandt)
相关文件:   src/gui_mac.c, src/gui_photon.c, src/gui_w32.c,
            src/proto/term.pro, src/term.c

Patch 7.4.1793
问题:       Some character classes may differ between systems.  On OS/X the
            regexp test fails.
解决方案:   Make this less dependent on the system. (idea by Kazunobu Kuriyama)
相关文件:   src/regexp.c, src/regexp_nfa.c

Patch 7.4.1794 (after 7.4.1792)
问题:       Can't build on MS-Windows.
解决方案:   Add missing declaration.
相关文件:   src/gui_w32.c

Patch 7.4.1795
问题:       Compiler warning for redefining RGB. (John Marriott)
解决方案:   Rename it to TORGB.
相关文件:   src/term.c

Patch 7.4.1796 (after 7.4.1795)
问题:       Colors are wrong on MS-Windows. (Christian Robinson)
解决方案:   Use existing RGB macro if it exists. (Ken Takata)
相关文件:   src/term.c

Patch 7.4.1797
问题:       Warning from Windows 64 bit compiler.
解决方案:   Change int to size_t. (Mike Williams)
相关文件:   src/term.c

Patch 7.4.1798
问题:       Still compiler warning for unused return value. (Charles Campbell)
解决方案:   Assign to ignoredp.
相关文件:   src/term.c

Patch 7.4.1799
问题:       'guicolors' is a confusing option name.
解决方案:   Use 'termguicolors' instead. (Hirohito Higashi, Ken Takata)
相关文件:   runtime/doc/options.txt, runtime/doc/term.txt,
            runtime/doc/various.txt, runtime/syntax/dircolors.vim, src/eval.c,
            src/feature.h, src/globals.h, src/hardcopy.c, src/option.c,
            src/option.h, src/proto/term.pro, src/screen.c, src/structs.h,
            src/syntax.c, src/term.c, src/version.c, src/vim.h

Patch 7.4.1800 (after 7.4.1799)
问题:       Unnecessary #ifdef.
解决方案:   Just use USE_24BIT. (Ken Takata)
相关文件:   src/syntax.c

Patch 7.4.1801
问题:       Make uninstall leaves file behind.
解决方案:   Delete rgb.txt. (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 7.4.1802
问题:       Quickfix doesn't handle long lines well, they are split.
解决方案:   Drop characters after a limit. (Anton Lindqvist)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim,
            src/testdir/samples/quickfix.txt

Patch 7.4.1803
问题:       GTK3 doesn't handle menu separators properly.
解决方案:   Use gtk_separator_menu_item_new(). (Kazunobu Kuriyama)
相关文件:   src/gui_gtk.c

Patch 7.4.1804
问题:       Can't use Vim as MANPAGER.
解决方案:   Add manpager.vim. (Enno Nagel, closes #491)
相关文件:   runtime/doc/filetype.txt, runtime/plugin/manpager.vim

Patch 7.4.1805
问题:       Running tests in shadow dir fails.
解决方案:   Link the samples directory
相关文件:   src/Makefile

Patch 7.4.1806
问题:       'termguicolors' option missing from the options window.
解决方案:   Add the entry.
相关文件:   runtime/optwin.vim

Patch 7.4.1807
问题:       Test_out_close_cb sometimes fails.
解决方案:   Always write DETACH to out, not err.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1808 (after 7.4.1806)
问题:       Using wrong feature name to check for 'termguicolors'.
解决方案:   Use the right feature name. (Ken Takata)
相关文件:   runtime/optwin.vim

Patch 7.4.1809 (after 7.4.1808)
问题:       Using wrong short option name for 'termguicolors'.
解决方案:   Use the option name.
相关文件:   runtime/optwin.vim

Patch 7.4.1810
问题:       Sending DETACH after a channel was closed isn't useful.
解决方案:   Only add DETACH for a netbeans channel.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1811
问题:       Netbeans channel gets garbage collected.
解决方案:   Set reference in nb_channel.
相关文件:   src/eval.c, src/netbeans.c, src/proto/netbeans.pro

Patch 7.4.1812
问题:       Failure on startup with Athena and Motif.
解决方案:   Check for INVALCOLOR. (Kazunobu Kuriyama)
相关文件:   src/syntax.c, src/vim.h

Patch 7.4.1813
问题:       Memory access error when running test_quickfix.
解决方案:   Allocate one more byte. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 7.4.1814
问题:       A channel may be garbage collected while it's still being used by
            a job. (James McCoy)
解决方案:   Mark the channel as used if the job is still used.  Do the same
            for channels that are still used.
相关文件:   src/eval.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1815
问题:       Compiler warnings for unused variables. (Ajit Thakkar)
解决方案:   Add a dummy initialization. (Yasuhiro Matsumoto)
相关文件:   src/quickfix.c

Patch 7.4.1816
问题:       Looping over a null list throws an error.
解决方案:   Skip over the for loop.
相关文件:   src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1817
问题:       The screen is not updated if a callback is invoked when closing a
            channel.
解决方案:   Invoke redraw_after_callback().
相关文件:   src/channel.c

Patch 7.4.1818
问题:       Help completion adds @en to all matches except the first one.
解决方案:   Remove "break", go over all items.
相关文件:   src/ex_getln.c

Patch 7.4.1819
问题:       Compiler warnings when sprintf() is a macro.
解决方案:   Don't interrupt sprintf() with an #ifdef. (Michael Jarvis,
            closes #788)
相关文件:   src/fileio.c, src/tag.c, src/term.c

Patch 7.4.1820
问题:       Removing language from help tags too often.
解决方案:   Only remove @en when not needed. (Hirohito Higashi)
相关文件:   src/ex_getln.c, src/testdir/test_help_tagjump.vim

Patch 7.4.1821 (after 7.4.1820)
问题:       Test fails on MS-Windows.
解决方案:   Sort the completion results.
相关文件:   src/testdir/test_help_tagjump.vim

Patch 7.4.1822
问题:       Redirecting stdout of a channel to "null" doesn't work. (Nicola)
解决方案:   Correct the file descriptor number.
相关文件:   src/os_unix.c

Patch 7.4.1823
问题:       Warning from 64 bit compiler.
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/quickfix.c

Patch 7.4.1824
问题:       When a job is no longer referenced and does not have an exit
            callback the process may hang around in defunct state. (Nicola)
解决方案:   Call job_status() if the job is running and won't get freed
            because it might still be useful.
相关文件:   src/channel.c

Patch 7.4.1825
问题:       When job writes to buffer nothing is written. (Nicola)
解决方案:   Do not discard a channel before writing is done.
相关文件:   src/channel.c

Patch 7.4.1826
问题:       Callbacks are invoked when it's not safe. (Andrew Stewart)
解决方案:   When a channel is to be closed don't invoke callbacks right away,
            wait for a safe moment.
相关文件:   src/structs.h, src/channel.c

Patch 7.4.1827
问题:       No error when invoking a callback when it's not safe.
解决方案:   Add an error message.  Avoid the error when freeing a channel.
相关文件:   src/structs.h, src/channel.c

Patch 7.4.1828
问题:       May try to access buffer that's already freed.
解决方案:   When freeing a buffer remove it from any channel.
相关文件:   src/buffer.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1829 (after 7.4.1828)
问题:       No message on channel log when buffer was freed.
解决方案:   Log a message.
相关文件:   src/channel.c

Patch 7.4.1830
问题:       non-antialiased misnamed.
解决方案:   Use NONANTIALIASED and NONANTIALIASED_QUALITY. (Kim Brouer,
            closes #793)
相关文件:   src/os_mswin.c, runtime/doc/options.txt

Patch 7.4.1831
问题:       When timer_stop() is called with a string there is no proper error
            message.
解决方案:   Require getting a number. (Bjorn Linse)
相关文件:   src/eval.c

Patch 7.4.1832
问题:       Memory leak in debug commands.
解决方案:   Free memory before overwriting the pointer. (hint by Justin Keyes)
相关文件:   src/ex_cmds2.c

Patch 7.4.1833
问题:       Cannot use an Ex command for 'keywordprg'.
解决方案:   Accept an Ex command. (Nelo-Thara Wallus)
相关文件:   src/normal.c, runtime/doc/options.txt

Patch 7.4.1834
问题:       Possible crash when conceal is active.
解决方案:   Check for the screen to be valid when redrawing a line.
相关文件:   src/screen.c

Patch 7.4.1835
问题:       When splitting and closing a window the status height changes.
解决方案:   Compute the frame height correctly. (Hirohito Higashi)
相关文件:   src/window.c, src/testdir/test_alot.vim,
            src/testdir/test_window_cmd.vim

Patch 7.4.1836
问题:       When using a partial on a dictionary it always gets bound to that
            dictionary.
解决方案:   Make a difference between binding a function to a dictionary
            explicitly or automatically.
相关文件:   src/structs.h, src/eval.c, src/testdir/test_partial.vim,
            runtime/doc/eval.txt

Patch 7.4.1837
问题:       The BufUnload event is triggered twice, when :bunload is used with
            `bufhidden` set to `unload` or `delete`.
解决方案:   Do not trigger the event when ml_mfp is NULL. (Hirohito Higashi)
相关文件:   src/buffer.c, src/testdir/test_autocmd.vim

Patch 7.4.1838
问题:       Functions specifically for testing do not sort together.
解决方案:   Rename garbagecollect_for_testing() to test_garbagecollect_now().
            Add test_null_list(), test_null_dict(), etc.
相关文件:   src/eval.c, src/testdir/test_expr.vim,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 7.4.1839
问题:       Cannot get the items stored in a partial.
解决方案:   Support using get() on a partial.
相关文件:   src/eval.c, src/testdir/test_partial.vim, runtime/doc/eval.txt

Patch 7.4.1840
问题:       When using packages an "after" directory cannot be used.
解决方案:   Add the "after" directory of the package to 'runtimepath' if it
            exists.
相关文件:   src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 7.4.1841
问题:       The code to reallocate the buffer used for quickfix is repeated.
解决方案:   Move the code to a function. (Yegappan Lakshmanan, closes #831)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1842 (after 7.4.1839)
问题:       get() works for Partial but not for Funcref.
解决方案:   Accept Funcref.  Also return the function itself. (Nikolai Pavlov)
相关文件:   src/eval.c, src/testdir/test_partial.vim, runtime/doc/eval.txt

Patch 7.4.1843
问题:       Tests involving Python are flaky.
解决方案:   Set the pt_auto field.  Add tests. (Nikolai Pavlov)
相关文件:   runtime/doc/if_pyth.txt, src/if_py_both.h, src/testdir/test86.in,
            src/testdir/test86.ok, src/testdir/test87.in,
            src/testdir/test87.ok

Patch 7.4.1844
问题:       Using old function name in comment.  More functions should start
            with test_.
解决方案:   Rename function in comment. (Hirohito Higashi) Rename
            disable_char_avail_for_testing() to test_disable_char_avail().
            And alloc_fail() to test_alloc_fail().
相关文件:   src/eval.c, src/getchar.c, src/testdir/runtest.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_quickfix.vim,
            runtime/doc/eval.txt

Patch 7.4.1845
问题:       Mentioning NetBeans when reading from channel. (Ramel Eshed)
解决方案:   Make the text more generic.
相关文件:   src/channel.c

Patch 7.4.1846
问题:       Ubsan detects a multiplication overflow.
解决方案:   Don't use orig_mouse_time when it's zero. (Dominique Pelle)
相关文件:   src/term.c

Patch 7.4.1847
问题:       Getting an item from a NULL dict crashes.  Setting a register to a
            NULL list crashes. (Nikolai Pavlov, issue #768)  Comparing a NULL
            dict with a NULL dict fails.
解决方案:   Properly check for NULL.
相关文件:   src/eval.c, src/testdir/test_expr.vim

Patch 7.4.1848
问题:       Can't build with Strawberry Perl 5.24.
解决方案:   Define S_SvREFCNT_dec() if needed. (Damien, Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.4.1849
问题:       Still trying to read from channel that is going to be closed.
            (Ramel Eshed)
解决方案:   Check if ch_to_be_closed is set.
相关文件:   src/channel.c

Patch 7.4.1850
问题:       GUI freezes when using a job. (Shougo Matsu)
解决方案:   Unregister the channel when there is an input error.
相关文件:   src/channel.c

Patch 7.4.1851
问题:       test_syn_attr fails when using the GUI. (Dominique Pelle)
解决方案:   Escape the font name properly.
相关文件:   src/testdir/test_syn_attr.vim

Patch 7.4.1852
问题:       Unix: Cannot run all tests with the GUI.
解决方案:   Add the "testgui" target.
相关文件:   src/Makefile, src/testdir/Makefile

Patch 7.4.1853
问题:       Crash when job and channel are in the same dict while using
            partials. (Luc Hermitte)
解决方案:   Do not decrement the channel reference count too early.
相关文件:   src/channel.c

Patch 7.4.1854
问题:       When setting 'termguicolors' the Ignore highlighting doesn't work.
            (Charles Campbell)
解决方案:   Handle the color names "fg" and "bg" when the GUI isn't running
            and no colors are specified, fall back to black and white.
相关文件:   src/syntax.c

Patch 7.4.1855
问题:       Valgrind reports memory leak for job that is not freed.
解决方案:   Free all jobs on exit.  Add test for failing job.
相关文件:   src/channel.c, src/misc2.c, src/proto/channel.pro,
            src/testdir/test_partial.vim

Patch 7.4.1856 (after 7.4.1855)
问题:       failing job test fails on MS-Windows.
解决方案:   Expect "fail" status instead of "dead".
相关文件:   src/testdir/test_partial.vim

Patch 7.4.1857
问题:       When a channel appends to a buffer that is 'nomodifiable' there is
            an error but appending is done anyway.
解决方案:   Add the 'modifiable' option.  Refuse to write to a 'nomodifiable'
            when the value is 1.
相关文件:   src/structs.h, src/channel.c, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 7.4.1858
问题:       When a channel writes to a buffer it doesn't find a buffer by the
            short name but re-uses it anyway.
解决方案:   Find buffer also by the short name.
相关文件:   src/channel.c, src/buffer.c, src/vim.h

Patch 7.4.1859
问题:       Cannot use a function reference for "exit_cb".
解决方案:   Use get_callback(). (Yegappan Lakshmanan)
相关文件:   src/channel.c, src/structs.h

Patch 7.4.1860
问题:       Using a partial for timer_start() may cause a crash.
解决方案:   Set the copyID in timer objects. (Ozaki Kiichi)
相关文件:   src/testdir/test_timers.vim, src/eval.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 7.4.1861
问题:       Compiler warnings with 64 bit compiler.
解决方案:   Change int to size_t. (Mike Williams)
相关文件:   src/ex_cmds2.c

Patch 7.4.1862
问题:       string() with repeated argument does not give a result usable by
            eval().
解决方案:   Refactor echo_string and tv2string(), moving the common part to
            echo_string_core(). (Ken Takata)
相关文件:   src/eval.c, src/testdir/test_viml.vim, src/testdir/test86.ok,
            src/testdir/test87.ok

Patch 7.4.1863
问题:       Compiler warnings on Win64.
解决方案:   Adjust types, add type casts. (Ken Takata)
相关文件:   src/if_mzsch.c, src/if_perl.xs, src/if_ruby.c, src/version.c

Patch 7.4.1864
问题:       Python: encoding error with Python 2.
解决方案:   Use "getcwdu" instead of "getcwd". (Ken Takata)
相关文件:   src/if_py_both.h

Patch 7.4.1865
问题:       Memory leaks in test49. (Dominique Pelle)
解决方案:   Use NULL instead of an empty string.
相关文件:   src/eval.c

Patch 7.4.1866
问题:       Invalid memory access when exiting with EXITFREE defined.
            (Dominique Pelle)
解决方案:   Set "really_exiting" and skip error messages.
相关文件:   src/misc2.c, src/eval.c

Patch 7.4.1867
问题:       Memory leak in test_matchstrpos.
解决方案:   Free the string before overwriting. (Yegappan Lakshmanan)
相关文件:   src/eval.c

Patch 7.4.1868
问题:       Setting really_exiting causes memory leaks to be reported.
解决方案:   Add the in_free_all_mem flag.
相关文件:   src/globals.h, src/misc2.c, src/eval.c

Patch 7.4.1869
问题:       Can't build with old version of Perl.
解决方案:   Define PERLIO_FUNCS_DECL. (Tom G. Christensen)
相关文件:   src/if_perl.xs

Patch 7.4.1870 (after 7.4.1863)
问题:       One more Win64 compiler warning.
解决方案:   Change declared argument type. (Ken Takata)
相关文件:   src/if_mzsch.c

Patch 7.4.1871
问题:       Appending to the quickfix list while the quickfix window is open
            is very slow.
解决方案:   Do not delete all the lines, only append the new ones.  Avoid
            using a window while updating the list. (closes #841)
相关文件:   src/quickfix.c

Patch 7.4.1872
问题:       Still build problem with old version of Perl.
解决方案:   Also define SvREFCNT_inc_void_NN if needed. (Tom G. Christensen)
相关文件:   src/if_perl.xs

Patch 7.4.1873
问题:       When a callback adds a timer the GUI doesn't use it until later.
            (Ramel Eshed)
解决方案:   Return early if a callback adds a timer.
相关文件:   src/ex_cmds2.c, src/gui_gtk_x11.c, src/gui_w32.c, src/gui_x11.c,
            src/globals.h

Patch 7.4.1874
问题:       Unused variable in Win32 code.
解决方案:   Remove it. (Mike Williams)
相关文件:   src/gui_w32.c

Patch 7.4.1875
问题:       Comparing functions and partials doesn't work well.
解决方案:   Add tests. (Nikolai Pavlov)  Compare the dict and arguments in the
            partial. (closes #813)
相关文件:   src/eval.c, src/testdir/test_partial.vim

Patch 7.4.1876
问题:       Typing "k" at the hit-enter prompt has no effect.
解决方案:   Don't assume recursive use of the prompt if a character was typed.
            (Hirohito Higashi)
相关文件:   src/message.c

Patch 7.4.1877
问题:       No test for invoking "close_cb" when writing to a buffer.
解决方案:   Add using close_cb to a test case.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1878
问题:       Whether a job has exited isn't detected until a character is
            typed.  After calling exit_cb the cursor is in the wrong place.
解决方案:   Don't wait forever for a character to be typed when there is a
            pending job.  Update the screen if needed after calling exit_cb.
相关文件:   src/os_unix.c, src/channel.c, src/proto/channel.pro

Patch 7.4.1879 (after 7.4.1877)
问题:       Channel test is flaky.
解决方案:   Wait for close_cb to be invoked.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1880
问题:       MS-Windows console build defaults to not having +channel.
解决方案:   Include the channel feature if building with huge features.
相关文件:   src/Make_mvc.mak

Patch 7.4.1881
问题:       Appending to a long quickfix list is slow.
解决方案:   Add qf_last.
相关文件:   src/quickfix.c

Patch 7.4.1882
问题:       Check for line break at end of line wrong. (Dominique Pelle)
解决方案:   Correct the logic.
相关文件:   src/quickfix.c

Patch 7.4.1883
问题:       Cppcheck found 2 incorrect printf formats.
解决方案:   Use %ld and %lx. (Dominique Pelle)
相关文件:   src/VisVim/Commands.cpp, src/gui_mac.c

Patch 7.4.1884
问题:       Updating marks in a quickfix list is very slow when the list is
            long.
解决方案:   Only update marks if the buffer has a quickfix entry.
相关文件:   src/structs.h, src/quickfix.c

Patch 7.4.1885
问题:       MinGW console build defaults to not having +channel.
解决方案:   Include the channel feature if building with huge features. (Ken
            Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.1886
问题:       When waiting for a character is interrupted by receiving channel
            data and the first character of a mapping was typed, the mapping
            times out. (Ramel Eshed)
解决方案:   When dealing with channel data don't return from mch_inchar().
相关文件:   src/getchar.c, src/proto/getchar.pro, src/os_unix.c

Patch 7.4.1887
问题:       When receiving channel data 'updatetime' is not respected.
解决方案:   Recompute the waiting time after being interrupted.
相关文件:   src/os_unix.c

Patch 7.4.1888
问题:       Wrong computation of remaining wait time in RealWaitForChar()
解决方案:   Remember the original waiting time.
相关文件:   src/os_unix.c

Patch 7.4.1889
问题:       When umask is set to 0177 Vim can't create temp files. (Lcd)
解决方案:   Also correct umask when using mkdtemp().
相关文件:   src/fileio.c

Patch 7.4.1890
问题:       GUI: When channel data is received the cursor blinking is
            interrupted.  (Ramel Eshed)
解决方案:   Don't update the cursor when it is blinking.
相关文件:   src/screen.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_mac.c, src/proto/gui_mac.pro, src/gui_photon.c,
            src/proto/gui_photon.pro, src/gui_w32.c, src/proto/gui_w32.pro,
            src/gui_x11.c, src/proto/gui_x11.pro

Patch 7.4.1891
问题:       Channel reading very long lines is slow.
解决方案:   Collapse multiple buffers until a NL is found.
相关文件:   src/channel.c, src/netbeans.c, src/proto/channel.pro,
            src/structs.h

Patch 7.4.1892
问题:       balloon eval only gets the window number, not the ID.
解决方案:   Add v:beval_winid.
相关文件:   src/eval.c, src/gui_beval.c, src/vim.h

Patch 7.4.1893
问题:       Cannot easily get the window ID for a buffer.
解决方案:   Add bufwinid().
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 7.4.1894
问题:       Cannot get the window ID for a mouse click.
解决方案:   Add v:mouse_winid.
相关文件:   src/eval.c, src/vim.h, runtime/doc/eval.txt

Patch 7.4.1895
问题:       Cannot use a window ID where a window number is expected.
解决方案:   Add LOWEST_WIN_ID, so that the window ID can be used where a
            number is expected.
相关文件:   src/window.c, src/eval.c, src/vim.h, runtime/doc/eval.txt,
            src/testdir/test_window_id.vim

Patch 7.4.1896
问题:       Invoking mark_adjust() when adding a new line below the last line
            is pointless.
解决方案:   Skip calling mark_adjust() when appending below the last line.
相关文件:   src/misc1.c, src/ops.c

Patch 7.4.1897
问题:       Various typos, long lines and style mistakes.
解决方案:   Fix the typos, wrap lines, improve style.
相关文件:   src/buffer.c, src/ex_docmd.c, src/getchar.c, src/option.c,
            src/main.aap, src/testdir/README.txt,
            src/testdir/test_reltime.vim, src/testdir/test_tagjump.vim,
            src/INSTALL, src/config.aap.in, src/if_mzsch.c

Patch 7.4.1898
问题:       User commands don't support modifiers.
解决方案:   Add the <mods> item. (Yegappan Lakshmanan, closes #829)
相关文件:   runtime/doc/map.txt, src/ex_docmd.c, src/testdir/Make_all.mak,
            src/testdir/test_usercommands.vim

Patch 7.4.1899
问题:       GTK 3: cursor blinking doesn't work well.
解决方案:   Instead of gui_gtk_window_clear() use gui_mch_clear_block().
            (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.1900
问题:       Using CTRL-] in the help on "{address}." doesn't work.
解决方案:   Recognize an item in {}. (Hirohito Higashi, closes #814)
相关文件:   src/ex_cmds.c, src/testdir/test_help_tagjump.vim

Patch 7.4.1901
问题:       Win32: the "Disabled" menu items would appear enabled.
解决方案:   Use submenu_id if there is a parent. (Shane Harper, closes #834)
相关文件:   src/gui_w32.c

Patch 7.4.1902
问题:       No test for collapsing buffers for a channel.  Some text is lost.
解决方案:   Add a simple test.  Set rq_buflen correctly.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 7.4.1903
问题:       When writing viminfo merging current history with history in
            viminfo may drop recent history entries.
解决方案:   Add new format for viminfo lines, use it for history entries.  Use
            a timestamp for ordering the entries. Add test_settime().
            Add the viminfo version.  Does not do merging on timestamp yet.
相关文件:   src/eval.c, src/ex_getln.c, src/ex_cmds.c, src/structs.h,
            src/globals.h, src/proto/ex_cmds.pro, src/proto/ex_getln.pro,
            src/testdir/test_viminfo.vim

Patch 7.4.1904 (after 7.4.1903)
问题:       Build fails.
解决方案:   Add missing changes.
相关文件:   src/vim.h

Patch 7.4.1905 (after 7.4.1903)
问题:       Some compilers can't handle a double semicolon.
解决方案:   Remove one semicolon.
相关文件:   src/ex_cmds.c

Patch 7.4.1906
问题:       Collapsing channel buffers and searching for NL does not work
            properly. (Xavier de Gaye, Ramel Eshed)
解决方案:   Do not assume the buffer contains a NUL or not.  Change NUL bytes
            to NL to avoid the string is truncated.
相关文件:   src/channel.c, src/netbeans.c, src/proto/channel.pro

Patch 7.4.1907
问题:       Warnings from 64 bit compiler.
解决方案:   Change type to size_t. (Mike Williams)
相关文件:   src/ex_cmds.c

Patch 7.4.1908
问题:       Netbeans uses uninitialized pointer and freed memory.
解决方案:   Set "buffer" at the right place (hint by Ken Takata)
相关文件:   src/netbeans.c

Patch 7.4.1909
问题:       Doubled semicolons.
解决方案:   Reduce to one. (Dominique Pelle)
相关文件:   src/dosinst.c, src/fold.c, src/gui_gtk_x11.c, src/gui_w32.c,
            src/main.c, src/misc2.c

Patch 7.4.1910
问题:       Tests using external command to delete directory.
解决方案:   Use delete().
相关文件:   src/testdir/test17.in, src/testdir/test73.in,
            src/testdir/test_getcwd.in

Patch 7.4.1911
问题:       Recent history lines may be lost when exiting Vim.
解决方案:   Merge history using the timestamp.
相关文件:   src/ex_getln.c, src/ex_cmds.c, src/vim.h, src/proto/ex_getln.pro,
            src/testdir/test_viminfo.vim

Patch 7.4.1912
问题:       No test for using setqflist() on an older quickfix list.
解决方案:   Add a couple of tests.
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.1913
问题:       When ":doautocmd" is used modelines are used even when no
            autocommands were executed. (Daniel Hahler)
解决方案:   Skip processing modelines. (closes #854)
相关文件:   src/fileio.c, src/ex_cmds.c, src/ex_docmd.c, src/proto/fileio.pro

Patch 7.4.1914
问题:       Executing autocommands while using the signal stack has a high
            chance of crashing Vim.
解决方案:   Don't invoke autocommands when on the signal stack.
相关文件:   src/os_unix.c

Patch 7.4.1915
问题:       The effect of the PopupMenu autocommand isn't directly visible.
解决方案:   Call gui_update_menus() before displaying the popup menu. (Shane
            Harper, closes #855)
相关文件:   src/menu.c

Patch 7.4.1916 (after 7.4.1906)
问题:       No proper test for what 7.4.1906 fixes.
解决方案:   Add a test for reading many lines.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.1917
问题:       History lines read from viminfo in different encoding than when
            writing are not converted.
解决方案:   Convert the history lines.
相关文件:   src/ex_cmds.c, src/testdir/test_viminfo.vim

Patch 7.4.1918
问题:       Not enough testing for parsing viminfo lines.
解决方案:   Add test with viminfo lines in bad syntax.  Fix memory leak.
相关文件:   src/ex_cmds.c, src/ex_getln.c, src/testdir/test_viminfo.vim

Patch 7.4.1919
问题:       Register contents is not merged when writing viminfo.
解决方案:   Use timestamps for register contents.
相关文件:   src/ops.c, src/ex_getln.c, src/ex_cmds.c, src/proto/ex_cmds.pro,
            src/proto/ex_getln.pro, src/proto/ops.pro, src/vim.h

Patch 7.4.1920 (after 7.4.1919)
问题:       Missing test changes.
解决方案:   Update viminfo test.
相关文件:   src/testdir/test_viminfo.vim

Patch 7.4.1921 (after 7.4.1919)
问题:       vim_time() not included when needed.
解决方案:   Adjust #ifdef.
相关文件:   src/ex_cmds.c

Patch 7.4.1922
问题:       Ruby 2.4.0 unifies Fixnum and Bignum into Integer.
解决方案:   Use rb_cInteger. (Weiyong Mao)
相关文件:   src/if_ruby.c

Patch 7.4.1923
问题:       Command line editing is not tested much.
解决方案:   Add tests for expanding the file name and 'wildmenu'.
相关文件:   src/testdir/test_cmdline.vim, src/testdir/Make_all.mak

Patch 7.4.1924
问题:       Missing "void" for functions without argument.
解决方案:   Add "void". (Hirohito Higashi)
相关文件:   src/channel.c, src/edit.c, src/ex_cmds2.c, src/ops.c, src/screen.c

Patch 7.4.1925
问题:       Viminfo does not merge file marks properly.
解决方案:   Use a timestamp.  Add the :clearjumps command.
相关文件:   src/mark.c, src/ex_cmds.c, src/ex_docmd.c, src/proto/mark.pro,
            src/structs.h, src/vim.h, src/ex_cmds.h,
            src/testdir/test_viminfo.vim

Patch 7.4.1926
问题:       Possible crash with many history items.
解决方案:   Avoid the index going past the last item.
相关文件:   src/ex_getln.c

Patch 7.4.1927
问题:       Compiler warning for signed/unsigned.
解决方案:   Add type cast.
相关文件:   src/if_mzsch.c

Patch 7.4.1928
问题:       Overwriting pointer argument.
解决方案:   Assign to what it points to. (Dominique Pelle)
相关文件:   src/fileio.c

Patch 7.4.1929
问题:       Inconsistent indenting and weird name.
解决方案:   Fix indent, make name all upper case. (Ken Takata)
相关文件:   src/if_ruby.c

Patch 7.4.1930
问题:       Can't build without +spell but with +quickfix. (Charles)
解决方案:   Add better #ifdef around ml_append_buf(). (closes #864)
相关文件:   src/memline.c

Patch 7.4.1931
问题:       Using both old and new style file mark lines from viminfo.
解决方案:   Skip the old style lines if the viminfo file was written with a
            Vim version that supports the new style.
相关文件:   src/ex_cmds.c

Patch 7.4.1932
问题:       When writing viminfo the jumplist is not merged with the one in
            the viminfo file.
解决方案:   Merge based on timestamp.
相关文件:   src/mark.c, src/testdir/test_viminfo.vim

Patch 7.4.1933
问题:       Compiler warning about uninitialized variable. (Yegappan)
解决方案:   Give it a dummy value.
相关文件:   src/ex_getln.c

Patch 7.4.1934
问题:       New style tests not executed with MinGW compiler.
解决方案:   Add new style test support. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_ming.mak

Patch 7.4.1935
问题:       When using the GUI search/replace a second match right after the
            replacement is skipped.
解决方案:   Add the SEARCH_START flag. (Mleddy)
相关文件:   src/gui.c

Patch 7.4.1936
问题:       Off-by-one error in bounds check. (Coverity)
解决方案:   Check register number properly.
相关文件:   src/ops.c

Patch 7.4.1937
问题:       No test for directory stack in quickfix.
解决方案:   Add a test. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.1938
问题:       When writing viminfo numbered marks were duplicated.
解决方案:   Check for duplicates between current numbered marks and the ones
            read from viminfo.
相关文件:   src/mark.c

Patch 7.4.1939
问题:       Memory access error when reading viminfo. (Dominique Pelle)
解决方案:   Correct index in jumplist when at the end.
相关文件:   src/mark.c, src/testdir/test_viminfo.vim

Patch 7.4.1940
问题:       "gd" hangs in some situations. (Eric Biggers)
解决方案:   Remove the SEARCH_START flag when looping.  Add a test.
相关文件:   src/normal.c, src/testdir/test_goto.vim

Patch 7.4.1941
问题:       Not all quickfix tests are also done with the location lists.
解决方案:   Test more quickfix code.  Use user commands instead of "exe".
            (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.1942
问题:       Background is not drawn properly when 'termguicolors' is set.
解决方案:   Check cterm_normal_bg_color. (Jacob Niehus, closes #805)
相关文件:   src/screen.c

Patch 7.4.1943
问题:       Coverity warns for unreachable code.
解决方案:   Remove the code that won't do anything.
相关文件:   src/mark.c

Patch 7.4.1944
问题:       Win32: Cannot compile with XPM feature using VC2015
解决方案:   Add XPM libraries compiled with VC2015, and enable to build
            gvim.exe which supports XPM using VC2015. (Ken Takata)
相关文件:   src/Make_mvc.mak, src/xpm/x64/lib-vc14/libXpm.lib,
            src/xpm/x86/lib-vc14/libXpm.lib

Patch 7.4.1945
问题:       The Man plugin doesn't work that well.
解决方案:   Use "g:ft_man_open_mode" to be able open man pages in vert split
            or separate tab. Set nomodifiable for buffer with man content. Add
            a test. (Andrey Starodubtsev, closes #873)
相关文件:   runtime/ftplugin/man.vim, src/testdir/test_man.vim,
            src/testdir/Make_all.mak

Patch 7.4.1946 (after 7.4.1944)
问题:       File list does not include new XPM libraries.
解决方案:   Add the file list entries.
相关文件:   Filelist

Patch 7.4.1947
问题:       Viminfo continuation line with wrong length isn't skipped. (Marius
            Gedminas)
解决方案:   Skip a line when encountering an error, but not two lines.
相关文件:   src/ex_cmds.c

Patch 7.4.1948
问题:       Using Ctrl-A with double-byte encoding may result in garbled text.
解决方案:   Skip to the start of a character. (Hirohito Higashi)
相关文件:   src/ops.c

Patch 7.4.1949
问题:       Minor problems with the quickfix code.
解决方案:   Fix the problems. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1950
问题:       Quickfix long lines test not executed for buffer.
解决方案:   Call the function to test long lines. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.1951
问题:       Ruby test is old style.
解决方案:   Convert to a new style test. (Ken Takata)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test_ruby.in,
            src/testdir/test_ruby.ok, src/testdir/test_ruby.vim

Patch 7.4.1952
问题:       Cscope interface does not support finding assignments.
解决方案:   Add the "a" command. (ppettina, closes #882)
相关文件:   runtime/doc/if_cscop.txt, src/if_cscope.c

Patch 7.4.1953
问题:       Not all parts of the quickfix code are tested.
解决方案:   Add more tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/samples/quickfix.txt,
            src/testdir/test_quickfix.vim

Patch 7.4.1954 (after 7.4.1948)
问题:       No test for what 7.4.1948 fixes.
解决方案:   Add a test. (Hirohito Higashi, closes #880)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_increment_dbcs.vim

Patch 7.4.1955
问题:       Using 32-bit Perl with 64-bit time_t causes memory corruption.
            (Christian Brabandt)
解决方案:   Use time_T instead of time_t for global variables. (Ken Takata)
相关文件:   src/ex_cmds.c, src/globals.h, src/misc2.c, src/proto/ex_cmds.pro,
            src/proto/misc2.pro, src/structs.h, src/vim.h

Patch 7.4.1956
问题:       When using CTRL-W f and pressing "q" at the ATTENTION dialog the
            newly opened window is not closed.
解决方案:   Close the window and go back to the original one. (Norio Takagi,
            Hirohito Higashi)
相关文件:   src/window.c, src/testdir/test_window_cmd.vim

Patch 7.4.1957
问题:       Perl interface has obsolete workaround.
解决方案:   Remove the workaround added by 7.3.623. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.4.1958
问题:       Perl interface preprocessor statements not nicely indented.
解决方案:   Improve the indenting. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 7.4.1959
问题:       Crash when running test_channel.vim on Windows.
解决方案:   Check for NULL pointer result from FormatMessage(). (Christian
            Brabandt)
相关文件:   src/channel.c

Patch 7.4.1960
问题:       Unicode standard 9 was released.
解决方案:   Update the character property tables. (Christian Brabandt)
相关文件:   src/mbyte.c

Patch 7.4.1961
问题:       When 'insertmode' is reset while doing completion the popup menu
            remains even though Vim is in Normal mode.
解决方案:   Ignore stop_insert_mode when the popup menu is visible.  Don't set
            stop_insert_mode when 'insertmode' was already off. (Christian
            Brabandt)
相关文件:   src/edit.c, src/option.c, src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_popup.vim

Patch 7.4.1962
问题:       Two test files for increment/decrement.
解决方案:   Move the old style test into the new style test. (Hirohito
            Higashi, closes #881)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/main.aap,
            src/testdir/test35.in, src/testdir/test35.ok,
            src/testdir/test_increment.vim

Patch 7.4.1963
问题:       Running Win32 Vim in mintty does not work.
解决方案:   Detect mintty and give a helpful error message. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak, src/iscygpty.c,
            src/iscygpty.h, src/main.c, Filelist

Patch 7.4.1964
问题:       The quickfix init function is too big.
解决方案:   Factor out parsing 'errorformat' to a separate function. (Yegappan
            Lakshmanan)
相关文件:   src/quickfix.c

Patch 7.4.1965
问题:       When using a job in raw mode to append to a buffer garbage
            characters are added.
解决方案:   Do not replace the trailing NUL with a NL. (Ozaki Kiichi)
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.1966
问题:       Coverity reports a resource leak.
解决方案:   Close "fd" also when bailing out.
相关文件:   src/quickfix.c

Patch 7.4.1967
问题:       Falling back from NFA to old regexp engine does not work properly.
            (fritzophrenic)
解决方案:   Do not restore nfa_match. (Christian Brabandt, closes #867)
相关文件:   src/regexp_nfa.c, src/testdir/test64.in, src/testdir/test64.ok

Patch 7.4.1968
问题:       Invalid memory access with "\<C-">.
解决方案:   Do not recognize this as a special character. (Dominique Pelle)
相关文件:   src/misc2.c, src/testdir/test_expr.vim

Patch 7.4.1969
问题:       When the netbeans channel is closed consuming the buffer may cause
            a crash.
解决方案:   Check for nb_channel not to be NULL. (Xavier de Gaye)
相关文件:   src/netbeans.c

Patch 7.4.1970
问题:       Using ":insert" in an empty buffer sets the jump mark. (Ingo
            Karkat)
解决方案:   Don't adjust marks when replacing the empty line in an empty
            buffer. (closes #892)
相关文件:   src/ex_cmds.c, src/testdir/test_jumps.vim,
            src/testdir/test_alot.vim

Patch 7.4.1971
问题:       It is not easy to see unrecognized error lines below the current
            error position.
解决方案:   Add ":clist +count".
相关文件:   src/quickfix.c, runtime/doc/quickfix.txt

Patch 7.4.1972
问题:       On Solaris select() does not work as expected when there is
            typeahead.
解决方案:   Add ICANON when sleeping. (Ozaki Kiichi)
相关文件:   src/os_unix.c

Patch 7.4.1973
问题:       On MS-Windows the package directory may be added at the end
            because of forward/backward slash differences. (Matthew
            Desjardins)
解决方案:   Ignore slash differences.
相关文件:   src/ex_cmds2.c

Patch 7.4.1974
问题:       GUI has a problem with some termcodes.
解决方案:   Handle negative numbers. (Kazunobu Kuriyama)
相关文件:   src/gui.c

Patch 7.4.1975
问题:       On MS-Windows large files (> 2Gbyte) cause problems.
解决方案:   Use "off_T" instead of "off_t".  Use "stat_T" instead of "struct
            stat".  Use 64 bit system functions if available.  (Ken Takata)
相关文件:   src/Makefile, src/buffer.c, src/diff.c, src/eval.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/fileio.c, src/gui.c, src/gui_at_fs.c,
            src/if_cscope.c, src/main.c, src/memfile.c, src/memline.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/os_mswin.c,
            src/os_win32.c, src/proto/fileio.pro, src/proto/memline.pro,
            src/proto/os_mswin.pro, src/pty.c, src/quickfix.c, src/spell.c,
            src/structs.h, src/tag.c, src/testdir/Make_all.mak,
            src/testdir/test_largefile.vim, src/testdir/test_stat.vim,
            src/undo.c, src/vim.h

Patch 7.4.1976
问题:       Number variables are not 64 bits while they could be.
解决方案:   Add the num64 feature. (Ken Takata, Yasuhiro Matsumoto)
相关文件:   runtime/doc/eval.txt, runtime/doc/various.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/charset.c,
            src/eval.c, src/ex_cmds.c, src/ex_getln.c, src/feature.h,
            src/fileio.c, src/fold.c, src/json.c, src/message.c, src/misc1.c,
            src/misc2.c, src/ops.c, src/option.c, src/proto/charset.pro,
            src/proto/eval.pro, src/quickfix.c, src/structs.h,
            src/testdir/test_viml.vim, src/version.c

Patch 7.4.1977
问题:       With 64 bit changes don't need three calls to sprintf().
解决方案:   Simplify the code, use vim_snprintf(). (Ken Takata)
相关文件:   src/fileio.c

Patch 7.4.1978 (after 7.4.1975)
问题:       Large file test does not delete its output.
解决方案:   Delete the output. Check size properly when possible. (Ken Takata)
相关文件:   src/testdir/test_largefile.vim

Patch 7.4.1979 (after 7.4.1976)
问题:       Getting value of binary option is wrong. (Kent Sibilev)
解决方案:   Fix type cast.  Add a test.
相关文件:   src/option.c, src/testdir/test_expr.vim

Patch 7.4.1980
问题:       'errorformat' is parsed for every call to ":caddexpr".  Can't add
            to two location lists asynchronously.
解决方案:   Keep the previously parsed data when appropriate. (mostly by
            Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.1981
问题:       No testing for Farsi code.
解决方案:   Add a minimal test.  Clean up Farsi code.
相关文件:   src/farsi.c, src/Makefile, src/charset.c, src/normal.c,
            src/proto/main.pro, src/testdir/Make_all.mak,
            src/testdir/test_farsi.vim

Patch 7.4.1982
问题:       Viminfo file contains duplicate change marks.
解决方案:   Drop duplicate marks.
相关文件:   src/mark.c

Patch 7.4.1983
问题:       farsi.c and arabic.c are included in a strange way.
解决方案:   Build them like other files.
相关文件:   src/main.c, src/farsi.c, src/arabic.c, src/proto.h,
            src/proto/main.pro, src/proto/farsi.pro, src/proto/arabic.pro,
            src/Makefile, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            Filelist

Patch 7.4.1984
问题:       Not all quickfix features are tested.
解决方案:   Add a few more tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.1985 (after 7.4.1983)
问题:       Missing changes in VMS build file.
解决方案:   Use the right file name.
相关文件:   src/Make_vms.mms

Patch 7.4.1986
问题:       Compiler warns for loss of data.
解决方案:   Use size_t instead of int. (Christian Brabandt)
相关文件:   src/ex_cmds2.c

Patch 7.4.1987
问题:       When copying unrecognized lines for viminfo, end up with useless
            continuation lines.
解决方案:   Skip continuation lines.
相关文件:   src/ex_cmds.c

Patch 7.4.1988
问题:       When updating viminfo with file marks there is no time order.
解决方案:   Remember the time when a buffer was last used, store marks for
            the most recently used buffers.
相关文件:   src/buffer.c, src/structs.h, src/mark.c, src/main.c,
            src/ex_cmds.c, src/proto/mark.pro, src/testdir/test_viminfo.vim

Patch 7.4.1989
问题:       filter() and map() only accept a string argument.
解决方案:   Implement using a Funcref argument (Yasuhiro Matsumoto, Ken
            Takata)
相关文件:   runtime/doc/eval.txt, src/Makefile, src/eval.c,
            src/testdir/test_alot.vim, src/testdir/test_filter_map.vim,
            src/testdir/test_partial.vim

Patch 7.4.1990 (after 7.4.1952)
问题:       Cscope items are not sorted.
解决方案:   Put the new "a" command first. (Ken Takata)
相关文件:   src/if_cscope.c

Patch 7.4.1991
问题:       glob() does not add a symbolic link when there are no wildcards.
解决方案:   Remove the call to mch_getperm().
相关文件:   src/misc1.c

Patch 7.4.1992
问题:       Values for true and false can be confusing.
解决方案:   Update the documentation.  Add a test.  Make v:true evaluate to
            TRUE for a non-zero-arg.
相关文件:   runtime/doc/eval.txt, src/eval.c, src/Makefile,
            src/testdir/test_true_false.vim, src/testdir/test_alot.vim

Patch 7.4.1993
问题:       Not all TRUE and FALSE arguments are tested.
解决方案:   Add a few more tests.
相关文件:   src/testdir/test_true_false.vim

Patch 7.4.1994 (after 7.4.1993)
问题:       True-false test fails.
解决方案:   Filter the dict to only keep the value that matters.
相关文件:   src/testdir/test_true_false.vim

Patch 7.4.1995
问题:       GUI: cursor drawn in wrong place if a timer callback causes a
            screen update. (David Samvelyan)
解决方案:   Also redraw the cursor when it's blinking and on.
相关文件:   src/gui_gtk_x11.c, src/gui_mac.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/screen.c, src/proto/gui_gtk_x11.pro,
            src/proto/gui_mac.pro, src/proto/gui_photon.pro,
            src/proto/gui_w32.pro, src/proto/gui_x11.pro

Patch 7.4.1996
问题:       Capturing the output of a command takes a few commands.
解决方案:   Add evalcmd().
相关文件:   src/eval.c, runtime/doc/eval.txt, src/testdir/test_alot.vim,
            src/Makefile, src/testdir/test_evalcmd.vim

Patch 7.4.1997
问题:       Cannot easily scroll the quickfix window.
解决方案:   Add ":cbottom".
相关文件:   src/ex_cmds.h, src/quickfix.c, src/proto/quickfix.pro,
            src/ex_docmd.c, src/testdir/test_quickfix.vim,
            runtime/doc/quickfix.txt

Patch 7.4.1998
问题:       When writing buffer lines to a job there is no NL to NUL
            conversion.
解决方案:   Make it work symmetrical with writing lines from a job into a
            buffer.
相关文件:   src/channel.c, src/proto/channel.pro, src/netbeans.c

Patch 7.4.1999
问题:       evalcmd() doesn't work recursively.
解决方案:   Use redir_evalcmd instead of redir_vname.
相关文件:   src/message.c, src/eval.c, src/globals.h, src/proto/eval.pro,
            src/testdir/test_evalcmd.vim

Patch 7.4.2000 (after 7.4.1999)
问题:       Evalcmd test fails.
解决方案:   Add missing piece.
相关文件:   src/ex_docmd.c

Patch 7.4.2001 (after 7.4.2000)
问题:       Tiny build fails. (Tony Mechelynck)
解决方案:   Add #ifdef.
相关文件:   src/ex_docmd.c

Patch 7.4.2002
问题:       Crash when passing number to filter() or map().
解决方案:   Convert to a string. (Ozaki Kiichi)
相关文件:   src/eval.c, src/testdir/test_filter_map.vim

Patch 7.4.2003
问题:       Still cursor flickering when a callback updates the screen. (David
            Samvelyan)
解决方案:   Put the cursor in the right position after updating the screen.
相关文件:   src/screen.c

Patch 7.4.2004
问题:       GUI: cursor displayed in the wrong position.
解决方案:   Correct screen_cur_col and screen_cur_row.
相关文件:   src/screen.c

Patch 7.4.2005
问题:       After using evalcmd() message output is in the wrong position.
            (Christian Brabandt)
解决方案:   Reset msg_col.
相关文件:   src/eval.c

Patch 7.4.2006
问题:       Crash when using tabnext in BufUnload autocmd. (Norio Takagi)
解决方案:   First check that the current buffer is the right one. (Hirohito
            Higashi)
相关文件:   src/buffer.c, src/testdir/test_autocmd.vim

Patch 7.4.2007
问题:       Running the tests leaves a viminfo file behind.
解决方案:   Make the viminfo option empty.
相关文件:   src/testdir/runtest.vim

Patch 7.4.2008
问题:       evalcmd() has a confusing name.
解决方案:   Rename to execute().  Make silent optional.  Support a list of
            commands.
相关文件:   src/eval.c, src/ex_docmd.c, src/message.c, src/globals.h,
            src/proto/eval.pro, src/Makefile, src/testdir/test_evalcmd.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_alot.vim,
            runtime/doc/eval.txt

Patch 7.4.2009 (after 7.4.2008)
问题:       Messages test fails.
解决方案:   Don't set redir_execute before returning.  Add missing version
            number.
相关文件:   src/eval.c

Patch 7.4.2010
问题:       There is a :cbottom command but no :lbottom command.
解决方案:   Add :lbottom. (Yegappan Lakshmanan)
相关文件:   runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmds.h,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2011
问题:       It is not easy to get a list of command arguments.
解决方案:   Add getcompletion(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_docmd.c,
            src/proto/ex_docmd.pro, src/testdir/test_cmdline.vim

Patch 7.4.2012 (after 7.4.2011)
问题:       Test for getcompletion() does not pass on all systems.
解决方案:   Only test what is supported.
相关文件:   src/testdir/test_cmdline.vim

Patch 7.4.2013
问题:       Using "noinsert" in 'completeopt' breaks redo.
解决方案:   Set compl_curr_match. (Shougo Matsu, closes #874)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2014
问题:       Using "noinsert" in 'completeopt' does not insert match.
解决方案:   Set compl_enter_selects. (Shougo Matsu, closes #875)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2015
问题:       When a file gets a name when writing it 'acd' is not effective.
            (Dan Church)
解决方案:   Invoke DO_AUTOCHDIR after writing the file. (Allen Haim, closes
            #777, closes #803)  Add test_autochdir() to enable 'acd' before
            "starting" is reset.
相关文件:   src/ex_cmds.c, src/buffer.c, src/eval.c, src/globals.h,
            src/Makefile, src/testdir/test_autochdir.vim,
            src/testdir/Make_all.mak

Patch 7.4.2016
问题:       Warning from MinGW about _WIN32_WINNT redefined. (John Marriott)
解决方案:   First undefine it. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.2017
问题:       When there are many errors adding them to the quickfix list takes
            a long time.
解决方案:   Add BLN_NOOPT.  Don't call buf_valid() in buf_copy_options().
            Remember the last file name used.  When going through the buffer
            list start from the end of the list.  Only call buf_valid() when
            autocommands were executed.
相关文件:   src/buffer.c, src/option.c, src/quickfix.c, src/vim.h

Patch 7.4.2018
问题:       buf_valid() can be slow when there are many buffers.
解决方案:   Add bufref_valid(), only go through the buffer list when a buffer
            was freed.
相关文件:   src/structs.h, src/buffer.c, src/quickfix.c, src/proto/buffer.pro

Patch 7.4.2019
问题:       When ignoring case utf_fold() may consume a lot of time.
解决方案:   Optimize for ASCII.
相关文件:   src/mbyte.c

Patch 7.4.2020
问题:       Can't build without +autocmd feature.
解决方案:   Adjust #ifdefs.
相关文件:   src/buffer.c

Patch 7.4.2021
问题:       Still too many buf_valid() calls.
解决方案:   Make au_new_curbuf a bufref.  Use bufref_valid() in more places.
相关文件:   src/ex_cmds.c, src/buffer.c, src/globals.h

Patch 7.4.2022
问题:       Warnings from 64 bit compiler.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/eval.c

Patch 7.4.2023
问题:       buflist_findname_stat() may find a dummy buffer.
解决方案:   Set the BF_DUMMY flag after loading a dummy buffer.  Start
            finding buffers from the end of the list.
相关文件:   src/quickfix.c, src/buffer.c

Patch 7.4.2024
问题:       More buf_valid() calls can be optimized.
解决方案:   Use bufref_valid() instead.
相关文件:   src/buffer.c, src/ex_cmds.c, src/structs.h, src/channel.c,
            src/diff.c, src/eval.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/main.c, src/misc2.c,
            src/netbeans.c, src/quickfix.c, src/spell.c, src/term.c,
            src/if_py_both.h, src/window.c, src/proto/buffer.pro,
            src/proto/window.pro

Patch 7.4.2025
问题:       The cursor blinking stops or is irregular when receiving date over
            a channel and writing it in a buffer, and when updating the status
            line. (Ramel Eshed)
解决方案:   Make it a bit better by flushing GUI output.  Don't redraw the
            cursor after updating the screen if the blink state is off.
相关文件:   src/gui_gtk_x11.c, src/screen.c

Patch 7.4.2026
问题:       Reference counting for callbacks isn't right.
解决方案:   Add free_callback(). (Ken Takata)  Fix reference count.
相关文件:   src/channel.c, src/eval.c, src/ex_cmds2.c, src/proto/eval.pro

Patch 7.4.2027
问题:       Can't build with +eval but without +menu.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/eval.c

Patch 7.4.2028
问题:       cppcheck warns for using index before limits check.
解决方案:   Swap the expressions. (Dominique Pelle)
相关文件:   src/mbyte.c

Patch 7.4.2029
问题:       printf() does not work with 64 bit numbers.
解决方案:   use the "L" length modifier. (Ken Takata)
相关文件:   src/message.c, src/testdir/test_expr.vim

Patch 7.4.2030
问题:       ARCH must be set properly when using MinGW.
解决方案:   Detect the default value of ARCH from the current compiler. (Ken
            Takata)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.2031
问题:       The list_lbr_utf8 test fails if ~/.vim/syntax/c.vim sets
            'textwidth' to a non-zero value. (Oyvind A. Holm)
解决方案:   Add a setup.vim file that sets 'runtimepath' and $HOME to a safe
            value. (partly by Christian Brabandt, closes #912)
相关文件:   src/testdir/setup.vim, src/testdir/amiga.vim, src/testdir/dos.vim,
            src/testdir/unix.vim, src/testdir/vms.vim, src/testdir/runtest.vim

Patch 7.4.2032 (after 7.4.2030)
问题:       Build fails with 64 bit MinGW. (Axel Bender)
解决方案:   Handle dash vs. underscore. (Ken Takata, Hirohito Higashi)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.2033
问题:       'cscopequickfix' option does not accept new value "a".
解决方案:   Adjust list of command characters. (Ken Takata)
相关文件:   src/option.h, src/Makefile, src/testdir/test_cscope.vim,
            src/testdir/Make_all.mak

Patch 7.4.2034 (after 7.4.2032)
问题:       Build fails with some version of MinGW. (illusorypan)
解决方案:   Recognize mingw32. (Ken Takata, closes #921)
相关文件:   src/Make_cyg_ming.mak

Patch 7.4.2035
问题:       On Solaris with ZFS the ACL may get removed.
解决方案:   Always restore the ACL for Solaris ZFS. (Danek Duvall)
相关文件:   src/fileio.c

Patch 7.4.2036
问题:       Looking up a buffer by number is slow if there are many.
解决方案:   Use a hashtab.
相关文件:   src/structs.h, src/buffer.c

Patch 7.4.2037 (after 7.4.2036)
问题:       Small build fails.
解决方案:   Adjust #ifdefs.
相关文件:   src/hashtab.c

Patch 7.4.2038 (after 7.4.2036)
问题:       Small build still fails.
解决方案:   Adjust more #ifdefs.
相关文件:   src/globals.h, src/buffer.c

Patch 7.4.2039
问题:       The Netbeans integration is not tested.
解决方案:   Add a first Netbeans test.
相关文件:   src/testdir/test_netbeans.vim, src/testdir/test_netbeans.py,
            src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_channel.vim, src/testdir/shared.vim

Patch 7.4.2040
问题:       New files missing from distribution.
解决方案:   Add new test scripts.
相关文件:   Filelist

Patch 7.4.2041
问题:       Netbeans file authentication not tested.
解决方案:   Add a test.
相关文件:   src/testdir/test_netbeans.vim

Patch 7.4.2042
问题:       GTK: display updating is not done properly and can be slow.
解决方案:   Use gdk_display_flush() instead of gdk_display_sync(). Don't call
            gdk_window_process_updates().  (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.2043
问题:       setbuvfar() causes a screen redraw.
解决方案:   Only use aucmd_prepbuf() for options.
相关文件:   src/eval.c

Patch 7.4.2044
问题:       filter() and map() either require a string or defining a function.
解决方案:   Support lambda, a short way to define a function that evaluates an
            expression. (Yasuhiro Matsumoto, Ken Takata)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/testdir/test_alot.vim,
            src/Makefile, src/testdir/test_channel.vim,
            src/testdir/test_lambda.vim

Patch 7.4.2045
问题:       Memory leak when using a function callback.
解决方案:   Don't save the function name when it's in the partial.
相关文件:   src/channel.c

Patch 7.4.2046
问题:       The qf_init_ext() function is too big.
解决方案:   Refactor it. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 7.4.2047
问题:       Compiler warning for initializing a struct.
解决方案:   Initialize in another way. (Anton Lindqvist)
相关文件:   src/quickfix.c

Patch 7.4.2048
问题:       There is still code and help for unsupported systems.
解决方案:   Remove the code and text. (Hirohito Higashi)
相关文件:   runtime/doc/eval.txt, runtime/lang/menu_sk_sk.vim,
            runtime/menu.vim, runtime/optwin.vim, src/Make_bc5.mak,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/globals.h,
            src/main.c, src/memfile.c, src/memline.c, src/misc1.c,
            src/misc2.c, src/option.c, src/option.h, src/os_unix.c,
            src/os_unix.h, src/proto.h, src/term.c, src/undo.c, src/version.c,
            src/vim.h, src/xxd/xxd.c

Patch 7.4.2049
问题:       There is no way to get a list of the error lists.
解决方案:   Add ":chistory" and ":lhistory".
相关文件:   src/ex_cmds.h, src/quickfix.c, src/ex_docmd.c, src/message.c,
            src/proto/quickfix.pro, src/testdir/test_quickfix.vim

Patch 7.4.2050
问题:       When using ":vimgrep" may end up with duplicate buffers.
解决方案:   When adding an error list entry pass the buffer number if possible.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2051
问题:       No proper testing of trunc_string().
解决方案:   Add a unittest for message.c.
相关文件:   src/Makefile, src/message.c, src/message_test.c, src/main.c,
            src/proto/main.pro, src/structs.h

Patch 7.4.2052
问题:       Coverage report is messed up by the unittests.
解决方案:   Add a separate test target for script tests.  Use that when
            collecting coverage information.
相关文件:   src/Makefile

Patch 7.4.2053
问题:       Can't run scripttests in the top directory.
解决方案:   Add targets to the top Makefile.
相关文件:   Makefile

Patch 7.4.2054 (after 7.4.2048)
问题:       Wrong part of #ifdef removed.
解决方案:   Use the right part. (Hirohito Higashi)
相关文件:   src/os_unix.c

Patch 7.4.2055
问题:       eval.c is too big
解决方案:   Move Dictionary functions to dict.c
相关文件:   src/eval.c, src/dict.c, src/vim.h, src/globals.h,
            src/proto/eval.pro, src/proto/dict.pro, src/Makefile, Filelist

Patch 7.4.2056 (after 7.4.2055)
问题:       Build fails.
解决方案:   Add missing changes.
相关文件:   src/proto.h

Patch 7.4.2057
问题:       eval.c is too big.
解决方案:   Move List functions to list.c
相关文件:   src/eval.c, src/dict.c, src/list.c, src/proto.h, src/Makefile,
            src/globals.h, src/proto/eval.pro, src/proto/list.pro, Filelist

Patch 7.4.2058
问题:       eval.c is too big.
解决方案:   Move user functions to userfunc.c
相关文件:   src/userfunc.c, src/eval.c, src/vim.h, src/globals.h,
            src/structs.h, src/proto.h, src/Makefile, src/proto/eval.pro,
            src/proto/userfunc.pro, Filelist

Patch 7.4.2059
问题:       Non-Unix builds fail.
解决方案:   Update Makefiles for new files.
相关文件:   src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_dice.mak,
            src/Make_ivc.mak, src/Make_manx.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_sas.mak

Patch 7.4.2060 (after 7.4.2059)
问题:       Wrong file name.
解决方案:   Fix typo.
相关文件:   src/Make_mvc.mak

Patch 7.4.2061
问题:       qf_init_ext() is too big.
解决方案:   Move code to qf_parse_line() (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2062
问题:       Using dummy variable to compute struct member offset.
解决方案:   Use offsetof().
相关文件:   src/globals.h, src/macros.h, src/vim.h, src/spell.c

Patch 7.4.2063
问题:       eval.c is still too big.
解决方案:   Split off internal functions to evalfunc.c.
相关文件:   src/eval.c, src/evalfunc.c, src/list.c, src/proto.h,
            src/globals.h, src/vim.h, src/proto/eval.pro,
            src/proto/evalfunc.pro, src/proto/list.pro, src/Makefile, Filelist,
            src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_dice.mak,
            src/Make_ivc.mak, src/Make_manx.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_sas.mak

Patch 7.4.2064
问题:       Coverity warns for possible buffer overflow.
解决方案:   Use vim_strcat() instead of strcat().
相关文件:   src/quickfix.c

Patch 7.4.2065
问题:       Compiler warns for uninitialized variable. (John Marriott)
解决方案:   Set lnum to the right value.
相关文件:   src/evalfunc.c

Patch 7.4.2066
问题:       getcompletion() not well tested.
解决方案:   Add more testing.
相关文件:   src/testdir/test_cmdline.vim

Patch 7.4.2067
问题:       Compiler warning for char/char_u conversion. (Tony Mechelynck)
            Inefficient code.
解决方案:   Use more lines to fill with spaces. (Nikolai Pavlov) Add type cast.
相关文件:   src/quickfix.c

Patch 7.4.2068
问题:       Not all arguments of trunc_string() are tested.  Memory access
            error when running the message tests.
解决方案:   Add another test case. (Yegappan Lakshmanan)  Make it easy to run
            unittests with valgrind.  Fix the access error.
相关文件:   src/message.c, src/message_test.c, src/Makefile

Patch 7.4.2069
问题:       spell.c is too big.
解决方案:   Split it in spell file handling and spell checking.
相关文件:   src/spell.c, src/spellfile.c, src/spell.h, src/Makefile,
            src/proto/spell.pro, src/proto/spellfile.pro, src/proto.h
            Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak

Patch 7.4.2070 (after 7.4.2069)
问题:       Missing change to include file.
解决方案:   Include the spell header file.
相关文件:   src/vim.h

Patch 7.4.2071
问题:       The return value of type() is difficult to use.
解决方案:   Define v:t_ constants. (Ken Takata)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/evalfunc.c,
            src/testdir/test_channel.vim, src/testdir/test_viml.vim, src/vim.h

Patch 7.4.2072
问题:       substitute() does not support a Funcref argument.
解决方案:   Support a Funcref like it supports  a string starting with "\=".
相关文件:   src/evalfunc.c, src/regexp.c, src/eval.c, src/proto/eval.pro,
            src/proto/regexp.pro, src/testdir/test_expr.vim

Patch 7.4.2073
问题:       rgb.txt is read for every color name.
解决方案:   Load rgb.txt once. (Christian Brabandt)  Add a test.
相关文件:   runtime/rgb.txt, src/term.c, src/testdir/test_syn_attr.vim

Patch 7.4.2074
问题:       One more place using a dummy variable.
解决方案:   Use offsetof(). (Ken Takata)
相关文件:   src/userfunc.c

Patch 7.4.2075
问题:       No autocommand event to initialize a window or tab page.
解决方案:   Add WinNew and TabNew events. (partly by Felipe Morales)
相关文件:   src/fileio.c, src/window.c, src/vim.h,
            src/testdir/test_autocmd.vim, runtime/doc/autocmd.txt

Patch 7.4.2076
问题:       Syntax error when dict has '>' key.
解决方案:   Check for endchar. (Ken Takata)
相关文件:   src/userfunc.c, src/testdir/test_lambda.vim

Patch 7.4.2077
问题:       Cannot update 'tabline' when a tab was closed.
解决方案:   Add the TabClosed autocmd event. (partly by Felipe Morales)
相关文件:   src/fileio.c, src/window.c, src/vim.h,
            src/testdir/test_autocmd.vim, runtime/doc/autocmd.txt

Patch 7.4.2078
问题:       Running checks in po directory fails.
解决方案:   Add colors used in syntax.c to the builtin color table.
相关文件:   src/term.c

Patch 7.4.2079
问题:       Netbeans test fails on non-Unix systems.
解决方案:   Only do the permission check on Unix systems.
相关文件:   src/testdir/test_netbeans.vim

Patch 7.4.2080
问题:       When using PERROR() on some systems assert_fails() does not see
            the error.
解决方案:   Make PERROR() always report the error.
相关文件:   src/vim.h, src/message.c, src/proto/message.pro

Patch 7.4.2081
问题:       Line numbers in the error list are not always adjusted.
解决方案:   Set b_has_qf_entry properly. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/structs.h, src/testdir/test_quickfix.vim

Patch 7.4.2082
问题:       Not much test coverage for digraphs.
解决方案:   Add a new style digraph test. (Christian Brabandt)
相关文件:   src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_digraph.vim

Patch 7.4.2083
问题:       Coverity complains about not restoring a value.
解决方案:   Restore the value, although it's not really needed.  Change return
            to jump to cleanup, might leak memory.
相关文件:   src/userfunc.c

Patch 7.4.2084
问题:       New digraph test makes testing hang.
解决方案:   Don't set "nocp".
相关文件:   src/testdir/test_digraph.vim

Patch 7.4.2085
问题:       Digraph tests fails on some systems.
解决方案:   Run it separately and set 'encoding' early.
相关文件:   src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_digraph.vim

Patch 7.4.2086
问题:       Using the system default encoding makes tests unpredictable.
解决方案:   Always use utf-8 or latin1 in the new style tests.  Remove setting
            encoding and scriptencoding where it is not needed.
相关文件:   src/testdir/runtest.vim, src/testdir/test_channel.vim,
            src/testdir/test_digraph.vim, src/testdir/test_expand_dllpath.vim,
            src/testdir/test_expr_utf8.vim, src/testdir/test_json.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_regexp_utf8.vim, src/testdir/test_visual.vim,
            src/testdir/test_alot_utf8.vim,

Patch 7.4.2087
问题:       Digraph code test coverage is still low.
解决方案:   Add more tests. (Christian Brabandt)
相关文件:   src/testdir/test_digraph.vim

Patch 7.4.2088 (after 7.4.2087)
问题:       Keymap test fails with normal features.
解决方案:   Bail out if the keymap feature is not supported.
相关文件:   src/testdir/test_digraph.vim

Patch 7.4.2089
问题:       Color handling of X11 GUIs is too complicated.
解决方案:   Simplify the code.  Use RGBA where appropriate. (Kazunobu
            Kuriyama)
相关文件:   src/gui.h, src/gui_beval.c, src/gui_gtk_x11.c, src/netbeans.c

Patch 7.4.2090
问题:       Using submatch() in a lambda passed to substitute() is verbose.
解决方案:   Use a static list and pass it as an optional argument to the
            function.  Fix memory leak.
相关文件:   src/structs.h, src/list.c, src/userfunc.c, src/channel.c,
            src/eval.c, src/evalfunc.c, src/ex_cmds2.c, src/regexp.c,
            src/proto/list.pro, src/proto/userfunc.pro,
            src/testdir/test_expr.vim, runtime/doc/eval.txt

Patch 7.4.2091
问题:       Coverity reports a resource leak when out of memory.
解决方案:   Close the file before returning.
相关文件:   src/term.c

Patch 7.4.2092
问题:       GTK 3 build fails with older GTK version.
解决方案:   Check the pango version. (Kazunobu Kuriyama)
相关文件:   src/gui_beval.c

Patch 7.4.2093
问题:       Netbeans test fails once in a while.  Leaving log file behind.
解决方案:   Add it to the list of flaky tests.  Disable logfile.
相关文件:   src/testdir/runtest.vim, src/testdir/test_channel.vim

Patch 7.4.2094
问题:       The color allocation in X11 is overly complicated.
解决方案:   Remove find_closest_color(), XAllocColor() already does this.
            (Kazunobu Kuriyama)
相关文件:   src/gui_x11.c

Patch 7.4.2095
问题:       Man test fails when run with the GUI.
解决方案:   Adjust for different behavior of GUI.  Add assert_inrange().
相关文件:   src/eval.c, src/evalfunc.c, src/proto/eval.pro,
            src/testdir/test_assert.vim, src/testdir/test_man.vim,
            runtime/doc/eval.txt

Patch 7.4.2096
问题:       Lambda functions show up with completion.
解决方案:   Don't show lambda functions. (Ken Takata)
相关文件:   src/userfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2097
问题:       Warning from 64 bit compiler.
解决方案:   use size_t instead of int. (Mike Williams)
相关文件:   src/message.c

Patch 7.4.2098
问题:       Text object tests are old style.
解决方案:   Turn them into new style tests. (James McCoy, closes #941)
相关文件:   src/testdir/Make_all.mak, src/testdir/test_textobjects.in,
            src/testdir/test_textobjects.ok, src/testdir/test_textobjects.vim,
            src/Makefile

Patch 7.4.2099
问题:       When a keymap is active only "(lang)" is displayed. (Ilya
            Dogolazky)
解决方案:   Show the keymap name. (Dmitri Vereshchagin, closes #933)
相关文件:   src/buffer.c, src/proto/screen.pro, src/screen.c

Patch 7.4.2100
问题:       "cgn" and "dgn" do not work correctly with a single character
            match and the replacement includes the searched pattern. (John
            Beckett)
解决方案:   If the match is found in the wrong column try in the next column.
            Turn the test into new style. (Christian Brabandt)
相关文件:   src/search.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test53.in, src/testdir/test53.ok,
            src/testdir/test_gn.vim

Patch 7.4.2101
问题:       Looping over windows, buffers and tab pages is inconsistent.
解决方案:   Use FOR_ALL_ macros everywhere. (Yegappan Lakshmanan)
相关文件:   src/buffer.c, src/diff.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/fileio.c,
            src/globals.h, src/gui.c, src/gui_mac.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perl.xs, src/if_ruby.c, src/if_tcl.c,
            src/main.c, src/mark.c, src/memfile.c, src/memline.c, src/misc1.c,
            src/move.c, src/netbeans.c, src/normal.c, src/option.c,
            src/quickfix.c, src/screen.c, src/spell.c, src/term.c,
            src/window.c, src/workshop.c

Patch 7.4.2102 (after 7.4.2101)
问题:       Tiny build with GUI fails.
解决方案:   Revert one FOR_ALL_ change.
相关文件:   src/gui.c

Patch 7.4.2103
问题:       Can't have "augroup END" right after ":au!".
解决方案:   Check for the bar character before the command argument.
相关文件:   src/fileio.c, src/testdir/test_autocmd.vim,
            runtime/doc/autocmd.txt

Patch 7.4.2104
问题:       Code duplication when unreferencing a function.
解决方案:   De-duplicate.
相关文件:   src/userfunc.c

Patch 7.4.2105
问题:       Configure reports default features to be "normal" while it is
            "huge".
解决方案:   Change the default text.  Build with newer autoconf.
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.2106
问题:       Clang warns about missing field in initializer.
解决方案:   Define COMMA and use it.  (Kazunobu Kuriyama)
相关文件:   src/ex_cmds.c, src/globals.h, src/vim.h

Patch 7.4.2107 (after 7.4.2106)
问题:       Misplaced equal sign.
解决方案:   Remove it.
相关文件:   src/globals.h

Patch 7.4.2108
问题:       Netbeans test is flaky.
解决方案:   Wait for the cursor to be positioned.
相关文件:   src/testdir/test_netbeans.vim

Patch 7.4.2109
问题:       Setting 'display' to "lastline" is a drastic change, while
            omitting it results in lots of "@" lines.
解决方案:   Add "truncate" to show "@@@" for a truncated line.
相关文件:   src/option.h, src/screen.c, runtime/doc/options.txt

Patch 7.4.2110
问题:       When there is an CmdUndefined autocmd then the error for a missing
            command is E464 instead of E492. (Manuel Ortega)
解决方案:   Don't let the pointer be NULL.
相关文件:   src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 7.4.2111
问题:       Defaults are very conservative.
解决方案:   Move settings from vimrc_example.vim to defaults.vim.  Load
            defaults.vim if no .vimrc was found.
相关文件:   src/main.c, src/version.c, src/os_amiga.h, src/os_dos.h,
            src/os_mac.h, src/os_unix.h, src/feature.h, src/Makefile,
            runtime/vimrc_example.vim, runtime/defaults.vim,
            runtime/evim.vim, Filelist, runtime/doc/starting.txt

Patch 7.4.2112
问题:       getcompletion(.., 'dir') returns a match with trailing "*" when
            there are no matches. (Chdiza)
解决方案:   Return an empty list when there are no matches.  Add a trailing
            slash to directories. (Yegappan Lakshmanan)  Add tests for no
            matches. (closes #947)
相关文件:   src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2113
问题:       Test for undo is flaky.
解决方案:   Turn it into a new style test.  Use test_settime() to avoid
            flakyness.
相关文件:   src/Makefile, src/undo.c, src/testdir/test61.in,
            src/testdir/test61.ok, src/testdir/test_undo.vim,
            src/testdir/test_undolevels.vim, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim

Patch 7.4.2114
问题:       Tiny build fails.
解决方案:   Always include vim_time().
相关文件:   src/ex_cmds.c

Patch 7.4.2115
问题:       Loading defaults.vim with -C argument.
解决方案:   Don't load the defaults script with -C argument.  Test sourcing
            the defaults script.  Set 'display' to "truncate".
相关文件:   src/main.c, src/Makefile, runtime/defaults.vim,
            src/testdir/test_startup.vim, src/testdir/Make_all.mak

Patch 7.4.2116
问题:       The default vimrc for Windows is very conservative.
解决方案:   Use the defaults.vim in the Windows installer.
相关文件:   src/dosinst.c

Patch 7.4.2117
问题:       Deleting an augroup that still has autocmds does not give a
            warning.  The next defined augroup takes its place.
解决方案:   Give a warning and prevent the index being used for another group
            name.
相关文件:   src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2118
问题:       Mac: can't build with tiny features.
解决方案:   Don't define FEAT_CLIPBOARD unconditionally. (Kazunobu Kuriyama)
相关文件:   src/vim.h

Patch 7.4.2119
问题:       Closures are not supported.
解决方案:   Capture variables in lambdas from the outer scope. (Yasuhiro
            Matsumoto, Ken Takata)
相关文件:   runtime/doc/eval.txt, src/eval.c, src/ex_cmds2.c, src/globals.h,
            src/proto/eval.pro, src/proto/userfunc.pro,
            src/testdir/test_lambda.vim, src/userfunc.c

Patch 7.4.2120
问题:       User defined functions can't be a closure.
解决方案:   Add the "closure" argument. Allow using :unlet on a bound
            variable. (Yasuhiro Matsumoto, Ken Takata)
相关文件:   runtime/doc/eval.txt, src/testdir/test_lambda.vim, src/userfunc.c,
            src/eval.c src/proto/userfunc.pro

Patch 7.4.2121
问题:       No easy way to check if lambda and closure are supported.
解决方案:   Add the +lambda feature.
相关文件:   src/evalfunc.c, src/version.c, src/testdir/test_lambda.vim

Patch 7.4.2122 (after 7.4.2118)
问题:       Mac: don't get +clipboard in huge build.
解决方案:   Move #define down below including feature.h
相关文件:   src/vim.h

Patch 7.4.2123
问题:       No new style test for diff mode.
解决方案:   Add a test.  Check that folds are in sync.
相关文件:   src/Makefile, src/testdir/test_diffmode.vim,
            src/testdir/Make_all.mak, src/testdir/test47.in,
            src/testdir/test47.ok

Patch 7.4.2124
问题:       diffmode test leaves files behind, breaking another test.
解决方案:   Delete the files.
相关文件:   src/testdir/test_diffmode.vim

Patch 7.4.2125
问题:       Compiler warning for loss of data.
解决方案:   Add a type cast. (Christian Brabandt)
相关文件:   src/message.c

Patch 7.4.2126
问题:       No tests for :diffget and :diffput
解决方案:   Add tests.
相关文件:   src/testdir/test_diffmode.vim

Patch 7.4.2127
问题:       The short form of ":noswapfile" is ":noswap" instead of ":nos".
            (Kent Sibilev)
解决方案:   Only require three characters.  Add a test for the short forms.
相关文件:   src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 7.4.2128
问题:       Memory leak when saving for undo fails.
解决方案:   Free allocated memory. (Hirohito Higashi)
相关文件:   src/ex_cmds.c

Patch 7.4.2129
问题:       Memory leak when using timer_start(). (Dominique Pelle)
解决方案:   Don't copy the callback when using a partial.
相关文件:   src/evalfunc.c

Patch 7.4.2130
问题:       Pending timers cause false memory leak reports.
解决方案:   Free all timers on exit.
相关文件:   src/ex_cmds2.c, src/proto/ex_cmds2.pro, src/misc2.c

Patch 7.4.2131
问题:       More memory leaks when using partial, e.g. for "exit-cb".
解决方案:   Don't copy the callback when using a partial.
相关文件:   src/channel.c

Patch 7.4.2132
问题:       test_partial has memory leaks reported.
解决方案:   Add a note about why this happens.
相关文件:   src/testdir/test_partial.vim

Patch 7.4.2133 (after 7.4.2128)
问题:       Can't build with tiny features.
解决方案:   Add #ifdef.
相关文件:   src/ex_cmds.c

Patch 7.4.2134
问题:       No error for using function() badly.
解决方案:   Check for passing wrong function name. (Ken Takata)
相关文件:   src/eval.c, src/evalfunc.c, src/proto/userfunc.pro,
            src/testdir/test_expr.vim, src/userfunc.c, src/vim.h

Patch 7.4.2135
问题:       Various tiny issues.
解决方案:   Update comments, white space, etc.
相关文件:   src/diff.c, src/digraph.c, src/testdir/test80.in,
            src/testdir/test_channel.vim, src/testdir/Makefile,
            runtime/menu.vim, src/INSTALLpc.txt, src/xpm/README.txt

Patch 7.4.2136
问题:       Closure function fails.
解决方案:   Don't reset uf_scoped when it points to another funccal.
相关文件:   src/userfunc.c, src/testdir/test_lambda.vim

Patch 7.4.2137
问题:       Using function() with a name will find another function when it is
            redefined.
解决方案:   Add funcref().  Refer to lambda using a partial.  Fix several
            reference counting issues.
相关文件:   src/vim.h, src/structs.h, src/userfunc.c, src/eval.c,
            src/evalfunc.c, src/channel.c, src/proto/eval.pro,
            src/proto/userfunc.pro, src/if_mzsch.c, src/regexp.c, src/misc2.c,
            src/if_py_both.h, src/testdir/test_expr.vim, runtime/doc/eval.txt

Patch 7.4.2138
问题:       Test 86 and 87 fail.
解决方案:   Call func_ref() also for regular functions.
相关文件:   src/if_py_both.h

Patch 7.4.2139
问题:       :delfunction causes illegal memory access.
解决方案:   Correct logic when deciding to free a function.
相关文件:   src/userfunc.c, src/testdir/test_lambda.vim

Patch 7.4.2140
问题:       Tiny build fails.
解决方案:   Add dummy typedefs.
相关文件:   src/structs.h

Patch 7.4.2141
问题:       Coverity reports bogus NULL check.
解决方案:   When checking for a variable in the funccal scope don't pass the
            varname.
相关文件:   src/userfunc.c, src/proto/userfunc.pro, src/eval.c

Patch 7.4.2142
问题:       Leaking memory when redefining a function.
解决方案:   Don't increment the function reference count when it's found by
            name. Don't remove the wrong function from the hashtab.  More
            reference counting fixes.
相关文件:   src/structs.h, src/userfunc.c

Patch 7.4.2143
问题:       A funccal is garbage collected while it can still be used.
解决方案:   Set copyID in all referenced functions.  Do not list lambda
            functions with ":function".
相关文件:   src/userfunc.c, src/proto/userfunc.pro, src/eval.c,
            src/testdir/test_lambda.vim

Patch 7.4.2144
问题:       On MS-Windows quickfix does not handle a line with 1023 bytes
            ending in CR-LF properly.
解决方案:   Don't consider CR a line break. (Ken Takata)
相关文件:   src/quickfix.c

Patch 7.4.2145
问题:       Win32: Using CreateThread/ExitThread is not safe.
解决方案:   Use _beginthreadex and return from the thread. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.2146
问题:       Not enough testing for popup menu.  CTRL-E does not always work
            properly.
解决方案:   Add more tests.  When using CTRL-E check if the popup menu is
            visible. (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2147 (after 7.4.2146)
问题:       test_alot fails.
解决方案:   Close window.
相关文件:   src/testdir/test_popup.vim

Patch 7.4.2148
问题:       Not much testing for cscope.
解决方案:   Add a test that uses the cscope program. (Christian Brabandt)
相关文件:   src/testdir/test_cscope.vim

Patch 7.4.2149
问题:       If a test leaves a window open a following test may fail.
解决方案:   Always close extra windows after running a test.
相关文件:   src/testdir/runtest.vim, src/testdir/test_popup.vim

Patch 7.4.2150
问题:       Warning with MinGW 64. (John Marriott)
解决方案:   Change return type. (Ken Takata)
相关文件:   src/os_win32.c

Patch 7.4.2151
问题:       Quickfix test fails on MS-Windows.
解决方案:   Close the help window. (Christian Brabandt)
相关文件:   src/testdir/test_quickfix.vim

Patch 7.4.2152
问题:       No proper translation of messages with a count.
解决方案:   Use ngettext(). (Sergey Alyoshin)
相关文件:   src/evalfunc.c, src/fold.c, src/os_win32.c, src/screen.c, src/vim.h

Patch 7.4.2153
问题:       GUI test isn't testing much.
解决方案:   Turn into a new style test.  Execute a shell command.
相关文件:   src/testdir/test_gui.vim, src/testdir/test16.in,
            src/testdir/test16.ok, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/Make_vms.mms

Patch 7.4.2154
问题:       Test_communicate() fails sometimes.
解决方案:   Add it to the flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 7.4.2155
问题:       Quotes make GUI test fail on MS-Windows.
解决方案:   Remove quotes, strip white space.
相关文件:   src/testdir/test_gui.vim

Patch 7.4.2156
问题:       Compiler warning.
解决方案:   Add type cast. (Ken Takata, Mike Williams)
相关文件:   src/os_win32.c

Patch 7.4.2157
问题:       Test_job_start_fails() is expected to report memory leaks, making
            it hard to see other leaks in test_partial.
解决方案:   Move Test_job_start_fails() to a separate test file.
相关文件:   src/testdir/test_partial.vim, src/testdir/test_job_fails.vim,
            src/Makefile, src/testdir/Make_all.mak

Patch 7.4.2158
问题:       Result of getcompletion('', 'cscope') depends on previous
            completion. (Christian Brabandt)
解决方案:   Call set_context_in_cscope_cmd().
相关文件:   src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2159
问题:       Insufficient testing for cscope.
解决方案:   Add more tests. (Dominique Pelle)
相关文件:   src/testdir/test_cscope.vim

Patch 7.4.2160
问题:       setmatches() mixes up values. (Nikolai Pavlov)
解决方案:   Save the string instead of reusing a shared buffer.
相关文件:   src/dict.c, src/evalfunc.c, src/testdir/test_expr.vim,

Patch 7.4.2161 (after 7.4.2160)
问题:       Expression test fails without conceal feature.
解决方案:   Only check "conceal" with the conceal feature.
相关文件:   src/testdir/test_expr.vim

Patch 7.4.2162
问题:       Result of getcompletion('', 'sign') depends on previous
            completion.
解决方案:   Call set_context_in_sign_cmd(). (Dominique Pelle)
相关文件:   src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2163
问题:       match() and related functions tested with old style test.
解决方案:   Convert to new style test. (Hirohito Higashi)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test63.in,
            src/testdir/test63.ok, src/testdir/test_alot.vim,
            src/testdir/test_match.vim, src/testdir/test_matchstrpos.vim

Patch 7.4.2164
问题:       It is not possible to use plugins in an "after" directory to tune
            the behavior of a package.
解决方案:   First load plugins from non-after directories, then packages and
            finally plugins in after directories.
            Reset 'loadplugins' before executing --cmd arguments.
相关文件:   src/main.c, src/vim.h, src/ex_cmds2.c, src/testdir/Makefile,
            src/testdir/shared.vim, src/testdir/test_startup.vim,
            src/testdir/setup.vim, runtime/doc/starting.txt

Patch 7.4.2165 (after 7.4.2164)
问题:       Startup test fails on MS-Windows.
解决方案:   Don't check output if RunVim() returns zero.
相关文件:   src/testdir/test_startup.vim

Patch 7.4.2166 (after 7.4.2164)
问题:       Small build can't run startup test.
解决方案:   Skip the test.
相关文件:   src/testdir/test_startup.vim

Patch 7.4.2167 (after 7.4.2164)
问题:       Small build can't run tests.
解决方案:   Don't try setting 'packpath'.
相关文件:   src/testdir/setup.vim

Patch 7.4.2168
问题:       Not running the startup test on MS-Windows.
解决方案:   Write vimcmd.
相关文件:   src/testdir/Make_ming.mak, src/testdir/Make_dos.mak

Patch 7.4.2169 (after 7.4.2168)
问题:       Startup test gets stuck on MS-Windows.
解决方案:   Use double quotes.
相关文件:   src/testdir/shared.vim, src/testdir/test_startup.vim

Patch 7.4.2170
问题:       Cannot get information about timers.
解决方案:   Add timer_info().
相关文件:   src/evalfunc.c, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            runtime/doc/eval.txt

Patch 7.4.2171 (after 7.4.2170)
问题:       MS-Windows build fails.
解决方案:   Add QueryPerformanceCounter().
相关文件:   src/ex_cmds2.c

Patch 7.4.2172
问题:       No test for "vim --help".
解决方案:   Add a test.
相关文件:   src/testdir/test_startup.vim, src/testdir/shared.vim

Patch 7.4.2173 (after 7.4.2172)
问题:       Can't test help on MS-Windows.
解决方案:   Skip the test.
相关文件:   src/testdir/test_startup.vim

Patch 7.4.2174
问题:       Adding duplicate flags to 'whichwrap' leaves commas behind.
解决方案:   Also remove the commas. (Naruhiko Nishino)
相关文件:   src/Makefile, src/option.c, src/testdir/Make_all.mak,
            src/testdir/test_alot.vim, src/testdir/test_options.in,
            src/testdir/test_options.ok, src/testdir/test_options.vim

Patch 7.4.2175
问题:       Insufficient testing of cscope.
解决方案:   Add more tests. (Dominique Pelle)
相关文件:   src/testdir/test_cscope.vim

Patch 7.4.2176
问题:       #ifdefs in main() are complicated.
解决方案:   Always define vim_main2().  Move params to the file level.
            (suggested by Ken Takata)
相关文件:   src/main.c, src/structs.h, src/vim.h, src/if_mzsch.c,
            src/proto/if_mzsch.pro

Patch 7.4.2177
问题:       No testing for -C and -N command line flags, file arguments,
            startuptime.
解决方案:   Add tests.
相关文件:   src/testdir/test_startup.vim, src/testdir/shared.vim

Patch 7.4.2178
问题:       No test for reading from stdin.
解决方案:   Add a test.
相关文件:   src/testdir/test_startup.vim, src/testdir/shared.vim

Patch 7.4.2179 (after 7.4.2178)
问题:       Reading from stdin test fails on MS-Windows.
解决方案:   Strip the extra space.
相关文件:   src/testdir/test_startup.vim

Patch 7.4.2180
问题:       There is no easy way to stop all timers.  There is no way to
            temporary pause a timer.
解决方案:   Add timer_stopall() and timer_pause().
相关文件:   src/evalfunc.c, src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/structs.h, src/testdir/test_timers.vim,
            src/testdir/shared.vim, runtime/doc/eval.txt

Patch 7.4.2181
问题:       Compiler warning for unused variable.
解决方案:   Remove it. (Dominique Pelle)
相关文件:   src/ex_cmds2.c

Patch 7.4.2182
问题:       Color Grey40 used in startup but not in the short list.
解决方案:   Add Grey40 to the builtin colors.
相关文件:   src/term.c

Patch 7.4.2183
问题:       Sign tests are old style.
解决方案:   Turn them into new style tests. (Dominique Pelle)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test_signs.in,
            src/testdir/test_signs.ok, src/testdir/test_signs.vim,

Patch 7.4.2184
问题:       Tests that use RunVim() do not actually perform the test.
解决方案:   Use "return" instead of "call". (Ken Takata)
相关文件:   src/testdir/shared.vim

Patch 7.4.2185
问题:       Test glob2regpat does not test much.
解决方案:   Add a few more test cases. (Dominique Pelle)
相关文件:   src/testdir/test_glob2regpat.vim

Patch 7.4.2186
问题:       Timers test is flaky.
解决方案:   Relax the sleep time check.
相关文件:   src/testdir/test_timers.vim

Patch 7.4.2187 (after 7.4.2185)
问题:       glob2regpat test fails on Windows.
解决方案:   Remove the checks that use backslashes.
相关文件:   src/testdir/test_glob2regpat.vim

Patch 7.4.2188 (after 7.4.2146)
问题:       Completion does not work properly with some plugins.
解决方案:   Revert the part related to typing CTRL-E. (closes #972)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 7.4.2189
问题:       Cannot detect encoding in a fifo.
解决方案:   Extend the stdin way of detecting encoding to fifo.  Add a test
            for detecting encoding on stdin and fifo. (Ken Takata)
相关文件:   src/buffer.c, src/fileio.c, src/Makefile,
            src/testdir/Make_all.mak, src/testdir/test_startup_utf8.vim,
            src/vim.h

Patch 7.4.2190
问题:       When startup test fails it's not easy to find out why.
            GUI test fails with Gnome.
解决方案:   Add the help entry matches to a list an assert that.
            Set $HOME for Gnome to create .gnome2 directory.
相关文件:   src/testdir/test_startup.vim, src/testdir/test_gui.vim

Patch 7.4.2191
问题:       No automatic prototype for vim_main2().
解决方案:   Move the #endif. (Ken Takata)
相关文件:   src/main.c, src/vim.h, src/proto/main.pro

Patch 7.4.2192
问题:       Generating prototypes with Cygwin doesn't work well.
解决方案:   Change #ifdefs. (Ken Takata)
相关文件:   src/gui.h, src/gui_w32.c, src/ops.c, src/proto/fileio.pro,
            src/proto/message.pro, src/proto/normal.pro, src/proto/ops.pro,
            src/vim.h

Patch 7.4.2193
问题:       With Gnome when the GUI can't start test_startup hangs.
解决方案:   Call gui_mch_early_init_check(). (Hirohito Higashi)
相关文件:   src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro

Patch 7.4.2194
问题:       Sign tests don't cover enough.
解决方案:   Add more test cases. (Dominique Pelle)
相关文件:   src/testdir/test_signs.vim

Patch 7.4.2195
问题:       MS-Windows: The vimrun program does not support Unicode.
解决方案:   Use GetCommandLineW().  Cleanup old #ifdefs. (Ken Takata)
相关文件:   src/vimrun.c

Patch 7.4.2196
问题:       glob2regpat test doesn't test everything on MS-Windows.
解决方案:   Add patterns with backslash handling.
相关文件:   src/testdir/test_glob2regpat.vim

Patch 7.4.2197
问题:       All functions are freed on exit, which may hide leaks.
解决方案:   Only free named functions, not reference counted ones.
相关文件:   src/userfunc.c

Patch 7.4.2198
问题:       Test alot sometimes fails under valgrind. (Dominique Pelle)
解决方案:   Avoid passing a callback with the wrong number of arguments.
相关文件:   src/testdir/test_partial.vim

Patch 7.4.2199
问题:       In the GUI the cursor is hidden when redrawing any window,
            causing flicker.
解决方案:   Only undraw the cursor when updating the window it's in.
相关文件:   src/screen.c, src/gui.c, src/proto/gui.pro, src/gui_gtk_x11.c

Patch 7.4.2200
问题:       Cannot get all information about a quickfix list.
解决方案:   Add an optional argument to get/set loc/qf list(). (Yegappan
            Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/proto/quickfix.pro,
            src/quickfix.c, src/tag.c, src/testdir/test_quickfix.vim

Patch 7.4.2201
问题:       The sign column disappears when the last sign is deleted.
解决方案:   Add the 'signcolumn' option. (Christian Brabandt)
相关文件:   runtime/doc/options.txt, runtime/optwin.vim, src/edit.c,
            src/move.c, src/option.c, src/option.h, src/proto/option.pro,
            src/screen.c, src/structs.h, src/testdir/test_options.vim

Patch 7.4.2202
问题:       Build fails with small features.
解决方案:   Correct option initialization.
相关文件:   src/option.c

Patch 7.4.2203
问题:       Test fails with normal features.
解决方案:   Check is signs are supported.
相关文件:   src/testdir/test_options.vim

Patch 7.4.2204
问题:       It is not easy to get information about buffers, windows and
            tabpages.
解决方案:   Add getbufinfo(), getwininfo() and gettabinfo(). (Yegappan
            Lakshmanan)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/dict.c,
            src/evalfunc.c, src/option.c, src/proto/dict.pro,
            src/proto/option.pro, src/proto/window.pro,
            src/testdir/Make_all.mak, src/testdir/test_bufwintabinfo.vim,
            src/window.c, src/Makefile

Patch 7.4.2205
问题:       'wildignore' always applies to getcompletion().
解决方案:   Add an option to use 'wildignore' or not. (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_cmdline.vim

Patch 7.4.2206
问题:       Warning for unused function.
解决方案:   Put the function inside #ifdef. (John Marriott)
相关文件:   src/evalfunc.c

Patch 7.4.2207
问题:       The +xpm feature is not sorted properly in :version output.
解决方案:   Move it up. (Tony Mechelynck)
相关文件:   src/version.c

Patch 7.4.2208
问题:       Test for mappings is old style.
解决方案:   Convert the test to new style.
相关文件:   src/testdir/test_mapping.vim, src/testdir/test_mapping.in,
            src/testdir/test_mapping.ok, src/Makefile,
            src/testdir/test_alot.vim, src/testdir/Make_all.mak

Patch 7.4.2209
问题:       Cannot map <M-">. (Stephen Riehm)
解决方案:   Solve the memory access problem in another way. (Dominique Pelle)
            Allow for using <M-\"> in a string.
相关文件:   src/eval.c, src/gui_mac.c, src/misc2.c, src/option.c,
            src/proto/misc2.pro, src/syntax.c, src/term.c,
            src/testdir/test_mapping.vim

Patch 7.4.2210
问题:       On OSX configure mixes up a Python framework and the Unix layout.
解决方案:   Make configure check properly. (Tim D. Smith, closes #980)
相关文件:   src/configure.in, src/auto/configure

Patch 7.4.2211
问题:       Mouse support is not automatically enabled with simple term.
解决方案:   Recognize "st" and other names. (Manuel Schiller, closes #963)
相关文件:   src/os_unix.c

Patch 7.4.2212
问题:       Mark " is not set when closing a window in another tab. (Guraga)
解决方案:   Check all tabs for the window to be valid. (based on patch by
            Hirohito Higashi, closes #974)
相关文件:   src/window.c, src/proto/window.pro, src/buffer.c,
            src/testdir/test_viminfo.vim

Patch 7.4.2213
问题:       Cannot highlight the "~" lines at the end of a window differently.
解决方案:   Add the EndOfBuffer highlighting. (Marco Hinz, James McCoy)
相关文件:   runtime/doc/options.txt, runtime/doc/syntax.txt, src/option.c,
            src/screen.c, src/syntax.c, src/vim.h

Patch 7.4.2214
问题:       A font that uses ligatures messes up the screen display.
解决方案:   Put spaces between characters when building the glyph table.
            (based on a patch from Manuel Schiller)
相关文件:   src/gui_gtk_x11.c

Patch 7.4.2215
问题:       It's not easy to find out if a window is a quickfix or location
            list window.
解决方案:   Add "loclist" and "quickfix" entries to the dict returned by
            getwininfo(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim

Patch 7.4.2216 (after 7.4.2215)
问题:       Test fails without the +sign feature.
解决方案:   Only check for signcolumn with the +sign feature.
相关文件:   src/testdir/test_bufwintabinfo.vim

Patch 7.4.2217
问题:       When using matchaddpos() a character after the end of the line can
            be highlighted.
解决方案:   Only highlight existing characters. (Hirohito Higashi)
相关文件:   src/screen.c, src/structs.h, src/testdir/test_match.vim

Patch 7.4.2218
问题:       Can't build with +timers when +digraph is not included.
解决方案:   Change #ifdef for e_number_exp. (Damien)
相关文件:   src/globals.h

Patch 7.4.2219
问题:       Recursive call to substitute gets stuck in sandbox. (Nikolai
            Pavlov)
解决方案:   Handle the recursive call. (Christian Brabandt, closes #950)
            Add a test.
相关文件:   src/ex_cmds.c, src/testdir/test_regexp_latin.vim

Patch 7.4.2220
问题:       printf() gives an error when the argument for %s is not a string.
            (Ozaki Kiichi)
解决方案:   Behave like invoking string() on the argument. (Ken Takata)
相关文件:   runtime/doc/eval.txt, src/message.c, src/testdir/test_expr.vim

Patch 7.4.2221
问题:       printf() does not support binary format.
解决方案:   Add %b and %B. (Ozaki Kiichi)
相关文件:   runtime/doc/eval.txt, src/message.c, src/testdir/test_expr.vim

Patch 7.4.2222
问题:       Sourcing a script where a character has 0x80 as a second byte does
            not work. (Filipe L B Correia)
解决方案:   Turn 0x80 into K_SPECIAL KS_SPECIAL KE_FILLER. (Christian
            Brabandt, closes #728)  Add a test case.
相关文件:   src/getchar.c, src/proto/getchar.pro, src/misc1.c,
            src/testdir/test_regexp_utf8.vim

Patch 7.4.2223
问题:       Buffer overflow when using latin1 character with feedkeys().
解决方案:   Check for an illegal character.  Add a test.
相关文件:   src/testdir/test_regexp_utf8.vim, src/testdir/test_source_utf8.vim,
            src/testdir/test_alot_utf8.vim, src/Makefile, src/getchar.c,
            src/macros.h, src/evalfunc.c, src/os_unix.c, src/os_win32.c,
            src/spell.c,

Patch 7.4.2224
问题:       Compiler warnings with older compiler and 64 bit numbers.
解决方案:   Add "LL" to large values. (Mike Williams)
相关文件:   src/eval.c, src/evalfunc.c

Patch 7.4.2225
问题:       Crash when placing a sign in a deleted buffer.
解决方案:   Check for missing buffer name. (Dominique Pelle). Add a test.
相关文件:   src/ex_cmds.c, src/testdir/test_signs.vim

Patch 7.4.2226
问题:       The field names used by getbufinfo(), gettabinfo() and
            getwininfo() are not consistent.
解决方案:   Use bufnr, winnr and tabnr. (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim

Patch 7.4.2227
问题:       Tab page tests are old style.
解决方案:   Change into new style tests. (Hirohito Higashi)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test62.in,
            src/testdir/test62.ok, src/testdir/test_alot.vim,
            src/testdir/test_tabpage.vim

Patch 7.4.2228
问题:       Test files have inconsistent modelines.
解决方案:   Don't set 'tabstop' to 2, use 'sts' and 'sw'.
相关文件:   src/testdir/README.txt, src/testdir/test_backspace_opt.vim,
            src/testdir/test_digraph.vim, src/testdir/test_gn.vim
            src/testdir/test_help_tagjump.vim,
            src/testdir/test_increment_dbcs.vim,
            src/testdir/test_increment.vim, src/testdir/test_match.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_regexp_latin.vim, src/testdir/test_timers.vim

Patch 7.4.2229
问题:       Startup test fails on Solaris.
解决方案:   Recognize a character device. (Danek Duvall)
相关文件:   src/buffer.c, src/fileio.c, src/proto/fileio.pro, src/vim.h

Patch 7.4.2230
问题:       There is no equivalent of 'smartcase' for a tag search.
解决方案:   Add value "followscs" and "smart" to 'tagcase'. (Christian
            Brabandt, closes #712) Turn tagcase test into new style.
相关文件:   runtime/doc/options.txt, runtime/doc/tagsrch.txt, src/option.h,
            src/tag.c, src/search.c, src/proto/search.pro,
            src/testdir/test_tagcase.in, src/testdir/test_tagcase.ok,
            src/testdir/test_tagcase.vim, src/Makefile,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 7.4.2231
问题:       ":oldfiles" output is a very long list.
解决方案:   Add a pattern argument. (Coot, closes #575)
相关文件:   runtime/doc/starting.txt, src/ex_cmds.h, src/eval.c,
            src/ex_cmds.c, src/proto/eval.pro, src/proto/ex_cmds.pro,
            src/testdir/test_viminfo.vim

Patch 7.4.2232
问题:       The default ttimeoutlen is very long.
解决方案:   Use "100". (Hirohito Higashi)
相关文件:   runtime/defaults.vim

Patch 7.4.2233
问题:       Crash when using funcref() with invalid name. (Dominique Pelle)
解决方案:   Check for NULL translated name.
相关文件:   src/evalfunc.c, src/testdir/test_expr.vim

Patch 7.4.2234
问题:       Can't build with +eval but without +quickfix. (John Marriott)
解决方案:   Move skip_vimgrep_pat() to separate #ifdef block.
相关文件:   src/quickfix.c

Patch 7.4.2235
问题:       submatch() does not check for a valid argument.
解决方案:   Give an error if the argument is out of range. (Dominique Pelle)
相关文件:   src/evalfunc.c, src/testdir/test_expr.vim

Patch 7.4.2236
问题:       The 'langnoremap' option leads to double negatives.  And it does
            not work for the last character of a mapping.
解决方案:   Add 'langremap' with the opposite value.  Keep 'langnoremap' for
            backwards compatibility.  Make it work for the last character of a
            mapping.  Make the test work.
相关文件:   runtime/doc/options.txt, runtime/defaults.vim, src/option.c,
            src/option.h, src/macros.h, src/testdir/test_mapping.vim

Patch 7.4.2237
问题:       Can't use "." and "$" with ":tab".
解决方案:   Support a range for ":tab". (Hirohito Higashi)
相关文件:   runtime/doc/tabpage.txt, src/ex_docmd.c,
            src/testdir/test_tabpage.vim

Patch 7.4.2238
问题:       With SGR mouse reporting (suckless terminal) the mouse release and
            scroll up/down is confused.
解决方案:   Don't see a release as a scroll up/down. (Ralph Eastwood)
相关文件:   src/term.c

Patch 7.4.2239
问题:       Warning for missing declaration of skip_vimgrep_pat(). (John
            Marriott)
解决方案:   Move it to another file.
相关文件:   src/quickfix.c, src/proto/quickfix.pro, src/ex_cmds.c,
            src/proto/ex_cmds.pro

Patch 7.4.2240
问题:       Tests using the sleep time can be flaky.
解决方案:   Use reltime() if available. (Partly by Shane Harper)
相关文件:   src/testdir/shared.vim, src/testdir/test_timers.vim

Patch 7.4.2241 (after 7.4.2240)
问题:       Timer test sometimes fails.
解决方案:   Increase the maximum time for repeating timer.
相关文件:   src/testdir/test_timers.vim

Patch 7.4.2242 (after 7.4.2240)
问题:       Timer test sometimes fails.
解决方案:   Increase the maximum time for callback timer test.
相关文件:   src/testdir/test_timers.vim

Patch 7.4.2243
问题:       Warning for assigning negative value to unsigned. (Danek Duvall)
解决方案:   Make cterm_normal_fg_gui_color and _bg_ guicolor_T, cast to long_u
            only when an unsigned is needed.
相关文件:   src/structs.h, src/globals.h, src/screen.c, src/term.c,
            src/syntax.c, src/gui_gtk_x11.c, src/gui.c, src/gui_mac.c,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c,
            src/proto/term.pro, src/proto/gui_gtk_x11.pro,
            src/proto/gui_mac.pro, src/proto/gui_photon.pro,
            src/proto/gui_w32.pro, src/proto/gui_x11.pro

Patch 7.4.2244
问题:       Adding pattern to ":oldfiles" is not a generic solution.
解决方案:   Add the ":filter /pat/ cmd" command modifier.  Only works for some
            commands right now.
相关文件:   src/structs.h, src/ex_docmd.c, src/ex_cmds.h, src/message.c,
            src/proto/message.pro, runtime/doc/starting.txt,
            runtime/doc/various.txt, src/testdir/test_viminfo.vim,
            src/testdir/test_alot.vim, src/testdir/test_filter_cmd.vim,
            src/Makefile

Patch 7.4.2245 (after 7.4.2244)
问题:       Filter test fails.
解决方案:   Include missing changes.
相关文件:   src/buffer.c

Patch 7.4.2246 (after 7.4.2244)
问题:       Oldfiles test fails.
解决方案:   Include missing changes.
相关文件:   src/ex_cmds.c

Patch 7.4.2247 (after 7.4.2244)
问题:       Tiny build fails. (Tony Mechelynck)
解决方案:   Remove #ifdef.
相关文件:   src/ex_cmds.c

Patch 7.4.2248
问题:       When cancelling the :ptjump prompt a preview window is opened for
            a following command.
解决方案:   Reset g_do_tagpreview. (Hirohito Higashi)  Add a test.  Avoid that
            the test runner gets stuck in trying to close a window.
相关文件:   src/tag.c, src/testdir/test_tagjump.vim, src/testdir/runtest.vim

Patch 7.4.2249
问题:       Missing colon in error message.
解决方案:   Add the colon. (Dominique Pelle)
相关文件:   src/userfunc.c

Patch 7.4.2250
问题:       Some error messages cannot be translated.
解决方案:   Enclose them in _() and N_(). (Dominique Pelle)
相关文件:   src/channel.c, src/evalfunc.c, src/ex_cmds.c, src/spell.c,
            src/window.c

Patch 7.4.2251
问题:       In rare cases diffing 4 buffers is not enough.
解决方案:   Raise the limit to 8. (closes #1000)
相关文件:   src/structs.h, runtime/doc/diff.txt

Patch 7.4.2252
问题:       Compiler warnings for signed/unsigned in expression.
解决方案:   Remove type cast. (Dominique Pelle)
相关文件:   src/vim.h

Patch 7.4.2253
问题:       Check for Windows 3.1 will always return false.  (Christian
            Brabandt)
解决方案:   Remove the dead code.
相关文件:   src/gui_w32.c, src/evalfunc.c, src/ex_cmds.c, src/option.c,
            src/os_win32.c, src/version.c, src/proto/gui_w32.pro

Patch 7.4.2254
问题:       Compiler warnings in MzScheme code.
解决方案:   Add UNUSED.  Remove unreachable code.
相关文件:   src/if_mzsch.c

Patch 7.4.2255
问题:       The script that checks translations can't handle plurals.
解决方案:   Check for plural msgid and msgstr entries.  Leave the cursor on
            the first error.
相关文件:   src/po/check.vim

Patch 7.4.2256
问题:       Coverity complains about null pointer check.
解决方案:   Remove wrong and superfluous error check.
相关文件:   src/eval.c

Patch 7.4.2257
问题:       Coverity complains about not checking for NULL.
解决方案:   Check for out of memory.
相关文件:   src/if_py_both.h

Patch 7.4.2258
问题:       Two JSON messages are sent without a separator.
解决方案:   Separate messages with a NL. (closes #1001)
相关文件:   src/json.c, src/channel.c, src/vim.h, src/testdir/test_channel.py,
            src/testdir/test_channel.vim, runtime/doc/channel.txt

Patch 7.4.2259
问题:       With 'incsearch' can only see the next match.
解决方案:   Make CTRL-N/CTRL-P move to the previous/next match. (Christian
            Brabandt)
相关文件:   runtime/doc/cmdline.txt, src/ex_getln.c, src/testdir/Make_all.mak,
            src/testdir/test_search.vim, src/Makefile

Patch 7.4.2260 (after 7.4.2258)
问题:       Channel test is flaky.
解决方案:   Add a newline to separate JSON messages.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.2261 (after 7.4.2259)
问题:       Build fails with small features.
解决方案:   Move "else" inside the #ifdef.
相关文件:   src/ex_getln.c

Patch 7.4.2262
问题:       Fail to read register content from viminfo if it is 438 characters
            long. (John Chen)
解决方案:   Adjust the check for line wrapping. (closes #1010)
相关文件:   src/testdir/test_viminfo.vim, src/ex_cmds.c

Patch 7.4.2263
问题:       :filter does not work for many commands.  Can only get matching
            messages.
解决方案:   Make :filter work for :command, :map, :list, :number and :print.
            Make ":filter!" show non-matching lines.
相关文件:   src/getchar.c, src/ex_cmds.c, src/ex_cmds.h, src/ex_docmd.c,
            src/message.c, src/structs.h, src/testdir/test_filter_cmd.vim

Patch 7.4.2264
问题:       When adding entries to an empty quickfix list the title is reset.
解决方案:   Improve handling of the title. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim, src/quickfix.c

Patch 7.4.2265
问题:       printf() isn't tested much.
解决方案:   Add more tests for printf(). (Dominique Pelle)
相关文件:   src/testdir/test_expr.vim

Patch 7.4.2266 (after 7.4.2265)
问题:       printf() test fails on Windows. "-inf" is not used.
解决方案:   Check for Windows-specific values for "nan".  Add sign to "inf"
            when appropriate.
相关文件:   src/message.c, src/testdir/test_expr.vim

Patch 7.4.2267 (after 7.4.2266)
问题:       Build fails on MS-Windows.
解决方案:   Add define to get isinf().
相关文件:   src/message.c

Patch 7.4.2268 (after 7.4.2259)
问题:       Using CTRL-N and CTRL-P for incsearch shadows completion keys.
解决方案:   Use CTRL-T and CTRL-G instead.
相关文件:   runtime/doc/cmdline.txt, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 7.4.2269
问题:       Using 'hlsearch' highlighting instead of matchpos if there is no
            search match.
解决方案:   Pass NULL as last item to next_search_hl() when searching for
            'hlsearch' match. (Shane Harper, closes #1013)
相关文件:   src/screen.c, src/testdir/test_match.vim

Patch 7.4.2270
问题:       Insufficient testing for NUL bytes on a raw channel.
解决方案:   Add a test for writing and reading.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.2271
问题:       Netbeans test doesn't read settings from file.
解决方案:   Use "-Xnbauth".
相关文件:   src/testdir/test_netbeans.vim

Patch 7.4.2272
问题:       getbufinfo(), getwininfo() and gettabinfo() are inefficient.
解决方案:   Instead of making a copy of the variables dictionary, use a
            reference.
相关文件:   src/evalfunc.c

Patch 7.4.2273
问题:       getwininfo() and getbufinfo() are inefficient.
解决方案:   Do not make a copy of all window/buffer-local options.  Make it
            possible to get them with gettabwinvar() or getbufvar().
相关文件:   src/evalfunc.c, src/eval.c, src/testdir/test_bufwintabinfo.vim,
            runtime/doc/eval.txt

Patch 7.4.2274
问题:       Command line completion on "find **/filename" drops sub-directory.
解决方案:   Handle this case separately. (Harm te Hennepe, closes #932, closes
            #939)
相关文件:   src/misc1.c, src/testdir/test_cmdline.vim

Patch 7.4.2275
问题:       ":diffoff!" does not remove filler lines.
解决方案:   Force a redraw and invalidate the cursor. (closes #1014)
相关文件:   src/diff.c, src/testdir/test_diffmode.vim

Patch 7.4.2276
问题:       Command line test fails on Windows when run twice.
解决方案:   Wipe the buffer so that the directory can be deleted.
相关文件:   src/testdir/test_cmdline.vim

Patch 7.4.2277
问题:       Memory leak in getbufinfo() when there is a sign. (Dominique
            Pelle)
解决方案:   Remove extra vim_strsave().
相关文件:   src/evalfunc.c

Patch 7.4.2278
问题:       New users have no idea of the 'scrolloff' option.
解决方案:   Set 'scrolloff' in defaults.vim.
相关文件:   runtime/defaults.vim

Patch 7.4.2279
问题:       Starting diff mode with the cursor in the last line might end up
            only showing one closed fold. (John Beckett)
解决方案:   Scroll the window to show the same relative cursor position.
相关文件:   src/diff.c, src/window.c, src/proto/window.pro

Patch 7.4.2280
问题:       printf() doesn't handle infinity float values correctly.
解决方案:   Add a table with possible infinity values. (Dominique Pelle)
相关文件:   src/message.c, src/testdir/test_expr.vim

Patch 7.4.2281
问题:       Timer test fails sometimes.
解决方案:   Reduce minimum time by 1 msec.
相关文件:   src/testdir/test_timers.vim

Patch 7.4.2282
问题:       When a child process is very fast waiting 10 msec for it is
            noticeable. (Ramel Eshed)
解决方案:   Start waiting for 1 msec and gradually increase.
相关文件:   src/os_unix.c

Patch 7.4.2283
问题:       Part of ":oldfiles" command isn't cleared. (Lifepillar)
解决方案:   Clear the rest of the line. (closes 1018)
相关文件:   src/ex_cmds.c

Patch 7.4.2284
问题:       Comment in scope header file is outdated. (KillTheMule)
解决方案:   Point to the help instead. (closes #1017)
相关文件:   src/if_cscope.h

Patch 7.4.2285
问题:       Generated files are outdated.
解决方案:   Generate the files.  Avoid errors when generating prototypes.
相关文件:   src/if_mzsch.h, src/Makefile, src/option.h, src/os_mac_conv.c,
            src/os_amiga.c, src/vim.h, src/structs.h, src/os_win32.c,
            src/if_lua.c, src/proto/mbyte.pro

Patch 7.4.2286
问题:       The tee program isn't included.  Makefile contains build
            instructions that don't work.
解决方案:   Update the Filelist and build instructions. Remove build
            instructions for DOS and old Windows.  Add the tee program.
相关文件:   Filelist, Makefile, nsis/gvim.nsi

Patch 7.4.2287
问题:       The callback passed to ch_sendraw() is not used.
解决方案:   Pass the read part, not the send part. (haya14busa, closes #1019)
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.2288
问题:       MS-Windows build instructions are clumsy. "dosbin" doesn't build.
解决方案:   Add rename.bat. Fix building "dosbin".
相关文件:   Makefile, Filelist, rename.bat

Patch 7.4.2289
问题:       When installing and $DESTDIR is set the icons probably won't be
            installed.
解决方案:   Create the icon directories if $DESTDIR is not empty. (Danek
            Duvall)
相关文件:   src/Makefile

Patch 7.4.2290
问题:       Compiler warning in tiny build. (Tony Mechelynck)
解决方案:   Add #ifdef around infinity_str().
相关文件:   src/message.c

Patch 7.4.2291
问题:       printf() handles floats wrong when there is a sign.
解决方案:   Fix placing the sign.  Add tests. (Dominique Pelle)
相关文件:   src/testdir/test_expr.vim, runtime/doc/eval.txt, src/message.c

Patch 7.4.2292 (after 7.4.2291)
问题:       Not all systems understand %F in printf().
解决方案:   Use %f.
相关文件:   src/message.c

Patch 7.4.2293
问题:       Modelines in source code are inconsistent.
解决方案:   Use the same line in most files.  Add 'noet'.  (Naruhiko Nishino)
相关文件:   src/alloc.h, src/arabic.c, src/arabic.h, src/ascii.h,
            src/blowfish.c, src/buffer.c, src/channel.c, src/charset.c,
            src/crypt.c, src/crypt_zip.c, src/dict.c, src/diff.c,
            src/digraph.c, src/dosinst.c, src/dosinst.h, src/edit.c,
            src/eval.c, src/evalfunc.c, src/ex_cmds.c, src/ex_cmds.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
            src/farsi.c, src/farsi.h, src/feature.h, src/fileio.c, src/fold.c,
            src/getchar.c, src/glbl_ime.cpp, src/glbl_ime.h, src/globals.h,
            src/gui.c, src/gui.h, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_at_sb.h, src/gui_athena.c, src/gui_beval.c,
            src/gui_beval.h, src/gui_gtk.c, src/gui_gtk_f.c, src/gui_gtk_f.h,
            src/gui_gtk_vms.h, src/gui_gtk_x11.c, src/gui_mac.c,
            src/gui_motif.c, src/gui_photon.c, src/gui_w32.c, src/gui_x11.c,
            src/gui_x11_pm.h, src/gui_xmdlg.c, src/gui_xmebw.c,
            src/gui_xmebw.h, src/gui_xmebwp.h, src/hangulin.c, src/hardcopy.c,
            src/hashtab.c, src/if_cscope.c, src/if_cscope.h, src/if_mzsch.c,
            src/if_mzsch.h, src/if_ole.cpp, src/if_perl.xs, src/if_perlsfio.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c,
            src/integration.c, src/integration.h, src/iscygpty.c, src/json.c,
            src/json_test.c, src/keymap.h, src/list.c, src/macros.h,
            src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c, src/message.c,
            src/message_test.c, src/misc1.c, src/misc2.c, src/move.c,
            src/nbdebug.c, src/nbdebug.h, src/netbeans.c, src/normal.c,
            src/ops.c, src/option.c, src/option.h, src/os_amiga.c,
            src/os_amiga.h, src/os_beos.c, src/os_beos.h, src/os_dos.h,
            src/os_mac.h, src/os_mac_conv.c, src/os_macosx.m, src/os_mint.h,
            src/os_mswin.c, src/os_qnx.c, src/os_qnx.h, src/os_unix.c,
            src/os_unix.h, src/os_unixx.h, src/os_vms.c, src/os_w32dll.c,
            src/os_w32exe.c, src/os_win32.c, src/os_win32.h, src/popupmnu.c,
            src/proto.h, src/pty.c, src/quickfix.c, src/regexp.c,
            src/regexp.h, src/regexp_nfa.c, src/screen.c, src/search.c,
            src/sha256.c, src/spell.c, src/spell.h, src/spellfile.c,
            src/structs.h, src/syntax.c, src/tag.c, src/term.c, src/term.h,
            src/termlib.c, src/ui.c, src/undo.c, src/uninstal.c,
            src/userfunc.c, src/version.c, src/version.h, src/vim.h,
            src/vim.rc, src/vimio.h, src/vimrun.c, src/winclip.c,
            src/window.c, src/workshop.c, src/workshop.h, src/wsdebug.c,
            src/wsdebug.h, src/xpm_w32.c

Patch 7.4.2294
问题:       Sign test fails on MS-Windows when using the distributed zip
            archives.
解决方案:   Create dummy files instead of relying on files in the pixmaps
            directory.
相关文件:   src/testdir/test_signs.vim

Patch 7.4.2295 (after 7.4.2293)
问题:       Cscope test fails.
解决方案:   Avoid checking for specific line and column numbers.
相关文件:   src/testdir/test_cscope.vim

Patch 7.4.2296
问题:       No tests for :undolist and "U" command.
解决方案:   Add tests. (Dominique Pelle)
相关文件:   src/testdir/test_undo.vim

Patch 7.4.2297
问题:       When starting a job that reads from a buffer and reaching the end,
            the job hangs.
解决方案:   Close the pipe or socket when all lines were read.
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 7.4.2298
问题:       It is not possible to close the "in" part of a channel.
解决方案:   Add ch_close_in().
相关文件:   src/evalfunc.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt,
            runtime/doc/channel.txt

Patch 7.4.2299
问题:       QuickFixCmdPre and QuickFixCmdPost autocommands are not always
            triggered.
解决方案:   Also trigger on ":cexpr", ":cbuffer", etc. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 7.4.2300
问题:       Get warning for deleting autocommand group when the autocommand
            using the group is scheduled for deletion. (Pavol Juhas)
解决方案:   Check for deleted autocommand.
相关文件:   src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2301
问题:       MS-Windows: some files remain after testing.
解决方案:   Close the channel output file.  Wait for the file handle to be
            closed before deleting the file.
相关文件:   src/os_win32.c, src/testdir/test_channel.vim

Patch 7.4.2302
问题:       Default interface versions for MS-Windows are outdated.
解决方案:   Use Active Perl 5.24, Python 3.5.2.  Could only make it work with
            Ruby 1.9.2.
相关文件:   src/bigvim.bat, src/bigvim64.bat, src/Make_mvc.mak

Patch 7.4.2303
问题:       When using "is" the mode isn't always updated.
解决方案:   Redraw the command line. (Christian Brabandt)
相关文件:   src/search.c

Patch 7.4.2304
问题:       In a timer callback the timer itself can't be found or stopped.
            (Thinca)
解决方案:   Do not remove the timer from the list, remember whether it was
            freed.
相关文件:   src/ex_cmds2.c, src/testdir/test_timers.vim

Patch 7.4.2305
问题:       Marks, writefile and nested function tests are old style.
解决方案:   Turn them into new style tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/test_marks.in,
            src/testdir/test_marks.ok, src/testdir/test_marks.vim,
            src/testdir/test_nested_function.in,
            src/testdir/test_nested_function.ok,
            src/testdir/test_nested_function.vim,
            src/testdir/test_writefile.in, src/testdir/test_writefile.ok,
            src/testdir/test_writefile.vim, src/Makefile

Patch 7.4.2306
问题:       Default value for 'langremap' is wrong.
解决方案:   Set the right value. (Jürgen Krämer)  Add a test.
相关文件:   src/option.c, src/testdir/test_mapping.vim

Patch 7.4.2307
问题:       Several tests are old style.
解决方案:   Turn them into new style tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/test102.in,
            src/testdir/test102.ok, src/testdir/test46.in,
            src/testdir/test46.ok, src/testdir/test81.in,
            src/testdir/test81.ok, src/testdir/test_charsearch.in,
            src/testdir/test_charsearch.ok, src/testdir/test_charsearch.vim,
            src/testdir/test_fnameescape.vim, src/testdir/test_substitute.vim,
            src/Makefile

Patch 7.4.2308 (after 7.4.2307)
问题:       Old charsearch test still listed in Makefile.
解决方案:   Remove the line.
相关文件:   src/testdir/Make_all.mak

Patch 7.4.2309
问题:       Crash when doing tabnext in a BufUnload autocmd. (Dominique Pelle)
解决方案:   When detecting that the tab page changed, don't just abort but
            delete the window where w_buffer is NULL.
相关文件:   src/window.c, src/testdir/test_tabpage.vim

Patch 7.4.2310 (after 7.4.2304)
问题:       Accessing freed memory when a timer does not repeat.
解决方案:   Free after removing it. (Dominique Pelle)
相关文件:   src/ex_cmds2.c

Patch 7.4.2311
问题:       Appveyor 64 bit build still using Python 3.4
解决方案:   Switch to Python 3.5. (Ken Takata, closes #1032)
相关文件:   appveyor.yml, src/appveyor.bat

Patch 7.4.2312
问题:       Crash when autocommand moves to another tab. (Dominique Pelle)
解决方案:   When navigating to another window halfway the :edit command go
            back to the right window.
相关文件:   src/buffer.c, src/ex_cmds.c, src/ex_getln.c, src/ex_docmd.c,
            src/window.c, src/proto/ex_getln.pro, src/testdir/test_tabpage.vim

Patch 7.4.2313
问题:       Crash when deleting an augroup and listing an autocommand.
            (Dominique Pelle)
解决方案:   Make sure deleted_augroup is valid.
相关文件:   src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2314
问题:       No error when deleting an augroup while it's the current one.
解决方案:   Disallow deleting an augroup when it's the current one.
相关文件:   src/fileio.c, src/testdir/test_autocmd.vim

Patch 7.4.2315
问题:       Insufficient testing for Normal mode commands.
解决方案:   Add a big test. (Christian Brabandt, closes #1029)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_normal.vim

Patch 7.4.2316
问题:       Channel sort test is flaky.
解决方案:   Add a check the output has been read.
相关文件:   src/testdir/test_channel.vim

Patch 7.4.2317 (after 7.4.2315)
问题:       Normal mode tests fail on MS-Windows.
解决方案:   Do some tests only on Unix.  Set 'fileformat' to "unix".
相关文件:   src/testdir/test_normal.vim

Patch 7.4.2318
问题:       When 'incsearch' is not set CTRL-T and CTRL-G are not inserted as
            before.
解决方案:   Move #ifdef and don't use goto.
相关文件:   src/ex_getln.c

Patch 7.4.2319
问题:       No way for a system wide vimrc to stop loading defaults.vim.
            (Christian Hesse)
解决方案:   Bail out of defaults.vim if skip_defaults_vim was set.
相关文件:   runtime/defaults.vim

Patch 7.4.2320
问题:       Redraw problem when using 'incsearch'.
解决方案:   Save the current view when deleting characters. (Christian
            Brabandt) Fix that the '" mark is set in the wrong position. Don't
            change the search start when using BS.
相关文件:   src/ex_getln.c, src/normal.c, src/testdir/test_search.vim

Patch 7.4.2321
问题:       When a test is commented out we forget about it.
解决方案:   Let a test throw an exception with "Skipped" and list skipped test
            functions. (Christian Brabandt)
相关文件:   src/testdir/Makefile, src/testdir/runtest.vim,
            src/testdir/test_popup.vim, src/testdir/README.txt

Patch 7.4.2322
问题:       Access memory beyond the end of the line. (Dominique Pelle)
解决方案:   Adjust the cursor column.
相关文件:   src/move.c, src/testdir/test_normal.vim

Patch 7.4.2323
问题:       Using freed memory when using 'formatexpr'. (Dominique Pelle)
解决方案:   Make a copy of 'formatexpr' before evaluating it.
相关文件:   src/ops.c, src/testdir/test_normal.vim

Patch 7.4.2324
问题:       Crash when editing a new buffer and BufUnload autocommand wipes
            out the new buffer. (Norio Takagi)
解决方案:   Don't allow wiping out this buffer. (partly by Hirohito Higashi)
            Move old style test13 into test_autocmd. Avoid ml_get error when
            editing a file.
相关文件:   src/structs.h, src/buffer.c, src/ex_cmds.c, src/ex_docmd.c,
            src/window.c, src/testdir/test13.in, src/testdir/test13.ok,
            src/testdir/test_autocmd.vim, src/testdir/Make_all.mak,
            src/Makefile

Patch 7.4.2325 (after 7.4.2324)
问题:       Tiny build fails.
解决方案:   Add #ifdef.
相关文件:   src/buffer.c

Patch 7.4.2326
问题:       Illegal memory access when Visual selection starts in invalid
            position. (Dominique Pelle)
解决方案:   Correct position when needed.
相关文件:   src/normal.c, src/misc2.c, src/proto/misc2.pro

Patch 7.4.2327
问题:       Freeing a variable that is on the stack.
解决方案:   Don't free res_tv or err_tv. (Ozaki Kiichi)
相关文件:   src/channel.c

Patch 7.4.2328
问题:       Crash when BufWinLeave autocmd goes to another tab page. (Hirohito
            Higashi)
解决方案:   Make close_buffer() go back to the right window.
相关文件:   src/buffer.c, src/testdir/test_autocmd.vim

Patch 7.4.2329
问题:       Error for min() and max() contains %s. (Nikolai Pavlov)
解决方案:   Pass the function name. (closes #1040)
相关文件:   src/evalfunc.c, src/testdir/test_expr.vim

Patch 7.4.2330
问题:       Coverity complains about not checking curwin to be NULL.
解决方案:   Use firstwin to avoid the warning.
相关文件:   src/buffer.c

Patch 7.4.2331
问题:       Using CTRL-X CTRL-V to complete a command line from Insert mode
            does not work after entering an expression on the command line.
解决方案:   Don't use "ccline" when not actually using a command line. (test
            by Hirohito Higashi)
相关文件:   src/edit.c, src/ex_getln.c, src/proto/ex_getln.pro,
            src/testdir/test_popup.vim

Patch 7.4.2332
问题:       Crash when stop_timer() is called in a callback of a callback.
            Vim hangs when the timer callback uses too much time.
解决方案:   Set tr_id to -1 when a timer is to be deleted. Don't keep calling
            callbacks forever. (Ozaki Kiichi)
相关文件:   src/evalfunc.c, src/ex_cmds2.c, src/structs.h,
            src/proto/ex_cmds2.pro, src/testdir/test_timers.vim

Patch 7.4.2333
问题:       Outdated comments in test.
解决方案:   Cleanup normal mode test. (Christian Brabandt)
相关文件:   src/testdir/test_normal.vim

Patch 7.4.2334
问题:       On MS-Windows test_getcwd leaves Xtopdir behind.
解决方案:   Set 'noswapfile'. (Michael Soyka)
相关文件:   src/testdir/test_getcwd.in

Patch 7.4.2335
问题:       taglist() is slow. (Luc Hermitte)
解决方案:   Check for CTRL-C less often when doing a linear search. (closes
            #1044)
相关文件:   src/tag.c

Patch 7.4.2336
问题:       Running normal mode tests leave a couple of files behind.
            (Yegappan Lakshmanan)
解决方案:   Delete the files. (Christian Brabandt)
相关文件:   src/testdir/test_normal.vim

Patch 7.4.2337
问题:       taglist() is still slow. (Luc Hermitte)
解决方案:   Check for CTRL-C less often when finding duplicates.
相关文件:   src/tag.c

Patch 7.4.2338
问题:       Can't build with small features. (John Marriott)
解决方案:   Nearly always define FEAT_TAG_BINS.
相关文件:   src/feature.h, src/tag.c

Patch 7.4.2339
问题:       Tab page test fails when run as fake root.
解决方案:   Check 'buftype' instead of 'filetype'. (James McCoy, closes #1042)
相关文件:   src/testdir/test_tabpage.vim

Patch 7.4.2340
问题:       MS-Windows: Building with Ruby uses old version.
解决方案:   Update to 2.2.X. Use clearer name for the API version. (Ken
            Takata)
相关文件:   Makefile, src/INSTALLpc.txt, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/bigvim.bat

Patch 7.4.2341
问题:       Tiny things.  Test doesn't clean up properly.
解决方案:   Adjust comment and white space. Restore option value.
相关文件:   src/ex_cmds.c, src/message.c, src/testdir/test_autocmd.vim

Patch 7.4.2342
问题:       Typo in MS-Windows build script.
解决方案:   change "w2" to "22".
相关文件:   src/bigvim.bat

Patch 7.4.2343
问题:       Too many old style tests.
解决方案:   Turn several into new style tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/test101.in,
            src/testdir/test101.ok, src/testdir/test18.in,
            src/testdir/test18.ok, src/testdir/test2.in, src/testdir/test2.ok,
            src/testdir/test21.in, src/testdir/test21.ok,
            src/testdir/test6.in, src/testdir/test6.ok,
            src/testdir/test_arglist.vim, src/testdir/test_charsearch.vim,
            src/testdir/test_fnameescape.vim, src/testdir/test_gf.vim,
            src/testdir/test_hlsearch.vim, src/testdir/test_smartindent.vim,
            src/testdir/test_tagjump.vim, src/Makefile

Patch 7.4.2344
问题:       The "Reading from channel output..." message can be unwanted.
            Appending to a buffer leaves an empty first line behind.
解决方案:   Add the "out_msg" and "err_msg" options. Writing the first line
            overwrites the first, empty line.
相关文件:   src/structs.h, src/channel.c, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 7.4.2345 (after 7.4.2340)
问题:       For MinGW RUBY_API_VER_LONG isn't set correctly.  Many default
            version numbers are outdated.
解决方案:   Set RUBY_API_VER_LONG to RUBY_VER_LONG. Use latest stable releases
            for defaults. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 7.4.2346
问题:       Autocommand test fails when run directly, passes when run as part
            of test_alot.
解决方案:   Add command to make the cursor move.  Close a tab page.
相关文件:   src/testdir/test_autocmd.vim

Patch 7.4.2347
问题:       Crash when closing a buffer while Visual mode is active.
            (Dominique Pelle)
解决方案:   Adjust the position before computing the number of lines.
            When closing the current buffer stop Visual mode.
相关文件:   src/buffer.c, src/normal.c, src/testdir/test_normal.vim

Patch 7.4.2348
问题:       Crash on exit when EXITFREE is defined. (Dominique Pelle)
解决方案:   Don't access curwin when exiting.
相关文件:   src/buffer.c

Patch 7.4.2349
问题:       Valgrind reports using uninitialized memory. (Dominique Pelle)
解决方案:   Check the length before checking for a NUL.
相关文件:   src/message.c

Patch 7.4.2350
问题:       Test 86 and 87 fail with some version of Python.
解决方案:   Unify "can't" and "cannot".  Unify quotes.
相关文件:   src/testdir/test86.in, src/testdir/test86.ok,
            src/testdir/test87.in, src/testdir/test87.ok

Patch 7.4.2351
问题:       Netbeans test fails when run from unpacked MS-Windows sources.
解决方案:   Open README.txt instead of Makefile.
相关文件:   src/testdir/test_netbeans.py, src/testdir/test_netbeans.vim

Patch 7.4.2352
问题:       Netbeans test fails in shadow directory.
解决方案:   Also copy README.txt to the shadow directory.
相关文件:   src/Makefile

Patch 7.4.2353
问题:       Not enough test coverage for Normal mode commands.
解决方案:   Add more tests. (Christian Brabandt)
相关文件:   src/testdir/test_normal.vim

Patch 7.4.2354
问题:       The example that explains nested backreferences does not work
            properly with the new regexp engine. (Harm te Hennepe)
解决方案:   Also save the end position when adding a state. (closes #990)
相关文件:   src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 7.4.2355
问题:       Regexp fails to match when using "\>\)\?". (Ramel)
解决方案:   When a state is already in the list, but addstate_here() is used
            and the existing state comes later, add the new state anyway.
相关文件:   src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 7.4.2356
问题:       Reading past end of line when using previous substitute pattern.
            (Dominique Pelle)
解决方案:   Don't set "pat" only set "searchstr".
相关文件:   src/search.c, src/testdir/test_search.vim

Patch 7.4.2357
问题:       Attempt to read history entry while not initialized.
解决方案:   Skip when the index is negative.
相关文件:   src/ex_getln.c

Patch 7.4.2358
问题:       Compiler warnings with Solaris Studio when using GTK3. (Danek
            Duvall)
解决方案:   Define FUNC2GENERIC depending on the system. (Kazunobu Kuriyama)
相关文件:   src/gui.h, src/gui_beval.c, src/gui_gtk_f.c

Patch 7.4.2359
问题:       Memory leak in timer_start().
解决方案:   Check the right field to be NULL.
相关文件:   src/evalfunc.c, src/testdir/test_timers.vim

Patch 7.4.2360
问题:       Invalid memory access when formatting. (Dominique Pelle)
解决方案:   Make sure cursor line and column are associated.
相关文件:   src/misc1.c

Patch 7.4.2361
问题:       Checking for last_timer_id to overflow is not reliable. (Ozaki
            Kiichi)
解决方案:   Check for the number not going up.
相关文件:   src/ex_cmds2.c

Patch 7.4.2362
问题:       Illegal memory access with ":1@". (Dominique Pelle)
解决方案:   Correct cursor column after setting the line number.  Also avoid
            calling end_visual_mode() when not in Visual mode.
相关文件:   src/ex_docmd.c, src/buffer.c

Patch 7.4.2363
问题:       Superfluous function prototypes.
解决方案:   Remove them.
相关文件:   src/regexp.c

Patch 7.4.2364
问题:       Sort test sometimes fails.
解决方案:   Add it to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 7.4.2365
问题:       Needless line break. Confusing directory name.
解决方案:   Remove line break.  Prepend "../" to "tools".
相关文件:   Makefile, src/normal.c

Patch 7.4.2366
问题:       MS-Windows gvim.exe does not have DirectX support.
解决方案:   Add the DIRECTX to the script.
相关文件:   src/bigvim.bat

Patch 7.4.2367 (after 7.4.2364)
问题:       Test runner misses a comma.
解决方案:   Add the comma.
相关文件:   src/testdir/runtest.vim


==============================================================================
8.1 版 本				*version-8.1* *version8.1* *vim-8.1*

本小节讨论 8.0 和 8.1 版本之间的改进。

这个版本有几百个漏洞修正，一个新特性和许多次要的改进。


终端窗口					*new-terminal-window*
-------------------

你现在可以打开窗口来用作终端。可用它来:
- 在其它窗口编辑的同时，运行 "make" 这样的命令
- 运行外壳执行若干命令
- 使用终端调试器插件，见 |terminal-debugger|

所有这些，对在远程 (ssh) 连接上运行 Vim 尤其有用，那里不方便打开更多的终端。

更多详情可见 |terminal-window|。


改动							*changed-8.1*
-------

内部: 现在允许一些 C99 特性，如 // 注释和枚举的最后一个项目之后的逗号。见
|style-compiler|。

8.0.0029 补丁开始，删除了旧 MS-Windows 系统的支持，只支持 MS-Windows XP 和之后
的版本。


新增							*added-8.1*
-----

新增若干语法、缩进和其它插件。

Quickfix 改进 (Yegappan Lakshmanan 提供):
	新增 quickfix 栈对任意 quickfix/位置列表修改的支持。
	新增每个 quickfix/位置列表的唯一标识符。
	新增和 quickfix/位置列表关联任意 Vim 类型作为上下文的支持。
	增强 getqflist()、getloclist()、setqflist() 和 setloclist()
	获取和设置若干 quickfix/位置列表属性的函数。
	新增 QuickFixLine 高亮组来高亮 quickfix 窗口的当前行。
	quickfix 缓冲区 b:changedtick 变量用来为所在的 quickfix 列表的每个变动
	增量。
	新增 quickfix/位置列表的 changedtick 变量，每次列表修改时加一。
	新增用 'errorformat' 解析文本而不用建立新 quickfix 列表的支持。
	新增 quickfix 项目的 "module" 项的支持，为了显示目的可用来代替很长的文
	件名。
	新增释放所有 quickfix/位置栈列表的支持。
	用 :copen/:cwindow 命令打开 quickfix 窗口时，使用提供的分割修饰符。

函数:
	所有的 term_ 函数。

	|assert_beeps()|
	|assert_equalfile()|
	|assert_report()|
	|balloon_show()|
	|balloon_split()|
	|ch_canread()|
	|getchangelist()|
	|getjumplist()|
	|getwinpos()|
	|pyxeval()|
	|remote_startserver()|
	|setbufline()|
	|test_ignore_error()|
	|test_override()|
	|trim()|
	|win_screenpos()|

自动命令:
	|CmdlineChanged|
	|CmdlineEnter|
	|CmdlineLeave|
	|ColorSchemePre|
	|DirChanged|
	|ExitPre|
	|TerminalOpen|
	|TextChangedP|
	|TextYankPost|

命令:
	|:pyx|
	|:pythonx|
	|:pyxdo|
	|:pyxfile|
	|:terminal|
	|:tmapclear|
	|:tmap|
	|:tnoremap|
	|:tunmap|

选项:
	'balloonevalterm'
	'imstyle'
	'mzschemedll'
	'mzschemegcdll'
	'makeencoding'
	'pumwidth'
	'pythonhome'
	'pythonthreehome'
	'pyxversion'
	'termwinkey'
	'termwinscroll'
	'termwinsize'
	'viminfofile'
	'winptydll'


补丁							*patches-8.1*
-------

Patch 8.0.0001
问题:       Intro screen still mentions version7. (Paul)
解决方案:   Change it to version8.
相关文件:   src/version.c

Patch 8.0.0002
问题:       The netrw plugin does not work.
解决方案:   Make it accept version 8.0.
相关文件:   runtime/autoload/netrw.vim

Patch 8.0.0003
问题:       getwinvar() returns wrong Value of boolean and number options,
            especially non big endian systems. (James McCoy)
解决方案:   Cast the pointer to long or int. (closes #1060)
相关文件:   src/option.c, src/testdir/test_bufwintabinfo.vim

Patch 8.0.0004
问题:       A string argument for function() that is not a function name
            results in an error message with NULL. (Christian Brabandt)
解决方案:   Use the argument for the error message.
相关文件:   src/evalfunc.c, src/testdir/test_expr.vim

Patch 8.0.0005
问题:       Netbeans test fails with Python 3. (Jonathonf)
解决方案:   Encode the string before sending it. (closes #1070)
相关文件:   src/testdir/test_netbeans.py

Patch 8.0.0006
问题:       ":lb" is interpreted as ":lbottom" while the documentation says it
            means ":lbuffer".
解决方案:   Adjust the order of the commands. (haya14busa, closes #1093)
相关文件:   src/ex_cmds.h

Patch 8.0.0007
问题:       Vim 7.4 is still mentioned in a few places.
解决方案:   Update to Vim 8.  (Uncle Bill, closes #1094)
相关文件:   src/INSTALLpc.txt, src/vimtutor, uninstal.txt

Patch 8.0.0008
问题:       Popup complete test is disabled.
解决方案:   Enable the test and change the assert. (Hirohito Higashi)
相关文件:   src/testdir/test_popup.vim

Patch 8.0.0009
问题:       Unnecessary workaround for AppVeyor.
解决方案:   Revert patch 7.4.990. (Christian Brabandt)
相关文件:   appveyor.yml

Patch 8.0.0010
问题:       Crash when editing file that starts with crypt header. (igor2x)
解决方案:   Check for length of text. (Christian Brabandt) Add a test.
相关文件:   src/fileio.c, src/testdir/test_crypt.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0011
问题:       On OSX Test_pipe_through_sort_all() sometimes fails.
解决方案:   Add the test to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0012
问题:       Typos in comments.
解决方案:   Change "its" to "it's". (Matthew Brener, closes #1088)
相关文件:   src/evalfunc.c, src/main.aap, src/nbdebug.c, src/netbeans.c,
            src/quickfix.c, src/workshop.c, src/wsdebug.c

Patch 8.0.0013 (after 8.0.0011)
问题:       Missing comma in list.
解决方案:   Add the comma.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0014
问题:       Crypt tests are old style.
解决方案:   Convert to new style.
相关文件:   src/testdir/test71.in, src/testdir/test71.ok,
	    src/testdir/test71a.in, src/testdir/test_crypt.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0015
问题:       Can't tell which part of a channel has "buffered" status.
解决方案:   Add an optional argument to ch_status().  Let ch_info() also
            return "buffered" for out_status and err_status.
相关文件:   src/evalfunc.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, runtime/doc/eval.txt

Patch 8.0.0016 (after 8.0.0015)
问题:       Build fails.
解决方案:   Include missing change.
相关文件:   src/eval.c

Patch 8.0.0017
问题:       Cannot get the number of the current quickfix or location list.
解决方案:   Use the current list if "nr" in "what" is zero. (Yegappan
            Lakshmanan)  Remove debug command from test.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim,
            runtime/doc/eval.txt

Patch 8.0.0018
问题:       When using ":sleep" channel input is not handled.
解决方案:   When there is a channel check for input also when not in raw mode.
            Check every 100 msec.
相关文件:   src/channel.c, src/proto/channel.pro, src/ui.c, src/proto/ui.pro,
            src/ex_docmd.c, src/os_amiga.c, src/proto/os_amiga.pro,
            src/os_unix.c, src/proto/os_unix.pro, src/os_win32.c,
            src/proto/os_win32.pro

Patch 8.0.0019
问题:       Test_command_count is old style.
解决方案:   Turn it into a new style test. (Naruhiko Nishino)
            Use more assert functions.
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_command_count.in,
            src/testdir/test_command_count.ok,
            src/testdir/test_command_count.vim

Patch 8.0.0020
问题:       The regexp engines are not reentrant.
解决方案:   Add regexec_T and save/restore the state when needed.
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test_expr.vim,
            runtime/doc/eval.txt, runtime/doc/change.txt

Patch 8.0.0021
问题:       In the GUI when redrawing the cursor it may be on the second half
            of a double byte character.
解决方案:   Correct the cursor column. (Yasuhiro Matsumoto)
相关文件:   src/screen.c

Patch 8.0.0022
问题:       If a channel in NL mode is missing the NL at the end the remaining
            characters are dropped.
解决方案:   When the channel is closed use the remaining text. (Ozaki Kiichi)
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 8.0.0023
问题:       "gd" and "gD" may find a match in a comment or string.
解决方案:   Ignore matches in comments and strings. (Anton Lindqvist)
相关文件:   src/normal.c, src/testdir/test_goto.vim

Patch 8.0.0024
问题:       When the netbeans channel closes, "DETACH" is put in the output
            part. (Ozaki Kiichi)
解决方案:   Write "DETACH" in the socket part.
相关文件:   src/channel.c, src/testdir/test_netbeans.vim

Patch 8.0.0025
问题:       Inconsistent use of spaces vs tabs in gd test.
解决方案:   Use tabs. (Anton Lindqvist)
相关文件:   src/testdir/test_goto.vim

Patch 8.0.0026
问题:       Error format with %W, %C and %Z does not work. (Gerd Wachsmuth)
解决方案:   Skip code when qf_multiignore is set. (Lcd)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0027
问题:       A channel is closed when reading on stderr or stdout fails, but
            there may still be something to read on another part.
解决方案:   Turn ch_to_be_closed into a bitfield. (Ozaki Kiichi)
相关文件:   src/channel.c, src/eval.c, src/structs.h, src/proto/channel.pro,
            src/testdir/test_channel.vim

Patch 8.0.0028
问题:       Superfluous semicolons.
解决方案:   Remove them. (Ozaki Kiichi)
相关文件:   src/ex_cmds2.c

Patch 8.0.0029
问题:       Code for MS-Windows is complicated because of the exceptions for
            old systems.
解决方案:   Drop support for MS-Windows older than Windows XP. (Ken Takata)
相关文件:   runtime/doc/gui_w32.txt, runtime/doc/os_win32.txt,
            runtime/doc/todo.txt, src/GvimExt/Makefile, src/Make_mvc.mak,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/gui_w32.c,
            src/if_cscope.c, src/misc1.c, src/misc2.c, src/option.c,
            src/os_mswin.c, src/os_win32.c, src/os_win32.h,
            src/proto/os_mswin.pro, src/proto/os_win32.pro, src/version.c

Patch 8.0.0030
问题:       Mouse mode is not automatically detected for tmux.
解决方案:   Check for 'term' to be "tmux". (Michael Henry)
相关文件:   src/os_unix.c

Patch 8.0.0031
问题:       After ":bwipeout" 'fileformat' is not set to the right default.
解决方案:   Get the default from 'fileformats'. (Mike Williams)
相关文件:   src/option.c, src/Makefile, src/testdir/test_fileformat.vim,
            src/testdir/test_alot.vim

Patch 8.0.0032
问题:       Tests may change the input file when something goes wrong.
解决方案:   Avoid writing the input file.
相关文件:   src/testdir/test51.in, src/testdir/test67.in,
            src/testdir/test97.in, src/testdir/test_tabpage.vim

Patch 8.0.0033
问题:       Cannot use overlapping positions with matchaddpos().
解决方案:   Check end of match. (Ozaki Kiichi) Add a test (Hirohito Higashi)
相关文件:   src/screen.c, src/testdir/test_match.vim

Patch 8.0.0034
问题:       No completion for ":messages".
解决方案:   Complete "clear" argument. (Hirohito Higashi)
相关文件:   src/ex_docmd.c, src/ex_getln.c, src/proto/ex_docmd.pro,
            src/testdir/test_cmdline.vim, src/vim.h,
            runtime/doc/eval.txt, runtime/doc/map.txt

Patch 8.0.0035 (after 7.4.2013)
问题:       Order of matches for 'omnifunc' is messed up. (Danny Su)
解决方案:   Do not set compl_curr_match when called from complete_check().
            (closes #1168)
相关文件:   src/edit.c, src/evalfunc.c, src/proto/edit.pro, src/search.c,
            src/spell.c, src/tag.c, src/testdir/test76.in,
            src/testdir/test76.ok, src/testdir/test_popup.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0036
问题:       Detecting that a job has finished may take a while.
解决方案:   Check for a finished job more often (Ozaki Kiichi)
相关文件:   src/channel.c, src/os_unix.c, src/os_win32.c,
            src/proto/os_unix.pro, src/proto/os_win32.pro,
            src/testdir/test_channel.vim

Patch 8.0.0037
问题:       Get E924 when switching tabs. ()
解决方案:   Use win_valid_any_tab() instead of win_valid(). (Martin Vuille,
            closes #1167, closes #1171)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0038
问题:       OPEN_CHR_FILES not defined for FreeBSD using Debian userland
            files.
解决方案:   Check for __FreeBSD_kernel__. (James McCoy, closes #1166)
相关文件:   src/vim.h

Patch 8.0.0039
问题:       When Vim 8 reads an old viminfo and exits, the next time marks are
            not read from viminfo. (Ned Batchelder)
解决方案:   Set a mark when it wasn't set before, even when the timestamp is
            zero. (closes #1170)
相关文件:   src/mark.c, src/testdir/test_viminfo.vim

Patch 8.0.0040 (after 8.0.0033)
问题:       Whole line highlighting with matchaddpos() does not work.
解决方案:   Check for zero length. (Hirohito Higashi)
相关文件:   src/screen.c, src/testdir/test_match.vim

Patch 8.0.0041
问题:       When using Insert mode completion but not actually inserting
            anything an undo item is still created. (Tommy Allen)
解决方案:   Do not call stop_arrow() when not inserting anything.
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0042 (after 8.0.0041)
问题:       When using Insert mode completion with 'completeopt' containing
            "noinsert" change is not saved for undo.  (Tommy Allen)
解决方案:   Call stop_arrow() before inserting for pressing Enter.
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0043 (after 8.0.0041)
问题:       When using Insert mode completion with 'completeopt' containing
            "noinsert" with CTRL-N the change is not saved for undo.  (Tommy
            Allen)
解决方案:   Call stop_arrow() before inserting for any key.
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0044
问题:       In diff mode the cursor may end up below the last line, resulting
            in an ml_get error.
解决方案:   Check the line to be valid.
相关文件:   src/move.c, src/diff.c, src/proto/diff.pro,
            src/testdir/test_diffmode.vim

Patch 8.0.0045
问题:       Calling job_stop() right after job_start() does not work.
解决方案:   Block signals while fork is still busy. (Ozaki Kiichi, closes
            #1155)
相关文件:   src/auto/configure, src/config.h.in, src/configure.in,
            src/os_unix.c, src/testdir/test_channel.vim

Patch 8.0.0046
问题:       Using NUL instead of NULL.
解决方案:   Change to NULL. (Dominique Pelle)
相关文件:   src/ex_cmds.c, src/json.c

Patch 8.0.0047
问题:       Crash when using the preview window from an unnamed buffer.
            (lifepillar)
解决方案:   Do not clear the wrong buffer. (closes #1200)
相关文件:   src/popupmnu.c

Patch 8.0.0048
问题:       On Windows job_stop() stops cmd.exe, not the processes it runs.
            (Linwei)
解决方案:   Iterate over all processes and terminate the one where the parent
            is the job process. (Yasuhiro Matsumoto, closes #1184)
相关文件:   src/os_win32.c, src/structs.h

Patch 8.0.0049
问题:       When a match ends in part of concealed text highlighting, it might
            mess up concealing by resetting prev_syntax_id.
解决方案:   Do not reset prev_syntax_id and add a test to verify. (Christian
            Brabandt, closes #1092)
相关文件:   src/screen.c, src/testdir/test_matchadd_conceal.vim

Patch 8.0.0050
问题:       An exiting job is detected with a large latency.
解决方案:   Check for pending job more often. (Ozaki Kiichi)  Change the
            double loop in mch_inchar() into one.
相关文件:   src/channel.c, src/os_unix.c, src/testdir/shared.vim,
            src/testdir/test_channel.vim

Patch 8.0.0051 (after 8.0.0048)
问题:       New code for job_stop() breaks channel test on AppVeyor.
解决方案:   Revert the change.
相关文件:   src/os_win32.c, src/structs.h

Patch 8.0.0052 (after 8.0.0049)
问题:       Conceal test passes even without the bug fix.
解决方案:   Add a redraw command. (Christian Brabandt)
相关文件:   src/testdir/test_matchadd_conceal.vim

Patch 8.0.0053 (after 8.0.0047)
问题:       No test for what 8.0.0047 fixes.
解决方案:   Add a test. (Hirohito Higashi)
相关文件:   src/testdir/test_popup.vim

Patch 8.0.0054 (after 8.0.0051)
问题:       On Windows job_stop() stops cmd.exe, not the processes it runs.
            (Linwei)
解决方案:   Iterate over all processes and terminate the one where the parent
            is the job process. Now only when there is no job object.
            (Yasuhiro Matsumoto, closes #1203)
相关文件:   src/os_win32.c

Patch 8.0.0055
问题:       Minor comment and style deficiencies.
解决方案:   Update comments and fix style.
相关文件:   src/buffer.c, src/misc2.c, src/os_unix.c

Patch 8.0.0056
问题:       When setting 'filetype' there is no check for a valid name.
解决方案:   Only allow valid characters in 'filetype', 'syntax' and 'keymap'.
相关文件:   src/option.c, src/testdir/test_options.vim

Patch 8.0.0057 (after 8.0.0056)
问题:       Tests fail without the 'keymap' features.
解决方案:   Check for feature in test.
相关文件:   src/testdir/test_options.vim

Patch 8.0.0058
问题:       Positioning of the popup menu is not good.
解决方案:   Position it better. (Hirohito Higashi)
相关文件:   src/popupmnu.c

Patch 8.0.0059
问题:       Vim does not build on VMS systems.
解决方案:   Various changes for VMS. (Zoltan Arpadffy)
相关文件:   src/json.c, src/macros.h, src/Make_vms.mms, src/os_unix.c,
            src/os_unix.h, src/os_vms.c, src/os_vms_conf.h,
            src/proto/os_vms.pro, src/testdir/Make_vms.mms

Patch 8.0.0060
问题:       When using an Ex command for 'keywordprg' it is escaped as with a
            shell command. (Romain Lafourcade)
解决方案:   Escape for an Ex command. (closes #1175)
相关文件:   src/normal.c, src/testdir/test_normal.vim

Patch 8.0.0061 (after 8.0.0058)
问题:       Compiler warning for unused variable.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/popupmnu.c

Patch 8.0.0062
问题:       No digraph for HORIZONTAL ELLIPSIS.
解决方案:   Use ",.". (Hans Ginzel, closes #1226)
相关文件:   src/digraph.c, runtime/doc/digraph.txt

Patch 8.0.0063
问题:       Compiler warning for comparing with unsigned. (Zoltan Arpadffy)
解决方案:   Change <= to ==.
相关文件:   src/undo.c

Patch 8.0.0064 (after 8.0.0060)
问题:       Normal test fails on MS-Windows.
解决方案:   Don't try using an illegal file name.
相关文件:   src/testdir/test_normal.vim

Patch 8.0.0065 (after 8.0.0056)
问题:       Compiler warning for unused function in tiny build. (Tony
            Mechelynck)
解决方案:   Add #ifdef.
相关文件:   src/option.c

Patch 8.0.0066
问题:       when calling an operator function when 'linebreak' is set, it is
            internally reset before calling the operator function.
解决方案:   Restore 'linebreak' before calling op_function(). (Christian
            Brabandt)
相关文件:   src/normal.c, src/testdir/test_normal.vim

Patch 8.0.0067
问题:       VMS has a problem with infinity.
解决方案:   Avoid an overflow. (Zoltan Arpadffy)
相关文件:   src/json.c, src/macros.h

Patch 8.0.0068
问题:       Checking did_throw after executing autocommands is wrong. (Daniel
            Hahler)
解决方案:   Call aborting() instead, and only when autocommands were executed.
相关文件:   src/quickfix.c, src/if_cscope.c, src/testdir/test_quickfix.vim

Patch 8.0.0069
问题:       Compiler warning for self-comparison.
解决方案:   Define ONE_WINDOW and add #ifdef.
相关文件:   src/globals.h, src/buffer.c, src/ex_docmd.c, src/move.c,
            src/screen.c, src/quickfix.c, src/window.c

Patch 8.0.0070
问题:       Tests referred in Makefile that no longer exist.
解决方案:   Remove test71 and test74 entries. (Michael Soyka)
相关文件:   src/testdir/Mak_ming.mak

Patch 8.0.0071
问题:       Exit value from a shell command is wrong. (Hexchain Tong)
解决方案:   Do not check for ended jobs while waiting for a shell command.
            (ichizok, closes #1196)
相关文件:   src/os_unix.c

Patch 8.0.0072
问题:       MS-Windows: Crash with long font name. (Henry Hu)
解决方案:   Fix comparing with LF_FACESIZE. (Ken Takata, closes #1243)
相关文件:   src/os_mswin.c

Patch 8.0.0073 (after 8.0.0069)
问题:       More comparisons between firstwin and lastwin.
解决方案:   Use ONE_WINDOW for consistency. (Hirohito Higashi)
相关文件:   src/buffer.c, src/ex_cmds.c, src/ex_docmd.c, src/option.c,
            src/window.c

Patch 8.0.0074
问题:       Cannot make Vim fail on an internal error.
解决方案:   Add IEMSG() and IEMSG2(). (Dominique Pelle)  Avoid reporting an
            internal error without mentioning where.
相关文件:   src/globals.h, src/blowfish.c, src/dict.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_eval.c, src/getchar.c, src/gui_beval.c,
            src/gui_w32.c, src/hangulin.c, src/hashtab.c, src/if_cscope.c,
            src/json.c, src/memfile.c, src/memline.c, src/message.c,
            src/misc2.c, src/option.c, src/quickfix.c, src/regexp.c,
            src/spell.c, src/undo.c, src/userfunc.c, src/vim.h, src/window.c,
            src/proto/misc2.pro, src/proto/message.pro, src/Makefile

Patch 8.0.0075
问题:       Using number for exception type lacks type checking.
解决方案:   Use an enum.
相关文件:   src/structs.h, src/ex_docmd.c, src/ex_eval.c,
            src/proto/ex_eval.pro

Patch 8.0.0076
问题:       Channel log has double parens ()().
解决方案:   Remove () for write_buf_line. (Yasuhiro Matsumoto)
相关文件:   src/channel.c

Patch 8.0.0077
问题:       The GUI code is not tested by Travis.
解决方案:   Install the virtual framebuffer.
相关文件:   .travis.yml

Patch 8.0.0078
问题:       Accessing freed memory in quickfix.
解决方案:   Reset pointer when freeing 'errorformat'. (Dominique Pelle)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0079
问题:       Accessing freed memory in quickfix. (Dominique Pelle)
解决方案:   Do not free the current list when adding to it.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0080
问题:       The OS X build fails on Travis.
解决方案:   Skip the virtual framebuffer on OS X.
相关文件:   .travis.yml

Patch 8.0.0081
问题:       Inconsistent function names.
解决方案:   Rename do_cscope to ex_cscope.  Clean up comments.
相关文件:   src/ex_cmds.h, src/if_cscope.c, src/ex_docmd.c,
            src/proto/if_cscope.pro

Patch 8.0.0082
问题:       Extension for configure should be ".ac".
解决方案:   Rename configure.in to configure.ac. (James McCoy, closes #1173)
相关文件:   src/configure.in, src/configure.ac, Filelist, src/Makefile,
            src/blowfish.c, src/channel.c, src/config.h.in, src/main.aap,
            src/os_unix.c, src/INSTALL, src/mysign

Patch 8.0.0083
问题:       Using freed memory with win_getid(). (Dominique Pelle)
解决方案:   For the current tab use curwin.
相关文件:   src/window.c, src/testdir/test_window_id.vim

Patch 8.0.0084
问题:       Using freed memory when adding to a quickfix list. (Dominique
            Pelle)
解决方案:   Clear the directory name.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0085
问题:       Using freed memory with recursive function call. (Dominique Pelle)
解决方案:   Make a copy of the function name.
相关文件:   src/eval.c, src/testdir/test_nested_function.vim

Patch 8.0.0086
问题:       Cannot add a comment after ":hide". (Norio Takagi)
解决方案:   Make it work, add a test. (Hirohito Higashi)
相关文件:   src/Makefile, src/ex_cmds.h, src/ex_docmd.c,
            src/testdir/Make_all.mak, src/testdir/test_hide.vim

Patch 8.0.0087
问题:       When the channel callback gets job info the job may already have
            been deleted. (lifepillar)
解决方案:   Do not delete the job when the channel is still useful. (ichizok,
            closes #1242, closes #1245)
相关文件:   src/channel.c, src/eval.c, src/os_unix.c, src/os_win32.c,
            src/structs.h, src/testdir/test_channel.vim

Patch 8.0.0088
问题:       When a test fails in Setup or Teardown the problem is not reported.
解决方案:   Add a try/catch. (Hirohito Higashi)
相关文件:   src/testdir/runtest.vim

Patch 8.0.0089
问题:       Various problems with GTK 3.22.2.
解决方案:   Fix the problems, add #ifdefs. (Kazunobu Kuriyama)
相关文件:   src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_x11.c

Patch 8.0.0090
问题:       Cursor moved after last character when using 'breakindent'.
解决方案:   Fix the cursor positioning.  Turn the breakindent test into new
            style.  (Christian Brabandt)
相关文件:   src/screen.c, src/testdir/Make_all.mak,
            src/testdir/test_breakindent.in, src/testdir/test_breakindent.ok,
            src/testdir/test_breakindent.vim, src/Makefile

Patch 8.0.0091
问题:       Test_help_complete sometimes fails in MS-Windows console.
解决方案:   Use getcompletion() instead of feedkeys() and command line
            completion. (Hirohito Higashi)
相关文件:   src/testdir/test_help_tagjump.vim

Patch 8.0.0092
问题:       C indenting does not support nested namespaces that C++ 17 has.
解决方案:   Add check that passes double colon inside a name. (Pauli, closes
            #1214)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 8.0.0093
问题:       Not using multiprocess build feature.
解决方案:   Enable multiprocess build with MSVC 10. (Ken Takata)
相关文件:   src/Make_mvc.mak

Patch 8.0.0094
问题:       When vimrun.exe is not found the error message is not properly
            encoded.
解决方案:   Use utf-16 and MessageBoxW(). (Ken Takata)
相关文件:   src/os_win32.c

Patch 8.0.0095
问题:       Problems with GTK 3.22.2 fixed in 3.22.4.
解决方案:   Adjust the #ifdefs. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 8.0.0096
问题:       When the input or output is not a tty Vim appears to hang.
解决方案:   Add the --ttyfail argument.  Also add the "ttyin" and "ttyout"
            features to be able to check in Vim script.
相关文件:   src/globals.h, src/structs.h, src/main.c, src/evalfunc.c,
            runtime/doc/starting.txt, runtime/doc/eval.txt

Patch 8.0.0097
问题:       When a channel callback consumes a lot of time Vim becomes
            unresponsive. (skywind)
解决方案:   Bail out of checking channel readahead after 100 msec.
相关文件:   src/os_unix.c, src/misc2.c, src/vim.h, src/os_win32.c,
            src/channel.c

Patch 8.0.0098 (after 8.0.0097)
问题:       Can't build on MS-Windows.
解决方案:   Add missing parenthesis.
相关文件:   src/vim.h

Patch 8.0.0099
问题:       Popup menu always appears above the cursor when it is in the lower
            half of the screen. (Matt Gardner)
解决方案:   Compute the available space better. (Hirohito Higashi,
            closes #1241)
相关文件:   src/popupmnu.c

Patch 8.0.0100
问题:       Options that are a file name may contain non-filename characters.
解决方案:   Check for more invalid characters.
相关文件:   src/option.c

Patch 8.0.0101
问题:       Some options are not strictly checked.
解决方案:   Add flags for stricter checks.
相关文件:   src/option.c

Patch 8.0.0102 (after 8.0.0101)
问题:       Cannot set 'dictionary' to a path.
解决方案:   Allow for slash and backslash.  Add a test (partly by Daisuke
            Suzuki, closes #1279, closes #1284)
相关文件:   src/option.c, src/testdir/test_options.vim

Patch 8.0.0103
问题:       May not process channel readahead. (skywind)
解决方案:   If there is readahead don't block on input.
相关文件:   src/channel.c, src/proto/channel.pro, src/os_unix.c,
            src/os_win32.c, src/misc2.c

Patch 8.0.0104
问题:       Value of 'thesaurus' option not checked properly.
解决方案:   Add P_NDNAME flag. (Daisuke Suzuki)
相关文件:   src/option.c, src/testdir/test_options.vim

Patch 8.0.0105
问题:       When using ch_read() with zero timeout, can't tell the difference
            between reading an empty line and nothing available.
解决方案:   Add ch_canread().
相关文件:   src/evalfunc.c, src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/shared.vim,
            runtime/doc/eval.txt, runtime/doc/channel.txt

Patch 8.0.0106 (after 8.0.0100)
问题:       Cannot use a semicolon in 'backupext'. (Jeff)
解决方案:   Allow for a few more characters when "secure" isn't set.
相关文件:   src/option.c

Patch 8.0.0107
问题:       When reading channel output in a timer, messages may go missing.
            (Skywind)
解决方案:   Add the "drop" option.  Write error messages in the channel log.
            Don't have ch_canread() check for the channel being open.
相关文件:   src/structs.h, src/channel.c, src/message.c, src/evalfunc.c,
            src/proto/channel.pro, runtime/doc/channel.txt

Patch 8.0.0108 (after 8.0.0107)
问题:       The channel "drop" option is not tested.
解决方案:   Add a test.
相关文件:   src/testdir/test_channel.vim

Patch 8.0.0109
问题:       Still checking if memcmp() exists while every system should have
            it now.
解决方案:   Remove vim_memcmp().  (James McCoy, closes #1295)
相关文件:   src/config.h.in, src/configure.ac, src/misc2.c, src/os_vms_conf.h,
            src/osdef1.h.in, src/search.c, src/tag.c, src/vim.h

Patch 8.0.0110
问题:       Drop command doesn't use existing window.
解决方案:   Check the window width properly. (Hirohito Higashi)
相关文件:   src/buffer.c, src/testdir/test_tabpage.vim

Patch 8.0.0111
问题:       The :history command is not tested.
解决方案:   Add tests. (Dominique Pelle)
相关文件:   runtime/doc/cmdline.txt, src/testdir/test_history.vim

Patch 8.0.0112
问题:       Tests 92 and 93 are old style.
解决方案:   Make test92 and test93 new style. (Hirohito Higashi, closes #1289)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test92.in, src/testdir/test92.ok,
            src/testdir/test93.in, src/testdir/test93.ok,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim

Patch 8.0.0113
问题:       MS-Windows: message box to prompt for saving changes may appear on
            the wrong monitor.
解决方案:   Adjust the CenterWindow function. (Ken Takata)
相关文件:   src/gui_w32.c

Patch 8.0.0114
问题:       Coding style not optimal.
解决方案:   Add spaces. (Ken Takata)
相关文件:   src/gui_w32.c, src/os_mswin.c

Patch 8.0.0115
问题:       When building with Cygwin libwinpthread isn't found.
解决方案:   Link winpthread statically. (jmmerz, closes #1255, closes #1256)
相关文件:   src/Make_cyg_ming.mak

Patch 8.0.0116
问题:       When reading English help and using CTRl-] the language from
            'helplang' is used.
解决方案:   Make help tag jumps keep the language. (Tatsuki, test by Hirohito
            Higashi, closes #1249)
相关文件:   src/tag.c, src/testdir/test_help_tagjump.vim

Patch 8.0.0117
问题:       Parallel make fails. (J. Lewis Muir)
解决方案:   Make sure the objects directory exists. (closes #1259)
相关文件:   src/Makefile

Patch 8.0.0118
问题:       "make proto" adds extra function prototype.
解决方案:   Add #ifdef.
相关文件:   src/misc2.c

Patch 8.0.0119
问题:       No test for using CTRL-R on the command line.
解决方案:   Add a test. (Dominique Pelle) And some more.
相关文件:   src/testdir/test_cmdline.vim

Patch 8.0.0120
问题:       Channel test is still flaky on OS X.
解决方案:   Set the drop argument to "never".
相关文件:   src/testdir/test_channel.vim

Patch 8.0.0121
问题:       Setting 'cursorline' changes the curswant column. (Daniel Hahler)
解决方案:   Add the P_RWINONLY flag. (closes #1297)
相关文件:   src/option.c, src/testdir/test_goto.vim

Patch 8.0.0122
问题:       Channel test is still flaky on OS X.
解决方案:   Add a short sleep.
相关文件:   src/testdir/test_channel.py

Patch 8.0.0123
问题:       Modern Sun compilers define "__sun" instead of "sun".
解决方案:   Use __sun. (closes #1296)
相关文件:   src/mbyte.c, src/pty.c, src/os_unixx.h, src/vim.h

Patch 8.0.0124
问题:       Internal error for assert_inrange(1, 1).
解决方案:   Adjust number of allowed arguments. (Dominique Pelle)
相关文件:   src/evalfunc.c, src/testdir/test_assert.vim

Patch 8.0.0125
问题:       Not enough testing for entering Ex commands.
解决方案:   Add test for CTRL-\ e {expr}. (Dominique Pelle)
相关文件:   src/testdir/test_cmdline.vim

Patch 8.0.0126
问题:       Display problem with 'foldcolumn' and a wide character.
            (esiegerman)
解决方案:   Don't use "extra" but an allocated buffer. (Christian Brabandt,
            closes #1310)
相关文件:   src/screen.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_display.vim

Patch 8.0.0127
问题:       Cancelling completion still inserts text when formatting is done
            for 'textwidth'. (lacygoill)
解决方案:   Don't format when CTRL-E was typed. (Hirohito Higashi,
            closes #1312)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0128 (after 8.0.0126)
问题:       Display test fails on MS-Windows.
解决方案:   Set 'isprint' to "@".
相关文件:   src/testdir/test_display.vim

Patch 8.0.0129
问题:       Parallel make still doesn't work. (Lewis Muir)
解决方案:   Define OBJ_MAIN.
相关文件:   src/Makefile

Patch 8.0.0130
问题:       Configure uses "ushort" while the Vim code doesn't.
解决方案:   Use "unsigned short" instead. (Fredrik Fornwall, closes #1314)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.0131
问题:       Not enough test coverage for syntax commands.
解决方案:   Add more tests. (Dominique Pelle)
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0132 (after 8.0.0131)
问题:       Test fails because of using :finish.
解决方案:   Change to return.
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0133
问题:       "2;'(" causes ml_get errors in an empty buffer.  (Dominique Pelle)
解决方案:   Check the cursor line earlier.
相关文件:   src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0134
问题:       Null pointer access reported by UBsan.
解决方案:   Check curwin->w_buffer is not NULL. (Yegappan Lakshmanan)
相关文件:   src/ex_cmds.c

Patch 8.0.0135
问题:       An address relative to the current line, ":.,+3y", does not work
            properly on a closed fold. (Efraim Yawitz)
解决方案:   Correct for including the closed fold. (Christian Brabandt)
相关文件:   src/ex_docmd.c, src/testdir/test_fold.vim,
            src/testdir/Make_all.mak, src/Makefile

Patch 8.0.0136
问题:       When using indent folding and changing indent the wrong fold is
            opened. (Jonathan Fudger)
解决方案:   Open the fold under the cursor a bit later. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test_fold.vim

Patch 8.0.0137
问题:       When 'maxfuncdepth' is set above 200 the nesting is limited to
            200. (Brett Stahlman)
解决方案:   Allow for Ex command recursion depending on 'maxfuncdepth'.
相关文件:   src/ex_docmd.c, src/testdir/test_nested_function.vim

Patch 8.0.0138 (after 8.0.0137)
问题:       Small build fails.
解决方案:   Add #ifdef.
相关文件:   src/ex_docmd.c

Patch 8.0.0139 (after 8.0.0135)
问题:       Warning for unused argument.
解决方案:   Add UNUSED.
相关文件:   src/ex_docmd.c

Patch 8.0.0140
问题:       Pasting inserted text in Visual mode does not work properly.
            (Matthew Malcomson)
解决方案:   Stop Visual mode before stuffing the inserted text. (Christian
            Brabandt, from neovim #5709)
相关文件:   src/ops.c, src/testdir/test_visual.vim

Patch 8.0.0141 (after 8.0.0137)
问题:       Nested function test fails on AppVeyor.
解决方案:   Disable the test on Windows for now.
相关文件:   src/testdir/test_nested_function.vim

Patch 8.0.0142
问题:       Normal colors are wrong with 'termguicolors'.
解决方案:   Initialize to INVALCOLOR instead of zero. (Ben Jackson, closes
            #1344)
相关文件:   src/syntax.c

Patch 8.0.0143
问题:       Line number of current buffer in getbufinfo() is wrong.
解决方案:   For the current buffer use the current line number. (Ken Takata)
相关文件:   src/evalfunc.c

Patch 8.0.0144
问题:       When using MSVC the GvimExt directory is cleaned twice.
解决方案:   Remove the lines. (Ken Takata)
相关文件:   src/Make_mvc.mak

Patch 8.0.0145
问题:       Running tests on MS-Windows is a little bit noisy.
解决方案:   Redirect some output to "nul". (Ken Takata)
相关文件:   src/testdir/Make_dos.mak

Patch 8.0.0146
问题:       When using 'termguicolors' on MS-Windows the RGB definition causes
            the colors to be wrong.
解决方案:   Undefined RGB and use our own. (Gabriel Barta)
相关文件:   src/term.c

Patch 8.0.0147
问题:       searchpair() does not work when 'magic' is off. (Chris Paul)
解决方案:   Add \m in the pattern. (Christian Brabandt, closes #1341)
相关文件:   src/evalfunc.c, src/testdir/test_search.vim

Patch 8.0.0148
问题:       When a C preprocessor statement has two line continuations the
            following line does not have the right indent. (Ken Takata)
解决方案:   Add the indent of the previous continuation line. (Hirohito
            Higashi)
相关文件:   src/misc1.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 8.0.0149
问题:       ":earlier" and ":later" do not work after startup or reading the
            undo file.
解决方案:   Use absolute time stamps instead of relative to the Vim start
            time. (Christian Brabandt, Pavel Juhas, closes #1300, closes
            #1254)
相关文件:   src/testdir/test_undo.vim, src/undo.c

Patch 8.0.0150
问题:       When the pattern of :filter does not have a separator then
            completion of the command fails.
解决方案:   Skip over the pattern. (Ozaki Kiichi, closes #1299)
相关文件:   src/ex_docmd.c, src/testdir/test_filter_cmd.vim

Patch 8.0.0151
问题:       To pass buffer content to system() and systemlist() one has to
            first create a string or list.
解决方案:   Allow passing a buffer number. (LemonBoy, closes #1240)
相关文件:   runtime/doc/eval.txt, src/Makefile, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_system.vim

Patch 8.0.0152
问题:       Running the channel test creates channellog.
解决方案:   Delete the debug line.
相关文件:   src/testdir/test_channel.vim

Patch 8.0.0153 (after 8.0.0151)
问题:       system() test fails on MS-Windows.
解决方案:   Deal with extra space and CR.
相关文件:   src/testdir/test_system.vim

Patch 8.0.0154 (after 8.0.0151)
问题:       system() test fails on OS/X.
解决方案:   Deal with leading spaces.
相关文件:   src/testdir/test_system.vim

Patch 8.0.0155
问题:       When sorting zero elements a NULL pointer is passed to qsort(),
            which ubsan warns for.
解决方案:   Don't call qsort() if there are no elements. (Dominique Pelle)
相关文件:   src/syntax.c

Patch 8.0.0156
问题:       Several float functions are not covered by tests.
解决方案:   Add float tests. (Dominique Pelle)
相关文件:   src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_float_func.vim

Patch 8.0.0157
问题:       No command line completion for ":syntax spell" and ":syntax sync".
解决方案:   Implement the completion. (Dominique Pelle)
相关文件:   src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0158 (after 8.0.0156)
问题:       On MS-Windows some float functions return a different value when
            passed unusual values.  strtod() doesn't work for "inf" and "nan".
解决方案:   Accept both results.  Fix str2float() for MS-Windows.  Also
            reorder assert function arguments.
相关文件:   src/testdir/test_float_func.vim, src/eval.c

Patch 8.0.0159
问题:       Using a NULL pointer when using feedkeys() to trigger drawing a
            tabline.
解决方案:   Skip drawing a tabline if TabPageIdxs is NULL. (Dominique Pelle)
            Also fix recursing into getcmdline() from the cmd window.
相关文件:   src/screen.c, src/ex_getln.c

Patch 8.0.0160
问题:       EMSG() is sometimes used for internal errors.
解决方案:   Change them to IEMSG(). (Dominique Pelle)  And a few more.
相关文件:   src/regexp_nfa.c, src/channel.c, src/eval.c

Patch 8.0.0161 (after 8.0.0159)
问题:       Build fails when using small features.
解决方案:   Update #ifdef for using save_ccline. (Hirohito Higashi)
相关文件:   src/ex_getln.c

Patch 8.0.0162
问题:       Build error on Fedora 23 with small features and gnome2.
解决方案:   Undefine ngettext(). (Hirohito Higashi)
相关文件:   src/gui_gtk.c, src/gui_gtk_x11.c

Patch 8.0.0163
问题:       Ruby 2.4 no longer supports rb_cFixnum.
解决方案:   move rb_cFixnum into an #ifdef. (Kazuki Sakamoto, closes #1365)
相关文件:   src/if_ruby.c

Patch 8.0.0164
问题:       Outdated and misplaced comments.
解决方案:   Fix the comments.
相关文件:   src/charset.c, src/getchar.c, src/list.c, src/misc2.c,
            src/testdir/README.txt

Patch 8.0.0165
问题:       Ubsan warns for integer overflow.
解决方案:   Swap two conditions. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 8.0.0166
问题:       JSON with a duplicate key gives an internal error. (Lcd)
解决方案:   Give a normal error.  Avoid an error when parsing JSON from a
            remote client fails.
相关文件:   src/evalfunc.c, src/json.c, src/channel.c,
            src/testdir/test_json.vim

Patch 8.0.0167
问题:       str2nr() and str2float() do not always work with negative values.
解决方案:   Be more flexible about handling signs. (LemonBoy, closes #1332)
            Add more tests.
相关文件:   src/evalfunc.c, src/testdir/test_float_func.vim,
            src/testdir/test_functions.vim, src/testdir/test_alot.vim,
            src/Makefile

Patch 8.0.0168
问题:       Still some float functionality is not covered by tests.
解决方案:   Add more tests. (Dominique Pelle, closes #1364)
相关文件:   src/testdir/test_float_func.vim

Patch 8.0.0169
问题:       For complicated string json_decode() may run out of stack space.
解决方案:   Change the recursive solution into an iterative solution.
相关文件:   src/json.c

Patch 8.0.0170 (after 8.0.0169)
问题:       Channel test fails for using freed memory.
解决方案:   Fix memory use in json_decode().
相关文件:   src/json.c

Patch 8.0.0171
问题:       JS style JSON does not support single quotes.
解决方案:   Allow for single quotes. (Yasuhiro Matsumoto, closes #1371)
相关文件:   src/json.c, src/testdir/test_json.vim, src/json_test.c,
            runtime/doc/eval.txt

Patch 8.0.0172 (after 8.0.0159)
问题:       The command selected in the command line window is not executed.
            (Andrey Starodubtsev)
解决方案:   Save and restore the command line at a lower level. (closes #1370)
相关文件:   src/ex_getln.c, src/testdir/test_history.vim

Patch 8.0.0173
问题:       When compiling with EBCDIC defined the build fails. (Yaroslav
            Kuzmin)
解决方案:   Move sortFunctions() to the right file.  Avoid warning for
            redefining __SUSV3.
相关文件:   src/eval.c, src/evalfunc.c, src/os_unixx.h

Patch 8.0.0174
问题:       For completion "locale -a" is executed on MS-Windows, even though
            it most likely won't work.
解决方案:   Skip executing "locale -a" on MS-Windows. (Ken Takata)
相关文件:   src/ex_cmds2.c

Patch 8.0.0175
问题:       Setting language in gvim on MS-Windows does not work when
            libintl.dll is dynamically linked with msvcrt.dll.
解决方案:   Use putenv() from libintl as well. (Ken Takata, closes #1082)
相关文件:   src/mbyte.c, src/misc1.c, src/os_win32.c, src/proto/os_win32.pro,
            src/vim.h

Patch 8.0.0176
问题:       Using :change in between :function and :endfunction fails.
解决方案:   Recognize :change inside a function. (ichizok, closes #1374)
相关文件:   src/userfunc.c, src/testdir/test_viml.vim

Patch 8.0.0177
问题:       When opening a buffer on a directory and inside a try/catch then
            the BufEnter event is not triggered.
解决方案:   Return NOTDONE from readfile() for a directory and deal with the
            three possible return values. (Justin M. Keyes, closes #1375,
            closes #1353)
相关文件:   src/buffer.c, src/ex_cmds.c, src/ex_docmd.c, src/fileio.c,
            src/memline.c

Patch 8.0.0178
问题:       test_command_count may fail when a previous test interferes, seen
            on MS-Windows.
解决方案:   Run it separately.
相关文件:   src/testdir/test_alot.vim, src/testdir/Make_all.mak

Patch 8.0.0179
问题:       'formatprg' is a global option but the value may depend on the
            type of buffer. (Sung Pae)
解决方案:   Make 'formatprg' global-local. (closes #1380)
相关文件:   src/structs.h, src/option.h, src/option.c, src/normal.c,
            runtime/doc/options.txt, src/testdir/test_normal.vim

Patch 8.0.0180
问题:       Error E937 is used both for duplicate key in JSON and for trying
            to delete a buffer that is in use.
解决方案:   Rename the JSON error to E938. (Norio Takagi, closes #1376)
相关文件:   src/json.c, src/testdir/test_json.vim

Patch 8.0.0181
问题:       When 'cursorbind' and 'cursorcolumn' are both on, the column
            highlight in non-current windows is wrong.
解决方案:   Add validate_cursor(). (Masanori Misono, closes #1372)
相关文件:   src/move.c

Patch 8.0.0182
问题:       When 'cursorbind' and 'cursorline' are set, but 'cursorcolumn' is
            not, then the cursor line highlighting is not updated. (Hirohito
            Higashi)
解决方案:   Call redraw_later() with NOT_VALID.
相关文件:   src/move.c

Patch 8.0.0183
问题:       Ubsan warns for using a pointer that is not aligned.
解决方案:   First copy the address. (Yegappan Lakshmanan)
相关文件:   src/channel.c

Patch 8.0.0184
问题:       When in Ex mode and an error is caught by try-catch, Vim still
            exits with a non-zero exit code.
解决方案:   Don't set ex_exitval when inside a try-catch. (partly by Christian
            Brabandt)
相关文件:   src/message.c, src/testdir/test_system.vim

Patch 8.0.0185 (after 8.0.0184)
问题:       The system() test fails on MS-Windows.
解决方案:   Skip the test on MS-Windows.
相关文件:   src/testdir/test_system.vim

Patch 8.0.0186
问题:       The error message from assert_notequal() is confusing.
解决方案:   Only mention the expected value.
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 8.0.0187
问题:       Building with a new Ruby version fails.
解决方案:   Use ruby_sysinit() instead of NtInitialize(). (Tomas Volf,
            closes #1382)
相关文件:   src/if_ruby.c

Patch 8.0.0188 (after 8.0.0182)
问题:       Using NOT_VALID for redraw_later() to update the cursor
            line/column highlighting is not efficient.
解决方案:   Call validate_cursor() when 'cul' or 'cuc' is set.
相关文件:   src/move.c

Patch 8.0.0189
问题:       There are no tests for the :profile command.
解决方案:   Add tests. (Dominique Pelle, closes #1383)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_profile.vim

Patch 8.0.0190
问题:       Detecting duplicate tags uses a slow linear search.
解决方案:   Use a much faster hash table solution. (James McCoy, closes #1046)
            But don't add hi_keylen, it makes hash tables 50% bigger.
相关文件:   src/tag.c

Patch 8.0.0191 (after 8.0.0187)
问题:       Some systems do not have ruby_sysinit(), causing the build to
            fail.
解决方案:   Clean up how ruby_sysinit() and NtInitialize() are used. (Taro
            Muraoka)
相关文件:   src/if_ruby.c

Patch 8.0.0192 (after 8.0.0190)
问题:       Build fails with tiny features.
解决方案:   Change #ifdef for hash_clear().  Avoid warning for unused
            argument.
相关文件:   src/hashtab.c, src/if_cscope.c

Patch 8.0.0193 (after 8.0.0188)
问题:       Accidentally removed #ifdef.
解决方案:   Put it back. (Masanori Misono)
相关文件:   src/move.c

Patch 8.0.0194 (after 8.0.0189)
问题:       Profile tests fails if total and self time are equal.
解决方案:   Make one time optional.
相关文件:   src/testdir/test_profile.vim

Patch 8.0.0195 (after 8.0.0190)
问题:       Jumping to a tag that is a static item in the current file fails.
            (Kazunobu Kuriyama)
解决方案:   Make sure the first byte of the tag key is not NUL. (Suggested by
            James McCoy, closes #1387)
相关文件:   src/tag.c, src/testdir/test_tagjump.vim

Patch 8.0.0196 (after 8.0.0194)
问题:       The test for :profile is slow and does not work on MS-Windows.
解决方案:   Use the "-es" argument. (Dominique Pelle)  Swap single and double
            quotes for system()
相关文件:   src/testdir/test_profile.vim

Patch 8.0.0197
问题:       On MS-Windows the system() test skips a few parts.
解决方案:   Swap single and double quotes for the command.
相关文件:   src/testdir/test_system.vim

Patch 8.0.0198
问题:       Some syntax arguments take effect even after "if 0". (Taylor
            Venable)
解决方案:   Properly skip the syntax statements.  Make "syn case" and "syn
            conceal" report the current state.  Fix that "syn clear" didn't
            reset the conceal flag.  Add tests for :syntax skipping properly.
相关文件:   src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0199
问题:       Warning for an unused parameter when the libcall feature is
            disabled.  Warning for a function type cast when compiling with
            -pedantic.
解决方案:   Add UNUSED.  Use a different type cast. (Damien Molinier)
相关文件:   src/evalfunc.c, src/os_unix.c

Patch 8.0.0200
问题:       Some syntax arguments are not tested.
解决方案:   Add more syntax command tests.
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0201
问题:       When completing a group name for a highlight or syntax command
            cleared groups are included.
解决方案:   Skip groups that have been cleared.
相关文件:   src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0202
问题:       No test for invalid syntax group name.
解决方案:   Add a test for group name error and warning.
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0203
问题:       Order of complication flags is sometimes wrong.
解决方案:   Put interface-specific flags before ALL_CFLAGS. (idea by Yousong
            Zhou, closes #1100)
相关文件:   src/Makefile

Patch 8.0.0204
问题:       Compiler warns for uninitialized variable. (Tony Mechelynck)
解决方案:   When skipping set "id" to -1.
相关文件:   src/syntax.c

Patch 8.0.0205
问题:       After :undojoin some commands don't work properly, such as :redo.
            (Matthew Malcomson)
解决方案:   Don't set curbuf->b_u_curhead. (closes #1390)
相关文件:   src/undo.c, src/testdir/test_undo.vim

Patch 8.0.0206
问题:       Test coverage for :retab insufficient.
解决方案:   Add test for :retab. (Dominique Pelle, closes #1391)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/test_retab.vim

Patch 8.0.0207
问题:       Leaking file descriptor when system() cannot find the buffer.
            (Coverity)
解决方案:   Close the file descriptor.  (Dominique Pelle, closes #1398)
相关文件:   src/evalfunc.c

Patch 8.0.0208
问题:       Internally used commands for CTRL-Z and mouse click end up in
            history. (Matthew Malcomson)
解决方案:   Use do_cmdline_cmd() instead of stuffing them in the readahead
            buffer. (James McCoy, closes #1395)
相关文件:   src/edit.c, src/normal.c

Patch 8.0.0209
问题:       When using :substitute with the "c" flag and 'cursorbind' is set
            the cursor is not updated in other windows.
解决方案:   Call do_check_cursorbind(). (Masanori Misono)
相关文件:   src/ex_cmds.c

Patch 8.0.0210
问题:       Vim does not support bracketed paste, as implemented by xterm and
            other terminals.
解决方案:   Add t_BE, t_BD, t_PS and t_PE.
相关文件:   src/term.c, src/term.h, src/option.c, src/misc2.c, src/keymap.h,
            src/edit.c, src/normal.c, src/evalfunc.c, src/getchar.c,
            src/vim.h, src/proto/edit.pro, runtime/doc/term.txt

Patch 8.0.0211 (after 8.0.0210)
问题:       Build fails if the multi-byte feature is disabled.
解决方案:   Change #ifdef around ins_char_bytes.
相关文件:   src/misc1.c

Patch 8.0.0212
问题:       The buffer used to store a key name theoretically could be too
            small. (Coverity)
解决方案:   Count all possible modifier characters.  Add a check for the
            length just in case.
相关文件:   src/keymap.h, src/misc2.c

Patch 8.0.0213
问题:       The Netbeans "specialKeys" command does not check if the argument
            fits in the buffer. (Coverity)
解决方案:   Add a length check.
相关文件:   src/netbeans.c

Patch 8.0.0214
问题:       Leaking memory when syntax cluster id is unknown. (Coverity)
解决方案:   Free the memory.
相关文件:   src/syntax.c

Patch 8.0.0215
问题:       When a Cscope line contains CTRL-L a NULL pointer may be used.
            (Coverity)
解决方案:   Don't check for an emacs tag in a cscope line.
相关文件:   src/tag.c

Patch 8.0.0216
问题:       When decoding JSON with a JS style object the JSON test may use a
            NULL pointer. (Coverity)
解决方案:   Check for a NULL pointer.
相关文件:   src/json.c, src/json_test.c

Patch 8.0.0217 (after 8.0.0215)
问题:       Build fails without the cscope feature.
解决方案:   Add #ifdef.
相关文件:   src/tag.c

Patch 8.0.0218
问题:       No command line completion for :cexpr, :cgetexpr, :caddexpr, etc.
解决方案:   Make completion work. (Yegappan Lakshmanan)  Add a test.
相关文件:   src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0219
问题:       Ubsan reports errors for integer overflow.
解决方案:   Define macros for minimum and maximum values.  Select an
            expression based on the value. (Mike Williams)
相关文件:   src/charset.c, src/eval.c, src/evalfunc.c, src/structs.h,
            src/testdir/test_viml.vim

Patch 8.0.0220
问题:       Completion for :match does not show "none" and other missing
            highlight names.
解决方案:   Skip over cleared entries before checking the index to be at the
            end.
相关文件:   src/syntax.c, src/testdir/test_cmdline.vim

Patch 8.0.0221
问题:       Checking if PROTO is defined inside a function has no effect.
解决方案:   Remove the check for PROTO. (Hirohito Higashi)
相关文件:   src/misc1.c

Patch 8.0.0222
问题:       When a multi-byte character ends in a zero byte, putting blockwise
            text puts it before the character instead of after it.
解决方案:   Use int instead of char for the character under the cursor.
            (Luchr, closes #1403)  Add a test.
相关文件:   src/ops.c, src/testdir/test_put.vim, src/Makefile,
            src/testdir/test_alot.vim

Patch 8.0.0223
问题:       Coverity gets confused by the flags passed to find_tags() and
            warns about uninitialized variable.
解决方案:   Disallow using cscope and help tags at the same time.
相关文件:   src/tag.c

Patch 8.0.0224
问题:       When 'fileformats' is changed in a BufReadPre auto command, it
            does not take effect in readfile(). (Gary Johnson)
解决方案:   Check the value of 'fileformats' after executing auto commands.
            (Christian Brabandt)
相关文件:   src/fileio.c, src/testdir/test_fileformat.vim

Patch 8.0.0225
问题:       When a block is visually selected and put is used on the end of
            the selection only one line is changed.
解决方案:   Check for the end properly. (Christian Brabandt, neovim issue
            5781)
相关文件:   src/ops.c, src/testdir/test_put.vim

Patch 8.0.0226
问题:       The test for patch 8.0.0224 misses the CR characters and passes
            even without the fix. (Christian Brabandt)
解决方案:   Use double quotes and \<CR>.
相关文件:   src/testdir/test_fileformat.vim

Patch 8.0.0227
问题:       Crash when 'fileformat' is forced to "dos" and the first line in
            the file is empty and does not have a CR character.
解决方案:   Don't check for CR before the start of the buffer.
相关文件:   src/fileio.c, src/testdir/test_fileformat.vim

Patch 8.0.0228 (after 8.0.0210)
问题:       When pasting test in an xterm on the command line it is surrounded
            by <PasteStart> and <PasteEnd>. (Johannes Kaltenbach)
解决方案:   Add missing changes.
相关文件:   src/ex_getln.c, src/term.c

Patch 8.0.0229 (after 8.0.0179)
问题:       When freeing a buffer the local value of the 'formatprg' option is
            not cleared.
解决方案:   Add missing change.
相关文件:   src/buffer.c

Patch 8.0.0230 (after 8.0.0210)
问题:       When using bracketed paste line breaks are not respected.
解决方案:   Turn CR characters into a line break if the text is being
            inserted. (closes #1404)
相关文件:   src/edit.c

Patch 8.0.0231
问题:       There are no tests for bracketed paste mode.
解决方案:   Add a test.  Fix repeating with "normal .".
相关文件:   src/edit.c, src/testdir/test_paste.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0232
问题:       Pasting in Insert mode does not work when bracketed paste is used
            and 'esckeys' is off.
解决方案:   When 'esckeys' is off disable bracketed paste in Insert mode.
相关文件:   src/edit.c

Patch 8.0.0233 (after 8.0.0231)
问题:       The paste test fails if the GUI is being used.
解决方案:   Skip the test in the GUI.
相关文件:   src/testdir/test_paste.vim

Patch 8.0.0234 (after 8.0.0225)
问题:       When several lines are visually selected and one of them is short,
            using put may cause a crash. (Axel Bender)
解决方案:   Check for a short line. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test_put.vim

Patch 8.0.0235
问题:       Memory leak detected when running tests for diff mode.
解决方案:   Free p_extra_free.
相关文件:   src/screen.c

Patch 8.0.0236 (after 8.0.0234)
问题:       Gcc complains that a variable may be used uninitialized. Confusion
            between variable and label name. (John Marriott)
解决方案:   Initialize it.  Rename end to end_lnum.
相关文件:   src/ops.c

Patch 8.0.0237
问题:       When setting wildoptions=tagfile the completion context is not set
            correctly. (desjardins)
解决方案:   Check for EXPAND_TAGS_LISTFILES. (Christian Brabandt, closes #1399)
相关文件:   src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.0.0238
问题:       When using bracketed paste autoindent causes indent to be
            increased.
解决方案:   Disable 'ai' and set 'paste' temporarily. (Ken Takata)
相关文件:   src/edit.c, src/testdir/test_paste.vim

Patch 8.0.0239
问题:       The address sanitizer sometimes finds errors, but it needs to be
            run manually.
解决方案:   Add an environment to Travis with clang and the address sanitizer.
            (Christian Brabandt)  Also include changes only on github.
相关文件:   .travis.yml

Patch 8.0.0240 (after 8.0.0239)
问题:       The clang build on CI fails with one configuration.
解决方案:   Redo a previous patch that was accidentally reverted.
相关文件:   .travis.yml

Patch 8.0.0241
问题:       Vim defines a mch_memmove() function but it doesn't work, thus is
            always unused.
解决方案:   Remove the mch_memmove implementation. (suggested by Dominique
            Pelle)
相关文件:   src/os_unix.h, src/misc2.c, src/vim.h

Patch 8.0.0242
问题:       Completion of user defined functions is not covered by tests.
解决方案:   Add tests.  Also test various errors of user-defined commands.
            (Dominique Pelle, closes #1413)
相关文件:   src/testdir/test_usercommands.vim

Patch 8.0.0243
问题:       When making a character lower case with tolower() changes the byte
            count, it is not made lower case.
解决方案:   Add strlow_save(). (Dominique Pelle, closes #1406)
相关文件:   src/evalfunc.c, src/misc2.c, src/proto/misc2.pro,
            src/testdir/test_functions.vim

Patch 8.0.0244
问题:       When the user sets t_BE empty after startup to disable bracketed
            paste, this has no direct effect.
解决方案:   When t_BE is made empty write t_BD.  When t_BE is made non-empty
            write the new value.
相关文件:   src/option.c

Patch 8.0.0245
问题:       The generated zh_CN.cp936.po message file is not encoded properly.
解决方案:   Instead of using zh_CN.po as input, use zh_CN.UTF-8.po.
相关文件:   src/po/Makefile

Patch 8.0.0246
问题:       Compiler warnings for int to pointer conversion.
解决方案:   Fix macro for mch_memmove(). (John Marriott)
相关文件:   src/vim.h

Patch 8.0.0247
问题:       Under some circumstances, one needs to type Ctrl-N or Ctrl-P twice
            to have a menu entry selected. (Lifepillar)
解决方案:   call ins_compl_free(). (Christian Brabandt, closes #1411)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0248
问题:       vim_strcat() cannot handle overlapping arguments.
解决方案:   Use mch_memmove() instead of strcpy(). (Justin M. Keyes,
            closes #1415)
相关文件:   src/misc2.c

Patch 8.0.0249
问题:       When two submits happen quick after each other, the tests for the
            first one may error out.
解决方案:   Use a git depth of 10 instead of 1. (Christian Brabandt)
相关文件:   .travis.yml

Patch 8.0.0250
问题:       When virtcol() gets a column that is not the first byte of a
            multi-byte character the result is unpredictable. (Christian
            Ludwig)
解决方案:   Correct the column to the first byte of a multi-byte character.
            Change the utf-8 test to new style.
相关文件:   src/charset.c, src/testdir/test_utf8.in, src/testdir/test_utf8.ok,
            src/testdir/test_utf8.vim, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_alot_utf8.vim

Patch 8.0.0251
问题:       It is not so easy to write a script that works with both Python 2
            and Python 3, even when the Python code works with both.
解决方案:   Add 'pyxversion', :pyx, etc. (Marc Weber, Ken Takata)
相关文件:   Filelist, runtime/doc/eval.txt, runtime/doc/if_pyth.txt,
            runtime/doc/index.txt, runtime/doc/options.txt,
            runtime/optwin.vim, runtime/doc/quickref.txt,
            runtime/doc/usr_41.txt, src/Makefile, src/evalfunc.c,
            src/ex_cmds.h, src/ex_cmds2.c, src/ex_docmd.c, src/if_python.c,
            src/if_python3.c, src/option.c, src/option.h,
            src/proto/ex_cmds2.pro, src/testdir/Make_all.mak,
            src/testdir/pyxfile/py2_magic.py,
            src/testdir/pyxfile/py2_shebang.py,
            src/testdir/pyxfile/py3_magic.py,
            src/testdir/pyxfile/py3_shebang.py, src/testdir/pyxfile/pyx.py,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim
            src/userfunc.c

Patch 8.0.0252
问题:       Characters below 256 that are not one byte are not always
            recognized as word characters.
解决方案:   Make vim_iswordc() and vim_iswordp() work the same way. Add a test
            for this. (Ozaki Kiichi)
相关文件:   src/Makefile, src/charset.c, src/kword_test.c, src/mbyte.c,
            src/proto/mbyte.pro

Patch 8.0.0253
问题:       When creating a session when 'winminheight' is 2 or larger and
            loading that session gives an error.
解决方案:   Also set 'winminheight' before setting 'winheight' to 1. (Rafael
            Bodill, neovim #5717)
相关文件:   src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.0.0254
问题:       When using an assert function one can either specify a message or
            get a message about what failed, not both.
解决方案:   Concatenate the error with the message.
相关文件:   src/eval.c, src/testdir/test_assert.vim

Patch 8.0.0255
问题:       When calling setpos() with a buffer argument it often is ignored.
            (Matthew Malcomson)
解决方案:   Make the buffer argument work for all marks local to a buffer.
            (neovim #5713)  Add more tests.
相关文件:   src/mark.c, src/testdir/test_marks.vim, runtime/doc/eval.txt

Patch 8.0.0256 (after 8.0.0255)
问题:       Tests fail because some changes were not included.
解决方案:   Add changes to evalfunc.c
相关文件:   src/evalfunc.c

Patch 8.0.0257 (after 8.0.0252)
问题:       The keyword test file is not included in the archive.
解决方案:   Update the list of files.
相关文件:   Filelist

Patch 8.0.0258 (after 8.0.0253)
问题:       mksession test leaves file behind.
解决方案:   Delete the file.  Rename files to start with "X".
相关文件:   src/testdir/test_mksession.vim

Patch 8.0.0259
问题:       Tab commands do not handle count correctly. (Ken Hamada)
解决方案:   Add ADDR_TABS_RELATIVE. (Hirohito Higashi)
相关文件:   runtime/doc/tabpage.txt, src/ex_cmds.h, src/ex_docmd.c,
            src/testdir/test_tabpage.vim

Patch 8.0.0260
问题:       Build fails with tiny features.
解决方案:   Move get_tabpage_arg() inside #ifdef.
相关文件:   src/ex_docmd.c

Patch 8.0.0261
问题:       Not enough test coverage for eval functions.
解决方案:   Add more tests. (Dominique Pelle, closes #1420)
相关文件:   src/testdir/test_functions.vim

Patch 8.0.0262
问题:       Farsi support is barely tested.
解决方案:   Add more tests for Farsi.  Clean up the code.
相关文件:   src/edit.c, src/farsi.c, src/testdir/test_farsi.vim

Patch 8.0.0263
问题:       Farsi support is not tested enough.
解决方案:   Add more tests for Farsi.  Clean up the code.
相关文件:   src/farsi.c, src/testdir/test_farsi.vim

Patch 8.0.0264
问题:       Memory error reported by ubsan, probably for using the string
            returned by execute().
解决方案:   NUL terminate the result of execute().
相关文件:   src/evalfunc.c

Patch 8.0.0265
问题:       May get ml_get error when :pydo deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
解决方案:   Check the buffer and line every time.
相关文件:   src/if_py_both.h, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0266
问题:       Compiler warning for using uninitialized variable.
解决方案:   Set tab_number also when there is an error.
相关文件:   src/ex_docmd.c

Patch 8.0.0267
问题:       A channel test sometimes fails on Mac.
解决方案:   Add the test to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0268
问题:       May get ml_get error when :luado deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
解决方案:   Check the buffer and line every time.
相关文件:   src/if_lua.c, src/testdir/test_lua.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0269
问题:       May get ml_get error when :perldo deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
解决方案:   Check the buffer and line every time.
相关文件:   src/if_perl.xs, src/testdir/test_perl.vim

Patch 8.0.0270
问题:       May get ml_get error when :rubydo deletes lines or switches to
            another buffer. (Nikolai Pavlov, issue #1421)
解决方案:   Check the buffer and line every time.
相关文件:   src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.0.0271
问题:       May get ml_get error when :tcldo deletes lines or switches to
            another buffer. (Nikolai Pavlov, closes #1421)
解决方案:   Check the buffer and line every time.
相关文件:   src/if_tcl.c, src/testdir/test_tcl.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0272
问题:       Crash on exit is not detected when running tests.
解决方案:   Remove the dash before the command. (Dominique Pelle, closes
            #1425)
相关文件:   src/testdir/Makefile

Patch 8.0.0273
问题:       Dead code detected by Coverity when not using gnome.
解决方案:   Rearrange the #ifdefs to avoid dead code.
相关文件:   src/gui_gtk_x11.c

Patch 8.0.0274
问题:       When update_single_line() is called recursively, or another screen
            update happens while it is busy, errors may occur.
解决方案:   Check and update updating_screen. (Christian Brabandt)
相关文件:   src/screen.c

Patch 8.0.0275
问题:       When checking for CTRL-C typed the GUI may detect a screen resize
            and redraw the screen, causing trouble.
解决方案:   Set updating_screen in ui_breakcheck().
相关文件:   src/ui.c

Patch 8.0.0276
问题:       Checking for FEAT_GUI_GNOME inside GTK 3 code is unnecessary.
解决方案:   Remove the #ifdef. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 8.0.0277
问题:       The GUI test may trigger fontconfig and take a long time.
解决方案:   Set $XDG_CACHE_HOME. (Kazunobu Kuriyama)
相关文件:   src/testdir/unix.vim, src/testdir/test_gui.vim

Patch 8.0.0278 (after 8.0.0277)
问题:       GUI test fails on MS-Windows.
解决方案:   Check that tester_HOME exists.
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0279
问题:       With MSVC 2015 the dll name is vcruntime140.dll.
解决方案:   Check the MSVC version and use the right dll name. (Ken Takata)
相关文件:   src/Make_mvc.mak

Patch 8.0.0280
问题:       On MS-Windows setting an environment variable with multi-byte
            strings does not work well.
解决方案:   Use wputenv when possible. (Taro Muraoka, Ken Takata)
相关文件:   src/misc1.c, src/os_win32.c, src/os_win32.h,
            src/proto/os_win32.pro, src/vim.h

Patch 8.0.0281
问题:       MS-Windows files are still using ARGSUSED while most other files
            have UNUSED.
解决方案:   Change ARGSUSED to UNUSED or delete it.
相关文件:   src/os_win32.c, src/gui_w32.c, src/os_mswin.c, src/os_w32exe.c,
            src/winclip.c

Patch 8.0.0282
问题:       When doing a Visual selection and using "I" to go to insert mode,
            CTRL-O needs to be used twice to go to Normal mode. (Coacher)
解决方案:   Check for the return value of edit(). (Christian Brabandt,
            closes #1290)
相关文件:   src/normal.c, src/ops.c

Patch 8.0.0283
问题:       The return value of mode() does not indicate that completion is
            active in Replace and Insert mode. (Zhen-Huan (Kenny) Hu)
解决方案:   Add "c" or "x" for two kinds of completion. (Yegappan Lakshmanan,
            closes #1397)  Test some more modes.
相关文件:   runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_mapping.vim

Patch 8.0.0284
问题:       The Test_collapse_buffers() test failed once, looks like it is
            flaky.
解决方案:   Add it to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0285 (after 8.0.0277)
问题:       Tests fail with tiny build on Unix.
解决方案:   Only set g:tester_HOME when build with the +eval feature.
相关文件:   src/testdir/unix.vim

Patch 8.0.0286
问题:       When concealing is active and the screen is resized in the GUI it
            is not immediately redrawn.
解决方案:   Use update_prepare() and update_finish() from
            update_single_line().
相关文件:   src/screen.c

Patch 8.0.0287
问题:       Cannot access the arguments of the current function in debug mode.
            (Luc Hermitte)
解决方案:   use get_funccal(). (LemonBoy, closes #1432, closes #1352)
相关文件:   src/userfunc.c

Patch 8.0.0288 (after 8.0.0284)
问题:       Errors reported while running tests.
解决方案:   Put comma in the right place.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0289
问题:       No test for "ga" and :ascii.
解决方案:   Add a test. (Dominique Pelle, closes #1429)
相关文件:   src/Makefile, src/testdir/test_alot.vim, src/testdir/test_ga.vim

Patch 8.0.0290
问题:       If a wide character doesn't fit at the end of the screen line, and
            the line doesn't fit on the screen, then the cursor position may
            be wrong. (anliting)
解决方案:   Don't skip over wide character. (Christian Brabandt, closes #1408)
相关文件:   src/screen.c

Patch 8.0.0291 (after 8.0.0282)
问题:       Visual block insertion does not insert in all lines.
解决方案:   Don't bail out of insert too early. Add a test. (Christian
            Brabandt, closes #1290)
相关文件:   src/ops.c, src/testdir/test_visual.vim

Patch 8.0.0292
问题:       The stat test is a bit slow.
解决方案:   Remove a couple of sleep comments and reduce another.
相关文件:   src/testdir/test_stat.vim

Patch 8.0.0293
问题:       Some tests have a one or three second wait.
解决方案:   Reset the 'showmode' option.  Use a test time of one to disable
            sleep after an error or warning message.
相关文件:   src/misc1.c, src/testdir/runtest.vim, src/testdir/test_normal.vim

Patch 8.0.0294
问题:       Argument list is not stored correctly in a session file.
            (lgpasquale)
解决方案:   Use "$argadd" instead of "argadd". (closes #1434)
相关文件:   src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.0.0295 (after 8.0.0293)
问题:       test_viml hangs.
解决方案:   Put resetting 'more' before sourcing the script.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0296
问题:       Bracketed paste can only append, not insert.
解决方案:   When the cursor is in the first column insert the text.
相关文件:   src/normal.c, src/testdir/test_paste.vim, runtime/doc/term.txt

Patch 8.0.0297
问题:       Double free on exit when using a closure. (James McCoy)
解决方案:   Split free_al_functions in two parts. (closes #1428)
相关文件:   src/userfunc.c, src/structs.h

Patch 8.0.0298
问题:       Ex command range with repeated search does not work. (Bruce
            DeVisser)
解决方案:   Skip over \/, \? and \&.
相关文件:   src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0299
问题:       When the GUI window is resized Vim does not always take over the
            new size. (Luchr)
解决方案:   Reset new_p_guifont in gui_resize_shell().  Call
            gui_may_resize_shell() in the main loop.
相关文件:   src/main.c, src/gui.c

Patch 8.0.0300
问题:       Cannot stop diffing hidden buffers. (Daniel Hahler)
解决方案:   When using :diffoff! make the whole list if diffed buffers empty.
            (closes #736)
相关文件:   src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0301
问题:       No tests for ":set completion" and various errors of the :set
            command.
解决方案:   Add more :set tests. (Dominique Pelle, closes #1440)
相关文件:   src/testdir/test_options.vim

Patch 8.0.0302
问题:       Cannot set terminal key codes with :let.
解决方案:   Make it work.
相关文件:   src/option.c, src/testdir/test_assign.vim

Patch 8.0.0303
问题:       Bracketed paste does not work in Visual mode.
解决方案:   Delete the text before pasting
相关文件:   src/normal.c, src/ops.c, src/proto/ops.pro,
            src/testdir/test_paste.vim

Patch 8.0.0304 (after 8.0.0302)
问题:       Assign test fails in the GUI.
解决方案:   Skip the test for setting t_k1.
相关文件:   src/testdir/test_assign.vim

Patch 8.0.0305
问题:       Invalid memory access when option has duplicate flag.
解决方案:   Correct pointer computation. (Dominique Pelle, closes #1442)
相关文件:   src/option.c, src/testdir/test_options.vim

Patch 8.0.0306
问题:       mode() not sufficiently tested.
解决方案:   Add more tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_functions.vim

Patch 8.0.0307
问题:       Asan detects a memory error when EXITFREE is defined. (Dominique
            Pelle)
解决方案:   In getvcol() check for ml_get_buf() returning an empty string.
            Also skip adjusting the scroll position.  Set "exiting" in
            mch_exit() for all systems.
相关文件:   src/charset.c, src/window.c, src/os_mswin.c, src/os_win32.c,
            src/os_amiga.c

Patch 8.0.0308
问题:       When using a symbolic link, the package path will not be inserted
            at the right position in 'runtimepath'. (Dugan Chen, Norio Takagi)
解决方案:   Resolve symbolic links when finding the right position in
            'runtimepath'. (Hirohito Higashi)
相关文件:   src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.0.0309
问题:       Cannot use an empty key in json.
解决方案:   Allow for using an empty key.
相关文件:   src/json.c, src/testdir/test_json.vim

Patch 8.0.0310
问题:       Not enough testing for GUI functionality.
解决方案:   Add tests for v:windowid and getwinpos[xy](). (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0311
问题:       Linebreak tests are old style.
解决方案:   Turn the tests into new style. Share utility functions. (Ozaki
            Kiichi, closes #1444)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_breakindent.vim, src/testdir/test_listlbr.in,
            src/testdir/test_listlbr.ok, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.in,
            src/testdir/test_listlbr_utf8.ok,
            src/testdir/test_listlbr_utf8.vim, src/testdir/view_util.vim

Patch 8.0.0312
问题:       When a json message arrives in pieces, the start is dropped and
            the decoding fails.
解决方案:   Do not drop the start when it is still needed. (Kay Zheng)  Add a
            test.  Reset the timeout when something is received.
相关文件:   src/channel.c, src/testdir/test_channel.vim, src/structs.h,
            src/testdir/test_channel_pipe.py

Patch 8.0.0313 (after 8.0.0310)
问题:       Not enough testing for GUI functionality.
解决方案:   Add tests for the GUI font. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0314
问题:       getcmdtype(), getcmdpos() and getcmdline() are not tested.
解决方案:   Add tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_cmdline.vim

Patch 8.0.0315
问题:       ":help :[range]" does not work. (Tony Mechelynck)
解决方案:   Translate to insert a backslash.
相关文件:   src/ex_cmds.c

Patch 8.0.0316
问题:       ":help z?" does not work. (Pavol Juhas)
解决方案:   Remove exception for z?.
相关文件:   src/ex_cmds.c

Patch 8.0.0317
问题:       No test for setting 'guifont'.
解决方案:   Add a test for X11 GUIs. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0318
问题:       Small mistake in 7x13 font name.
解决方案:   Use ISO 8859-1 name instead of 10646-1. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0319
问题:       Insert mode completion does not respect "start" in 'backspace'.
解决方案:   Check whether backspace can go before where insert started.
            (Hirohito Higashi)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0320
问题:       Warning for unused variable with small build.
解决方案:   Change #ifdef to exclude FEAT_CMDWIN. (Kazunobu Kuriyama)
相关文件:   src/ex_getln.c

Patch 8.0.0321
问题:       When using the tiny version trying to load the matchit plugin
            gives an error. On MS-Windows some default mappings fail.
解决方案:   Add a check if the command used is available. (Christian Brabandt)
相关文件:   runtime/mswin.vim, runtime/macros/matchit.vim

Patch 8.0.0322
问题:       Possible overflow with spell file where the tree length is
            corrupted.
解决方案:   Check for an invalid length (suggested by shqking)
相关文件:   src/spellfile.c

Patch 8.0.0323
问题:       When running the command line tests there is a one second wait.
解决方案:   Change an Esc to Ctrl-C. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_cmdline.vim

Patch 8.0.0324
问题:       Illegal memory access with "1;y".
解决方案:   Call check_cursor() instead of check_cursor_lnum(). (Dominique
            Pelle, closes #1455)
相关文件:   src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.0325
问题:       Packadd test does not clean up symlink.
解决方案:   Delete the link. (Hirohito Higashi)
相关文件:   src/testdir/test_packadd.vim

Patch 8.0.0326 (after 8.0.0325)
问题:       Packadd test uses wrong directory name.
解决方案:   Use the variable name value. (Hirohito Higashi)
相关文件:   src/testdir/test_packadd.vim

Patch 8.0.0327
问题:       The E11 error message in the command line window is not
            translated.
解决方案:   use _(). (Hirohito Higashi)
相关文件:   src/ex_docmd.c

Patch 8.0.0328
问题:       The "zero count" error doesn't have a number. (Hirohito Higashi)
解决方案:   Give it a number and be more specific about the error.
相关文件:   src/globals.h

Patch 8.0.0329
问题:       Xfontset and guifontwide are not tested.
解决方案:   Add tests. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0330
问题:       Illegal memory access after "vapo". (Dominique Pelle)
解决方案:   Fix the cursor column.
相关文件:   src/search.c, src/testdir/test_visual.vim

Patch 8.0.0331
问题:       Restoring help snapshot accesses freed memory. (Dominique Pelle)
解决方案:   Don't restore a snapshot when the window closes.
相关文件:   src/window.c, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_help.vim

Patch 8.0.0332
问题:       GUI test fails on some systems.
解决方案:   Try different language settings. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0333
问题:       Illegal memory access when 'complete' ends in a backslash.
解决方案:   Check for trailing backslash. (Dominique Pelle, closes #1478)
相关文件:   src/option.c, src/testdir/test_options.vim

Patch 8.0.0334
问题:       Can't access b:changedtick from a dict reference.
解决方案:   Make changedtick a member of the b: dict. (inspired by neovim
            #6112)
相关文件:   src/structs.h, src/buffer.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_docmd.c, src/main.c, src/globals.h,
            src/fileio.c, src/memline.c, src/misc1.c, src/syntax.c,
            src/proto/eval.pro, src/testdir/test_changedtick.vim,
            src/Makefile, src/testdir/test_alot.vim, src/testdir/test91.in,
            src/testdir/test91.ok, src/testdir/test_functions.vim

Patch 8.0.0335 (after 8.0.0335)
问题:       Functions test fails.
解决方案:   Use the right buffer number.
相关文件:   src/testdir/test_functions.vim

Patch 8.0.0336
问题:       Flags of :substitute not sufficiently tested.
解决方案:   Test up to two letter flag combinations. (James McCoy, closes
            #1479)
相关文件:   src/testdir/test_substitute.vim

Patch 8.0.0337
问题:       Invalid memory access in :recover command.
解决方案:   Avoid access before directory name. (Dominique Pelle,
            closes #1488)
相关文件:   src/Makefile, src/memline.c, src/testdir/test_alot.vim,
            src/testdir/test_recover.vim

Patch 8.0.0338 (after 8.0.0337)
问题:       :recover test fails on MS-Windows.
解决方案:   Use non-existing directory on MS-Windows.
相关文件:   src/testdir/test_recover.vim

Patch 8.0.0339
问题:       Illegal memory access with vi'
解决方案:   For quoted text objects bail out if the Visual area spans more
            than one line.
相关文件:   src/search.c, src/testdir/test_visual.vim

Patch 8.0.0340
问题:       Not checking return value of dict_add(). (Coverity)
解决方案:   Handle a failure.
相关文件:   src/buffer.c

Patch 8.0.0341
问题:       When using complete() and typing a character undo is saved after
            the character was inserted. (Shougo)
解决方案:   Save for undo before inserting the character.
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0342
问题:       Double free when compiled with EXITFREE and setting 'ttytype'.
解决方案:   Avoid setting P_ALLOCED on 'ttytype'. (Dominique Pelle,
            closes #1461)
相关文件:   src/option.c, src/testdir/test_options.vim

Patch 8.0.0343
问题:       b:changedtick can be unlocked, even though it has no effect.
            (Nikolai Pavlov)
解决方案:   Add a check and error E940. (closes #1496)
相关文件:   src/eval.c, src/testdir/test_changedtick.vim, runtime/doc/eval.txt

Patch 8.0.0344
问题:       Unlet command leaks memory. (Nikolai Pavlov)
解决方案:   Free the memory on error. (closes #1497)
相关文件:   src/eval.c, src/testdir/test_unlet.vim

Patch 8.0.0345
问题:       islocked('d.changedtick') does not work.
解决方案:   Make it work.
相关文件:   src/buffer.c, src/eval.c, src/evalfunc.c, src/vim.h,
            src/testdir/test_changedtick.vim,

Patch 8.0.0346
问题:       Vim relies on limits.h to be included indirectly, but on Solaris 9
            it may not be. (Ben Fritz)
解决方案:   Always include limits.h.
相关文件:   src/os_unixx.h, src/vim.h

Patch 8.0.0347
问题:       When using CTRL-X CTRL-U inside a comment, the use of the comment
            leader may not work. (Klement)
解决方案:   Save and restore did_ai. (Christian Brabandt, closes #1494)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0348
问题:       When building with a shadow directory on macOS lacks the
            +clipboard feature.
解决方案:   Link *.m files, specifically os_macosx.m. (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 8.0.0349
问题:       Redrawing errors with GTK 3.
解决方案:   When updating, first clear all rectangles and then draw them.
            (Kazunobu Kuriyama, Christian Ludwig, closes #848)
相关文件:   src/gui_gtk_x11.c

Patch 8.0.0350
问题:       Not enough test coverage for Perl.
解决方案:   Add more Perl tests. (Dominique Pelle, closes #1500)
相关文件:   src/testdir/test_perl.vim

Patch 8.0.0351
问题:       No test for concatenating an empty string that results from out of
            bounds indexing.
解决方案:   Add a simple test.
相关文件:   src/testdir/test_expr.vim

Patch 8.0.0352
问题:       The condition for when a typval needs to be cleared is too
            complicated.
解决方案:   Init the type to VAR_UNKNOWN and always clear it.
相关文件:   src/eval.c

Patch 8.0.0353
问题:       If [RO] in the status line is translated to a longer string, it is
            truncated to 4 bytes.
解决方案:   Skip over the resulting string. (Jente Hidskes, closes #1499)
相关文件:   src/screen.c

Patch 8.0.0354
问题:       Test to check that setting termcap key fails sometimes.
解决方案:   Check for "t_k1" to exist. (Christian Brabandt, closes #1459)
相关文件:   src/testdir/test_assign.vim

Patch 8.0.0355
问题:       Using uninitialized memory when 'isfname' is empty.
解决方案:   Don't call getpwnam() without an argument. (Dominique Pelle,
            closes #1464)
相关文件:   src/misc1.c, src/testdir/test_options.vim

Patch 8.0.0356 (after 8.0.0342)
问题:       Leaking memory when setting 'ttytype'.
解决方案:   Get free_oldval from the right option entry.
相关文件:   src/option.c

Patch 8.0.0357
问题:       Crash when setting 'guicursor' to weird value.
解决方案:   Avoid negative size. (Dominique Pelle, closes #1465)
相关文件:   src/misc2.c, src/testdir/test_options.vim

Patch 8.0.0358
问题:       Invalid memory access in C-indent code.
解决方案:   Don't go over end of empty line. (Dominique Pelle, closes #1492)
相关文件:   src/edit.c, src/testdir/test_options.vim

Patch 8.0.0359
问题:       'number' and 'relativenumber' are not properly tested.
解决方案:   Add tests, change old style to new style tests. (Ozaki Kiichi,
            closes #1447)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test89.in, src/testdir/test89.ok,
            src/testdir/test_alot.vim, src/testdir/test_findfile.vim,
            src/testdir/test_number.vim

Patch 8.0.0360
问题:       Sometimes VimL is used, which is confusing.
解决方案:   Consistently use "Vim script". (Hirohito Higashi)
相关文件:   runtime/doc/if_mzsch.txt, runtime/doc/if_pyth.txt,
            runtime/doc/syntax.txt, runtime/doc/usr_02.txt,
            runtime/doc/version7.txt, src/Makefile, src/eval.c,
            src/ex_getln.c, src/if_py_both.h, src/if_xcmdsrv.c,
            src/testdir/Make_all.mak, src/testdir/runtest.vim,
            src/testdir/test49.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_viml.vim

Patch 8.0.0361
问题:       GUI initialisation is not sufficiently tested.
解决方案:   Add the gui_init test. (Kazunobu Kuriyama)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Makefile,
            src/testdir/gui_init.vim, src/testdir/setup_gui.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim, Filelist

Patch 8.0.0362 (after 8.0.0361)
问题:       Tests fail on MS-Windows.
解决方案:   Use $*.vim instead of $<.
相关文件:   src/testdir/Make_dos.mak

Patch 8.0.0363
问题:       Travis is too slow to keep up with patches.
解决方案:   Increase git depth to 20
相关文件:   .travis.yml

Patch 8.0.0364
问题:       ]s does not move cursor with two spell errors in one line. (Manuel
            Ortega)
解决方案:   Don't stop search immediately when wrapped, search the line first.
            (Ken Takata)  Add a test.
相关文件:   src/spell.c, src/Makefile, src/testdir/test_spell.vim,
            src/testdir/Make_all.mak

Patch 8.0.0365
问题:       Might free a dict item that wasn't allocated.
解决方案:   Call dictitem_free(). (Nikolai Pavlov)  Use this for
            b:changedtick.
相关文件:   src/dict.c, src/structs.h, src/buffer.c, src/edit.c,
            src/evalfunc.c, src/ex_docmd.c, src/fileio.c, src/main.c,
            src/memline.c, src/misc1.c, src/syntax.c

Patch 8.0.0366 (after 8.0.0365)
问题:       Build fails with tiny features.
解决方案:   Add #ifdef.
相关文件:   src/buffer.c

Patch 8.0.0367
问题:       If configure defines _LARGE_FILES some include files are included
            before it is defined.
解决方案:   Include vim.h first. (Sam Thursfield, closes #1508)
相关文件:   src/gui_at_sb.c, src/gui_athena.c, src/gui_motif.c, src/gui_x11.c,
            src/gui_xmdlg.c

Patch 8.0.0368
问题:       Not all options are tested with a range of values.
解决方案:   Generate a test script from the source code.
相关文件:   Filelist, src/gen_opt_test.vim, src/testdir/test_options.vim,
            src/Makefile

Patch 8.0.0369 (after 8.0.0368)
问题:       The 'balloondelay', 'ballooneval' and 'balloonexpr' options are
            not defined without the +balloon_eval feature. Testing that an
            option value fails does not work for unsupported options.
解决方案:   Make the options defined but not supported.  Don't test if
            setting unsupported options fails.
相关文件:   src/option.c, src/gen_opt_test.vim

Patch 8.0.0370
问题:       Invalid memory access when setting wildchar empty.
解决方案:   Avoid going over the end of the option value. (Dominique Pelle,
            closes #1509)  Make option test check all number options with
            empty value.
相关文件:   src/gen_opt_test.vim, src/option.c, src/testdir/test_options.vim

Patch 8.0.0371 (after 8.0.0365)
问题:       Leaking memory when setting v:completed_item.
解决方案:   Or the flags instead of setting them.
相关文件:   src/eval.c

Patch 8.0.0372
问题:       More options are not always defined.
解决方案:   Consistently define all possible options.
相关文件:   src/option.c, src/testdir/test_expand_dllpath.vim

Patch 8.0.0373
问题:       Build fails without +folding.
解决方案:   Move misplaced #ifdef.
相关文件:   src/option.c

Patch 8.0.0374
问题:       Invalid memory access when using :sc in Ex mode. (Dominique Pelle)
解决方案:   Avoid the column being negative.  Also fix a hang in Ex mode.
相关文件:   src/ex_getln.c, src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.0.0375
问题:       The "+ register is not tested.
解决方案:   Add a test using another Vim instance to change the "+ register.
            (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0376
问题:       Size computations in spell file reading are not exactly right.
解决方案:   Make "len" a "long" and check with LONG_MAX.
相关文件:   src/spellfile.c

Patch 8.0.0377
问题:       Possible overflow when reading corrupted undo file.
解决方案:   Check if allocated size is not too big. (King)
相关文件:   src/undo.c

Patch 8.0.0378
问题:       Another possible overflow when reading corrupted undo file.
解决方案:   Check if allocated size is not too big. (King)
相关文件:   src/undo.c

Patch 8.0.0379
问题:       CTRL-Z and mouse click use CTRL-O unnecessary.
解决方案:   Remove stuffing CTRL-O. (James McCoy, closes #1453)
相关文件:   src/edit.c, src/normal.c

Patch 8.0.0380
问题:       With 'linebreak' set and 'breakat' includes ">" a double-wide
            character results in "<<" displayed.
解决方案:   Check for the character not to be replaced. (Ozaki Kiichi,
            closes #1456)
相关文件:   src/screen.c, src/testdir/test_listlbr_utf8.vim

Patch 8.0.0381
问题:       Diff mode is not sufficiently tested.
解决方案:   Add more diff mode tests. (Dominique Pelle, closes #1515)
相关文件:   src/testdir/test_diffmode.vim

Patch 8.0.0382 (after 8.0.0380)
问题:       Warning in tiny build for unused variable. (Tony Mechelynck)
解决方案:   Add #ifdefs.
相关文件:   src/screen.c

Patch 8.0.0383 (after 8.0.0382)
问题:       Misplaced #ifdef. (Christ van Willigen)
解决方案:   Split assignment.
相关文件:   src/screen.c

Patch 8.0.0384
问题:       Timer test failed for no apparent reason.
解决方案:   Mark the test as flaky.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0385
问题:       No tests for arabic.
解决方案:   Add a first test for arabic. (Dominique Pelle, closes #1518)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_arabic.vim

Patch 8.0.0386
问题:       Tiny build has a problem with generating the options test.
解决方案:   Change the "if" to skip over statements.
相关文件:   src/gen_opt_test.vim

Patch 8.0.0387
问题:       compiler warnings
解决方案:   Add type casts. (Christian Brabandt)
相关文件:   src/channel.c, src/memline.c

Patch 8.0.0388
问题:       filtering lines through "cat", without changing the line count,
            changes manual folds.
解决方案:   Change how marks and folds are adjusted. (Matthew Malcomson, from
            neovim #6194).
相关文件:   src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0389
问题:       Test for arabic does not check what is displayed.
解决方案:   Improve what is asserted. (Dominique Pelle, closes #1523)
            Add a first shaping test.
相关文件:   src/testdir/test_arabic.vim

Patch 8.0.0390
问题:       When the window scrolls horizontally when the popup menu is
            displayed part of it may not be cleared. (Neovim issue #6184)
解决方案:   Remove the menu when the windows scrolled. (closes #1524)
相关文件:   src/edit.c

Patch 8.0.0391
问题:       Arabic support is verbose and not well tested.
解决方案:   Simplify the code.  Add more tests.
相关文件:   src/arabic.c, src/testdir/test_arabic.vim

Patch 8.0.0392
问题:       GUI test fails with Athena and Motif.
解决方案:   Add test_ignore_error().  Use it to ignore the "failed to create
            input context" error.
相关文件:   src/message.c, src/proto/message.pro, src/evalfunc.c,
            src/testdir/test_gui.vim, runtime/doc/eval.txt

Patch 8.0.0393 (after 8.0.0190)
问题:       When the same tag appears more than once, the order is
            unpredictable. (Charles Campbell)
解决方案:   Besides using a dict for finding duplicates, use a grow array for
            keeping the tags in sequence.
相关文件:   src/tag.c, src/testdir/test_tagjump.vim

Patch 8.0.0394
问题:       Tabs are not aligned when scrolling horizontally and a Tab doesn't
            fit. (Axel Bender)
解决方案:   Handle a Tab as a not fitting character. (Christian Brabandt)
            Also fix that ":redraw" does not scroll horizontally to show the
            cursor.  And fix the test that depended on the old behavior.
相关文件:   src/screen.c, src/ex_docmd.c, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim,
            src/testdir/test_breakindent.vim

Patch 8.0.0395 (after 8.0.0392)
问题:       Testing the + register fails with Motif.
解决方案:   Also ignore the "failed to create input context" error in the
            second gvim.  Don't use msg() when it would result in a dialog.
相关文件:   src/message.c, src/testdir/test_gui.vim, src/testdir/setup_gui.vim

Patch 8.0.0396
问题:       'balloonexpr' only works synchronously.
解决方案:   Add balloon_show(). (Jusufadis Bakamovic, closes #1449)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/os_unix.c,
            src/os_win32.c

Patch 8.0.0397 (after 8.0.0392)
问题:       Cannot build with the viminfo feature but without the eval
            feature.
解决方案:   Adjust #ifdef. (John Marriott)
相关文件:   src/message.c, src/misc2.c

Patch 8.0.0398
问题:       Illegal memory access with "t".
解决方案:   Use strncmp() instead of memcmp(). (Dominique Pelle, closes #1528)
相关文件:   src/search.c, src/testdir/test_search.vim

Patch 8.0.0399
问题:       Crash when using balloon_show() when not supported. (Hirohito
            Higashi)
解决方案:   Check for balloonEval not to be NULL. (Ken Takata)
相关文件:   src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.0.0400
问题:       Some tests have a one second delay.
解决方案:   Add --not-a-term in RunVim().
相关文件:   src/testdir/shared.vim

Patch 8.0.0401
问题:       Test fails with missing balloon feature.
解决方案:   Add check for balloon feature.
相关文件:   src/testdir/test_functions.vim

Patch 8.0.0402
问题:       :map completion does not have <special>. (Dominique Pelle)
解决方案:   Recognize <special> in completion.  Add a test.
相关文件:   src/getchar.c, src/testdir/test_cmdline.vim

Patch 8.0.0403
问题:       GUI tests may fail.
解决方案:   Ignore the E285 error better. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim, src/testdir/test_gui_init.vim

Patch 8.0.0404
问题:       Not enough testing for quickfix.
解决方案:   Add some more tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim

Patch 8.0.0405
问题:       v:progpath may become invalid after ":cd".
解决方案:   Turn v:progpath into a full path if needed.
相关文件:   src/main.c, src/testdir/test_startup.vim, runtime/doc/eval.txt

Patch 8.0.0406
问题:       The arabic shaping code is verbose.
解决方案:   Shorten the code without changing the functionality.
相关文件:   src/arabic.c

Patch 8.0.0407 (after 8.0.0388)
问题:       Filtering folds with marker method not tested.
解决方案:   Also set 'foldmethod' to "marker".
相关文件:   src/testdir/test_fold.vim

Patch 8.0.0408
问题:       Updating folds does not work properly when inserting a file and a
            few other situations.
解决方案:   Adjust the way folds are updated. (Matthew Malcomson)
相关文件:   src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0409
问题:       set_progpath is defined but not always used
解决方案:   Adjust #ifdef.
相关文件:   src/main.c

Patch 8.0.0410
问题:       Newer gettext/iconv library has extra dll file.
解决方案:   Add the file to the Makefile and nsis script. (Christian Brabandt)
相关文件:   Makefile, nsis/gvim.nsi

Patch 8.0.0411
问题:       We can't change the case in menu entries, it breaks translations.
解决方案:   Ignore case when looking up a menu translation.
相关文件:   src/menu.c, src/testdir/test_menu.vim

Patch 8.0.0412 (after 8.0.0411)
问题:       Menu test fails on MS-Windows.
解决方案:   Use a menu entry with only ASCII characters.
相关文件:   src/testdir/test_menu.vim

Patch 8.0.0413 (after 8.0.0412)
问题:       Menu test fails on MS-Windows using gvim.
解决方案:   First delete the English menus.
相关文件:   src/testdir/test_menu.vim

Patch 8.0.0414
问题:       Balloon eval is not tested.
解决方案:   Add a few balloon tests. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0415 (after 8.0.0414)
问题:       Balloon test fails on MS-Windows.
解决方案:   Test with 0x7fffffff instead of 0xffffffff.
相关文件:   src/testdir/test_gui.vim

Patch 8.0.0416
问题:       Setting v:progpath is not quite right.
解决方案:   On MS-Windows add the extension. On Unix use the full path for a
            relative directory. (partly by James McCoy, closes #1531)
相关文件:   src/main.c, src/os_win32.c, src/os_unix.c

Patch 8.0.0417
问题:       Test for the clipboard fails sometimes.
解决方案:   Add it to the flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0418
问题:       ASAN logs are disabled and don't cause a failure.
解决方案:   Enable ASAN logs and fail if not empty. (James McCoy,
            closes #1425)
相关文件:   .travis.yml

Patch 8.0.0419
问题:       Test for v:progpath fails on MS-Windows.
解决方案:   Expand to full path.  Also add ".exe" when the path is an absolute
            path.
相关文件:   src/os_win32.c, src/main.c

Patch 8.0.0420
问题:       When running :make the output may be in the system encoding,
            different from 'encoding'.
解决方案:   Add the 'makeencoding' option. (Ken Takata)
相关文件:   runtime/doc/options.txt, runtime/doc/quickfix.txt,
            runtime/doc/quickref.txt, src/Makefile, src/buffer.c,
            src/if_cscope.c, src/main.c, src/option.c, src/option.h,
            src/proto/quickfix.pro, src/quickfix.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/test_makeencoding.py,
            src/testdir/test_makeencoding.vim

Patch 8.0.0421
问题:       Diff mode is displayed wrong when adding a line at the end of a
            buffer.
解决方案:   Adjust marks in diff mode. (James McCoy, closes #1329)
相关文件:   src/misc1.c, src/ops.c, src/testdir/test_diffmode.vim

Patch 8.0.0422
问题:       Python test fails with Python 3.6.
解决方案:   Convert new exception messages to old ones. (closes #1359)
相关文件:   src/testdir/test87.in

Patch 8.0.0423
问题:       The effect of adding "#" to 'cinoptions' is not always removed.
            (David Briscoe)
解决方案:   Reset b_ind_hash_comment. (Christian Brabandt, closes #1475)
相关文件:   src/misc1.c, src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_cindent.vim, src/testdir/test3.in

Patch 8.0.0424
问题:       Compiler warnings on MS-Windows. (Ajit Thakkar)
解决方案:   Add type casts.
相关文件:   src/os_win32.c

Patch 8.0.0425
问题:       Build errors when building without folding.
解决方案:   Add #ifdefs. (John Marriott)
相关文件:   src/diff.c, src/edit.c, src/option.c, src/syntax.c

Patch 8.0.0426
问题:       Insufficient testing for statusline.
解决方案:   Add several tests. (Dominique Pelle, closes #1534)
相关文件:   src/testdir/test_statusline.vim

Patch 8.0.0427
问题:       'makeencoding' missing from the options window.
解决方案:   Add the entry.
相关文件:   runtime/optwin.vim

Patch 8.0.0428
问题:       Git and hg see new files after running tests. (Manuel Ortega)
解决方案:   Add the generated file to .hgignore (or .gitignore). Delete the
            resulting verbose file. (Christian Brabandt)  Improve dependency
            on opt_test.vim.  Reset the 'more' option.
相关文件:   .hgignore, src/gen_opt_test.vim, src/testdir/gen_opt_test.vim,
            src/Makefile, src/testdir/Make_all.mak, src/testdir/Makefile,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            Filelist

Patch 8.0.0429
问题:       Options test does not always test everything.
解决方案:   Fix dependency for opt_test.vim.  Give a message when opt_test.vim
            was not found.
相关文件:   src/testdir/test_options.vim, src/testdir/gen_opt_test.vim,
            src/testdir/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.0.0430
问题:       Options test fails or hangs on MS-Windows.
解决方案:   Run it separately instead of part of test_alot.  Use "-S" instead
            of "-u" to run the script.  Fix failures.
相关文件:   src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/Makefile, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/gen_opt_test.vim

Patch 8.0.0431
问题:       'cinoptions' cannot set indent for extern block.
解决方案:   Add the "E" flag in 'cinoptions'. (Hirohito Higashi)
相关文件:   runtime/doc/indent.txt, src/misc1.c, src/structs.h,
            src/testdir/test_cindent.vim

Patch 8.0.0432
问题:       "make shadow" creates an invalid link.
解决方案:   Don't link "*.vim". (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 8.0.0433
问题:       Quite a few beeps when running tests.
解决方案:   Set 'belloff' for these tests. (Christian Brabandt)
相关文件:   src/testdir/test103.in, src/testdir/test14.in,
            src/testdir/test29.in, src/testdir/test30.in,
            src/testdir/test32.in, src/testdir/test45.in,
            src/testdir/test72.in, src/testdir/test73.in,
            src/testdir/test77.in, src/testdir/test78.in,
            src/testdir/test85.in, src/testdir/test94.in,
            src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim,
            src/testdir/test_close_count.in, src/testdir/test_cmdline.vim,
            src/testdir/test_diffmode.vim, src/testdir/test_digraph.vim,
            src/testdir/test_erasebackword.in, src/testdir/test_normal.vim,
            src/testdir/test_packadd.vim, src/testdir/test_search.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_undo.vim,
            src/testdir/test_usercommands.vim, src/testdir/test_visual.vim

Patch 8.0.0434
问题:       Clang version not correctly detected.
解决方案:   Adjust the configure script. (Kazunobu Kuriyama)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.0435
问题:       Some functions are not tested.
解决方案:   Add more tests for functions. (Dominique Pelle, closes #1541)
相关文件:   src/testdir/test_functions.vim

Patch 8.0.0436
问题:       Running the options test sometimes resizes the terminal.
解决方案:   Clear out t_WS.
相关文件:   src/testdir/gen_opt_test.vim

Patch 8.0.0437
问题:       The packadd test does not create the symlink correctly and does
            not test the right thing.
解决方案:   Create the directory and symlink correctly.
相关文件:   src/testdir/test_packadd.vim

Patch 8.0.0438
问题:       The fnamemodify test changes 'shell' in a way later tests may not
            be able to use system().
解决方案:   Save and restore 'shell'.
相关文件:   src/testdir/test_fnamemodify.vim

Patch 8.0.0439
问题:       Using ":%argdel" while the argument list is already empty gives an
            error. (Pavol Juhas)
解决方案:   Don't give an error. (closes #1546)
相关文件:   src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 8.0.0440
问题:       Not enough test coverage in Insert mode.
解决方案:   Add lots of tests.  Add test_override(). (Christian Brabandt,
            closes #1521)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/edit.c,
            src/evalfunc.c, src/globals.h,  src/screen.c,
            src/testdir/Make_all.mak, src/testdir/test_cursor_func.vim,
            src/testdir/test_edit.vim, src/testdir/test_search.vim,
            src/testdir/test_assert.vim, src/Makefile, src/testdir/runtest.vim

Patch 8.0.0441
问题:       Dead code in #ifdef.
解决方案:   Remove the #ifdef and #else part.
相关文件:   src/option.c

Patch 8.0.0442
问题:       Patch shell command uses double quotes around the argument, which
            allows for $HOME to be expanded. (Etienne)
解决方案:   Use single quotes on Unix. (closes #1543)
相关文件:   src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0443
问题:       Terminal width is set to 80 in test3.
解决方案:   Instead of setting 'columns' set 'wrapmargin' depending on
            'columns.
相关文件:   src/testdir/test3.in

Patch 8.0.0444 (after 8.0.0442)
问题:       Diffpatch fails when the file name has a quote.
解决方案:   Escape the name properly. (zetzei)
相关文件:   src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0445
问题:       Getpgid is not supported on all systems.
解决方案:   Add a configure check.
相关文件:   src/configure.ac, src/auto/configure, src/config.h.in,
            src/os_unix.c

Patch 8.0.0446
问题:       The ";" command does not work after characters with a lower byte
            that is NUL.
解决方案:   Properly check for not having a previous character. (Hirohito
            Higashi)
相关文件:   src/Makefile, src/search.c, src/testdir/test_alot_utf8.vim,
            src/testdir/test_charsearch_utf8.vim

Patch 8.0.0447
问题:       Getting font name does not work on X11.
解决方案:   Implement gui_mch_get_fontname() for X11.  Add more GUI tests.
            (Kazunobu Kuriyama)
相关文件:   src/gui_x11.c, src/syntax.c, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Makefile,
            src/testdir/gui_init.vim, src/testdir/gui_preinit.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim,
            Filelist

Patch 8.0.0448
问题:       Some macros are in lower case, which can be confusing.
解决方案:   Make a few lower case macros upper case.
相关文件:   src/macros.h, src/buffer.c, src/charset.c, src/ops.c, src/diff.c,
            src/edit.c, src/evalfunc.c, src/ex_cmds.c, src/ex_getln.c,
            src/fileio.c, src/fold.c, src/gui.c, src/gui_beval.c, src/main.c,
            src/mark.c, src/misc1.c, src/move.c, src/normal.c,
            src/option.c, src/popupmnu.c, src/regexp.c, src/screen.c,
            src/search.c, src/spell.c, src/tag.c, src/ui.c, src/undo.c,
            src/version.c, src/workshop.c, src/if_perl.xs

Patch 8.0.0449 (after 8.0.0448)
问题:       Part of fold patch accidentally included.
解决方案:   Revert that part of the patch.
相关文件:   src/ex_cmds.c

Patch 8.0.0450
问题:       v:progpath is not reliably set.
解决方案:   Read /proc/self/exe if possible. (idea by Michal Grochmal)
            Also fixes missing #if.
相关文件:   src/main.c, src/config.h.in

Patch 8.0.0451
问题:       Some macros are in lower case.
解决方案:   Make a few more macros upper case. Avoid lower case macros use an
            argument twice.
相关文件:   src/macros.h, src/charset.c, src/misc2.c, src/proto/misc2.pro,
            src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/fold.c,
            src/gui.c, src/gui_gtk.c, src/mark.c, src/memline.c, src/mbyte.c,
            src/menu.c, src/message.c, src/misc1.c, src/ops.c, src/option.c,
            src/os_amiga.c, src/os_mswin.c, src/os_unix.c, src/os_win32.c,
            src/popupmnu.c, src/regexp.c, src/regexp_nfa.c, src/screen.c,
            src/search.c, src/spell.c, src/spellfile.c, src/syntax.c,
            src/tag.c, src/ui.c, src/undo.c, src/window.c

Patch 8.0.0452
问题:       Some macros are in lower case.
解决方案:   Make a few more macros upper case.
相关文件:   src/vim.h, src/macros.h, src/evalfunc.c, src/fold.c,
            src/gui_gtk.c, src/gui_gtk_x11.c, src/charset.c, src/diff.c,
            src/edit.c, src/eval.c, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
            src/gui.c, src/gui_w32.c, src/if_cscope.c, src/mbyte.c,
            src/menu.c, src/message.c, src/misc1.c, src/misc2.c, src/normal.c,
            src/ops.c, src/option.c, src/os_unix.c, src/os_win32.c,
            src/quickfix.c, src/regexp.c, src/regexp_nfa.c, src/screen.c,
            src/search.c, src/spell.c, src/syntax.c, src/tag.c, src/userfunc.c

Patch 8.0.0453
问题:       Adding fold marker creates new comment.
解决方案:   Use an existing comment if possible. (LemonBoy, closes #1549)
相关文件:   src/ops.c, src/proto/ops.pro, src/fold.c,
            src/testdir/test_fold.vim

Patch 8.0.0454
问题:       Compiler warnings for comparing unsigned char with 256 always
            being true. (Manuel Ortega)
解决方案:   Add type cast.
相关文件:   src/screen.c, src/charset.c

Patch 8.0.0455
问题:       The mode test may hang in Test_mode(). (Michael Soyka)
解决方案:   Set 'complete' to only search the current buffer (as suggested by
            Michael)
相关文件:   src/testdir/test_functions.vim

Patch 8.0.0456
问题:       Typo in MinGW test makefile.
解决方案:   Change an underscore to a dot. (Michael Soyka)
相关文件:   src/testdir/Make_ming.mak

Patch 8.0.0457
问题:       Using :move messes up manual folds.
解决方案:   Split adjusting marks and folds.  Add foldMoveRange(). (neovim
            patch #6221)
相关文件:   src/ex_cmds.c, src/fold.c, src/mark.c, src/proto/fold.pro,
            src/proto/mark.pro src/testdir/test_fold.vim

Patch 8.0.0458
问题:       Potential crash if adding list or dict to dict fails.
解决方案:   Make sure the reference count is correct. (Nikolai Pavlov, closes
            #1555)
相关文件:   src/dict.c

Patch 8.0.0459 (after 8.0.0457)
问题:       Old fix for :move messing up folding no longer needed, now that we
            have a proper solution.
解决方案:   Revert patch 7.4.700. (Christian Brabandt)
相关文件:   src/ex_cmds.c

Patch 8.0.0460 (after 8.0.0452)
问题:       Can't build on HPUX.
解决方案:   Fix argument names in vim_stat(). (John Marriott)
相关文件:   src/misc2.c

Patch 8.0.0461 (after 8.0.0457)
问题:       Test 45 hangs on MS-Windows.
解决方案:   Reset 'shiftwidth'.  Also remove redundant function.
相关文件:   src/fold.c, src/testdir/test45.in

Patch 8.0.0462
问题:       If an MS-Windows tests succeeds at first and then fails in a way
            it does not produce a test.out file it looks like the test
            succeeded.
解决方案:   Delete the previous output file.
相关文件:   src/testdir/Make_dos.mak

Patch 8.0.0463
问题:       Resetting 'compatible' in defaults.vim has unexpected side
            effects. (David Fishburn)
解决方案:   Only reset 'compatible' if it was set.
相关文件:   runtime/defaults.vim

Patch 8.0.0464
问题:       Can't find executable name on Solaris and FreeBSD.
解决方案:   Check for "/proc/self/path/a.out". (Danek Duvall) And for
            "/proc/curproc/file".
相关文件:   src/config.h.in, src/configure.ac, src/main.c,
            src/auto/configure

Patch 8.0.0465
问题:       Off-by-one error in using :move with folding.
解决方案:   Correct off-by-one mistakes and add more tests. (Matthew
            Malcomson)
相关文件:   src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0466
问题:       There are still a few macros that should be all-caps.
解决方案:   Make a few more macros all-caps.
相关文件:   src/buffer.c, src/edit.c, src/ex_cmds.c, src/ex_cmds2.c,
	    src/ex_docmd.c, src/ex_getln.c, src/farsi.c, src/fileio.c,
	    src/getchar.c, src/gui_beval.c, src/hardcopy.c, src/if_cscope.c,
	    src/if_xcmdsrv.c, src/mark.c, src/memline.c, src/menu.c,
	    src/message.c, src/misc1.c, src/normal.c, src/ops.c, src/option.c,
	    src/quickfix.c, src/screen.c, src/search.c, src/syntax.c,
	    src/tag.c, src/term.c, src/term.h, src/ui.c, src/undo.c,
	    src/userfunc.c, src/version.c, src/vim.h

Patch 8.0.0467
问题:       Using g< after :for does not show the right output. (Marcin
            Szamotulski)
解决方案:   Call msg_sb_eol() in :echomsg.
相关文件:   src/eval.c

Patch 8.0.0468
问题:       After aborting an Ex command g< does not work. (Marcin
            Szamotulski)
解决方案:   Postpone clearing scrollback messages to until the command line
            has been entered.  Also fix that the screen isn't redrawn if after
            g< the command line is cancelled.
相关文件:   src/message.c, src/proto/message.pro, src/ex_getln.c, src/misc2.c,
            src/gui.c

Patch 8.0.0469
问题:       Compiler warnings on MS-Windows.
解决方案:   Add type casts. (Christian Brabandt)
相关文件:   src/fold.c

Patch 8.0.0470
问题:       Not enough testing for help commands.
解决方案:   Add a few more help tests. (Dominique Pelle, closes #1565)
相关文件:   src/testdir/test_help.vim, src/testdir/test_help_tagjump.vim

Patch 8.0.0471
问题:       Exit callback test sometimes fails.
解决方案:   Add it to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0472
问题:       When a test fails and test.log is created, Test_edit_CTRL_I
            matches it instead of test1.in.
解决方案:   Match with runtest.vim instead.
相关文件:   src/testdir/test_edit.vim

Patch 8.0.0473
问题:       No test covering arg_all().
解决方案:   Add a test expanding ##.
相关文件:   src/testdir/test_arglist.vim

Patch 8.0.0474
问题:       The client-server feature is not tested.
解决方案:   Add a test.
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/shared.vim,
            src/testdir/test_clientserver.vim, src/os_mswin.c

Patch 8.0.0475
问题:       Not enough testing for the client-server feature.
解决方案:   Add more tests.  Add the remote_startserver() function.  Fix that
            a locally evaluated expression uses function-local variables.
相关文件:   src/if_xcmdsrv.c, src/evalfunc.c, src/os_mswin.c,
            src/proto/main.pro, src/testdir/test_clientserver.vim,
            runtime/doc/eval.txt

Patch 8.0.0476 (after 8.0.0475)
问题:       Missing change to main.c.
解决方案:   Add new function.
相关文件:   src/main.c

Patch 8.0.0477
问题:       The client-server test may hang when failing.
解决方案:   Set a timer.  Add assert_report()
相关文件:   src/testdir/test_clientserver.vim, src/testdir/runtest.vim,
            src/eval.c, src/evalfunc.c, src/proto/eval.pro, src/if_xcmdsrv.c,
            src/os_mswin.c, runtime/doc/eval.txt

Patch 8.0.0478
问题:       Tests use assert_true(0) and assert_false(1) to report errors.
解决方案:   Use assert_report().
相关文件:   src/testdir/test_cscope.vim, src/testdir/test_expr.vim,
            src/testdir/test_perl.vim, src/testdir/test_channel.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_menu.vim, src/testdir/test_popup.vim,
            src/testdir/test_viminfo.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_assert.vim

Patch 8.0.0479
问题:       remote_peek() is not tested.
解决方案:   Add a test.
相关文件:   src/testdir/test_clientserver.vim, src/testdir/runtest.vim

Patch 8.0.0480
问题:       The remote_peek() test fails on MS-Windows.
解决方案:   Check for pending messages. Also report errors in the first run if
            a flaky test fails twice.
相关文件:   src/os_mswin.c, src/testdir/runtest.vim

Patch 8.0.0481
问题:       Unnecessary if statement.
解决方案:   Remove the statement.  Fix "it's" vs "its" mistakes. (Dominique
            Pelle, closes #1568)
相关文件:   src/syntax.c

Patch 8.0.0482
问题:       The setbufvar() function may mess up the window layout. (Kay Z.)
解决方案:   Do not check the window to be valid if it is NULL.
相关文件:   src/window.c, src/testdir/test_functions.vim

Patch 8.0.0483
问题:       Illegal memory access when using :all. (Dominique Pelle)
解决方案:   Adjust the cursor position right after setting "curwin".
相关文件:   src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0484
问题:       Using :lhelpgrep with an argument that should fail does not
            produce an error if the previous :helpgrep worked.
解决方案:   Use another way to detect that autocommands made the quickfix info
            invalid. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0485
问题:       Not all windows commands are tested.
解决方案:   Add more tests for windows commands. (Dominique Pelle,
            closes #1575) Run test_autocmd separately, it interferes with
            other tests.  Fix tests that depended on side effects.
相关文件:   src/testdir/test_window_cmd.vim, src/testdir/test_alot.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_fnamemodify.vim,
            src/testdir/test_functions.vim, src/testdir/test_delete.vim,
            src/testdir/Make_all.mak

Patch 8.0.0486
问题:       Crash and endless loop when closing windows in a SessionLoadPost
            autocommand.
解决方案:   Check for valid tabpage.  (partly neovim #6308)
相关文件:   src/testdir/test_autocmd.vim, src/fileio.c, src/proto/window.pro,
            src/window.c

Patch 8.0.0487
问题:       The autocmd test hangs on MS-Windows.
解决方案:   Skip the hanging tests for now.
相关文件:   src/testdir/test_autocmd.vim

Patch 8.0.0488
问题:       Running tests leaves an "xxx" file behind.
解决方案:   Delete the 'verbosefile' after resetting the option.
相关文件:   src/testdir/gen_opt_test.vim

Patch 8.0.0489
问题:       Clipboard and "* register is not tested.
解决方案:   Add a test for Mac and X11. (Kazunobu Kuriyama)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/test_quotestar.vim, src/testdir/runtest.vim

Patch 8.0.0490
问题:       Splitting a 'winfixwidth' window vertically makes it one column
            smaller. (Dominique Pelle)
解决方案:   Add one to the width for the separator.
相关文件:   src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0491
问题:       The quotestar test fails when a required feature is missing.
解决方案:   Prepend "Skipped" to the thrown exception.
相关文件:   src/testdir/test_quotestar.vim

Patch 8.0.0492
问题:       A failing client-server request can make Vim hang.
解决方案:   Add a timeout argument to functions that wait.
相关文件:   src/evalfunc.c, src/if_xcmdsrv.c, src/proto/if_xcmdsrv.pro,
            src/main.c, src/os_mswin.c, src/proto/os_mswin.pro,
            src/vim.h, runtime/doc/eval.txt, src/testdir/test_clientserver.vim

Patch 8.0.0493
问题:       Crash with cd command with very long argument.
解决方案:   Check for running out of space. (Dominique Pelle, closes #1576)
相关文件:   src/testdir/test_alot.vim, src/testdir/test_cd.vim, src/Makefile,
            src/misc2.c

Patch 8.0.0494
问题:       Build failure with older compiler on MS-Windows.
解决方案:   Move declaration to start of block.
相关文件:   src/evalfunc.c, src/main.c, src/os_mswin.c

Patch 8.0.0495
问题:       The quotestar test uses a timer instead of a timeout, thus it
            cannot be rerun like a flaky test.
解决方案:   Remove the timer and add a timeout. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_quotestar.vim

Patch 8.0.0496
问题:       Insufficient testing for folding.
解决方案:   Add a couple more fold tests. (Dominique Pelle, closes #1579)
相关文件:   src/testdir/test_fold.vim

Patch 8.0.0497
问题:       Arabic support is not fully tested.
解决方案:   Add more tests for the untested functions.  Comment out
            unreachable code.
相关文件:   src/arabic.c, src/testdir/test_arabic.vim

Patch 8.0.0498
问题:       Two autocmd tests are skipped on MS-Windows.
解决方案:   Make the test pass on MS-Windows. Write the messages in a file
            instead of getting the output of system().
相关文件:   src/testdir/test_autocmd.vim

Patch 8.0.0499
问题:       taglist() does not prioritize tags for a buffer.
解决方案:   Add an optional buffer argument. (Duncan McDougall, closes #1194)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/proto/tag.pro,
            src/Makefile, src/tag.c, src/testdir/test_alot.vim,
            src/testdir/test_taglist.vim

Patch 8.0.0500
问题:       Quotestar test is still a bit flaky.
解决方案:   Add a slower check for v:version.
相关文件:   src/testdir/test_quotestar.vim

Patch 8.0.0501
问题:       On MS-Windows ":!start" does not work as expected.
解决方案:   When creating a process fails try passing the argument to
            ShellExecute().  (Katsuya Hino, closes #1570)
相关文件:   runtime/doc/os_win32.txt, src/os_win32.c

Patch 8.0.0502
问题:       Coverity complains about possible NULL pointer.
解决方案:   Add an assert(), let's see if this works on all systems.
相关文件:   src/window.c

Patch 8.0.0503
问题:       Endless loop in updating folds with 32 bit ints.
解决方案:   Subtract from LHS instead of add to the RHS. (Matthew Malcomson)
相关文件:   src/fold.c

Patch 8.0.0504
问题:       Looking up an Ex command is a bit slow.
解决方案:   Instead of just using the first letter, also use the second letter
            to skip ahead in the list of commands. Generate the table with a
            Perl script. (Dominique Pelle, closes #1589)
相关文件:   src/Makefile, src/create_cmdidxs.pl, src/ex_docmd.c, Filelist

Patch 8.0.0505
问题:       Failed window split for :stag not handled. (Coverity CID 99204)
解决方案:   If the split fails skip to the end. (bstaletic, closes #1577)
相关文件:   src/tag.c

Patch 8.0.0506 (after 8.0.0504)
问题:       Can't build with ANSI C.
解决方案:   Move declarations to start of block.
相关文件:   src/ex_docmd.c

Patch 8.0.0507
问题:       Client-server tests fail when $DISPLAY is not set.
解决方案:   Check for E240 before running the test.
相关文件:   src/testdir/test_quotestar.vim, src/testdir/test_clientserver.vim

Patch 8.0.0508
问题:       Coveralls no longer shows per-file coverage.
解决方案:   Add coverage from codecov.io. (Christian Brabandt)
相关文件:   .travis.yml

Patch 8.0.0509
问题:       No link to codecov.io results.
解决方案:   Add a badge to the readme file.
相关文件:   README.md

Patch 8.0.0510 (after 8.0.0509)
问题:       Typo in link to codecov.io results.
解决方案:   Remove duplicate https:.
相关文件:   README.md

Patch 8.0.0511
问题:       Message for skipping client-server tests is unclear.
解决方案:   Be more specific about what's missing (Hirohito Higashi, Kazunobu
            Kuriyama)
相关文件:   src/testdir/test_quotestar.vim, src/testdir/test_clientserver.vim

Patch 8.0.0512
问题:       Check for available characters takes too long.
解决方案:   Only check did_start_blocking if wtime is negative. (Daisuke
            Suzuki, closes #1591)
相关文件:   src/os_unix.c

Patch 8.0.0513 (after 8.0.0201)
问题:       Getting name of cleared highlight group is wrong. (Matt Wozniski)
解决方案:   Only skip over cleared names for completion. (closes #1592)
            Also fix that a cleared group causes duplicate completions.
相关文件:   src/syntax.c, src/proto/syntax.pro, src/evalfunc.c,
            src/ex_cmds.c, src/testdir/test_syntax.vim,
            src/testdir/test_cmdline.vim

Patch 8.0.0514
问题:       Script for creating cmdidxs can be improved.
解决方案:   Count skipped lines instead of collecting the lines.  Add "const".
            (Dominique Pelle, closes #1594)
相关文件:   src/create_cmdidxs.pl, src/ex_docmd.c

Patch 8.0.0515
问题:       ml_get errors in silent Ex mode. (Dominique Pelle)
解决方案:   Clear valid flags when setting the cursor.  Set the topline when
            not in full screen mode.
相关文件:   src/ex_docmd.c, src/move.c, src/testdir/test_startup.vim

Patch 8.0.0516
问题:       A large count on a normal command causes trouble. (Dominique
            Pelle)
解决方案:   Make "opcount" long.
相关文件:   src/globals.h, src/testdir/test_normal.vim

Patch 8.0.0517
问题:       There is no way to remove quickfix lists (for testing).
解决方案:   Add the 'f' action to setqflist(). Add tests. (Yegappan
            Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0518
问题:       Storing a zero byte from a multi-byte character causes fold text
            to show up wrong.
解决方案:   Avoid putting zero in ScreenLines. (Christian Brabandt,
            closes #1567)
相关文件:   src/screen.c, src/testdir/test_display.vim

Patch 8.0.0519
问题:       Character classes are not well tested. They can differ between
            platforms.
解决方案:   Add tests.  In the documentation make clear which classes depend
            on what library function.  Only use :cntrl: and :graph: for ASCII.
            (Kazunobu Kuriyama, Dominique Pelle, closes #1560)
            Update the documentation.
相关文件:   src/regexp.c, src/regexp_nfa.c, runtime/doc/pattern.txt,
            src/testdir/test_regexp_utf8.vim

Patch 8.0.0520
问题:       Using a function pointer instead of the actual function, which we
            know.
解决方案:   Change mb_ functions to utf_ functions when already checked for
            Unicode. (Dominique Pelle, closes #1582)
相关文件:   src/message.c, src/misc2.c, src/regexp.c, src/regexp_nfa.c,
            src/screen.c, src/spell.c

Patch 8.0.0521
问题:       GtkForm handling is outdated.
解决方案:   Get rid of event filter functions.  Get rid of GtkForm.width and
            .height.  Eliminate gtk_widget_size_request() calls. (Kazunobu
            Kuriyama)
相关文件:   src/gui_gtk_f.c, src/gui_gtk_f.h

Patch 8.0.0522
问题:       MS-Windows: when 'clipboard' is "unnamed" yyp does not work in a
            :global command.
解决方案:   When setting the clipboard was postponed, do not clear the
            register.
相关文件:   src/ops.c, src/proto/ui.pro, src/ui.c, src/globals.h,
            src/testdir/test_global.vim, src/Makefile,
            src/testdir/test_alot.vim

Patch 8.0.0523
问题:       dv} deletes part of a multi-byte character. (Urtica Dioica)
解决方案:   Include the whole character.
相关文件:   src/search.c, src/testdir/test_normal.vim

Patch 8.0.0524 (after 8.0.0518)
问题:       Folds are messed up when 'encoding' is "utf-8".
解决方案:   Also set the fold character when it's not multi-byte.
相关文件:   src/screen.c, src/testdir/test_display.vim

Patch 8.0.0525
解决方案:   Completion for user command argument not tested.
问题:       Add a test.
相关文件:   src/testdir/test_cmdline.vim

Patch 8.0.0526
问题:       Coverity complains about possible negative value.
解决方案:   Check return value of ftell() not to be negative.
相关文件:   src/os_unix.c

Patch 8.0.0527
问题:       RISC OS support was removed long ago, but one file is still
            included.
解决方案:   Delete the file. (Thomas Dziedzic, closes #1603)
相关文件:   Filelist, src/swis.s

Patch 8.0.0528
问题:       When 'wildmenu' is set and 'wildmode' has "longest" then the first
            file name is highlighted, even though the text shows the longest
            match.
解决方案:   Do not highlight the first match. (LemonBoy, closes #1602)
相关文件:   src/ex_getln.c

Patch 8.0.0529
问题:       Line in test commented out.
解决方案:   Uncomment the lines for character classes that were failing before
            8.0.0519. (Dominique Pelle, closes #1599)
相关文件:   src/testdir/test_regexp_utf8.vim

Patch 8.0.0530
问题:       Buffer overflow when 'columns' is very big. (Nikolai Pavlov)
解决方案:   Correctly compute where to truncate.  Fix translation.
            (closes #1600)
相关文件:   src/edit.c, src/testdir/test_edit.vim

Patch 8.0.0531 (after 8.0.0530)
问题:       Test with long directory name fails on non-unix systems.
解决方案:   Skip the test on non-unix systems.
相关文件:   src/testdir/test_edit.vim

Patch 8.0.0532 (after 8.0.0531)
问题:       Test with long directory name fails on Mac.
解决方案:   Skip the test on Mac systems.
相关文件:   src/testdir/test_edit.vim

Patch 8.0.0533
问题:       Abbreviation doesn't work after backspacing newline. (Hkonrk)
解决方案:   Set the insert start column. (closes #1609)
相关文件:   src/testdir/test_mapping.vim, src/edit.c

Patch 8.0.0534
问题:       Defaults.vim does not work well with tiny features. (crd477)
解决方案:   When the +eval feature is not available always reset 'compatible'.
相关文件:   runtime/defaults.vim

Patch 8.0.0535
问题:       Memory leak when exiting from within a user function.
解决方案:   Clear the function call stack on exit.
相关文件:   src/userfunc.c

Patch 8.0.0536
问题:       Quickfix window not updated when freeing quickfix stack.
解决方案:   Update the quickfix window. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0537
问题:       Illegal memory access with :z and large count.
解决方案:   Check for number overflow, using long instead of int. (Dominique
            Pelle, closes #1612)
相关文件:   src/Makefile, src/ex_cmds.c, src/testdir/test_alot.vim,
            src/testdir/test_ex_z.vim

Patch 8.0.0538
问题:       No test for falling back to default term value.
解决方案:   Add a test.
相关文件:   src/testdir/test_startup.vim

Patch 8.0.0539 (after 8.0.0538)
问题:       Startup test fails on Mac.
解决方案:   Use another term name, "unknown" is known. Avoid a 2 second delay.
相关文件:   src/testdir/test_startup.vim, src/main.c, src/proto/main.pro,
            src/term.c

Patch 8.0.0540 (after 8.0.0540)
问题:       Building unit tests fails.
解决方案:   Move params outside of #ifdef.
相关文件:   src/main.c, src/message_test.c

Patch 8.0.0541
问题:       Compiler warning on MS-Windows.
解决方案:   Add a type cast. (Mike Williams)
相关文件:   src/edit.c

Patch 8.0.0542
问题:       getpos() can return a negative line number. (haya14busa)
解决方案:   Handle a zero topline and botline. (closes #1613)
相关文件:   src/eval.c, runtime/doc/eval.txt

Patch 8.0.0543
问题:       Test_edit causes older xfce4-terminal to close. (Dominique Pelle)
解决方案:   Reduce number of columns to 2000.  Try to restore the window
            position.
相关文件:   src/testdir/test_edit.vim, src/evalfunc.c, src/term.c,
            src/proto/term.pro, src/term.h

Patch 8.0.0544
问题:       Cppcheck warnings.
解决方案:   Use temp variable. Change NUL to NULL. Swap conditions. (Dominique
            Pelle)
相关文件:   src/channel.c, src/edit.c, src/farsi.c

Patch 8.0.0545
问题:       Edit test may fail on some systems.
解决方案:   If creating a directory with a very long path fails, bail out.
相关文件:   src/testdir/test_edit.vim

Patch 8.0.0546
问题:       Swap file exists briefly when opening the command window.
解决方案:   Set the noswapfile command modifier before splitting the window.
            (James McCoy, closes #1620)
相关文件:   src/ex_getln.c, src/option.c

Patch 8.0.0547
问题:       Extra line break in verbosefile when using ":echomsg". (Ingo
            Karkat)
解决方案:   Don't call msg_start(). (closes #1618)
相关文件:   src/eval.c, src/testdir/test_cmdline.vim

Patch 8.0.0548
问题:       Saving the redo buffer only works one time, resulting in the "."
            command not working well for a function call inside another
            function call. (Ingo Karkat)
解决方案:   Save the redo buffer at every user function call. (closes #1619)
相关文件:   src/getchar.c, src/proto/getchar.pro, src/structs.h,
            src/fileio.c, src/userfunc.c, src/testdir/test_functions.vim

Patch 8.0.0549
问题:       No test for the 8g8 command.
解决方案:   Add a test. (Dominique Pelle, closes #1615)
相关文件:   src/testdir/test_normal.vim

Patch 8.0.0550
问题:       Some etags format tags file use 0x01, breaking the parsing.
解决方案:   Use 0x02 for TAG_SEP. (James McCoy, closes #1614)
相关文件:   src/tag.c, src/testdir/test_taglist.vim

Patch 8.0.0551
问题:       The typeahead buffer is reallocated too often.
解决方案:   Re-use the existing buffer if possible.
相关文件:   src/getchar.c

Patch 8.0.0552
问题:       Toupper and tolower don't work properly for Turkish when 'casemap'
            is empty. (Bjorn Linse)
解决方案:   Check the 'casemap' options when deciding how to upper/lower case.
相关文件:   src/charset.c, src/testdir/test_normal.vim

Patch 8.0.0553 (after 8.0.0552)
问题:       Toupper/tolower test with Turkish locale fails on Mac.
解决方案:   Skip the test on Mac.
相关文件:   src/testdir/test_normal.vim

Patch 8.0.0554 (after 8.0.0552)
问题:       Toupper and tolower don't work properly for Turkish when 'casemap'
            contains "keepascii". (Bjorn Linse)
解决方案:   When 'casemap' contains "keepascii" use ASCII toupper/tolower.
相关文件:   src/charset.c, src/testdir/test_normal.vim

Patch 8.0.0555 (after 8.0.0552)
问题:       Toupper/tolower test fails on OSX without Darwin.
解决方案:   Skip that part of the test also for OSX. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_normal.vim

Patch 8.0.0556
问题:       Getting the window position fails if both the GUI and term
            code is built in.
解决方案:   Return after getting the GUI window position. (Kazunobu Kuriyama)
相关文件:   src/evalfunc.c

Patch 8.0.0557
问题:       GTK: using static gravities is not useful.
解决方案:   Remove setting static gravities. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_f.c

Patch 8.0.0558
问题:       The :ownsyntax command is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #1622)
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0559
问题:       Setting 'ttytype' to xxx does not always fail as expected. (Marvin
            Schmidt)
解决方案:   Catch both possible errors. (closes #1601)
相关文件:   src/testdir/test_options.vim

Patch 8.0.0560
问题:       :windo allows for ! but it's not supported.
解决方案:   Disallow passing !. (Hirohito Higashi)
相关文件:   src/ex_cmds.h

Patch 8.0.0561
问题:       Undefined behavior when using backslash after empty line.
解决方案:   Check for an empty line. (Dominique Pelle, closes #1631)
相关文件:   src/misc2.c, src/testdir/test_vimscript.vim

Patch 8.0.0562
问题:       Not enough test coverage for syntax commands.
解决方案:   Add a few more tests. (Dominique Pelle, closes #1624)
相关文件:   src/testdir/test_cmdline.vim, src/testdir/test_syntax.vim

Patch 8.0.0563
问题:       Crash when getting the window position in tmux. (Marvin Schmidt)
解决方案:   Add t_GP to the list of terminal options. (closes #1627)
相关文件:   src/option.c

Patch 8.0.0564
问题:       Cannot detect Bazel BUILD files on some systems.
解决方案:   Check for BUILD after script checks. (Issue #1340)
相关文件:   runtime/filetype.vim

Patch 8.0.0565
问题:       Using freed memory in :caddbuf after clearing quickfix list.
            (Dominique Pelle)
解决方案:   Set qf_last to NULL.
相关文件:   src/quickfix.c

Patch 8.0.0566
问题:       Setting 'nocompatible' for the tiny version moves the cursor.
解决方案:   Use another trick to skip commands when the +eval feature is
            present. (Christian Brabandt, closes #1630)
相关文件:   runtime/defaults.vim

Patch 8.0.0567
问题:       Call for requesting color and ambiwidth is too early. (Hirohito
            Higashi)
解决方案:   Move the call down to below resetting "starting".
相关文件:   src/main.c

Patch 8.0.0568
问题:       "1gd" may hang.
解决方案:   Don't get stuck in one position. (Christian Brabandt, closes #1643)
相关文件:   src/testdir/test_goto.vim, src/normal.c

Patch 8.0.0569
问题:       Bracketed paste is still enabled when executing a shell command.
            (Michael Smith)
解决方案:   Disable bracketed paste when going into cooked mode. (closes #1638)
相关文件:   src/term.c

Patch 8.0.0570
问题:       Can't run make with several jobs, creating directories has a race
            condition.
解决方案:   Use the MKDIR_P autoconf mechanism. (Eric N. Vander Weele,
            closes #1639)
相关文件:   src/configure.ac, src/auto/configure, src/Makefile,
            src/config.mk.in, src/install-sh, src/mkinstalldirs, Filelist

Patch 8.0.0571
问题:       The cursor line number becomes negative when using :z^ in an empty
            buffer. (neovim #6557)
解决方案:   Correct the line number.  Also reset the column.
相关文件:   src/testdir/test_ex_z.vim, src/ex_cmds.c

Patch 8.0.0572
问题:       Building the command table requires Perl.
解决方案:   Use a Vim script solution. (Dominique Pelle, closes #1641)
相关文件:   src/Makefile, src/create_cmdidxs.pl, src/create_cmdidxs.vim,
            src/ex_cmdidxs.h, src/ex_docmd.c, Filelist

Patch 8.0.0573
问题:       Running parallel make after distclean fails. (Manuel Ortega)
解决方案:   Instead of using targets "scratch config myself" use "reconfig".
相关文件:   src/Makefile, src/config.mk.dist

Patch 8.0.0574
问题:       Get only one quickfix list after :caddbuf.
解决方案:   Reset qf_multiline. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0575
问题:       Using freed memory when resetting 'indentexpr' while evaluating
            it. (Dominique Pelle)
解决方案:   Make a copy of 'indentexpr'.
相关文件:   src/misc1.c, src/testdir/test_options.vim

Patch 8.0.0576 (after 8.0.0570 and 8.0.0573)
问题:       Can't build when configure chooses "install-sh". (Daniel Hahler)
解决方案:   Always use install-sh.  Fix remaining use of mkinstalldirs.
            (closes #1647)
相关文件:   src/installman.sh, src/installml.sh, src/config.mk.in,
            src/configure.ac, src/auto/configure, src/Makefile

Patch 8.0.0577 (after 8.0.0575)
问题:       Warning for uninitialized variable. (John Marriott)
解决方案:   Initialize "indent".
相关文件:   src/misc1.c

Patch 8.0.0578
问题:       :simalt on MS-Windows does not work properly.
解决方案:   Put something in the typeahead buffer. (Christian Brabandt)
相关文件:   src/gui_w32.c

Patch 8.0.0579
问题:       Duplicate test case for quickfix.
解决方案:   Remove the function. (Yegappan Lakshmanan)
相关文件:   src/testdir/test_quickfix.vim

Patch 8.0.0580
问题:       Cannot set the valid flag with setqflist().
解决方案:   Add the "valid" argument. (Yegappan Lakshmanan, closes #1642)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0581
问题:       Moving folded text is sometimes not correct.
解决方案:   Bail out when "move_end" is zero. (Matthew Malcomson)
相关文件:   src/fold.c, src/testdir/test_fold.vim

Patch 8.0.0582
问题:       Illegal memory access with z= command. (Dominique Pelle)
解决方案:   Avoid case folded text to be longer than the original text.  Use
            MB_PTR2LEN() instead of MB_BYTE2LEN().
相关文件:   src/spell.c, src/testdir/test_spell.vim

Patch 8.0.0583
问题:       Fold test hangs on MS-Windows.
解决方案:   Avoid overflow in compare.
相关文件:   src/fold.c

Patch 8.0.0584
问题:       Memory leak when executing quickfix tests.
解决方案:   Free the list reference. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.0585
问题:       Test_options fails when run in the GUI.
解决方案:   Also check the 'imactivatekey' value when the GUI is not running.
            Specify test values that work and that fail.
相关文件:   src/option.c, src/testdir/gen_opt_test.vim

Patch 8.0.0586
问题:       No test for mapping timing out.
解决方案:   Add a test.
相关文件:   src/testdir/test_mapping.vim

Patch 8.0.0587
问题:       Configure check for return value of tgetent is skipped.
解决方案:   Always perform the check. (Marvin Schmidt, closes #1664)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.0588
问题:       job_stop() often assumes the channel will be closed, while the job
            may not actually be stopped. (Martin Gammelsæter)
解决方案:   Only assume the job stops on "kill".  Don't send a signal if the
            job has already ended. (closes #1632)
相关文件:   src/channel.c

Patch 8.0.0589 (after 8.0.0578)
问题:       :simalt still does not work.
解决方案:   Use K_NOP instead of K_IGNORE. (Christian Brabandt)
相关文件:   src/gui_w32.c

Patch 8.0.0590
问题:       Cannot add a context to locations.
解决方案:   Add the "context" entry in location entries. (Yegappan Lakshmanan,
            closes #1012)
相关文件:   src/eval.c, src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0591
问题:       Changes to eval functionality not documented.
解决方案:   Include all the changes.
相关文件:   runtime/doc/eval.txt

Patch 8.0.0592
问题:       If a job writes to a buffer and the user is typing a command, the
            screen isn't updated. When a message is displayed the changed
            buffer may cause it to be cleared. (Ramel Eshed)
解决方案:   Update the screen and then the command line if the screen didn't
            scroll. Avoid inserting screen lines, as it clears any message.
            Update the status line when the buffer changed.
相关文件:   src/channel.c, src/screen.c, src/ex_getln.c, src/globals.h,
            src/vim.h, src/proto/ex_getln.pro, src/proto/screen.pro

Patch 8.0.0593
问题:       Duplication of code for adding a list or dict return value.
解决方案:   Add rettv_dict_set() and rettv_list_set(). (Yegappan Lakshmanan)
相关文件:   src/dict.c, src/eval.c, src/evalfunc.c, src/if_perl.xs, src/list.c,
            src/proto/dict.pro, src/proto/list.pro

Patch 8.0.0594 (after 8.0.0592)
问题:       Build failure when windows feature is missing.
解决方案:   Add #ifdef.
相关文件:   src/screen.c

Patch 8.0.0595 (after 8.0.0590)
问题:       Coverity warning for not checking return value of dict_add().
解决方案:   Check the return value for FAIL.
相关文件:   src/quickfix.c

Patch 8.0.0596
问题:       Crash when complete() is called after complete_add() in
            'completefunc'. (Lifepillar)
解决方案:   Bail out if compl_pattern is NULL. (closes #1668)
            Also avoid using freed memory.
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0597
问题:       Off-by-one error in buffer size computation.
解决方案:   Use ">=" instead of ">". (LemonBoy, closes #1694)
相关文件:   src/quickfix.c

Patch 8.0.0598
问题:       Building with gcc 7.1 yields new warnings.
解决方案:   Initialize result. (John Marriott)
相关文件:   src/ex_docmd.c

Patch 8.0.0599
问题:       diff mode is insufficiently tested
解决方案:   Add more test cases. (Dominique Pelle, closes #1685)
相关文件:   src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.0600
问题:       test_recover fails on some systems.
解决方案:   Explicitly check if "/" is writable. (Ken Takata)
相关文件:   src/testdir/test_recover.vim

Patch 8.0.0601
问题:       No test coverage for :spellrepall.
解决方案:   Add a test. (Dominique Pelle, closes #1717)
相关文件:   src/testdir/test_spell.vim

Patch 8.0.0602
问题:       When gF fails to edit the file the cursor still moves to the found
            line number.
解决方案:   Check the return value of do_ecmd(). (Michael Hwang)
相关文件:   src/normal.c, src/testdir/test_gf.vim

Patch 8.0.0603 (after 8.0.0602)
问题:       gF test fails on MS-Windows.
解决方案:   Use @ instead of : before the line number
相关文件:   src/testdir/test_gf.vim

Patch 8.0.0604 (after 8.0.0603)
问题:       gF test still fails on MS-Windows.
解决方案:   Use : before the line number and remove it from 'isfname'.
相关文件:   src/testdir/test_gf.vim

Patch 8.0.0605
问题:       The buffer that quickfix caches for performance may become
            invalid. (Daniel Hahler)
解决方案:   Reset qf_last_bufref in qf_init_ext(). (Daniel Hahler,
            closes #1728, closes #1676)
相关文件:   src/quickfix.c

Patch 8.0.0606
问题:       Cannot set the context for a specified quickfix list.
解决方案:   Use the list index instead of the current list. (Yegappan
            Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.0607
问题:       When creating a bufref, then using :bwipe and :new it might get
            the same memory and bufref_valid() returns true.
解决方案:   Add br_fnum to check the buffer number didn't change.
相关文件:   src/structs.h, src/buffer.c, src/globals.h, src/if_py_both.h,
            src/quickfix.c

Patch 8.0.0608
问题:       Cannot manipulate other than the current quickfix list.
解决方案:   Pass the list index to quickfix functions. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.0609
问题:       For some people the hint about quitting is not sufficient.
解决方案:   Put <Enter> separately.  Also use ":qa!" to get out even when
            there are changes.
相关文件:   src/normal.c

Patch 8.0.0610
问题:       The screen is redrawn when t_BG is set and used to detect the
            value for 'background'.
解决方案:   Don't redraw when the value of 'background' didn't change.
相关文件:   src/term.c

Patch 8.0.0611
问题:       When t_u7 is sent a few characters in the second screen line are
            overwritten and not redrawn later. (Rastislav Barlik)
解决方案:   Move redrawing the screen to after overwriting the characters.
相关文件:   src/main.c, src/term.c

Patch 8.0.0612
问题:       Package directories are added to 'runtimepath' only after loading
            non-package plugins.
解决方案:   Split off the code to add package directories to 'runtimepath'.
            (Ingo Karkat, closes #1680)
相关文件:   src/ex_cmds2.c, src/globals.h, src/main.c, src/proto/ex_cmds2.pro,
            src/testdir/test_startup.vim

Patch 8.0.0613
问题:       The conf filetype detection is done before ftdetect scripts from
            packages that are added later.
解决方案:   Add the FALLBACK argument to :setfiletype. (closes #1679,
            closes #1693)
相关文件:   src/ex_docmd.c, runtime/filetype.vim, src/Makefile,
            src/testdir/test_filetype.vim, src/testdir/test_alot.vim

Patch 8.0.0614
问题:       float2nr() is not exactly right.
解决方案:   Make float2nr() more accurate.  Turn test65 into a new style test.
            (Hirohito Higashi, closes #1688)
相关文件:   src/Makefile, src/evalfunc.c, src/testdir/Make_all.mak,
            src/testdir/Make_vms.mms, src/testdir/test65.in,
            src/testdir/test65.ok, src/testdir/test_float_func.vim,
            src/testdir/test_vimscript.vim, src/macros.h

Patch 8.0.0615
问题:       Using % with :hardcopy wrongly escapes spaces. (Alexey Muranov)
解决方案:   Expand % differently. (Christian Brabandt, closes #1682)
相关文件:   src/ex_docmd.c, src/testdir/test_hardcopy.vim


Patch 8.0.0616
问题:       When setting the cterm background with ":hi Normal" the value of
            'background' may be set wrongly.
解决方案:   Check that the color is less than 16.  Don't set 'background' when
            it was set explicitly. (LemonBoy, closes #1710)
相关文件:   src/syntax.c, src/testdir/test_syntax.vim

Patch 8.0.0617 (after 8.0.0615)
问题:       Hardcopy test hangs on MS-Windows.
解决方案:   Check the postscript feature is supported.
相关文件:   src/testdir/test_hardcopy.vim

Patch 8.0.0618
问题:       NFA regex engine handles [0-z] incorrectly.
解决方案:   Return at the right point. (James McCoy, closes #1703)
相关文件:   src/regexp_nfa.c, src/testdir/test36.in, src/testdir/test36.ok

Patch 8.0.0619
问题:       In the GUI, when a timer uses feedkeys(), it still waits for an
            event. (Raymond Ko)
解决方案:   Check tb_change_cnt in one more place.
相关文件:   src/gui.c

Patch 8.0.0620
问题:       Since we only support GTK versions that have it, the check for
            HAVE_GTK_MULTIHEAD is no longer needed.
解决方案:   Remove HAVE_GTK_MULTIHEAD. (Kazunobu Kuriyama)
相关文件:   src/config.h.in, src/configure.ac, src/auto/configure,
            src/gui_beval.c, src/gui_gtk_x11.c, src/mbyte.c

Patch 8.0.0621
问题:       The ":stag" command does not respect 'switchbuf'.
解决方案:   Check 'switchbuf' for tag commands that may open a new window.
            (Ingo Karkat, closes #1681)  Define macros for the return values
            of getfile().
相关文件:   src/tag.c, src/testdir/test_tagjump.vim, src/vim.h, src/buffer.c,
            src/ex_cmds.c, src/search.c,

Patch 8.0.0622
问题:       Using a text object to select quoted text fails when 'selection'
            is set to "exclusive". (Guraga)
解决方案:   Swap cursor and visual start position. (Christian Brabandt,
            closes #1687)
相关文件:   src/search.c, src/testdir/test_textobjects.vim

Patch 8.0.0623
问题:       The message "Invalid range" is used for multiple errors.
解决方案:   Add two more specific error messages. (Itchyny, Ken Hamada)
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test_regexp_utf8.vim

Patch 8.0.0624 (after 8.0.0623)
问题:       Warning for unused variable in tiny build. (Tony Mechelynck)
解决方案:   Add an #ifdef.
相关文件:   src/regexp.c

Patch 8.0.0625
问题:       shellescape() always escapes a newline, which does not work with
            some shells. (Harm te Hennepe)
解决方案:   Only escape a newline when the "special" argument is non-zero.
            (Christian Brabandt, closes #1590)
相关文件:   src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.0.0626
问题:       In the GUI the cursor may flicker.
解决方案:   Check the cmd_silent flag before updating the cursor shape.
            (Hirohito Higashi, closes #1637)
相关文件:   src/getchar.c

Patch 8.0.0627
问题:       When 'wrapscan' is off "gn" does not select the whole pattern when
            it's the last one in the text. (KeyboardFire)
解决方案:   Check if the search fails. (Christian Brabandt, closes #1683)
相关文件:   src/search.c, src/testdir/test_gn.vim

Patch 8.0.0628 (after 8.0.0626
问题:       Cursor disappears after silent mapping. (Ramel Eshed)
解决方案:   Do restore the cursor when it was changed, but don't change it in
            the first place for a silent mapping.
相关文件:   src/getchar.c


Patch 8.0.0629 (after 8.0.0611)
问题:       Checking for ambiguous width is not working. (Hirohito Higashi)
解决方案:   Reset "starting" earlier.
相关文件:   src/main.c

Patch 8.0.0630
问题:       The :global command does not work recursively, which makes it
            difficult to execute a command on a line where one pattern matches
            and another does not match. (Miles Cranmer)
解决方案:   Allow for recursion if it is for only one line. (closes #1760)
相关文件:   src/ex_cmds.c, src/testdir/test_global.vim, runtime/doc/repeat.txt

Patch 8.0.0631
问题:       Perl 5.26 also needs S_TOPMARK and S_POPMARK defined.
解决方案:   Define the functions when needed. (Jesin, closes #1748)
相关文件:   src/if_perl.xs

Patch 8.0.0632
问题:       The quotestar test is still a bit flaky.
解决方案:   Kill any existing server to make the retry work.  Wait for the
            register to be filled.
相关文件:   src/testdir/test_quotestar.vim

Patch 8.0.0633
问题:       The client-server test is still a bit flaky.
解决方案:   Wait a bit for the GUI to start.  Check that the version number
            can be obtained.
相关文件:   src/testdir/test_clientserver.vim

Patch 8.0.0634
问题:       Cannot easily get to the last quickfix list.
解决方案:   Add "$" as a value for the "nr" argument of getqflist() and
            setqflist(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0635
问题:       When 'ignorecase' is set script detection is inaccurate.
解决方案:   Enforce matching case for text. (closes #1753)
相关文件:   runtime/scripts.vim

Patch 8.0.0636
问题:       When reading the undo file fails may use uninitialized data.
解决方案:   Always clear the buffer on failure.
相关文件:   src/undo.c

Patch 8.0.0637
问题:       Crash when using some version of GTK 3.
解决方案:   Add #ifdefs around incrementing the menu index. (Kazunobu
            Kuriyama)
相关文件:   src/gui_gtk.c

Patch 8.0.0638
问题:       Cannot build with new MSVC version VS2017.
解决方案:   Change the compiler arguments. (Leonardo Valeri Manera,
	    closes #1731, closes #1747)
相关文件:   src/GvimExt/Makefile, src/Make_mvc.mak

Patch 8.0.0639
问题:       The cursor position is set to the last position in a new commit
            message.
解决方案:   Don't set the position if the filetype matches "commit".
            (Christian Brabandt)
相关文件:   runtime/defaults.vim

Patch 8.0.0640
问题:       Mismatch between help and actual message for ":syn conceal".
解决方案:   Change the message to match the help. (Ken Takata)
相关文件:   src/syntax.c

Patch 8.0.0641
问题:       Cannot set a separate highlighting for the current line in the
            quickfix window.
解决方案:   Add QuickFixLine. (anishsane, closes #1755)
相关文件:   src/option.c, src/quickfix.c, src/screen.c, src/syntax.c,
            src/vim.h, runtime/doc/options.txt, runtime/doc/quickfix.txt

Patch 8.0.0642
问题:       writefile() continues after detecting an error.
解决方案:   Bail out as soon as an error is detected. (suggestions by Nikolai
            Pavlov, closes #1476)
相关文件:   src/evalfunc.c, src/testdir/test_writefile.vim

Patch 8.0.0643
问题:       When 'hlsearch' is set and matching with the last search pattern
            is very slow, Vim becomes unusable.  Cannot quit search by
            pressing CTRL-C.
解决方案:   When the search times out set a flag and don't try again.  Check
            for timeout and CTRL-C in NFA loop that adds states.
相关文件:   src/screen.c, src/ex_cmds.c, src/quickfix.c, src/regexp.c,
            src/proto/regexp.pro, src/regexp.h, src/search.c,
            src/proto/search.pro, src/syntax.c, src/regexp_nfa.c, src/spell.c,
            src/tag.c, src/gui.c, src/edit.c, src/evalfunc.c, src/ex_docmd.c,
            src/ex_getln.c, src/normal.c

Patch 8.0.0644
问题:       There is no test for 'hlsearch' timing out.
解决方案:   Add a test.
相关文件:   src/testdir/test_hlsearch.vim

Patch 8.0.0645
问题:       The new regexp engine does not give an error for using a back
            reference where it is not allowed. (Dominique Pelle)
解决方案:   Check the back reference like the old engine. (closes #1774)
相关文件:   src/regexp.c, src/regexp_nfa.c, src/testdir/test_hlsearch.vim,
            src/testdir/test_statusline.vim,
            src/testdir/test_regexp_latin1.vim

Patch 8.0.0646
问题:       The hlsearch test fails on fast systems.
解决方案:   Make the search pattern slower.  Fix that the old regexp engine
            doesn't timeout properly.
相关文件:   src/regexp.c, src/testdir/test_hlsearch.vim

Patch 8.0.0647
问题:       Syntax highlighting can cause a freeze.
解决方案:   Apply 'redrawtime' to syntax highlighting, per window.
相关文件:   src/structs.h, src/screen.c, src/syntax.c, src/normal.c,
            src/regexp.c, src/proto/syntax.pro, src/testdir/test_syntax.vim,
            runtime/doc/options.txt

Patch 8.0.0648
问题:       Possible use of NULL pointer if buflist_new() returns NULL.
            (Coverity)
解决方案:   Check for NULL pointer in set_bufref().
相关文件:   src/buffer.c

Patch 8.0.0649
问题:       When opening a help file the filetype is set several times.
解决方案:   When setting the filetype to the same value from a modeline, don't
            trigger FileType autocommands.  Don't set the filetype to "help"
            when it's already set correctly.
相关文件:   src/ex_cmds.c, src/option.c, runtime/filetype.vim

Patch 8.0.0650
问题:       For extra help files the filetype is set more than once.
解决方案:   In *.txt files check that there is no help file modline.
相关文件:   runtime/filetype.vim

Patch 8.0.0651 (after 8.0.0649)
问题:       Build failure without the auto command feature.
解决方案:   Add #ifdef. (closes #1782)
相关文件:   src/ex_cmds.c

Patch 8.0.0652
问题:       Unicode information is outdated.
解决方案:   Update to Unicode 10. (Christian Brabandt)
相关文件:   runtime/tools/unicode.vim, src/mbyte.c

Patch 8.0.0653
问题:       The default highlight for QuickFixLine does not work for several
            color schemes. (Manas Thakur)
解决方案:   Make the default use the old color. (closes #1780)
相关文件:   src/syntax.c

Patch 8.0.0654
问题:       Text found after :endfunction is silently ignored.
解决方案:   Give a warning if 'verbose' is set.  When | or \n are used,
            execute the text as a command.
相关文件:   src/testdir/test_vimscript.vim, src/userfunc.c,
            runtime/doc/eval.txt

Patch 8.0.0655
问题:       Not easy to make sure a function does not exist.
解决方案:   Add ! as an optional argument to :delfunc.
相关文件:   src/userfunc.c, src/ex_cmds.h, src/testdir/test_vimscript.vim

Patch 8.0.0656
问题:       Cannot use ! after some user commands.
解决方案:   Properly check for existing command. (Hirohito Higashi)
相关文件:   src/ex_docmd.c, src/testdir/test_vimscript.vim

Patch 8.0.0657
问题:       Cannot get and set quickfix list items.
解决方案:   Add the "items" argument to getqflist() and setqflist(). (Yegappan
            Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0658
问题:       Spell test is old style.
解决方案:   Turn the spell test into a new style test (pschuh, closes #1778)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test58.in, src/testdir/test58.ok,
            src/testdir/test_spell.vim

Patch 8.0.0659
问题:       No test for conceal mode.
解决方案:   Add a conceal mode test. (Dominique Pelle, closes #1783)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_syntax.vim

Patch 8.0.0660
问题:       Silent install on MS-Windows does show a dialog.
解决方案:   Add /SD to the default choice. (allburov, closes #1772)
相关文件:   nsis/gvim.nsi

Patch 8.0.0661
问题:       Recognizing urxvt mouse codes does not work well.
解决方案:   Recognize "Esc[*M" and "Esc[*m". (Maurice Bos, closes #1486)
相关文件:   src/keymap.h, src/misc2.c, src/os_unix.c, src/term.c

Patch 8.0.0662 (after 8.0.0659)
问题:       Stray FIXME for fixed problem.
解决方案:   Remove the comment. (Dominique Pelle)
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0663
问题:       Giving an error message only when 'verbose' set is unexpected.
解决方案:   Give a warning message instead.
相关文件:   src/message.c, src/proto/message.pro, src/userfunc.c,
            src/testdir/test_vimscript.vim, runtime/doc/eval.txt

Patch 8.0.0664 (after 8.0.0661)
问题:       Mouse does not work in tmux. (lilydjwg)
解决方案:   Add flag for SGR release being present.
相关文件:   src/term.c

Patch 8.0.0665 (after 8.0.0661)
问题:       Warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Initialize it.
相关文件:   src/term.c

Patch 8.0.0666
问题:       Dead for loop. (Coverity)
解决方案:   Remove the for loop.
相关文件:   src/term.c

Patch 8.0.0667
问题:       Memory access error when command follows :endfunction. (Nikolai
            Pavlov)
解决方案:   Make memory handling in :function straightforward. (closes #1793)
相关文件:   src/userfunc.c, src/testdir/test_vimscript.vim

Patch 8.0.0668 (after 8.0.0660)
问题:       Nsis installer script does not work. (Christian Brabandt)
解决方案:   Fix the syntax of /SD.
相关文件:   nsis/gvim.nsi

Patch 8.0.0669
问题:       In Insert mode, CTRL-N at start of the buffer does not work
            correctly. (zuloloxi)
解决方案:   Wrap around the start of the buffer. (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.0670
问题:       Can't use input() in a timer callback. (Cosmin Popescu)
解决方案:   Reset vgetc_busy and set timer_busy. (Ozaki Kiichi, closes #1790,
            closes #1129)
相关文件:   src/evalfunc.c, src/ex_cmds2.c, src/globals.h,
            src/testdir/test_timers.vim

Patch 8.0.0671
问题:       When a function invoked from a timer calls confirm() and the user
            types CTRL-C then Vim hangs.
解决方案:   Reset typebuf_was_filled. (Ozaki Kiichi, closes #1791)
相关文件:   src/getchar.c

Patch 8.0.0672
问题:       Third item of synconcealed() changes too often. (Dominique Pelle)
解决方案:   Reset the sequence number at the start of each line.
相关文件:   src/syntax.c, src/testdir/test_syntax.vim, runtime/doc/eval.txt

Patch 8.0.0673 (after 8.0.0673)
问题:       Build failure without conceal feature.
解决方案:   Add #ifdef.
相关文件:   src/syntax.c

Patch 8.0.0674 (after 8.0.0670)
问题:       Cannot build with eval but without timers.
解决方案:   Add #ifdef (John Marriott)
相关文件:   src/evalfunc.c

Patch 8.0.0675
问题:       'colorcolumn' has a higher priority than 'hlsearch', it should be
            the other way around. (Nazri Ramliy)
解决方案:   Change the priorities. (LemonBoy, closes #1794)
相关文件:   src/screen.c, src/testdir/test_listlbr_utf8.vim

Patch 8.0.0676
问题:       Crash when closing the quickfix window in a FileType autocommand
            that triggers when the quickfix window is opened.
解决方案:   Save the new value before triggering the OptionSet autocommand.
            Add the "starting" flag to test_override() to make the text work.
相关文件:   src/evalfunc.c, src/option.c, runtime/doc/eval.txt

Patch 8.0.0677
问题:       Setting 'filetype' internally may cause the current buffer and
            window to change unexpectedly.
解决方案:   Set curbuf_lock. (closes #1734)
相关文件:   src/quickfix.c, src/ex_cmds.c, src/ex_getln.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0678
问题:       When 'equalalways' is set and closing a window in a separate
            frame, not all window sizes are adjusted. (Glacambre)
解决方案:   Resize all windows if the new current window is not in the same
            frame as the closed window. (closes #1707)
相关文件:   src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.0679 (after 8.0.0678)
问题:       Using freed memory.
解决方案:   Get the parent frame pointer earlier.
相关文件:   src/window.c

Patch 8.0.0680 (after 8.0.0612)
问题:       Plugins in start packages are sourced twice. (mseplowitz)
解决方案:   Use the unmodified runtime path when loading plugins (test by Ingo
            Karkat, closes #1801)
相关文件:   src/testdir/test_startup.vim, src/main.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 8.0.0681
问题:       Unnamed register only contains the last deleted text when
            appending deleted text to a register. (Wolfgang Jeltsch)
解决方案:   Only set y_previous when not using y_append. (Christian Brabandt)
相关文件:   src/ops.c, src/testdir/test_put.vim

Patch 8.0.0682
问题:       No test for synIDtrans().
解决方案:   Add a test. (Dominique Pelle, closes #1796)
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.0683
问题:       When using a visual bell there is no delay, causing the flash to
            be very short, possibly unnoticeable.  Also, the flash and the
            beep can lockup the UI when repeated often.
解决方案:   Do the delay in Vim or flush the output before the delay. Limit the
            bell to once per half a second. (Ozaki Kiichi, closes #1789)
相关文件:   src/misc1.c, src/proto/term.pro, src/term.c

Patch 8.0.0684
问题:       Old style tests are not nice.
解决方案:   Turn two tests into new style. (pschuh, closes #1797)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test82.in, src/testdir/test82.ok,
            src/testdir/test90.in, src/testdir/test90.ok,
            src/testdir/test_sha256.vim, src/testdir/test_utf8_comparisons.vim

Patch 8.0.0685
问题:       When making backups is disabled and conversion with iconv fails
            the written file is truncated. (Luo Chen)
解决方案:   First try converting the file and write the file only when it did
            not fail. (partly by Christian Brabandt)
相关文件:   src/fileio.c, src/testdir/test_writefile.vim

Patch 8.0.0686
问题:       When typing CTRL-L in a window that's not the first one, another
            redraw will happen later. (Christian Brabandt)
解决方案:   Reset must_redraw after calling screenclear().
相关文件:   src/screen.c

Patch 8.0.0687
问题:       Minor issues related to quickfix.
解决方案:   Set the proper return status for all cases in setqflist() and at
            test cases for this.  Move the "adding" flag outside of
            FEAT_WINDOWS. Minor update to the setqflist() help text. (Yegappan
            Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0688
问题:       Cannot resize the window in a FileType autocommand. (Ingo Karkat)
解决方案:   Add the CMDWIN flag to :resize. (test by Ingo Karkat,
            closes #1804)
相关文件:   src/ex_cmds.h, src/testdir/test_quickfix.vim

Patch 8.0.0689
问题:       The ~ character is not escaped when adding to the search pattern
            with CTRL-L. (Ramel Eshed)
解决方案:   Escape the character. (Christian Brabandt)
相关文件:   src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.0690
问题:       Compiler warning on non-Unix system.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/term.c

Patch 8.0.0691
问题:       Compiler warning without the linebreak feature.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/edit.c

Patch 8.0.0692
问题:       Using CTRL-G with 'incsearch' and ? goes in the wrong direction.
            (Ramel Eshed)
解决方案:   Adjust search_start. (Christian Brabandt)
相关文件:   src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.0693
问题:       No terminal emulator support.  Cannot properly run commands in the
            GUI.  Cannot run a job interactively with an ssh connection.
解决方案:   Very early implementation of the :terminal command.  Includes
            libvterm converted to ANSI C.  Many parts still missing.
相关文件:   src/feature.h, src/Makefile, src/configure.ac, src/auto/configure,
            src/config.mk.in, src/config.h.in, src/terminal.c, src/structs.h,
            src/ex_cmdidxs.h, src/ex_docmd.c,  src/option.c, src/option.h,
            src/evalfunc.c, src/proto/terminal.pro, src/proto.h,
            runtime/doc/terminal.txt, runtime/doc/Makefile, Filelist,
            src/libvterm/.bzrignore, src/libvterm/.gitignore,
            src/libvterm/LICENSE, src/libvterm/README, src/libvterm/Makefile,
            src/libvterm/tbl2inc_c.pl, src/libvterm/vterm.pc.in,
            src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/doc/URLs,
            src/libvterm/doc/seqs.txt, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c,
            src/libvterm/src/encoding/DECdrawing.inc,
            src/libvterm/src/encoding/DECdrawing.tbl,
            src/libvterm/src/encoding/uk.inc,
            src/libvterm/src/encoding/uk.tbl, src/libvterm/src/keyboard.c,
            src/libvterm/src/mouse.c, src/libvterm/src/parser.c,
            src/libvterm/src/pen.c, src/libvterm/src/rect.h,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/unicode.c, src/libvterm/src/utf8.h,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/t/02parser.test, src/libvterm/t/03encoding_utf8.test,
            src/libvterm/t/10state_putglyph.test,
            src/libvterm/t/11state_movecursor.test,
            src/libvterm/t/12state_scroll.test,
            src/libvterm/t/13state_edit.test,
            src/libvterm/t/14state_encoding.test,
            src/libvterm/t/15state_mode.test,
            src/libvterm/t/16state_resize.test,
            src/libvterm/t/17state_mouse.test,
            src/libvterm/t/18state_termprops.test,
            src/libvterm/t/20state_wrapping.test,
            src/libvterm/t/21state_tabstops.test,
            src/libvterm/t/22state_save.test,
            src/libvterm/t/25state_input.test,
            src/libvterm/t/26state_query.test,
            src/libvterm/t/27state_reset.test,
            src/libvterm/t/28state_dbl_wh.test,
            src/libvterm/t/29state_fallback.test, src/libvterm/t/30pen.test,
            src/libvterm/t/40screen_ascii.test,
            src/libvterm/t/41screen_unicode.test,
            src/libvterm/t/42screen_damage.test,
            src/libvterm/t/43screen_resize.test,
            src/libvterm/t/44screen_pen.test,
            src/libvterm/t/45screen_protect.test,
            src/libvterm/t/46screen_extent.test,
            src/libvterm/t/47screen_dbl_wh.test,
            src/libvterm/t/48screen_termprops.test,
            src/libvterm/t/90vttest_01-movement-1.test,
            src/libvterm/t/90vttest_01-movement-2.test,
            src/libvterm/t/90vttest_01-movement-3.test,
            src/libvterm/t/90vttest_01-movement-4.test,
            src/libvterm/t/90vttest_02-screen-1.test,
            src/libvterm/t/90vttest_02-screen-2.test,
            src/libvterm/t/90vttest_02-screen-3.test,
            src/libvterm/t/90vttest_02-screen-4.test,
            src/libvterm/t/92lp1640917.test, src/libvterm/t/harness.c,
            src/libvterm/t/run-test.pl

Patch 8.0.0694
问题:       Building in shadow directory does not work.  Running Vim fails.
解决方案:   Add the new libvterm directory.  Add missing change in command
            list.
相关文件:   src/Makefile, src/ex_cmds.h

Patch 8.0.0695
问题:       Missing dependencies breaks parallel make.
解决方案:   Add dependencies for terminal.o.
相关文件:   src/Makefile

Patch 8.0.0696
问题:       The .inc files are missing in git. (Nazri Ramliy)
解决方案:   Remove the .inc line from .gitignore.
相关文件:   src/libvterm/.gitignore

Patch 8.0.0697
问题:       Recorded key sequences may become invalid.
解决方案:   Add back KE_SNIFF removed in 7.4.1433. Use fixed numbers for the
            key_extra enum.
相关文件:   src/keymap.h

Patch 8.0.0698
问题:       When a timer uses ":pyeval" or another Python command and it
            happens to be triggered while exiting a Crash may happen.
            (Ricky Zhou)
解决方案:   Avoid running a Python command after python_end() was called.
            Do not trigger timers while exiting.  (closes #1824)
相关文件:   src/if_python.c, src/if_python3.c, src/ex_cmds2.c

Patch 8.0.0699
问题:       Checksum tests are not actually run.
解决方案:   Add the tests to the list. (Dominique Pelle, closes #1819)
相关文件:   src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim

Patch 8.0.0700
问题:       Segfault with QuitPre autocommand closes the window. (Marek)
解决方案:   Check that the window pointer is still valid. (Christian Brabandt,
            closes #1817)
相关文件:   src/testdir/test_tabpage.vim, src/ex_docmd.c

Patch 8.0.0701
问题:       System test failing when using X11 forwarding.
解决方案:   Set $XAUTHORITY before changing $HOME. (closes #1812)
            Also use a better check for the exit value.
相关文件:   src/testdir/setup.vim, src/testdir/test_system.vim

Patch 8.0.0702
问题:       An error in a timer can make Vim unusable.
解决方案:   Don't set the error flag or exception from a timer.  Stop a timer
            if it causes an error 3 out of 3 times.  Discard an exception
            caused inside a timer.
相关文件:   src/ex_cmds2.c, src/structs.h, src/testdir/test_timers.vim,
            runtime/doc/eval.txt

Patch 8.0.0703
问题:       Illegal memory access with empty :doau command.
解决方案:   Check the event for being out of range. (James McCoy)
相关文件:   src/testdir/test_autocmd.vim, src/fileio.c

Patch 8.0.0704
问题:       Problems with autocommands when opening help.
解决方案:   Avoid using invalid "varp" value.  Allow using :wincmd if buffer
            is locked. (closes #1806, closes #1804)
相关文件:   src/option.c, src/ex_cmds.h

Patch 8.0.0705 (after 8.0.0702)
问题:       Crash when there is an error in a timer callback. (Aron Griffis,
            Ozaki Kiichi)
解决方案:   Check did_throw before discarding an exception.  NULLify
            current_exception when no longer valid.
相关文件:   src/ex_eval.c, src/ex_cmds2.c

Patch 8.0.0706
问题:       Crash when cancelling the cmdline window in Ex mode. (James McCoy)
解决方案:   Do not set cmdbuff to NULL, make it empty.
相关文件:   src/ex_getln.c

Patch 8.0.0707
问题:       Freeing wrong memory when manipulating buffers in autocommands.
            (James McCoy)
解决方案:   Also set the w_s pointer if w_buffer was NULL.
相关文件:   src/ex_cmds.c

Patch 8.0.0708
问题:       Some tests are old style.
解决方案:   Change a few tests from old style to new style. (pschuh,
            closes #1813)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/main.aap,
            src/testdir/test23.in, src/testdir/test23.ok,
            src/testdir/test24.in, src/testdir/test24.ok,
            src/testdir/test26.in, src/testdir/test26.ok,
            src/testdir/test67.in, src/testdir/test67.ok,
            src/testdir/test75.in, src/testdir/test75.ok,
            src/testdir/test97.in, src/testdir/test97.ok,
            src/testdir/test_comparators.in, src/testdir/test_comparators.ok,
            src/testdir/test_comparators.vim,
            src/testdir/test_escaped_glob.vim,
            src/testdir/test_exec_while_if.vim,
            src/testdir/test_exists_autocmd.vim, src/testdir/test_getcwd.in,
            src/testdir/test_getcwd.ok, src/testdir/test_getcwd.vim,
            src/testdir/test_maparg.vim, src/testdir/test_plus_arg_edit.vim,
            src/testdir/test_regex_char_classes.vim

Patch 8.0.0709
问题:       Libvterm cannot use vsnprintf(), it does not exist in C90.
解决方案:   Use vim_vsnprintf() instead.
相关文件:   src/message.c, src/Makefile, src/proto.h, src/evalfunc.c,
            src/netbeans.c, src/libvterm/src/vterm.c

Patch 8.0.0710
问题:       A job that writes to a buffer clears command line completion.
            (Ramel Eshed)
解决方案:   Do not redraw while showing the completion menu.
相关文件:   src/screen.c

Patch 8.0.0711 (after 8.0.0710)
问题:       Cannot build without the wildmenu feature.
解决方案:   Add #ifdef
相关文件:   src/screen.c

Patch 8.0.0712
问题:       The terminal implementation is incomplete.
解决方案:   Add the 'termkey' option.
相关文件:   src/option.c, src/option.h, src/structs.h

Patch 8.0.0713 (after 8.0.0712)
问题:       'termkey' option not fully implemented.
解决方案:   Add initialisation.
相关文件:   src/option.c

Patch 8.0.0714
问题:       When a timer causes a command line redraw the " that is displayed
            for CTRL-R goes missing.
解决方案:   Remember an extra character to display.
相关文件:   src/ex_getln.c

Patch 8.0.0715
问题:       Writing to the wrong buffer if the buffer that a channel writes to
            was closed.
解决方案:   Do not write to a buffer that was unloaded.
相关文件:   src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_write.py

Patch 8.0.0716
问题:       Not easy to start Vim cleanly without changing the viminfo file.
            Not possible to know whether the -i command line flag was used.
解决方案:   Add the --clean command line argument.  Add the 'viminfofile'
            option.  Add "-u DEFAULTS".
相关文件:   src/main.c, runtime/doc/starting.txt, src/option.c, src/option.h,
            src/ex_cmds.c, src/globals.h, runtime/doc/options.txt

Patch 8.0.0717
问题:       Terminal feature not included in :version output.
解决方案:   Add +terminal or -terminal.
相关文件:   src/version.c, src/terminal.c

Patch 8.0.0718
问题:       Output of job in terminal is not displayed.
解决方案:   Connect the job output to the terminal.
相关文件:   src/channel.c, src/proto/channel.pro, src/terminal.c,
            src/proto/terminal.pro, src/channel.c, src/proto/channel.pro,
            src/evalfunc.c, src/screen.c, src/proto/screen.pro

Patch 8.0.0719
问题:       Build failure without +terminal feature.
解决方案:   Add #ifdefs.
相关文件:   src/screen.c, src/channel.c

Patch 8.0.0720
问题:       Unfinished mapping not displayed when running timer.
解决方案:   Also use the extra_char while waiting for a mapping and digraph.
            (closes #1844)
相关文件:   src/ex_getln.c

Patch 8.0.0721
问题:       :argedit can only have one argument.
解决方案:   Allow for multiple arguments. (Christian Brabandt)
相关文件:   runtime/doc/editing.txt, src/ex_cmds.h, src/ex_cmds2.c,
            src/testdir/test_arglist.vim

Patch 8.0.0722
问题:       Screen is messed by timer up at inputlist() prompt.
解决方案:   Set state to ASKMORE. (closes #1843)
相关文件:   src/misc1.c

Patch 8.0.0723 (after 8.0.0721)
问题:       Arglist test fails if file name case is ignored.
解决方案:   Wipe existing buffers, check for fname_case property.
相关文件:   src/testdir/test_arglist.vim

Patch 8.0.0724
问题:       The message for yanking doesn't indicate the register.
解决方案:   Show the register name in the "N lines yanked" message. (LemonBoy,
            closes #1803, closes #1809)
相关文件:   src/ops.c, src/Makefile, src/testdir/test_registers.vim,
            src/testdir/Make_all.mak

Patch 8.0.0725
问题:       A terminal window does not handle keyboard input.
解决方案:   Add terminal_loop().  ":term bash -i" sort of works now.
相关文件:   src/main.c, src/terminal.c, src/proto/terminal.pro, src/normal.c

Patch 8.0.0726
问题:       Translations cleanup script is too conservative.
解决方案:   Also delete untranslated messages.
相关文件:   src/po/cleanup.vim

Patch 8.0.0727
问题:       Message about what register to yank into is not translated.
            (LemonBoy)
解决方案:   Add _().
相关文件:   src/ops.c

Patch 8.0.0728
问题:       The terminal structure is never freed.
解决方案:   Free the structure and unreference what it contains.
相关文件:   src/terminal.c, src/buffer.c, src/proto/terminal.pro,
            src/channel.c, src/proto/channel.pro, src/evalfunc.c

Patch 8.0.0729
问题:       The help for the terminal configure option is wrong.
解决方案:   Change "Disable" to "Enable". (E Kawashima, closes #1849)
            Improve alignment.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.0730
问题:       Terminal feature only supports Unix-like systems.
解决方案:   Prepare for adding an MS-Windows implementation.
相关文件:   src/terminal.c

Patch 8.0.0731
问题:       Cannot build the terminal feature on MS-Windows.
解决方案:   Add the Makefile changes. (Yasuhiro Matsumoto, closes #1851)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0732
问题:       When updating a buffer for a callback the modeless selection is
            lost.
解决方案:   Do not insert or delete screen lines when redrawing for a callback
            and there is a modeless selection.
相关文件:   src/screen.c

Patch 8.0.0733
问题:       Can only add entries to one list in the quickfix stack.
解决方案:   Move state variables from qf_list_T to qf_list_T. (Yegappan
            Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.0734
问题:       The script to check translations can be improved.
解决方案:   Restore the view when no errors are found.  Check for matching
            line break at the end of the message. (Christian Brabandt)
相关文件:   src/po/check.vim

Patch 8.0.0735
问题:       There is no way to notice that the quickfix window contents has
            changed.
解决方案:   Increment b:changedtick when updating the quickfix window.
            (Yegappan Lakshmanan)
相关文件:   runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0736
问题:       The OptionSet autocommand event is not triggered when entering
            diff mode.
解决方案:   use set_option_value() instead of setting the option directly.
            Change the tests from old to new style. (Christian Brabandt)
相关文件:   src/diff.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_autocmd.vim, src/testdir/test_autocmd_option.in,
            src/testdir/test_autocmd_option.ok

Patch 8.0.0737
问题:       Crash when X11 selection is very big.
解决方案:   Use static items instead of allocating them.  Add callbacks.
            (Ozaki Kiichi)
相关文件:   src/testdir/shared.vim, src/testdir/test_quotestar.vim,
            src/ui.c

Patch 8.0.0738
问题:       Cannot use the mouse to resize window while the focus is in a
            terminal window.
解决方案:   Recognize nice mouse events in the terminal window.  A few more
            fixes for the terminal window.
相关文件:   src/terminal.c

Patch 8.0.0739
问题:       Terminal resizing doesn't work well.
解决方案:   Resize the terminal to the Vim window and the other way around.
            Avoid mapping typed keys.  Set the environment properly.
相关文件:   src/terminal.c, src/os_unix.c, src/structs.h

Patch 8.0.0740
问题:       Cannot resize a terminal window by the command running in it.
解决方案:   Add support for the window size escape sequence.  Make BS work.
相关文件:   src/terminal.c, src/libvterm/src/state.c

Patch 8.0.0741
问题:       Cannot build with HPUX.
解决方案:   Rename envbuf_TERM to envbuf_Term. (John Marriott)
相关文件:   src/os_unix.c

Patch 8.0.0742
问题:       Terminal feature does not work on MS-Windows.
解决方案:   Use libvterm and libwinpty on MS-Windows. (Yasuhiro Matsumoto)
相关文件:   src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/channel.c,
            src/proto/channel.pro, src/terminal.c

Patch 8.0.0743
问题:       The 'termsize' option can be set to an invalid value.
解决方案:   Check the 'termsize' option to be valid.
相关文件:   src/option.c, src/testdir/gen_opt_test.vim

Patch 8.0.0744
问题:       A terminal window uses pipes instead of a pty.
解决方案:   Add pty support.
相关文件:   src/structs.h, src/os_unix.c, src/terminal.c, src/channel.c,
            src/proto/os_unix.pro, src/os_win32.c, src/proto/os_win32.pro

Patch 8.0.0745
问题:       multi-byte characters in a terminal window are not displayed
            properly.
解决方案:   Set the unused screen characters. (Yasuhiro Matsumoto, closes
            #1857)
相关文件:   src/terminal.c

Patch 8.0.0746
问题:       When :term fails the job is not properly cleaned up.
解决方案:   Free the terminal. Handle a job that failed to start. (closes
            #1858)
相关文件:   src/os_unix.c, src/channel.c, src/terminal.c

Patch 8.0.0747
问题:       :terminal without an argument doesn't work.
解决方案:   Use the 'shell' option. (Yasuhiro Matsumoto, closes #1860)
相关文件:   src/terminal.c

Patch 8.0.0748
问题:       When running Vim in a terminal window it does not detect the right
            number of colors available.
解决方案:   Detect the version string that libvterm returns.  Pass the number
            of colors in $COLORS.
相关文件:   src/term.c, src/os_unix.c

Patch 8.0.0749
问题:       Some unicode digraphs are hard to remember.
解决方案:   Add alternatives with a backtick. (Chris Harding, closes #1861)
相关文件:   src/digraph.c

Patch 8.0.0750
问题:       OpenPTY missing in non-GUI build.
解决方案:   Always include pty.c, add an #ifdef to skip over the contents.
相关文件:   src/pty.c, src/Makefile

Patch 8.0.0751 (after 8.0.0750)
问题:       OpenPTY missing with some combination of features. (Kazunobu
            Kuriyama)
解决方案:   Adjust #ifdef.  Also include pty.pro when needed.
相关文件:   src/pty.c, src/misc2.c, src/proto.h

Patch 8.0.0752
问题:       Build fails on MS-Windows.
解决方案:   Change #ifdef for set_color_count().
相关文件:   src/term.c

Patch 8.0.0753
问题:       A job running in a terminal does not get notified of changes in
            the terminal size.
解决方案:   Use ioctl() and SIGWINCH to report the terminal size.
相关文件:   src/terminal.c, src/os_unix.c, src/proto/os_unix.pro

Patch 8.0.0754
问题:       Terminal window does not support colors.
解决方案:   Lookup the color attribute.
相关文件:   src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.0755
问题:       Terminal window does not have colors in the GUI.
解决方案:   Lookup the GUI color.
相关文件:   src/terminal.c, src/syntax.c, src/proto/syntax.pro, src/term.c,
            src/proto/term.pro, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_x11.c, src/proto/gui_x11.pro, src/gui_mac.c,
            src/proto/gui_mac.pro, src/gui_photon.c, src/proto/gui_photon.pro,
            src/gui_w32.c, src/proto/gui_w32.pro,

Patch 8.0.0756
问题:       Cannot build libvterm with MSVC.
解决方案:   Add an MSVC Makefile to libvterm. (Yasuhiro Matsumoto, closes
            #1865)
相关文件:   src/INSTALLpc.txt, src/Make_mvc.mak, src/libvterm/Makefile.msc

Patch 8.0.0757
问题:       Libvterm MSVC Makefile not included in the distribution.
解决方案:   Add the file to the list.
相关文件:   Filelist

Patch 8.0.0758
问题:       Possible crash when using a terminal window.
解决方案:   Check for NULL pointers. (Yasuhiro Matsumoto, closes #1864)
相关文件:   src/terminal.c

Patch 8.0.0759
问题:       MS-Windows: terminal does not adjust size to the Vim window size.
解决方案:   Add a call to winpty_set_size(). (Yasuhiro Matsumoto, closes #1863)
相关文件:   src/terminal.c

Patch 8.0.0760
问题:       Terminal window colors wrong with 'termguicolors'.
解决方案:   Add 'termguicolors' support.
相关文件:   src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.0761
问题:       Options of a buffer for a terminal window are not set properly.
解决方案:   Add "terminal" value for 'buftype'.  Make 'buftype' and
            'bufhidden' not depend on the quickfix feature.
            Also set the buffer name and show "running" or "finished" in the
            window title.
相关文件:   src/option.c, src/terminal.c, src/proto/terminal.pro,
            runtime/doc/options.txt, src/quickfix.c, src/proto/quickfix.pro,
            src/structs.h, src/buffer.c, src/ex_docmd.c, src/fileio.c,
            src/channel.c

Patch 8.0.0762
问题:       ml_get error with :psearch in buffer without a name. (Dominique
            Pelle)
解决方案:   Use the buffer number instead of the file name.  Check the cursor
            position.
相关文件:   src/search.c, src/testdir/test_preview.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.0763
问题:       Libvterm can be improved.
解决方案:   Various small improvements, more comments.
相关文件:   src/libvterm/README, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/keyboard.c, src/libvterm/src/parser.c,
            src/libvterm/src/screen.c, src/libvterm/src/state.c

Patch 8.0.0764
问题:       'termkey' does not work yet.
解决方案:   Implement 'termkey'.
相关文件:   src/terminal.c, src/option.c, src/proto/option.pro

Patch 8.0.0765
问题:       Build fails with tiny features.
解决方案:   Adjust #ifdef. (John Marriott)
相关文件:   src/option.c, src/option.h

Patch 8.0.0766
问题:       Option test fails with +terminal feature.
解决方案:   Fix using the right option when checking the value.
相关文件:   src/option.c

Patch 8.0.0767
问题:       Build failure with Athena and Motif.
解决方案:   Move local variable declarations. (Kazunobu Kuriyama)
相关文件:   src/gui_x11.c

Patch 8.0.0768
问题:       Terminal window status shows "[Scratch]".
解决方案:   Show "[Terminal]" when no title was set. (Yasuhiro Matsumoto)
            Store the terminal title that vterm sends and use it.  Update the
            special buffer name.  (closes #1869)
相关文件:   src/terminal.c, src/proto/terminal.pro, src/buffer.c

Patch 8.0.0769
问题:       Build problems with terminal on MS-Windows using MSVC.
解决方案:   Remove stdbool.h dependency. Only use ScreenLinesUC when it was
            allocated. Fix typos. (Ken Takata)
相关文件:   src/libvterm/bin/vterm-ctrl.c, runtime/doc/terminal.txt,
            src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/libvterm/Makefile.msc, src/terminal.c

Patch 8.0.0770
问题:       Compiler warning for missing field initializer.
解决方案:   Add two more values. (Yegappan Lakshmanan)
相关文件:   src/libvterm/src/encoding.c

Patch 8.0.0771
问题:       Cursor in a terminal window not always updated in the GUI.
解决方案:   Call gui_update_cursor(). (Yasuhiro Matsumoto, closes #1868)
相关文件:   src/terminal.c

Patch 8.0.0772
问题:       Other stdbool.h dependencies in libvterm.
解决方案:   Remove the dependency and use TRUE/FALSE/int. (Ken Takata)
相关文件:   src/libvterm/include/vterm.h, src/libvterm/src/mouse.c,
            src/libvterm/src/pen.c, src/libvterm/t/harness.c,
            src/libvterm/bin/unterm.c

Patch 8.0.0773
问题:       Mixing 32 and 64 bit libvterm builds fails.
解决方案:   Use OUTDIR. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak, src/libvterm/Makefile.msc

Patch 8.0.0774
问题:       Build failure without the multi-byte feature on HPUX.
解决方案:   Move #ifdefs. (John Marriott)
相关文件:   src/term.c

Patch 8.0.0775
问题:       In a terminal the cursor is updated too often.
解决方案:   Only flush when needed. (Yasuhiro Matsumoto).  Remember whether the
            cursor is visible. (closes #1873)
相关文件:   src/terminal.c

Patch 8.0.0776
问题:       Function prototypes missing without the quickfix feature. (Tony
            Mechelynck)
解决方案:   Move non-quickfix functions to buffer.c.
相关文件:   src/buffer.c, src/proto/buffer.pro, src/quickfix.c,
            src/proto/quickfix.pro

Patch 8.0.0777
问题:       Compiler warnings with 64 bit compiler.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/libvterm/src/pen.c, src/libvterm/src/state.c, src/terminal.c

Patch 8.0.0778
问题:       In a terminal the cursor may be hidden and screen updating lags
            behind. (Nazri Ramliy)
解决方案:   Switch the cursor on and flush output when needed. (Ozaki Kiichi)
相关文件:   src/terminal.c

Patch 8.0.0779
问题:       :term without an argument uses empty buffer name but runs the
            shell.
解决方案:   Change the command to the shell earlier.
相关文件:   src/terminal.c

Patch 8.0.0780
问题:       Build failure on Travis.
解决方案:   Set distribution explicitly. Use Lua and Ruby dev. (Ken Takata,
            closes #1884)
相关文件:   .travis.yml

Patch 8.0.0781
问题:       MS-Windows: Memory leak when using :terminal.
解决方案:   Handle failures properly. (Ken Takata)
相关文件:   src/terminal.c

Patch 8.0.0782
问题:       Using freed memory in quickfix code. (Dominique Pelle)
解决方案:   Handle a help window differently. (Yegappan Lakshmanan)
相关文件:   src/buffer.c, src/proto/buffer.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/ex_cmds.c, src/window.c

Patch 8.0.0783
问题:       Job of terminal may be freed too early.
解决方案:   Increment job refcount. (Yasuhiro Matsumoto)
相关文件:   src/terminal.c

Patch 8.0.0784
问题:       Job of terminal may be garbage collected.
解决方案:   Set copyID on job in terminal. (Ozaki Kiichi)
相关文件:   src/terminal.c, src/eval.c, src/proto/terminal.pro

Patch 8.0.0785
问题:       Wildcards are not expanded for :terminal.
解决方案:   Add FILES to the command flags. (Yasuhiro Matsumoto, closes #1883)
            Also complete commands.
相关文件:   src/ex_cmds.h, src/ex_docmd.c

Patch 8.0.0786
问题:       Build failures on Travis.
解决方案:   Go back to precise temporarily.  Disable coverage with clang.
相关文件:   .travis.yml

Patch 8.0.0787
问题:       Cannot send CTRL-W command to terminal job.
解决方案:   Make CTRL-W . a prefix for sending a key to the job.
相关文件:   src/terminal.c, runtime/doc/terminal.txt, src/option.c

Patch 8.0.0788
问题:       MS-Windows: cannot build with terminal feature.
解决方案:   Move set_ref_in_term(). (Ozaki Kiichi)
相关文件:   src/terminal.c

Patch 8.0.0789
问题:       When splitting a terminal window where the terminal follows the
            size of the window doesn't work.
解决方案:   Use the size of the smallest window. (Yasuhiro Matsumoto, closes
            #1885)
相关文件:   src/terminal.c

Patch 8.0.0790
问题:       MSVC compiler warning for strncpy in libvterm.
解决方案:   Add a define to stop the warnings. (Mike Williams)
相关文件:   src/Make_mvc.mak

Patch 8.0.0791
问题:       Terminal colors depend on the system.
解决方案:   Use the highlight color lookup tables.
相关文件:   src/syntax.c, src/proto/syntax.pro, src/terminal.c

Patch 8.0.0792
问题:       Spell test leaves files behind.
解决方案:   Delete the files.
相关文件:   src/testdir/test_spell.vim

Patch 8.0.0793
问题:       Using wrong terminal name for terminal window.
解决方案:   When 'term' starts with "xterm" use it for $TERM in a terminal
            window.
相关文件:   src/os_unix.c

Patch 8.0.0794
问题:       The script to check translations fails if there is more than one
            NL in one line.
解决方案:   Count the number of NL characters.  Make count() accept a string.
相关文件:   src/po/check.vim, src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_functions.vim

Patch 8.0.0795
问题:       Terminal feature does not build with older MSVC.
解决方案:   Do not use stdint.h.
相关文件:   src/libvterm/include/vterm.h

Patch 8.0.0796
问题:       No coverage on Travis with clang.
解决方案:   Use a specific coveralls version. (Ozaki Kiichi, closes #1888)
相关文件:   .travis.yml

Patch 8.0.0797
问题:       Finished job in terminal window is not handled.
解决方案:   Add the scrollback buffer.  Use it to fill the buffer when the job
            has ended.
相关文件:   src/terminal.c, src/screen.c, src/proto/terminal.pro,
            src/channel.c, src/os_unix.c, src/buffer.c

Patch 8.0.0798
问题:       No highlighting in a terminal window with a finished job.
解决方案:   Highlight the text.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/screen.c, src/undo.c

Patch 8.0.0799
问题:       Missing semicolon.
解决方案:   Add it.
相关文件:   src/terminal.c

Patch 8.0.0800
问题:       Terminal window scrollback contents is wrong.
解决方案:   Fix handling of multi-byte characters (Yasuhiro Matsumoto) Handle
            empty lines correctly. (closes #1891)
相关文件:   src/terminal.c

Patch 8.0.0801
问题:       The terminal window title sometimes still says "running" even
            though the job has finished.
解决方案:   Also consider the job finished when the channel has been closed.
相关文件:   src/terminal.c

Patch 8.0.0802
问题:       After a job exits the last line in the terminal window does not
            get color attributes.
解决方案:   Fix off-by-one error.
相关文件:   src/terminal.c

Patch 8.0.0803
问题:       Terminal window functions not yet implemented.
解决方案:   Implement several functions. Add a first test. (Yasuhiro
            Matsumoto, closes #1871)
相关文件:   runtime/doc/eval.txt, src/Makefile, src/evalfunc.c,
            src/proto/evalfunc.pro, src/proto/terminal.pro, src/terminal.c,
            src/testdir/Make_all.mak, src/testdir/test_terminal.vim

Patch 8.0.0804
问题:       Running tests fails when stdin is /dev/null. (James McCoy)
解决方案:   Do not bail out from getting input if the --not-a-term argument
            was given. (closes #1460)
相关文件:   src/eval.c, src/evalfunc.c

Patch 8.0.0805
问题:       GUI test fails with gnome2.
解决方案:   Set $HOME to an existing directory.
相关文件:   src/testdir/setup.vim, src/testdir/runtest.vim

Patch 8.0.0806
问题:       Tests may try to create XfakeHOME twice.
解决方案:   Avoid loading setup.vim twice.
相关文件:   src/testdir/setup.vim

Patch 8.0.0807
问题:       Terminal window can't handle mouse buttons. (Hirohito Higashi)
解决方案:   Implement mouse buttons and many other keys.  Ignore the ones that
            are not implemented.
相关文件:   src/terminal.c

Patch 8.0.0808
问题:       Cannot build with terminal feature and DEBUG defined. (Christian
            Brabandt)
解决方案:   Use DEBUG_LOG3().
相关文件:   src/libvterm/src/pen.c

Patch 8.0.0809
问题:       MS-Windows: tests hang.
解决方案:   Delete the XfakeHOME directory.
相关文件:   src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.0.0810
问题:       MS-Windows: tests still hang.
解决方案:   Only create the XfakeHOME directory if it does not exist yet.
相关文件:   src/testdir/setup.vim

Patch 8.0.0811
问题:       MS-Windows: test_expand_dllpath fails.
解决方案:   Change backslashes to forward slashes
相关文件:   src/testdir/test_expand_dllpath.vim

Patch 8.0.0812
问题:       Terminal window colors shift when 'number' is set. (Nazri Ramliy)
解决方案:   Use vcol instead of col.
相关文件:   src/screen.c

Patch 8.0.0813
问题:       Cannot use Vim commands in a terminal window while the job is
            running.
解决方案:   Implement Terminal Normal mode.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/main.c, src/screen.c,
            src/normal.c, src/option.c, runtime/doc/terminal.txt

Patch 8.0.0814 (after 8.0.0757)
问题:       File in Filelist does not exist.
解决方案:   Remove the line.
相关文件:   Filelist

Patch 8.0.0815
问题:       Terminal window not correctly updated when 'statusline' invokes
            ":sleep". (NIkolay Pavlov)
解决方案:   Clear got_int.  Repeat redrawing when needed.
相关文件:   src/terminal.c

Patch 8.0.0816
问题:       Crash when using invalid buffer number.
解决方案:   Check for NULL buffer. (Yasuhiro Matsumoto, closes #1899)
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0817
问题:       Cannot get the line of a terminal window at the cursor.
解决方案:   Make the row argument optional. (Yasuhiro Matsumoto, closes #1898)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/terminal.c

Patch 8.0.0818
问题:       Cannot get the cursor position of a terminal.
解决方案:   Add term_getcursor().
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/terminal.c,
            src/proto/terminal.pro

Patch 8.0.0819
问题:       After changing current window the cursor position in the terminal
            window is not updated.
解决方案:   Set w_wrow, w_wcol and w_valid.
相关文件:   src/terminal.c

Patch 8.0.0820
问题:       GUI: cursor in terminal window lags behind.
解决方案:   call gui_update_cursor() under different conditions. (Ozaki
            Kiichi, closes #1893)
相关文件:   src/terminal.c

Patch 8.0.0821
问题:       Cannot get the title and status of a terminal window.
解决方案:   Implement term_gettitle() and term_getstatus().
相关文件:   src/evalfunc.c, src/terminal.c, src/proto/terminal.pro,
            runtime/doc/eval.txt

Patch 8.0.0822
问题:       Test_with_partial_callback is a tiny bit flaky.
解决方案:   Add it to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.0823
问题:       Cannot paste text into a terminal window.
解决方案:   Make CTRL-W " work.
相关文件:   src/terminal.c

Patch 8.0.0824
问题:       In Terminal mode the cursor and screen gets redrawn when the job
            produces output.
解决方案:   Check for tl_terminal_mode. (partly by Yasuhiro Matsumoto, closes
            #1904)
相关文件:   src/terminal.c

Patch 8.0.0825
问题:       Not easy to see that a window is a terminal window.
解决方案:   Add StatusLineTerm highlighting.
相关文件:   src/option.c, src/vim.h, src/screen.c, src/syntax.c

Patch 8.0.0826
问题:       Cannot use text objects in Terminal mode.
解决方案:   Check for pending operator and Visual mode first. (Yasuhiro
            Matsumoto, closes #1906)
相关文件:   src/normal.c

Patch 8.0.0827
问题:       Coverity: could leak pty file descriptor, theoretically.
解决方案:   If channel is NULL, free the file descriptors.
相关文件:   src/os_unix.c

Patch 8.0.0828
问题:       Coverity: may dereference NULL pointer.
解决方案:   Bail out if calloc_state() returns NULL.
相关文件:   src/regexp_nfa.c

Patch 8.0.0829
问题:       A job running in a terminal window cannot easily communicate with
            the Vim it is running in.
解决方案:   Pass v:servername in an environment variable. (closes #1908)
相关文件:   src/os_unix.c

Patch 8.0.0830
问题:       Translating messages is not ideal.
解决方案:   Add a remark about obsolete messages.  Use msgfmt in the check
            script. (Christian Brabandt)
相关文件:   src/po/README.txt, src/po/check.vim

Patch 8.0.0831 (after 8.0.0791)
问题:       With 8 colors the bold attribute is not set properly.
解决方案:   Move setting HL_TABLE() out of lookup_color. (closes #1901)
相关文件:   src/syntax.c, src/proto/syntax.pro, src/terminal.c

Patch 8.0.0832
问题:       Terminal function arguments are not consistent.
解决方案:   Use one-based instead of zero-based rows and cols.  Use "." for
            the current row.
相关文件:   src/terminal.c, runtime/doc/eval.txt

Patch 8.0.0833
问题:       Terminal test fails.
解决方案:   Update the row argument to one based.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0834
问题:       Can't build without the client-server feature.
解决方案:   Add #ifdef.
相关文件:   src/os_unix.c

Patch 8.0.0835
问题:       Translations check with msgfmt does not work.
解决方案:   Add a space before the file name.
相关文件:   src/po/check.vim

Patch 8.0.0836
问题:       When a terminal buffer is changed it can still be accidentally
            abandoned.
解决方案:   When making a change reset the 'buftype' option.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim, src/option.c

Patch 8.0.0837
问题:       Signs can be drawn on top of console messages.
解决方案:   don't redraw at a prompt or when scrolled up. (Christian Brabandt,
            closes #1907)
相关文件:   src/screen.c

Patch 8.0.0838
问题:       Buffer hangs around when terminal window is closed.
解决方案:   When the job has ended wipe out a terminal buffer when the window
            is closed.
相关文件:   src/buffer.c, src/terminal.c, src/proto/terminal.pro,
            src/testdir/test_terminal.vim

Patch 8.0.0839
问题:       Cannot kill a job in a terminal with CTRL-C.
解决方案:   Set the controlling tty and send SIGINT. (closes #1910)
相关文件:   src/os_unix.c, src/terminal.c, src/proto/os_unix.pro

Patch 8.0.0840
问题:       MS-Windows: fopen() and open() prototypes do not match the ones in
            the system header file.  Can't build without FEAT_MBYTE.
解决方案:   Add "const".  Move macro to after including protoo.h.
相关文件:   src/os_win32.c, src/proto/os_win32.pro, src/macros.h, src/vim.h

Patch 8.0.0841
问题:       term_getline() may cause a crash.
解决方案:   Check that the row is valid. (Hirohito Higashi)
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0842
问题:       Using slave pty after closing it.
解决方案:   Do the ioctl() before dup'ing it.
相关文件:   src/os_unix.c

Patch 8.0.0843
问题:       MS-Windows: compiler warning for signed/unsigned.
解决方案:   Add type cast. (Yasuhiro Matsumoto, closes #1912)
相关文件:   src/terminal.c

Patch 8.0.0844
问题:       Wrong function prototype because of missing static.
解决方案:   Add "static".
相关文件:   src/os_win32.c, src/proto/os_win32.pro

Patch 8.0.0845
问题:       MS-Windows: missing semicolon in terminal code.
解决方案:   Add it. (Naruhiko Nishino, closes #1923)
相关文件:   src/terminal.c

Patch 8.0.0846
问题:       Cannot get the name of the pty of a job.
解决方案:   Add the "tty" entry to the job info. (Ozaki Kiichi, closes #1920)
            Add the term_gettty() function.
相关文件:   runtime/doc/eval.txt, src/channel.c, src/os_unix.c, src/structs.h,
            src/terminal.c, src/proto/terminal.pro, src/evalfunc.c,
            src/testdir/test_terminal.vim

Patch 8.0.0847
问题:       :argadd without argument can't handle space in file name. (Harm te
            Hennepe)
解决方案:   Escape the space. (Yasuhiro Matsumoto, closes #1917)
相关文件:   src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_arglist.vim

Patch 8.0.0848
问题:       Using multiple ch_log functions is clumsy.
解决方案:   Use variable arguments. (Ozaki Kiichi, closes #1919)
相关文件:   src/channel.c, src/message.c, src/proto/channel.pro,
            src/terminal.c

Patch 8.0.0849
问题:       Crash when job exit callback wipes the terminal.
解决方案:   Check for b_term to be NULL.  (Yasuhiro Matsumoto, closes #1922)
            Implement options for term_start() to be able to test.
            Make term_wait() more reliable.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim, src/channel.c

Patch 8.0.0850
问题:       MS-Windows: Depending on the console encoding, an error message
            that is given during startup may be broken.
解决方案:   Convert the message to the console codepage. (Yasuhiro Matsumoto,
            closes #1927)
相关文件:   src/message.c

Patch 8.0.0851
问题:       'smartindent' is used even when 'indentexpr' is set.
解决方案:   Ignore 'smartindent' when 'indentexpr' is set. (Hirohito Higashi)
相关文件:   src/misc1.c, src/testdir/test_smartindent.vim

Patch 8.0.0852 (after 8.0.0850)
问题:       MS-Windows: possible crash when giving a message on startup.
解决方案:   Initialize length. (Yasuhiro Matsumoto, closes #1931)
相关文件:   src/message.c

Patch 8.0.0853
问题:       Crash when running terminal with unknown command.
解决方案:   Check "term" not to be NULL. (Yasuhiro Matsumoto, closes #1932)
相关文件:   src/terminal.c

Patch 8.0.0854
问题:       No redraw after terminal was closed.
解决方案:   Set typebuf_was_filled. (Yasuhiro Matsumoto, closes #1925, closes
            #1924)  Add function to check for messages even when input is
            available.
相关文件:   src/terminal.c, src/os_unix.c, src/proto/os_unix.pro,
            src/os_win32.c, src/proto/os_win32.pro, src/os_mswin.c

Patch 8.0.0855
问题:       MS-Windows: can't get tty name of terminal.
解决方案:   Use the winpty process number. (Yasuhiro Matsumoto, closes #1929)
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0856
问题:       MS-Windows: terminal job doesn't take options.
解决方案:   Call job_set_options(). (Yasuhiro Matsumoto)
相关文件:   src/terminal.c

Patch 8.0.0857
问题:       Terminal test fails on MS-Windows.
解决方案:   Sleep a fraction of a second.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0858
问题:       Can exit while a terminal is still running a job.
解决方案:   Consider a buffer with a running job like a changed file.
相关文件:   src/undo.c, src/terminal.c, src/option.h, src/buffer.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/normal.c,
            src/window.c, src/testdir/test_terminal.vim

Patch 8.0.0859
问题:       NULL pointer access when term_free_vterm called twice.
解决方案:   Return when tl_vterm is NULL. (Yasuhiro Matsumoto, closes #1934)
相关文件:   src/terminal.c

Patch 8.0.0860
问题:       There may be side effects when a channel appends to a buffer that
            is not the current buffer.
解决方案:   Properly switch to another buffer before appending. (Yasuhiro
            Matsumoto, closes #1926, closes #1937)
相关文件:   src/channel.c, src/buffer.c, src/proto/buffer.pro,
            src/if_py_both.h

Patch 8.0.0861
问题:       Still many old style tests.
解决方案:   Convert several tests to new style. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test104.in,
            src/testdir/test104.ok, src/testdir/test22.in,
            src/testdir/test22.ok, src/testdir/test77.in,
            src/testdir/test77.ok, src/testdir/test84.in,
            src/testdir/test84.ok, src/testdir/test9.in, src/testdir/test9.ok,
            src/testdir/test98.in, src/testdir/test98.ok,
            src/testdir/test_autocmd.vim, src/testdir/test_curswant.vim,
            src/testdir/test_file_size.vim, src/testdir/test_let.vim,
            src/testdir/test_lineending.vim, src/testdir/test_scrollbind.vim,
            src/Makefile

Patch 8.0.0862 (after 8.0.0862)
问题:       File size test fails on MS-Windows.
解决方案:   Set fileformat after opening new buffer.  Strip CR.
相关文件:   src/testdir/test_file_size.vim

Patch 8.0.0863
问题:       A remote command starting with CTRL-\ CTRL-N does not work in the
            terminal window. (Christian J. Robinson)
解决方案:   Use CTRL-\ CTRL-N as a prefix or a Normal mode command.
相关文件:   src/terminal.c, runtime/doc/terminal.txt

Patch 8.0.0864
问题:       Cannot specify the name of a terminal.
解决方案:   Add the "term_name" option. (Yasuhiro Matsumoto, closes #1936)
相关文件:   src/channel.c, src/structs.h, src/terminal.c, runtime/doc/eval.txt

Patch 8.0.0865
问题:       Cannot build with channel but without terminal feature.
解决方案:   Add #ifdef
相关文件:   src/channel.c

Patch 8.0.0866
问题:       Solaris also doesn't have MIN and MAX.
解决方案:   Define MIN and MAX whenever they are not defined. (Ozaki Kiichi,
            closes #1939)
相关文件:   src/terminal.c

Patch 8.0.0867
问题:       When using a job or channel value as a dict value, when turning it
            into a string the quotes are missing.
解决方案:   Add quotes to the job and channel values. (Yasuhiro Matsumoto,
            closes #1930)
相关文件:   src/list.c, src/eval.c, src/testdir/test_terminal.vim

Patch 8.0.0868
问题:       Cannot specify the terminal size on the command line.
解决方案:   Use the address range for the terminal size. (Yasuhiro Matsumoto,
            closes #1941)
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0869
问题:       Job output is sometimes not displayed in a terminal.
解决方案:   Flush output before closing the channel.
相关文件:   src/channel.c, src/terminal.c

Patch 8.0.0870
问题:       Mouse escape codes sent to terminal unintentionally.
解决方案:   Fix libvterm to send mouse codes only when enabled.
相关文件:   src/terminal.c, src/libvterm/src/mouse.c

Patch 8.0.0871
问题:       The status line for a terminal window always has "[+]".
解决方案:   Do make the status line include "[+]" for a terminal window.
相关文件:   src/screen.c

Patch 8.0.0872
问题:       Using mouse scroll while a terminal window has focus and the mouse
            pointer is on another window does not work.  Same for focus in a
            non-terminal window and the mouse pointer is over a terminal
            window.
解决方案:   Send the scroll action to the right window.
相关文件:   src/terminal.c, src/normal.c, src/proto/terminal.pro

Patch 8.0.0873
问题:       In a terminal window cannot use CTRL-\ CTRL-N to start Visual
            mode.
解决方案:   After CTRL-\ CTRL-N enter Terminal-Normal mode for one command.
相关文件:   src/main.c, src/terminal.c, src/proto/terminal.pro

Patch 8.0.0874 (after 8.0.0873)
问题:       Can't build with terminal feature.
解决方案:   Include change to term_use_loop(). (Dominique Pelle)
相关文件:   src/normal.c

Patch 8.0.0875
问题:       Crash with weird command sequence. (Dominique Pelle)
解决方案:   Use vim_snprintf() instead of STRCPY(). 
相关文件:   src/misc1.c

Patch 8.0.0876
问题:       MS-Windows: Backslashes and wildcards in backticks don't work.
解决方案:   Do not handle backslashes inside backticks in the wrong place.
            (Yasuhiro Matsumoto, closes #1942)
相关文件:   src/os_mswin.c, src/os_win32.c

Patch 8.0.0877
问题:       Using CTRL-\ CTRL-N in terminal is inconsistent.
解决方案:   Stay in Normal mode.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/main.c, src/normal.c,
            src/option.c

Patch 8.0.0878
问题:       No completion for :mapclear.
解决方案:   Add completion (Nobuhiro Takasaki et al. closes #1943)
相关文件:   runtime/doc/eval.txt, runtime/doc/map.txt, src/ex_docmd.c,
            src/ex_getln.c, src/proto/ex_docmd.pro,
            src/testdir/test_cmdline.vim, src/vim.h

Patch 8.0.0879
问题:       Crash when shifting with huge number.
解决方案:   Check for overflow. (Dominique Pelle, closes #1945)
相关文件:   src/ops.c, src/testdir/test_visual.vim

Patch 8.0.0880
问题:       Travis uses an old Ubuntu version.
解决方案:   Switch from precise to trusty. (Ken Takata, closes #1897)
相关文件:   .travis.yml, Filelist, src/testdir/if_ver-1.vim,
            src/testdir/if_ver-2.vim, src/testdir/lsan-suppress.txt

Patch 8.0.0881
问题:       win32.mak no longer included in Windows SDK.
解决方案:   Do not include win32.mak. (Ken Takata)
相关文件:   src/GvimExt/Makefile, src/Make_mvc.mak

Patch 8.0.0882
问题:       term_scrape() and term_getline() require two arguments but it is
            not enforced.
解决方案:   Correct minimal number of arguments. (Hirohito Higashi)  Update
            documentation. (Ken Takata)
相关文件:   src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.0883
问题:       Invalid memory access with nonsensical script.
解决方案:   Check "dstlen" being positive. (Dominique Pelle)
相关文件:   src/misc1.c

Patch 8.0.0884
问题:       Can't specify the wait time for term_wait().
解决方案:   Add an optional second argument.
相关文件:   src/evalfunc.c, src/terminal.c, runtime/doc/eval.txt

Patch 8.0.0885
问题:       Terminal window scrollback is stored inefficiently.
解决方案:   Store the text in the Vim buffer.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0886
问题:       Crash when using ":term ls".
解决方案:   Fix line number computation.  Add a test for this.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0887
问题:       Can create a logfile in the sandbox.
解决方案:   Disable ch_logfile() in the sandbox. (Yasuhiro Matsumoto)
相关文件:   src/evalfunc.c

Patch 8.0.0888
问题:       Compiler warnings with 64 bit build.
解决方案:   Add type cast of change the type. (Mike Williams)
相关文件:   src/message.c, src/os_mswin.c, src/os_win32.c

Patch 8.0.0889
问题:       Gcc gives warnings for uninitialized variables. (Tony Mechelynck)
解决方案:   Initialize variables even though they are not used.
相关文件:   src/terminal.c

Patch 8.0.0890
问题:       Still many old style tests.
解决方案:   Convert several tests to new style. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test103.in, src/testdir/test103.ok,
            src/testdir/test107.in, src/testdir/test107.ok,
            src/testdir/test51.in, src/testdir/test51.ok,
            src/testdir/test91.in, src/testdir/test91.ok,
            src/testdir/test_getvar.vim, src/testdir/test_highlight.vim,
            src/testdir/test_visual.vim, src/testdir/test_window_cmd.vim,
            src/Makefile

Patch 8.0.0891
问题:       Uninitialized memory use with empty line in terminal.
解决方案:   Initialize growarray earlier. (Yasuhiro Matsumoto, closes #1949)
相关文件:   src/terminal.c

Patch 8.0.0892
问题:       When opening a terminal the pty size doesn't always match.
解决方案:   Update the pty size after opening the terminal. (Ken Takata)
相关文件:   src/terminal.c

Patch 8.0.0893
问题:       Cannot get the scroll count of a terminal window.
解决方案:   Add term_getscrolled().
相关文件:   src/terminal.c, src/proto/terminal.pro, src/evalfunc.c,
            runtime/doc/eval.txt, src/testdir/test_terminal.vim

Patch 8.0.0894
问题:       There is no test for runtime filetype detection.
解决方案:   Test a list of filetypes from patterns.
相关文件:   src/testdir/test_filetype.vim, runtime/filetype.vim

Patch 8.0.0895 (after 8.0.0894)
问题:       Filetype test fails on MS-Windows.
解决方案:   Fix file names.
相关文件:   src/testdir/test_filetype.vim

Patch 8.0.0896
问题:       Cannot automatically close a terminal window when the job ends.
解决方案:   Add the ++close argument to :term.  Add the term_finish option to
            term_start(). (Yasuhiro Matsumoto, closes #1950)  Also add
            ++open.
相关文件:   runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/structs.h, src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0897 (after 8.0.0896)
问题:       Wrong error message for invalid term_finish value
解决方案:   Pass the right argument to emsg().
相关文件:   src/channel.c

Patch 8.0.0898
问题:       Can't use the alternate screen in a terminal window.
解决方案:   Initialize the alternate screen. (Yasuhiro Matsumoto, closes
            #1957)  Add term_getaltscreen().
相关文件:   src/libvterm/include/vterm.h, src/terminal.c,
            src/proto/terminal.pro, src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.0899
问题:       Function name mch_stop_job() is confusing.
解决方案:   Rename to mch_signal_job().
相关文件:   src/channel.c, src/os_unix.c, src/proto/os_unix.pro,
            src/os_win32.c, src/proto/os_win32.pro, src/terminal.c

Patch 8.0.0900
问题:       :tab options doesn't open a new tab page. (Aviany)
解决方案:   Support the :tab modifier. (closes #1960)
相关文件:   src/ex_cmds2.c, runtime/optwin.vim

Patch 8.0.0901
问题:       Asan suppress file missing from distribution.
解决方案:   Add the file.
相关文件:   Filelist

Patch 8.0.0902
问题:       Cannot specify directory or environment for a job.
解决方案:   Add the "cwd" and "env" arguments to job options. (Yasuhiro
            Matsumoto, closes #1160)
相关文件:   runtime/doc/channel.txt, src/channel.c, src/terminal.c,
            src/os_unix.c, src/os_win32.c, src/structs.h,
            src/testdir/test_channel.vim, src/testdir/test_terminal.vim

Patch 8.0.0903 (after 8.0.0902)
问题:       Early return from test function.
解决方案:   Remove the return.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0904
问题:       Cannot set a location list from text.
解决方案:   Add the "text" argument to setqflist(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0905
问题:       MS-Windows: broken multi-byte characters in the console.
解决方案:   Restore all regions of the console buffer. (Ken Takata)
相关文件:   src/os_win32.c

Patch 8.0.0906
问题:       Don't recognize Couchbase files.
解决方案:   Add filetype detection. (Eugene Ciurana, closes #1951)
相关文件:   runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.0.0907
问题:       With cp932 font names might be misinterpreted.
解决方案:   Do not see "_" as a space when it is the second byte of a double
            byte character. (Ken Takata)
相关文件:   src/os_win32.c

Patch 8.0.0908
问题:       Cannot set terminal size with options.
解决方案:   Add "term_rows", "term_cols" and "vertical".
相关文件:   src/terminal.c, runtime/doc/eval.txt, src/channel.c,
            src/proto/channel.pro, src/structs.h, src/evalfunc.c,
            src/testdir/test_terminal.vim

Patch 8.0.0909
问题:       Channel test fails.
解决方案:   Allow for "cwd" and "env" arguments.
相关文件:   src/channel.c

Patch 8.0.0910
问题:       Cannot create a terminal in the current window.
解决方案:   Add option "curwin" and ++curwin.
相关文件:   src/terminal.c, runtime/doc/eval.txt, src/channel.c,
            src/structs.h, src/ex_cmds.h, src/testdir/test_terminal.vim

Patch 8.0.0911
问题:       Terminal test takes too long.
解决方案:   Instead of "sleep 1" use a Python program to briefly sleep.
相关文件:   src/testdir/test_terminal.vim, src/testdir/test_short_sleep.py

Patch 8.0.0912
问题:       Cannot run a job in a hidden terminal.
解决方案:   Add option "hidden" and ++hidden.
相关文件:   src/terminal.c, src/structs.h, src/channel.c, src/fileio.c,
            runtime/doc/terminal.txt, src/testdir/test_terminal.vim

Patch 8.0.0913
问题:       MS-Windows: CTRL-C kills shell in terminal window instead of the
            command running in the shell.
解决方案:   Make CTRL-C only send a CTRL_C_EVENT and have CTRL-BREAK kill the
            job. (partly by Yasuhiro Matsumoto, closes #1962)
相关文件:   src/os_win32.c, src/gui_w32.c, src/terminal.c, src/globals.h

Patch 8.0.0914
问题:       Highlight attributes are always combined.
解决方案:   Add the 'nocombine' value to replace attributes instead of
            combining them. (scauligi, closes #1963)
相关文件:   runtime/doc/syntax.txt, src/syntax.c, src/vim.h

Patch 8.0.0915
问题:       Wrong initialisation of global.
解决方案:   Use INIT().
相关文件:   src/globals.h

Patch 8.0.0916
问题:       Cannot specify properties of window for when opening a window for
            a finished terminal job.
解决方案:   Add "term_opencmd".
相关文件:   src/channel.c, src/structs.h, src/terminal.c,
            runtime/doc/eval.txt, src/testdir/test_terminal.vim

Patch 8.0.0917
问题:       MS-Windows:CTRL-C handling in terminal window is wrong
解决方案:   Pass CTRL-C as a key. Turn CTRL-BREAK into a key stroke. (Yasuhiro
            Matsumoto, closes #1965)
相关文件:   src/os_win32.c, src/terminal.c

Patch 8.0.0918
问题:       Cannot get terminal window cursor shape or attributes.
解决方案:   Support cursor shape, attributes and color.
相关文件:   src/terminal.c, runtime/doc/eval.txt,
            src/libvterm/include/vterm.h, src/libvterm/src/state.c,
            src/libvterm/src/vterm.c, src/feature.h, src/ui.c,
            src/proto/ui.pro, src/term.c, src/proto/term.pro,
            src/option.c, src/term.h

Patch 8.0.0919
问题:       Cursor color isn't set on startup.
解决方案:   Initialize showing_mode to invalid value.
相关文件:   src/term.c

Patch 8.0.0920
问题:       The cursor shape is wrong after switch back from an alternate
            screen in a terminal window. (Marius Gedminas)
解决方案:   Change bitfield to unsigned.  Set flag that cursor shape was set.
相关文件:   src/terminal.c, src/libvterm/src/vterm_internal.h

Patch 8.0.0921
问题:       Terminal window cursor shape not supported in the GUI.
解决方案:   Use the terminal window cursor shape in the GUI.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/gui.c, src/syntax.c,
            src/proto/syntax.pro

Patch 8.0.0922
问题:       Quickfix list always added after current one.
解决方案:   Make it possible to add a quickfix list after the last one.
            (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.0923
问题:       Crash in GUI when terminal job exits. (Kazunobu Kuriyama)
解决方案:   reset in_terminal_loop when a terminal is freed.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.0924
问题:       Terminal window not updated after using term_sendkeys().
解决方案:   Call redraw_after_callback().
相关文件:   src/terminal.c

Patch 8.0.0925
问题:       MS-Windows GUI: channel I/O not handled right away.
解决方案:   Don't call process_message() unless a message is available.
            (Yasuhiro Matsumoto, closes #1969)
相关文件:   src/gui_w32.c

Patch 8.0.0926
问题:       When job in terminal window ends topline may be wrong.
解决方案:   When the job ends adjust topline so that the active part of the
            terminal is displayed.
相关文件:   src/terminal.c

Patch 8.0.0927
问题:       If a terminal job sends a blank title "running" is not shown.
解决方案:   When the title is blank make it empty.
相关文件:   src/terminal.c

Patch 8.0.0928
问题:       MS-Windows: passing arglist to job has escaping problems.
解决方案:   Improve escaping. (Yasuhiro Matsumoto, closes #1954)
相关文件:   src/testdir/test_channel.vim, src/testdir/test_terminal.vim,
            src/channel.c, src/proto/channel.pro, src/terminal.c

Patch 8.0.0929
问题:       :term without argument does not work.
解决方案:   Use shell for empty command. (Yasuhiro Matsumoto, closes #1970)
相关文件:   src/terminal.c

Patch 8.0.0930
问题:       Terminal buffers are stored in the viminfo file while they can't
            be useful.
解决方案:   Skip terminal buffers for file marks and buffer list
相关文件:   src/buffer.c, src/mark.c

Patch 8.0.0931
问题:       getwininfo() does not indicate a terminal window.
解决方案:   Add "terminal" to the dictionary.
相关文件:   runtime/doc/eval.txt, src/evalfunc.c

Patch 8.0.0932
问题:       Terminal may not use right characters for BS and Enter.
解决方案:   Get the characters from the tty.
相关文件:   src/os_unix.c, src/proto/os_unix.pro, src/terminal.c

Patch 8.0.0933
问题:       Terminal test tries to start GUI when it's not possible.
解决方案:   Check if the GUI can run. (James McCoy, closes #1971)
相关文件:   src/testdir/shared.vim, src/testdir/test_terminal.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim

Patch 8.0.0934 (after 8.0.0932)
问题:       Change to struts.h missing in patch.
解决方案:   Include adding ttyinfo_T.
相关文件:   src/structs.h

Patch 8.0.0935
问题:       Cannot recognize a terminal buffer in :ls output.
解决方案:   Use R for a running job and F for a finished job.
相关文件:   src/buffer.c

Patch 8.0.0936
问题:       mode() returns wrong value for a terminal window.
解决方案:   Return 't' when typed keys go to a job.
相关文件:   src/evalfunc.c, src/testdir/test_terminal.vim

Patch 8.0.0937
问题:       User highlight groups are not adjusted for StatusLineTerm.
解决方案:   Combine attributes like for StatusLineNC.
相关文件:   src/syntax.c, src/globals.h, src/screen.c

Patch 8.0.0938
问题:       Scrolling in terminal window is inefficient.
解决方案:   Use win_del_lines().
相关文件:   src/terminal.c

Patch 8.0.0939
问题:       Test_terminal_env is flaky. (James McCoy)
解决方案:   Use WaitFor() instead of term_wait().
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0940
问题:       Test_terminal_scrape_multibyte is flaky. (James McCoy)
解决方案:   Use WaitFor() instead of term_wait().
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0941
问题:       Existing color schemes don't work well with StatusLineTerm.
解决方案:   Don't use "reverse", use fg and bg colors.  Also add
            StatusLineTermNC.
相关文件:   src/syntax.c, src/vim.h, src/screen.c, src/globals.h, src/option.c

Patch 8.0.0942
问题:       Using freed memory with ":terminal" if an autocommand changes
            'shell' when splitting the window. (Marius Gedminas)
解决方案:   Make a copy of 'shell'. (closes #1974)
相关文件:   src/terminal.c

Patch 8.0.0943
问题:       Test_terminal_scrape_multibyte fails if the codepage is not utf-8.
解决方案:   Start "cmd" with the utf-8 codepage. (micbou, closes #1975)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0944
问题:       Test_profile is a little bit flaky.
解决方案:   Accept a match when self and total time are the same. (James
            McCoy, closes #1972)
相关文件:   src/testdir/test_profile.vim

Patch 8.0.0945
问题:       64-bit compiler warnings.
解决方案:   Use "size_t" instead of "int". (Mike Williams)
相关文件:   src/os_win32.c

Patch 8.0.0946
问题:       Using PATH_MAX does not work well on some systems.
解决方案:   use MAXPATHL instead. (James McCoy, closes #1973)
相关文件:   src/main.c

Patch 8.0.0947
问题:       When in Insert mode and using CTRL-O CTRL-W CTRL-W to move to a
            terminal window, get in a weird Insert mode.
解决方案:   Don't go to Insert mode in a terminal window. (closes #1977)
相关文件:   src/normal.c

Patch 8.0.0948
问题:       Crash if timer closes window while dragging status line.
解决方案:   Check if the window still exists. (Yasuhiro Matsumoto, closes
            #1979)
相关文件:   src/edit.c, src/evalfunc.c, src/gui.c, src/normal.c, src/ui.c

Patch 8.0.0949
问题:       winpty.dll name is fixed.
解决方案:   Add the 'winptydll' option. Make the default name depend on
            whether it is a 32-bit or 64-bit build. (idea by Yasuhiro
            Matsumoto, closes #1978)
相关文件:   src/option.c, src/option.h, src/terminal.c,
            runtime/doc/options.txt

Patch 8.0.0950
问题:       MS-Windows: wrong #ifdef, compiler warnings for signed/unsigned.
解决方案:   Change variable type. Change TERMINAL to FEAT_TERMINAL.
相关文件:   src/os_win32.c, src/option.h

Patch 8.0.0951
问题:       Another wrong #ifdef.
解决方案:   Change TERMINAL to FEAT_TERMINAL. (closes #1981)
相关文件:   src/option.c

Patch 8.0.0952
问题:       MS-Windows: has('terminal') does not check existence of dll file.
解决方案:   Check if the winpty dll file can be loaded. (Ken Takata)
相关文件:   src/evalfunc.c, src/proto/terminal.pro, src/terminal.c

Patch 8.0.0953
问题:       Get "no write since last change" error in terminal window.
解决方案:   Use another message when closing a terminal window. Make ":quit!"
            also end the job.
相关文件:   src/globals.h, src/buffer.c, src/proto/buffer.pro, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/quickfix.c, src/terminal.c

Patch 8.0.0954
问题:       /proc/self/exe might be a relative path.
解决方案:   Make the path a full path. (James McCoy, closes #1983)
相关文件:   src/main.c

Patch 8.0.0955
问题:       Test_existent_file() fails on some file systems.
解决方案:   Run the test again with a sleep when the test fails without a
            sleep. (James McCoy, closes #1984)
相关文件:   src/testdir/test_stat.vim

Patch 8.0.0956
问题:       Scrolling in a terminal hwindow as flicker when the Normal
            background differs from the terminal window background.
解决方案:   Set the attribute to clear with.
相关文件:   src/terminal.c, src/screen.c, src/proto/screen.pro, src/message.c,
            src/move.c

Patch 8.0.0957
问题:       When term_sendkeys() sends many keys it may get stuck in writing
            to the job.
解决方案:   Make the write non-blocking, buffer keys to be sent.
相关文件:   src/terminal.c, src/channel.c, src/proto/channel.pro,
            src/structs.h src/testdir/test_terminal.vim

Patch 8.0.0958
问题:       The terminal test fails on MS-Windows when compiled with the
            terminal feature but the winpty DLL is missing.
解决方案:   Check if the terminal feature works. (Ken Takata)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0959
问题:       Build failure on MS-Windows.
解决方案:   Use ioctlsocket() instead of fcntl().
相关文件:   src/channel.c

Patch 8.0.0960
问题:       Job in terminal does not get CTRL-C, we send a SIGINT instead.
解决方案:   Don't call may_send_sigint() on CTRL-C.  Make CTRL-W CTRL-C end
            the job.
相关文件:   src/terminal.c, runtime/doc/terminal.txt

Patch 8.0.0961
问题:       The script to build the installer does not include winpty.
解决方案:   Add winpty32.dll and winpty-agent.exe like diff.exe
相关文件:   nsis/gvim.nsi

Patch 8.0.0962
问题:       Crash with virtualedit and joining lines. (Joshua T Corbin, Neovim
            #6726)
解决方案:   When using a mark check that coladd is valid.
相关文件:   src/normal.c, src/misc2.c, src/Makefile,
            src/testdir/test_virtualedit.vim, src/testdir/test_alot.vim

Patch 8.0.0963
问题:       Terminal test fails on MacOS. (chdiza)
解决方案:   Wait for the shell to echo the characters. (closes #1991)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0964
问题:       Channel write buffer does not work with poll().
解决方案:   Use the same mechanism as with select().
相关文件:   src/channel.c

Patch 8.0.0965
问题:       The cursor shape is not reset after it was changed in a terminal.
解决方案:   Request the original cursor shape and restore it.  Add t_RS.
            Do not add t_SH for now, it does not work properly.
相关文件:   src/term.c, src/term.h, src/option.c, src/terminal.c

Patch 8.0.0966 (after 8.0.0965)
问题:       Build failure without terminal feature.
解决方案:   Move #endif.
相关文件:   src/term.c

Patch 8.0.0967
问题:       Using a terminal may cause the cursor to blink.
解决方案:   Do not set t_vs, since we cannot restore the old blink state.
相关文件:   src/term.c

Patch 8.0.0968
问题:       Crash when switching terminal modes. (Nikolai Pavlov)
解决方案:   Check that there are scrollback lines.
相关文件:   src/terminal.c

Patch 8.0.0969
问题:       Coverity warning for unused return value.
解决方案:   Add (void) to avoid the warning.
相关文件:   src/channel.c

Patch 8.0.0970
问题:       if there is no StatusLine highlighting and there is StatusLineNC
            or StatusLineTermNC highlighting then an invalid highlight id is
            passed to combine_stl_hlt(). (Coverity)
解决方案:   Check id_S to be -1 instead of zero.
相关文件:   src/syntax.c

Patch 8.0.0971
问题:       'winptydll' missing from :options.
解决方案:   Add the entry.
相关文件:   runtime/optwin.vim

Patch 8.0.0972
问题:       Compiler warnings for unused variables. (Tony Mechelynck)
解决方案:   Add #ifdefs.
相关文件:   src/term.c

Patch 8.0.0973
问题:       initial info about blinking cursor is wrong
解决方案:   Invert the blink flag.  Add t_VS to stop a blinking cursor.
相关文件:   src/term.c, src/proto/term.pro, src/term.h, src/option.c,
            src/terminal.c

Patch 8.0.0974
问题:       Resetting a string option does not trigger OptionSet. (Rick Howe)
解决方案:   Set the origval.
相关文件:   src/option.c, src/testdir/test_autocmd.vim

Patch 8.0.0975
问题:       Using freed memory when setting 'backspace'.
解决方案:   When changing oldval also change origval.
相关文件:   src/option.c

Patch 8.0.0976
问题:       Cannot send lines to a terminal job.
解决方案:   Make [range]terminal send selected lines to the job.
            Use ++rows and ++cols for the terminal size.
相关文件:   src/ex_cmds.h, src/terminal.c, src/os_unix.c,
            src/testdir/test_terminal.vim

Patch 8.0.0977
问题:       Cannot send lines to a terminal job on MS-Windows.
解决方案:   Set jv_in_buf.  Command doesn't get EOF yet though.
相关文件:   src/terminal.c

Patch 8.0.0978
问题:       Writing to terminal job is not tested.
解决方案:   Add a test.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0979
问题:       Terminal noblock test fails on MS-Windows. (Christian Brabandt)
解决方案:   Ignore empty line below "done".
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0980
问题:       Coverity warning for failing to open /dev/null.
解决方案:   When /dev/null can't be opened exit the child.
相关文件:   src/os_unix.c

Patch 8.0.0981
问题:       Cursor in terminal window blinks by default, while in a real xterm
            it does not blink, unless the -bc argument is used.
解决方案:   Do not use a blinking cursor by default.
相关文件:   src/terminal.c

Patch 8.0.0982
问题:       When 'encoding' is set to a multi-byte encoding other than utf-8
            the characters from their terminal are messed up.
解决方案:   Convert displayed text from utf-8 to 'encoding' for MS-Windows.
            (Yasuhiro Matsumoto, close #2000)
相关文件:   src/terminal.c

Patch 8.0.0983
问题:       Unnecessary check for NULL pointer.
解决方案:   Remove the NULL check in dialog_changed(), it already happens in
            dialog_msg(). (Ken Takata)
相关文件:   src/ex_cmds2.c

Patch 8.0.0984
问题:       Terminal blinking cursor not correct in the GUI.
解决方案:   Set blinkoff correctly.  Also make the cursor blink on MS-Windows
            by default. (Ken Takata)
相关文件:   src/terminal.c

Patch 8.0.0985
问题:       Libvterm has its own idea of character width.
解决方案:   Use the Vim functions for character width and composing to avoid a
            mismatch. (idea by Yasuhiro Matsumoto)
相关文件:   src/Makefile, src/libvterm/src/unicode.c, src/mbyte.c,
            src/proto/mbyte.pro, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0986
问题:       Terminal feature always requires multi-byte feature.
解决方案:   Remove #ifdef FEAT_MBYTE, disable terminal without multi-byte.
相关文件:   src/terminal.c, src/feature.h

Patch 8.0.0987
问题:       terminal: second byte of double-byte char wrong
解决方案:   Set the second byte to NUL only for utf-8 and non-multibyte.
相关文件:   src/terminal.c

Patch 8.0.0988
问题:       Warning from Covscan about using NULL pointer.
解决方案:   Add extra check for NULL. (zdohnal)
相关文件:   src/fileio.c, src/undo.c

Patch 8.0.0989
问题:       ActiveTcl dll name has changed in 8.6.6.
解决方案:   Adjust the makefile. (Ken Takata)
相关文件:   src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.0990
问题:       When 'encoding' is a double-byte encoding, pasting a register into
            a terminal ends up with the wrong characters.
解决方案:   Convert from 'encoding' to utf-8. (Yasuhiro Matsumoto, closes
            #2007)
相关文件:   src/terminal.c

Patch 8.0.0991
问题:       Using wrong character conversion for DBCS.
解决方案:   Use utf_char2bytes instead of mb_char2bytes. (Yasuhiro Matsumoto,
            closes #2012)
相关文件:   src/terminal.c

Patch 8.0.0992
问题:       Terminal title is wrong when 'encoding' is DBCS.
解决方案:   Convert the title from DBCS to utf-8. (Yasuhiro Matsumoto, closes
            #2009)
相关文件:   src/terminal.c

Patch 8.0.0993
问题:       Sometimes an xterm sends an extra CTRL-X after the response for
            the background color.  Related to t_RS.
解决方案:   Check for the CTRL-X after the terminating 0x7.
相关文件:   src/term.c

Patch 8.0.0994
问题:       MS-Windows: cursor in terminal blinks even though the blinking
            cursor was disabled on the system.
解决方案:   Use GetCaretBlinkTime(). (Ken Takata)
相关文件:   src/terminal.c

Patch 8.0.0995
问题:       Terminal tests fail on Mac.
解决方案:   Add workaround: sleep a moment in between sending keys.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.0996
问题:       Mac: t_RS is echoed on the screen in Terminal.app.  Even though
            $TERM is set to "xterm-256colors" it cannot handle this xterm
            escape sequence.
解决方案:   Recognize Terminal.app from the termresponse and skip sending t_RS
            if it looks like Terminal.app.
相关文件:   src/term.c

Patch 8.0.0997 (after 8.0.0996)
问题:       Libvterm and Terminal.app not recognized from termresponse.
解决方案:   Adjust string compare.
相关文件:   src/term.c

Patch 8.0.0998
问题:       Strange error when using K while only spaces are selected.
            (Christian J. Robinson)
解决方案:   Check for blank argument.
相关文件:   src/normal.c, src/testdir/test_help.vim

Patch 8.0.0999
问题:       Indenting raw C++ strings is wrong.
解决方案:   Add special handling of raw strings. (Christian Brabandt)
相关文件:   src/misc1.c, src/testdir/test_cindent.vim

Patch 8.0.1000
问题:       Cannot open a terminal without running a job in it.
解决方案:   Make ":terminal NONE" open a terminal with a pty.
相关文件:   src/terminal.c, src/os_unix.c, src/proto/os_unix.pro,
            src/channel.c, src/proto/channel.pro, src/structs.h,
            src/testdir/test_terminal.c, src/misc2.c, src/gui_gtk_x11.c

Patch 8.0.1001
问题:       Setting 'encoding' makes 'printheader' invalid.
解决方案:   Do not translate the default value of 'printheader'. (Yasuhiro
            Matsumoto, closes #2026)
相关文件:   src/option.c

Patch 8.0.1002
问题:       Unnecessarily updating screen after timer callback.
解决方案:   Check if calling the timer sets must_redraw.
相关文件:   src/ex_cmds2.c, src/channel.c, src/screen.c, src/proto/screen.pro,
            src/terminal.c

Patch 8.0.1003
问题:       64 bit compiler warning
解决方案:   Add type cast. (Mike Williams)
相关文件:   src/channel.c

Patch 8.0.1004
问题:       matchstrpos() without a match returns too many items.
解决方案:   Also remove the second item when the position is beyond the end of
            the string. (Hirohito Higashi)  Use an enum for the type.
相关文件:   src/evalfunc.c, src/testdir/test_match.vim

Patch 8.0.1005
问题:       Terminal without job updates slowly in GUI.
解决方案:   Poll for input when a channel has the keep_open flag.
相关文件:   src/channel.c, src/proto/channel.pro, src/gui_gtk_x11.c

Patch 8.0.1006
问题:       Cannot parse text with 'errorformat' without changing a quickfix
            list.
解决方案:   Add the "text" argument to getqflist(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1007
问题:       No test for filetype detection for scripts.
解决方案:   Add a first test file script filetype detection.
相关文件:   src/testdir/test_filetype.vim, runtime/scripts.vim

Patch 8.0.1008
问题:       Slow updating of terminal window in Motif.
解决方案:   Add a timeout to the wait-for-character loop.
相关文件:   src/gui_x11.c

Patch 8.0.1009
问题:       Xterm cursor blinking status may be inverted.
解决方案:   Use another request to get the blink status and compare with the
            cursor style report
相关文件:   src/term.c, src/proto/term.pro, src/term.h, src/option.c,
            src/terminal.c

Patch 8.0.1010 (after 8.0.1009)
问题:       Build failure without termresponse feature.
解决方案:   Add #ifdef.
相关文件:   src/term.c

Patch 8.0.1011
问题:       Terminal test fails with Athena and Motif.
解决方案:   Ignore the error for the input context. (Kazunobu Kuriyama)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1012
问题:       MS-Windows: Problem with $HOME when it was set internally.
解决方案:   Only use the $HOME default internally. (Yasuhiro Matsumoto, closes
            #2013)
相关文件:   src/misc1.c, src/testdir/Make_all.mak, src/Makefile,
            src/testdir/test_windows_home.vim

Patch 8.0.1013
问题:       A terminal window with a running job behaves different from a
            window containing a changed buffer.
解决方案:   Do not set 'bufhidden' to "hide".  Fix that a buffer where a
            terminal used to run is listed as "[Scratch]".
相关文件:   src/terminal.c, runtime/doc/terminal.txt, src/buffer.c

Patch 8.0.1014
问题:       Old compiler doesn't know uint32_t. Warning for using NULL instead
            of NUL.
解决方案:   Use UINT32_T.  Use NUL instead of NULL.
相关文件:   src/mbyte.c, src/proto/mbyte.pro, src/misc1.c

Patch 8.0.1015 (after 8.0.1013)
问题:       Missing update to terminal test.
解决方案:   Add the changes to the test.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1016
问题:       Gnome terminal echoes t_RC.
解决方案:   Detect Gnome terminal by the version string.  Add v: variables for
            all the term responses.
相关文件:   src/term.c, src/eval.c, src/vim.h, runtime/doc/eval.txt

Patch 8.0.1017
问题:       Test for MS-Windows $HOME always passes.
解决方案:   Rename the test function.  Make the test pass.
相关文件:   src/testdir/test_windows_home.vim

Patch 8.0.1018
问题:       Warnings from 64-bit compiler. (Christian Brabandt)
解决方案:   Add type casts.
相关文件:   src/terminal.c

Patch 8.0.1019
问题:       Pasting in virtual edit happens in the wrong place.
解决方案:   Do not adjust coladd when after the end of the line (closes #2015)
相关文件:   src/testdir/test_virtualedit.vim, src/misc2.c

Patch 8.0.1020
问题:       When a timer calls getchar(1) input is overwritten.
解决方案:   Increment tb_change_cnt in inchar(). (closes #1940)
相关文件:   src/getchar.c

Patch 8.0.1021
问题:       Older Gnome terminal still echoes t_RC. (François Ingelrest)
解决方案:   Check for version > 3000 instead of 4000.
相关文件:   src/term.c

Patch 8.0.1022
问题:       Test 80 is old style.
解决方案:   Turn it into a new style test. (Yegappan Lakshmanan)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test80.in, src/testdir/test80.ok,
            src/testdir/test_substitute.vim

Patch 8.0.1023
问题:       It is not easy to identify a quickfix list.
解决方案:   Add the "id" field. (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1024
问题:       Manual folds are lost when a session file has the same buffer in
            two windows. (Jeansen)
解决方案:   Use ":edit" only once. (Christian Brabandt, closes #1958)
相关文件:   src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.0.1025
问题:       Stray copy command in test.
解决方案:   Remove the copy command.
相关文件:   src/testdir/test_mksession.vim

Patch 8.0.1026
问题:       GTK on-the-spot input has problems. (Gerd Wachsmuth)
解决方案:   Support over-the-spot. (Yukihiro Nakadaira, Ken Takata, closes
            #1215)
相关文件:   runtime/doc/mbyte.txt, runtime/doc/options.txt, src/edit.c,
            src/ex_getln.c, src/mbyte.c, src/misc1.c, src/option.c,
            src/option.h, src/screen.c, src/undo.c,
            src/testdir/gen_opt_test.vim

Patch 8.0.1027
问题:       More terminals can't handle requesting cursor mode.
解决方案:   Recognize Putty. (Hirohito Higashi)  Also include Xfce in the
            version check. (Dominique Pelle)  Recognize Konsole.
相关文件:   src/term.c

Patch 8.0.1028
问题:       MS-Windows: viminfo uses $VIM/_viminfo if $HOME not set. (Yongwei
            Wu)
解决方案:   Use vim_getenv() but check it's returning the default "C:/".
相关文件:   src/ex_cmds.c

Patch 8.0.1029
问题:       Return value of getqflist() is inconsistent.  (Lcd47)
解决方案:   Always return an "items" entry.
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1030
问题:       MS-Windows: wrong size computation in is_cygpty().
解决方案:   Compute the size properly. (Ken Takata)
相关文件:   src/iscygpty.c, src/iscygpty.h

Patch 8.0.1031
问题:       "text" argument for getqflist() is confusing. (Lcd47)
解决方案:   Use "lines" instead. (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1032
问题:       "make tags" doesn't work well on MS-Windows.
解决方案:   Add or fix tags target. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.1033
问题:       Detecting background color does not work in screen, even when it
            is working like an xterm.
解决方案:   Make "screen.xterm" use termcap entries like an xterm. (Lubomir
            Rintel, closes #2048)  When termresponse version is huge also
            recognize as not being an xterm.
相关文件:   src/os_unix.c, src/term.c

Patch 8.0.1034
问题:       Sending buffer lines to terminal doesn't work on MS-Windows.
解决方案:   Send CTRL-D to mark the end of the text. (Yasuhiro Matsumoto,
            closes #2043) Add the "eof_chars" option.
相关文件:   src/channel.c, src/proto/terminal.pro, src/terminal.c,
            src/testdir/test_terminal.vim, src/structs.h

Patch 8.0.1035
问题:       Sending buffer lines to terminal doesn't work on MS-Windows.
解决方案:   Use CR instead of NL after every line.  Make the EOF text work
            properly.  Add the ++eof argument to :terminal.
相关文件:   src/structs.h, src/channel.c, src/terminal.c,
            runtime/doc/terminal.txt, runtime/doc/eval.txt

Patch 8.0.1036
问题:       ++eof argument for terminal only available on MS-Windows.
解决方案:   Also support ++eof on Unix.  Add a test.
相关文件:   src/channel.c, src/terminal.c, src/structs.h,
            src/testdir/test_terminal.vim

Patch 8.0.1037
问题:       "icase" of 'diffopt' is not used for highlighting differences.
解决方案:   Also use "icase". (Rick Howe)
相关文件:   src/diff.c, src/testdir/test_diffmode.vim

Patch 8.0.1038
问题:       Strike-through text not supported.
解决方案:   Add support for the "strikethrough" attribute. (Christian
            Brabandt, Ken Takata)
相关文件:   runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/syntax.txt, runtime/doc/term.txt, src/evalfunc.c,
            src/gui.c, src/gui.h, src/gui_gtk_x11.c, src/gui_mac.c,
            src/gui_w32.c, src/gui_x11.c, src/option.c, src/screen.c,
            src/syntax.c, src/term.c, src/term.h, src/terminal.c, src/vim.h

Patch 8.0.1039
问题:       Cannot change a line in a buffer other than the current one.
解决方案:   Add setbufline(). (Yasuhiro Matsumoto, Ozaki Kiichi, closes #1953)
相关文件:   src/evalfunc.c, runtime/doc/eval.txt, src/Makefile,
            src/testdir/test_bufline.vim, src/testdir/test_alot.vim


Patch 8.0.1040
问题:       Cannot use another error format in getqflist().
解决方案:   Add the "efm" argument to getqflist(). (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1041
问题:       Bogus characters appear when indenting kicks in while doing a
            visual-block append.
解决方案:   Recompute when indenting is done. (Christian Brabandt)
相关文件:   runtime/doc/visual.txt, src/charset.c, src/edit.c, src/misc1.c,
            src/ops.c, src/proto/charset.pro, src/proto/misc1.pro,
            src/screen.c, src/spell.c, src/testdir/test_cindent.vim

Patch 8.0.1042 (after 8.0.1038)
问题:       Without the syntax feature highlighting doesn't work.
解决方案:   Always use unsigned short to store attributes.
相关文件:   src/vim.h

Patch 8.0.1043
问题:       Warning for uninitialized variable. (John Marriott)
解决方案:   Move code to check indent inside "if".
相关文件:   src/ops.c

Patch 8.0.1044
问题:       Warning for uninitialized variable. (John Marriott)
解决方案:   Initialize ind_pre.
相关文件:   src/ops.c

Patch 8.0.1045
问题:       Running tests may pollute shell history. (Manuel Ortega)
解决方案:   Make $HISTFILE empty.
相关文件:   src/testdir/setup.vim

Patch 8.0.1046
问题:       Code duplication in diff mode.
解决方案:   Use diff_equal_char() also in diff_cmp(). (Rick Howe)
相关文件:   src/diff.c

Patch 8.0.1047
问题:       Buffer overflow in Ruby.
解决方案:   Allocate one more byte. (Dominique Pelle)
相关文件:   src/if_ruby.c

Patch 8.0.1048
问题:       No test for what 8.0.1020 fixes.
解决方案:   Add test_feedinput().  Add a test. (Ozaki Kiichi, closes #2046)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_timers.vim,
            src/ui.c

Patch 8.0.1049
问题:       Shell on Mac can't handle long text, making terminal test fail.
解决方案:   Only write 1000 characters instead of 5000.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1050
问题:       Terminal window feature not included by default.
解决方案:   Include the terminal feature for the "huge" build.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1051
问题:       Cannot run terminal with spaces in argument.
解决方案:   Accept backslash to escape space and other characters. (closes
            #1999)
相关文件:   src/os_unix.c, src/testdir/test_terminal.vim

Patch 8.0.1052
问题:       term_start() does not allow in_io, out_io and err_io options.
解决方案:   Add JO_OUT_IO to get_job_options().
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1053
问题:       setline() does not work on startup. (Manuel Ortega)
解决方案:   Do not check for ml_mfp to be set for the current buffer.
            (Christian Brabandt)
相关文件:   src/testdir/shared.vim, src/testdir/test_alot.vim,
            src/testdir/test_bufline.vim, src/testdir/test_timers.vim,
            src/evalfunc.c

Patch 8.0.1054
问题:       Terminal test fails on MS-Windows.
解决方案:   Disable the redirection test for now.  Improve scrape test to make
            it less flaky.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1055
问题:       Bufline test hangs on MS-Windows.
解决方案:   Avoid message for writing file.  Source shared.vim when running
            test individually.
相关文件:   src/testdir/test_bufline.vim, src/testdir/test_timers.vim

Patch 8.0.1056
问题:       Cannot build with the diff feature but without the multi-byte
            feature.
解决方案:   Remove #ifdefs. (John Marriott)
相关文件:   src/diff.c

Patch 8.0.1057
问题:       Terminal scrape test waits too long, it checks for one instead of
            three.
解决方案:   Check there are three characters. (micbou)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1058
问题:       Terminal redirection test is flaky.
解决方案:   Wait for job to finish.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1059
问题:       older Gnome terminal returns smaller version number. (antarestrue)
解决方案:   Lower version limit from 2800 to 2500. (#2032)
相关文件:   src/term.c

Patch 8.0.1060
问题:       When imstyle is zero, mapping <Left> breaks preediting.
解决方案:   Pass though preediting key-events. (Yasuhiro Matsumoto, closes
            #2064, closes #2063)
相关文件:   src/getchar.c, src/mbyte.c

Patch 8.0.1061
问题:       Coverity: no check for NULL command.
解决方案:   Check for NULL list item.
相关文件:   src/terminal.c

Patch 8.0.1062
问题:       Coverity warnings in libvterm.
解决方案:   Add (void) to avoid warning for not checking return value.
            Add "break" before "case".
相关文件:   src/libvterm/src/screen.c, src/libvterm/src/state.c

Patch 8.0.1063
问题:       Coverity warns for NULL check and using variable pointer as an
            array.
解决方案:   Remove the NULL check.  Make "argvar" an array.
相关文件:   src/terminal.c

Patch 8.0.1064
问题:       Coverity warns for leaking resource.
解决方案:   Free pty_master_fd on failure.
相关文件:   src/os_unix.c

Patch 8.0.1065
问题:       Not all macro examples are included in the self-installing
            executable. (lkintact)
解决方案:   Add the directories to the NSIS script. (closes #2065)
相关文件:   nsis/gvim.nsi

Patch 8.0.1066
问题:       Some terminals can't handle requesting cursor mode. (Steven
            Hartland)
解决方案:   Recognize vandyke SecureCRT. (closes #2008)
相关文件:   src/term.c

Patch 8.0.1067
问题:       Using try/catch in timer does not prevent it from being stopped.
解决方案:   Reset the exception context and use did_emsg instead of
            called_emsg.
相关文件:   src/ex_cmds2.c, src/testdir/test_timers.vim, src/globals.h,
            src/message.c

Patch 8.0.1068 (after 8.0.1066)
问题:       Vandyke SecureCRT terminal can't handle cursor mode request.
            (Steven Hartland)
解决方案:   Fix pointer computation. (closes #2008)
相关文件:   src/term.c

Patch 8.0.1069
问题:       Still get CTRL-X sometimes for t_RS request.
解决方案:   Also skip 0x18 after a key code response.
相关文件:   src/term.c

Patch 8.0.1070
问题:       Terminal test is flaky on Mac.
解决方案:   Add Test_terminal_noblock() to list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1071
问题:       $TERM names starting with "putty" and "cygwin" are likely to have
            a dark background, but are not recognized.
解决方案:   Only check the first few characters of $TERM to match "putty" or
            "cygwin". (Christian Brabandt)
相关文件:   src/option.c

Patch 8.0.1072
问题:       The :highlight command causes a redraw even when nothing changed.
解决方案:   Only set "need_highlight_changed" when an attribute changed.
相关文件:   src/syntax.c

Patch 8.0.1073
问题:       May get an endless loop if 'statusline' changes a highlight.
解决方案:   Do not let evaluating 'statusline' trigger a redraw.
相关文件:   src/buffer.c

Patch 8.0.1074
问题:       ":term NONE" does not work on MS-Windows.
解决方案:   Make it work.  Split "pty" into "pty_in" and "pty_out". (Yasuhiro
            Matsumoto, closes #2058, closes #2045)
相关文件:   runtime/doc/eval.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            src/channel.c, src/evalfunc.c, src/os_unix.c, src/structs.h,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1075
问题:       MS-Windows: mouse does not work in terminal.
解决方案:   Force the winpty mouse on. (Yasuhiro Matsumoto, closes #2072)
相关文件:   src/terminal.c

Patch 8.0.1076
问题:       term_start() does not take callbacks. When using two terminals
            without a job only one is read from.  A terminal without a window
            returns the wrong pty.
解决方案:   Support "callback", "out_cb" and "err_cb".  Fix terminal without a
            window. Fix reading from multiple channels.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/channel.c

Patch 8.0.1077
问题:       No debugger making use of the terminal window.
解决方案:   Add the term debugger plugin.  So far only displays the current
            line when stopped.
相关文件:   Filelist, runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1078
问题:       Using freed memory with ":hi Normal".
解决方案:   Get "item" again after updating the table.
相关文件:   src/syntax.c

Patch 8.0.1079
问题:       Memory leak when remote_foreground() fails.
解决方案:   Free the error message.
相关文件:   src/evalfunc.c, src/if_xcmdsrv.c

Patch 8.0.1080
问题:       Memory leak for eof_chars terminal option and buffer name.
解决方案:   Free job options. Free the buffer name
相关文件:   src/terminal.c

Patch 8.0.1081
问题:       Memory leak for the channel write queue.
解决方案:   Free the write queue when clearing a channel.
相关文件:   src/channel.c

Patch 8.0.1082
问题:       Tests fail when run under valgrind.
解决方案:   Increase waiting times.
相关文件:   src/testdir/test_clientserver.vim, src/testdir/test_terminal.vim

Patch 8.0.1083
问题:       Leaking memory in input part of channel.
解决方案:   Clear the input part of channel.  Free the entry. Move failing
            command test to a separate file to avoid bogus leak reports
            clouding tests that should not leak.
相关文件:   src/channel.c, src/testdir/test_terminal.vim, src/Makefile,
            src/testdir/test_terminal_fail.vim, src/testdir/Make_all.mak

Patch 8.0.1084
问题:       GTK build has compiler warnings. (Christian Brabandt)
解决方案:   Get screen size with a different function. (Ken Takata, Yasuhiro
            Matsumoto)
相关文件:   src/mbyte.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_beval.c

Patch 8.0.1085
问题:       The terminal debugger can't set breakpoints.
解决方案:   Add :Break and :Delete commands.  Also commands for stepping
            through code.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1086 (after 8.0.1084)
问题:       Can't build with GTK 3.
解决方案:   Rename function argument. (Kazunobu Kuriyama)
相关文件:   src/gui_gtk_x11.c

Patch 8.0.1087
问题:       Test_terminal_cwd is flaky. MS-Windows: term_start() "cwd"
            argument does not work.
解决方案:   Wait for the condition to be true instead of using a sleep.
            Pass the directory to winpty.
相关文件:   src/testdir/test_terminal.vim, src/terminal.c

Patch 8.0.1088
问题:       Occasional memory use after free.
解决方案:   Use the highlight table directly, don't keep a pointer.
相关文件:   src/syntax.c

Patch 8.0.1089
问题:       Cannot get range count in user command.
解决方案:   Add <range> argument.
相关文件:   src/ex_docmd.c, runtime/doc/map.txt

Patch 8.0.1090
问题:       cannot get the text under the cursor like v:beval_text
解决方案:   Add <cexpr>.
相关文件:   src/ex_docmd.c, src/testdir/test_normal.vim,
            runtime/doc/cmdline.txt

Patch 8.0.1091 (after 8.0.1090)
问题:       Test for <cexpr> fails without +balloon_eval feature.
解决方案:   Remove #ifdefs.
相关文件:   src/normal.c

Patch 8.0.1092
问题:       Terminal debugger can't evaluate expressions.
解决方案:   Add :Evaluate and K.  Various other improvements.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1093
问题:       Various small quickfix issues.
解决方案:   Remove ":" prefix from title set by a user. Add the qf_id2nr().
            function. Add a couple more tests.  Update documentation.
            (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/evalfunc.c,
            src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1094
问题:       Using ssh from Terminal.app runs into xterm incompatibility.
解决方案:   Also detect Terminal.app on non-Mac systems.
相关文件:   src/term.c

Patch 8.0.1095
问题:       Terminal multibyte scrape test is flaky.
解决方案:   Add another condition to wait for.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1096
问题:       Terminal window in Normal mode has wrong background.
解决方案:   Store the default background and use it for clearing until the
            end of the line.  Not for below the last line, since there is no
            text there.
相关文件:   src/screen.c, src/terminal.c

Patch 8.0.1097 (after 8.0.1096)
问题:       Background color wrong if job changes background color.
解决方案:   Get the background color from vterm.
相关文件:   src/terminal.c, src/screen.c

Patch 8.0.1098
问题:       Build failure if libvterm installed on the system. (Oleh
            Hushchenkov)
解决方案:   Change the CCCTERM argument order. (Ken Takata, closes #2080)
相关文件:   src/Makefile

Patch 8.0.1099
问题:       Warnings for GDK calls.
解决方案:   Use other calls for GTK 3 and fix a few problems. (Kazunobu
            Kuriyama)
相关文件:   src/mbyte.c

Patch 8.0.1100
问题:       Stuck in redraw loop when 'lazyredraw' is set.
解决方案:   Don't loop on update_screen() when not redrawing. (Yasuhiro
            Matsumoto, closes #2082)
相关文件:   src/terminal.c, src/screen.c, src/proto/screen.pro

Patch 8.0.1101
问题:       Channel write fails if writing to log fails.
解决方案:   Ignore return value of fwrite(). (Ozaki Kiichi, closes #2081)
相关文件:   src/channel.c

Patch 8.0.1102
问题:       Terminal window does not use Normal colors.
解决方案:   For the GUI and when 'termguicolors' is enabled, use the actual
            foreground and background colors for the terminal.  (Yasuhiro
            Matsumoto, closes #2067)
            Use the "Terminal" highlight group if defined.
相关文件:   src/terminal.c, src/syntax.c, src/proto/syntax.pro

Patch 8.0.1103 (after 8.0.1102)
问题:       Converting cterm color fails for grey ramp.
解决方案:   Use index instead of number.
相关文件:   src/terminal.c

Patch 8.0.1104
问题:       The qf_jump() function is too long.
解决方案:   Split of parts to separate functions. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.1105
问题:       match() and matchend() are not tested.
解决方案:   Add tests. (Ozaki Kiichi, closes #2088)
相关文件:   src/testdir/test_functions.vim, src/testdir/test_match.vim

Patch 8.0.1106
问题:       Terminal colors on an MS-Windows console are not matching the
            normal colors.
解决方案:   Use the normal colors for the terminal. (Yasuhiro Matsumoto,
            closes #2087)
相关文件:   src/terminal.c

Patch 8.0.1107
问题:       Terminal debugger jumps to non-existing file.
解决方案:   Check that the file exists.  Add an option to make the Vim width
            wide. Fix removing highlight groups.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1108
问题:       Cannot specify mappings for the terminal window.
解决方案:   Add the :tmap command and associated code.  (Jacob Askeland,
            closes #2073)
相关文件:   runtime/doc/map.txt, runtime/doc/terminal.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/getchar.c, src/gui.c,
            src/terminal.c, src/testdir/test_terminal.vim, src/vim.h,
            src/proto/terminal.pro, src/main.c, src/evalfunc.c

Patch 8.0.1109
问题:       Timer causes error on exit from Ex mode. (xtal8)
解决方案:   save and restore the ex_pressedreturn flag. (Christian Brabandt,
            closes #2079)
相关文件:   src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_cmds2.c,
            src/testdir/test_timers.vim

Patch 8.0.1110
问题:       FORTIFY_SOURCE from Perl causes problems. (Scott Baker)
解决方案:   Filter out the flag. (Christian Brabandt, closes #2068)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1111
问题:       Syntax error in configure when using Perl.
解决方案:   Add missing quote
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1112
问题:       Can't get size or current index from quickfix list.
解决方案:   Add "idx" and "size" options. (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1113
问题:       Can go to Insert mode from Terminal-Normal mode.
解决方案:   Prevent :startinsert and "VA" to enter Insert mode. (Yasuhiro
            Matsumoto, closes #2092)
相关文件:   src/normal.c

Patch 8.0.1114
问题:       Default for 'iminsert' is annoying.
解决方案:   Make the default always zero. (Yasuhiro Matsumoto, closes #2071)
相关文件:   src/option.c, runtime/doc/options.txt

Patch 8.0.1115
问题:       Crash when using foldtextresult() recursively.
解决方案:   Avoid recursive calls. (Yasuhiro Matsumoto, closes #2098)
相关文件:   src/evalfunc.c, src/testdir/test_fold.vim

Patch 8.0.1116
问题:       Terminal test fails on MS-Windows.
解决方案:   Wait for the text to appear. (micbou, closes #2097)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1117
问题:       Test_terminal_no_cmd hangs on MS-Windows with GUI. (Christian
            Brabandt)
解决方案:   Run the command with "start" and wait for the text to appear.
            (micbou, closes #2096)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1118
问题:       FEAT_WINDOWS adds a lot of #ifdefs while it is nearly always
            enabled and only adds 7% to the binary size of the tiny build.
解决方案:   Graduate FEAT_WINDOWS.
相关文件:   src/feature.h, src/window.c, src/vim.h, src/structs.h,
            src/globals.h, src/gui.h, src/if_py_both.h, src/option.h,
            src/term.h, src/buffer.c, src/charset.c, src/digraph.c,
            src/edit.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/fold.c, src/getchar.c, src/gui.c, src/gui_athena.c,
            src/gui_beval.c, src/gui_gtk.c, src/gui_motif.c, src/gui_w32.c,
            src/if_cscope.c, src/if_lua.c, src/if_mzsch.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/main.c,
            src/mark.c, src/memline.c, src/misc1.c, src/misc2.c, src/move.c,
            src/netbeans.c, src/normal.c, src/option.c, src/popupmnu.c,
            src/quickfix.c, src/screen.c, src/search.c, src/spell.c,
            src/syntax.c, src/tag.c, src/term.c, src/ui.c, src/version.c,
            src/workshop.c, src/if_perl.xs, src/testdir/test_normal.vim

Patch 8.0.1119
问题:       Quitting a split terminal window kills the job. (Yasuhiro
            Matsumoto)
解决方案:   Only stop terminal job if it is the last window.
相关文件:   src/buffer.c, src/testdir/test_terminal.vim

Patch 8.0.1120 (after 8.0.1108)
问题:       :tm means :tmap instead of :tmenu. (Taro Muraoka)
解决方案:   Move the new entry below the old entry. (closes #2102)
相关文件:   src/ex_cmds.h, runtime/doc/map.txt

Patch 8.0.1121
问题:       Can uncheck executables in MS-Windows installer.
解决方案:   Make the choice read-only. (Ken Takata, closes #2106)
相关文件:   nsis/gvim.nsi

Patch 8.0.1122
问题:       vimtutor.bat doesn't work well with vim.bat.
解决方案:   Use "call vim". (Ken Takata, closes #2105)
相关文件:   vimtutor.bat

Patch 8.0.1123
问题:       Cannot define a toolbar for a window.
解决方案:   Add a window-local toolbar.
相关文件:   src/syntax.c, src/proto/syntax.pro, src/structs.h, src/menu.c,
            src/proto/menu.pro, src/testdir/test_winbar.vim, src/Makefile,
            src/normal.c, src/testdir/Make_all.mak, src/if_perl.xs,
            src/eval.c, src/evalfunc.c, src/window.c, src/ui.c,
            src/terminal.c, src/screen.c,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/gui.txt, runtime/doc/terminal.txt

Patch 8.0.1124
问题:       Use of MZSCHEME_VER is unclear.
解决方案:   Add a comment. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.1125
问题:       Wrong window height when splitting window with window toolbar.
解决方案:   Add or subtract the window toolbar height.
相关文件:   src/window.c

Patch 8.0.1126
问题:       Endless resize when terminal showing in two buffers. (Hirohito
            Higashi)
解决方案:   Set a flag to prevent resizing the window.
相关文件:   src/terminal.c

Patch 8.0.1127
问题:       Test_peek_and_get_char fails on 32 bit system. (Elimar
            Riesebieter)
解决方案:   Avoid an integer overflow. (James McCoy, closes #2116)
相关文件:   src/ex_cmds2.c

Patch 8.0.1128
问题:       Old xterm sends CTRL-X in response to t_RS.
解决方案:   Only send t_RS for xterm 279 and later.  Remove the workaround to
            ignore CTRL-X.
相关文件:   src/term.c

Patch 8.0.1129
问题:       Window toolbar missing a part of the patch.
解决方案:   Add change in vim.h.
相关文件:   src/vim.h

Patch 8.0.1130
问题:       The qf_jump() function is still too long.
解决方案:   Split of parts to separate functions. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.1131
问题:       It is not easy to trigger an autocommand for new terminal window.
            (Marco Restelli)
解决方案:   Trigger BufWinEnter after setting 'buftype'.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1132
问题:       #if condition is not portable.
解决方案:   Add defined(). (Zuloloxi, closes #2136)
相关文件:   src/libvterm/src/vterm.c

Patch 8.0.1133
问题:       Syntax timeout not used correctly.
解决方案:   Do not pass the timeout to syntax_start() but set it explicitly.
            (Yasuhiro Matsumoto, closes #2139)
相关文件:   src/proto/syntax.pro, src/screen.c, src/syntax.c

Patch 8.0.1134
问题:       Superfluous call to syn_get_final_id().
解决方案:   Remove it. (Ken Takata)
相关文件:   src/syntax.c

Patch 8.0.1135
问题:       W_WINCOL() is always the same.
解决方案:   Expand the macro.
相关文件:   src/edit.c, src/ex_docmd.c, src/gui_gtk.c, src/gui_w32.c,
            src/netbeans.c, src/popupmnu.c, src/screen.c, src/term.c,
            src/terminal.c, src/ui.c, src/window.c, src/if_py_both.h,
            src/structs.h, src/vim.h

Patch 8.0.1136
问题:       W_WIDTH() is always the same.
解决方案:   Expand the macro.
相关文件:   src/charset.c, src/edit.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/getchar.c, src/gui.c, src/gui_beval.c,
            src/gui_mac.c, src/if_lua.c, src/if_mzsch.c, src/if_py_both.h,
            src/if_ruby.c, src/misc1.c, src/misc2.c, src/move.c, src/normal.c,
            src/popupmnu.c, src/quickfix.c, src/screen.c, src/search.c,
            src/structs.h, src/ui.c, src/vim.h, src/window.c

Patch 8.0.1137 (after 8.0.1136)
问题:       Cannot build with Ruby.
解决方案:   Fix misplaced brace.
相关文件:   src/if_ruby.c

Patch 8.0.1138
问题:       Click in window toolbar starts Visual mode.
解决方案:   Add the MOUSE_WINBAR flag.
相关文件:   src/ui.c, src/vim.h, src/normal.c

Patch 8.0.1139
问题:       Using window toolbar changes state.
解决方案:   Always execute window toolbar actions in Normal mode.
相关文件:   runtime/doc/gui.txt, src/structs.h, src/ex_docmd.c,
            src/proto/ex_docmd.pro, src/menu.c

Patch 8.0.1140
问题:       Still old style tests.
解决方案:   Convert two tests to new style. (Yegappan Lakshmanan)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test56.in, src/testdir/test56.ok,
            src/testdir/test57.in, src/testdir/test57.ok,
            src/testdir/test_sort.vim, src/testdir/test_vimscript.vim

Patch 8.0.1141
问题:       MS-Windows build dependencies are incomplete.
解决方案:   Fix the dependencies. (Ken Takata)
相关文件:   src/Make_cyg.mak, src/Make_cyg_ming.mak, src/Make_ming.mak,
            src/Make_mvc.mak

Patch 8.0.1142
问题:       Window toolbar menu gets a tear-off item.
解决方案:   Recognize the window toolbar.
相关文件:   src/menu.c

Patch 8.0.1143
问题:       Macros always expand to the same thing.
解决方案:   Remove W_VSEP_WIDTH() and W_STATUS_HEIGHT().
相关文件:   src/vim.h, src/structs.h, src/gui.c, src/ex_getln.c, src/screen.c

Patch 8.0.1144
问题:       Using wrong #ifdef for computing length.
解决方案:   use BACKSLASH_IN_FILENAME instead of COLON_IN_FILENAME. (Yasuhiro
            Matsumoto, closes #2153)
相关文件:   src/quickfix.c

Patch 8.0.1145
问题:       Warning when compiling with Perl.
解决方案:   Remove unused variable. (Ken Takata)
相关文件:   src/if_perl.xs

Patch 8.0.1146
问题:       Redraw when highlight is set with same names. (Ozaki Kiichi)
解决方案:   Only free and save a name when it changed. (closes #2120)
相关文件:   src/syntax.c

Patch 8.0.1147
问题:       Fail to build with tiny features. (Tony Mechelynck)
解决方案:   Move #ifdefs.
相关文件:   src/syntax.c

Patch 8.0.1148
问题:       "gN" doesn't work on last match with 'wrapscan' off. (fcpg)
解决方案:   Adjust for searching backward. (Christian Brabandt)
相关文件:   src/search.c, src/testdir/test_gn.vim

Patch 8.0.1149
问题:       libvterm colors differ from xterm.
解决方案:   Use the xterm colors for libvterm.
相关文件:   src/terminal.c, src/libvterm/src/pen.c,
            src/testdir/xterm_ramp.vim, Filelist

Patch 8.0.1150
问题:       MS-Windows GUI: dialog font size is incorrect.
解决方案:   Pass flag to indicate 'encoding' or active codepage. (Yasuhiro
            Matsumoto, closes #2160)
相关文件:   src/gui_w32.c

Patch 8.0.1151
问题:       "vim -c startinsert!" doesn't append.
解决方案:   Correct line number on startup. (Christian Brabandt, closes #2117)
相关文件:   src/ex_docmd.c, src/testdir/test_startup.vim

Patch 8.0.1152
问题:       Encoding of error message wrong in Cygwin terminal.
解决方案:   Get locale from environment variables. (Ken Takata)
相关文件:   src/main.c, src/mbyte.c, src/proto/mbyte.pro

Patch 8.0.1153
问题:       No tests for diff_hlID() and diff_filler().
解决方案:   Add tests. (Dominique Pelle, closes #2156)
相关文件:   src/testdir/test_diffmode.vim

Patch 8.0.1154
问题:       'indentkeys' does not work properly. (Gary Johnson)
解决方案:   Get the cursor line again. (Christian Brabandt, closes #2151)
相关文件:   src/edit.c, src/testdir/test_edit.vim

Patch 8.0.1155
问题:       Ruby command triggers a warning when RUBYOPT is set to "-w".
解决方案:   use "-e_=0" instead of "-e0". (Masataka Pocke Kuwabara, closes
            #2143)
相关文件:   src/if_ruby.c

Patch 8.0.1156
问题:       Removing one -W argument from Perl CFLAGS may cause trouble.
解决方案:   Remove all -W flags. (Christian Brabandt)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1157
问题:       Compiler warning on MS-Windows.
解决方案:   Add type cast. (Yasuhiro Matsumoto)
相关文件:   src/main.c

Patch 8.0.1158
问题:       Still old style tests.
解决方案:   Convert several tests to new style. (Yegappan Lakshmanan)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test33.in,
            src/testdir/test33.ok, src/testdir/test41.in,
            src/testdir/test41.ok, src/testdir/test43.in,
            src/testdir/test43.ok, src/testdir/test53.in,
            src/testdir/test53.ok, src/testdir/test_file_size.vim,
            src/testdir/test_lispwords.vim, src/testdir/test_search.vim,
            src/testdir/test_textobjects.vim

Patch 8.0.1159
问题:       Typo in #ifdef.
解决方案:   Change "PROT" to "PROTO". (Nobuhiro Takasaki, closes #2165)
相关文件:   src/syntax.c

Patch 8.0.1160
问题:       Getting tab-local variable fails after closing window.
解决方案:   set tp_firstwin and tp_lastwin. (Jason Franklin, closes #2170)
相关文件:   src/window.c, src/evalfunc.c, src/testdir/test_getvar.vim

Patch 8.0.1161
问题:       Popup menu drawing problem when resizing terminal.
解决方案:   Redraw after resizing also when a popup menu is visible. (Ozaki
            Kiichi, closes #2110)
相关文件:   src/popupmnu.c, src/term.c, src/testdir/shared.vim,
            src/testdir/test_popup.vim

Patch 8.0.1162
问题:       Shared script for tests cannot be included twice.
解决方案:   Include it where needed, it will "finish" if loaded again.
相关文件:   src/testdir/test_alot.vim, src/testdir/test_bufline.vim,
            src/testdir/test_timers.vim

Patch 8.0.1163
问题:       Popup test is flaky.
解决方案:   Add a WaitFor() and fix another.
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1164
问题:       Changing StatusLine highlight while evaluating 'statusline' may
            not change the status line color.
解决方案:   When changing highlighting while redrawing don't cause another
            redraw. (suggested by Ozaki Kiichi, closes #2171, closes #2120)
相关文件:   src/buffer.c, src/syntax.c

Patch 8.0.1165
问题:       Popup test is still flaky.
解决方案:   Add a term_wait() call. (Ozaki Kiichi)
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1166
问题:       :terminal doesn't work on Mac High Sierra.
解决方案:   Change #ifdef for OpenPTY(). (Ozaki Kiichi, Kazunobu Kuriyama,
            closes #2162)
相关文件:   src/pty.c

Patch 8.0.1167
问题:       Motif: typing in terminal window is slow.
解决方案:   Do not redraw the whole terminal window but only what was changed.
相关文件:   src/terminal.c

Patch 8.0.1168
问题:       wrong highlighting with combination of match and 'cursorline'.
解决方案:   Use "line_attr" when appropriate. (Ozaki Kiichi, closes #2111)
            But don't highlight more than one character.
相关文件:   src/screen.c, src/testdir/test_highlight.vim,
            src/testdir/view_util.vim

Patch 8.0.1169
问题:       Highlighting one char too many with 'list' and 'cul'.
解决方案:   Check for 'list' being active. (Ozaki Kiichi, closes #2177)
相关文件:   src/screen.c, src/testdir/test_highlight.vim

Patch 8.0.1170
问题:       Using termdebug results in 100% CPU time. (tomleb)
解决方案:   Use polling instead of select().
相关文件:   src/os_unix.c, src/channel.c, src/proto/channel.pro

Patch 8.0.1171
问题:       Popup test is still a bit flaky.
解决方案:   Change term_wait() calls. (Ozaki Kiichi)
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1172
问题:       When E734 is given option is still set.
解决方案:   Assign NULL to "s". (Christian Brabandt)
相关文件:   src/eval.c, src/testdir/test_assign.vim

Patch 8.0.1173
问题:       Terminal window is not redrawn after CTRL-L. (Marcin Szamotulski)
解决方案:   Redraw the whole terminal when w_redr_type is NOT_VALID.
相关文件:   src/terminal.c

Patch 8.0.1174
问题:       Mac Terminal.app has wrong color for white.
解决方案:   Use white from the color cube.
相关文件:   src/globals.h, src/term.c, src/syntax.c

Patch 8.0.1175 (after  8.0.1174)
问题:       Build failure without +termresponse.
解决方案:   Add #ifdef.
相关文件:   src/syntax.c

Patch 8.0.1176
问题:       Job_start() does not handle quote and backslash correctly.
解决方案:   Remove quotes, recognize and remove backslashes.
相关文件:   src/testdir/test_channel.vim, src/os_unix.c

Patch 8.0.1177
问题:       In a terminal window the popup menu is not cleared. (Gerry
            Agbobada)
解决方案:   Redraw when SOME_VALID is used instead of NOT_VALID. (closes
            #2194)
相关文件:   src/terminal.c

Patch 8.0.1178
问题:       Using old compiler on MS-Windows.
解决方案:   Switch default build on MS-Windows to use MSVC 2015. (Ken Takata)
相关文件:   src/msvc2015.bat, src/INSTALLpc.txt, src/GvimExt/Makefile,
            src/Make_mvc.mak, src/tee/Make_mvc.mak, src/xxd/Make_mvc.mak

Patch 8.0.1179
问题:       Test_popup_and_window_resize() does not always pass.
解决方案:   Do not use $VIMPROG, pass the Vim executable in the vimcmd file.
            (Ozaki Kiichi, closes #2186)
相关文件:   src/testdir/Makefile, src/testdir/shared.vim,
            src/testdir/test_popup.vim

Patch 8.0.1180
问题:       MS-Windows testclean target deletes the color script.
解决方案:   Rename the script file.
相关文件:   src/testdir/xterm_ramp.vim, src/testdir/color_ramp.vim

Patch 8.0.1181
问题:       Tests using Vim command fail on MS-Windows.
解决方案:   Do not add quotes around the Vim command.
相关文件:   src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.0.1182
问题:       Cannot see or change mzscheme dll name.
解决方案:   Add 'mzschemedll' and 'mzschemegcdll'.
相关文件:   src/if_mzsch.c, src/option.h, src/option.c,
            runtime/doc/if_mzsch.txt

Patch 8.0.1183
问题:       MS-Windows build instructions are outdated.
解决方案:   Update instructions for MSVC 2015.  Update the build script.
相关文件:   Filelist, Makefile, src/INSTALLpc.txt, src/bigvim.bat

Patch 8.0.1184
问题:       The :marks command is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #2197)
相关文件:   src/testdir/test_marks.vim

Patch 8.0.1185
问题:       Ruby library includes minor version number.
解决方案:   Only use the API version number. (Ben Boeckel, closes #2199)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1186
问题:       Still quite a few old style tests.
解决方案:   Convert old to new style tests. (Yegappan Lakshmanan)
            Avoid ringing the bell while running tests.
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/main.aap,
            src/testdir/test31.in, src/testdir/test31.ok,
            src/testdir/test4.in, src/testdir/test4.ok, src/testdir/test5.in,
            src/testdir/test5.ok, src/testdir/test60.in,
            src/testdir/test60.ok, src/testdir/test60.vim,
            src/testdir/test7.in, src/testdir/test7.ok, src/testdir/test78.in,
            src/testdir/test78.ok, src/testdir/test_autocmd.vim,
            src/testdir/test_exists.vim, src/testdir/test_recover.vim,
            src/testdir/test_winbuf_close.vim, src/testdir/runtest.vim

Patch 8.0.1187
问题:       Building with lua fails for OSX on Travis.
解决方案:   Separate brew-update and brew-install. (Ozaki Kiichi, closes #2203)
相关文件:   .travis.yml

Patch 8.0.1188
问题:       Autocmd test fails on MS-Windows.
解决方案:   Give the buffer a name and find the buffer to be wiped out by
            name.
相关文件:   src/testdir/test_autocmd.vim

Patch 8.0.1189
问题:       E172 is not actually useful, it's only on Unix anyway.
解决方案:   Remove the check and the error.
相关文件:   src/ex_docmd.c, runtime/doc/message.txt

Patch 8.0.1190
问题:       Vim becomes unusable after opening new window in BufWritePre
            event.
解决方案:   Call not_exiting(). (Martin Tournoij, closes #2205)
            Also for "2q" when a help window is open.  Add a test.
相关文件:   src/ex_docmd.c, src/testdir/test_writefile.vim

Patch 8.0.1191
问题:       MS-Windows: missing 32 and 64 bit files in installer.
解决方案:   Include both 32 and 64 bit GvimExt and related dll files. Remove
            old Windows code from the installer. (Ken Takata, closes #2144)
相关文件:   nsis/README.txt, nsis/gvim.nsi, src/GvimExt/gvimext.cpp,
            src/dosinst.c, src/dosinst.h, src/uninstal.c, Makefile

Patch 8.0.1192
问题:       MS-Windows: terminal feature not enabled by default.
解决方案:   Enable it. (Ken Takata)
相关文件:   src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.0.1193
问题:       Crash when wiping out a buffer after using getbufinfo().
            (Yegappan Lakshmanan)
解决方案:   Remove b:changedtick from the buffer variables.
相关文件:   src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.0.1194
问题:       Actual fg and bg colors of terminal are unknown.
解决方案:   Add t_RF.  Store response to t_RB and t_RF, use for terminal.
相关文件:   src/term.c, src/term.h, src/proto/term.pro, src/terminal.c,
            src/vim.h, src/eval.c, runtime/doc/eval.txt

Patch 8.0.1195 (after 8.0.1194)
问题:       Can't build on MS-Windows.
解决方案:   Adjust #ifdef and add #ifdefs.
相关文件:   src/term.c, src/terminal.c

Patch 8.0.1196 (after 8.0.1194)
问题:       Crash when t_RF is not set. (Brian Pina)
解决方案:   Add t_RF to the list of terminal options. (Hirohito Higashi)
相关文件:   src/option.c

Patch 8.0.1197
问题:       MS-Windows build instructions are not up to date.
解决方案:   Adjust the instructions.  Fix the nsis script.
相关文件:   Makefile, nsis/gvim.nsi

Patch 8.0.1198
问题:       Older compilers don't know uint8_t.
解决方案:   Use char_u instead.
相关文件:   src/term.c, src/proto/term.pro

Patch 8.0.1199
问题:       When 'clipboard' is "autoselectplus" the star register is also
            set. (Gilles Moris)
解决方案:   Don't set the star register in this situation.
相关文件:   src/ops.c

Patch 8.0.1200
问题:       Tests switch the bell off twice.
解决方案:   Don't set 'belloff' in individual tests. (Christian Brabandt)
相关文件:   src/testdir/test_alot.vim, src/testdir/test_alot_utf8.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_diffmode.vim, src/testdir/test_digraph.vim,
            src/testdir/test_edit.vim, src/testdir/test_file_size.vim,
            src/testdir/test_gn.vim, src/testdir/test_normal.vim,
            src/testdir/test_packadd.vim, src/testdir/test_popup.vim,
            src/testdir/test_recover.vim, src/testdir/test_search.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_undo.vim,
            src/testdir/test_usercommands.vim, src/testdir/test_visual.vim

Patch 8.0.1201
问题:       "yL" is affected by 'scrolloff'. (Eli the Bearded)
解决方案:   Don't use 'scrolloff' when an operator is pending.
相关文件:   src/normal.c, runtime/doc/motion.txt

Patch 8.0.1202
问题:       :wall gives an error for a terminal window. (Marius Gedminas)
解决方案:   Don't try writing a buffer that can't be written. (Yasuhiro
            Matsumoto, closes #2190)
相关文件:   src/ex_cmds.c, src/testdir/test_terminal.vim

Patch 8.0.1203
问题:       Terminal window mistreats composing characters.
解决方案:   Count composing characters with the base character. (Ozaki Kiichi,
            closes #2195)
相关文件:   src/mbyte.c, src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1204
问题:       A QuitPre autocommand may get the wrong file name.
解决方案:   Pass the buffer being closed to apply_autocmds(). (Rich Howe)
相关文件:   src/ex_docmd.c, src/testdir/test_autocmd.vim

Patch 8.0.1205
问题:       Using "1q" it is possible to unload a changed buffer. (Rick Howe)
解决方案:   Check the right window for changes.
相关文件:   src/testdir/test_edit.vim, src/ex_docmd.c

Patch 8.0.1206
问题:       No autocmd for entering or leaving the command line.
解决方案:   Add CmdlineEnter and CmdlineLeave.
相关文件:   runtime/doc/autocmd.txt, src/ex_getln.c, src/fileio.c, src/vim.h,
            src/testdir/test_autocmd.vim

Patch 8.0.1207
问题:       Profiling skips the first and last script line.
解决方案:   Check for BOM after setting script ID. (LemonBoy, closes #2103,
            closes #2112) Add a test. List the trailing script lines.
相关文件:   src/testdir/test_profile.vim, src/ex_cmds2.c

Patch 8.0.1208
问题:       'statusline' drops empty group with highlight change.
解决方案:   Do not drop an empty group if it changes highlighting. (Marius
            Gedminas, closes #2228)
相关文件:   src/buffer.c, src/testdir/test_statusline.vim

Patch 8.0.1209
问题:       Still too many old style tests.
解决方案:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2230)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Makefile, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test34.in,
            src/testdir/test34.ok, src/testdir/test54.in,
            src/testdir/test54.ok, src/testdir/test8.in, src/testdir/test8.ok,
            src/testdir/test_autocmd.vim, src/testdir/test_autoformat_join.in,
            src/testdir/test_autoformat_join.ok, src/testdir/test_join.vim,
            src/testdir/test_user_func.vim

Patch 8.0.1210
问题:       When typing a search pattern CTRL-G and CTRL-T are ignored when
            there is typeahead.
解决方案:   Don't pass SEARCH_PEEK and don't call char_avail(). (haya14busa,
            closes #2233)
相关文件:   src/ex_getln.c, src/testdir/test_search.vim

Patch 8.0.1211
问题:       Cannot reorder tab pages with drag & drop.
解决方案:   Support drag & drop for GTK and MS-Windows. (Ken Takata, Masamichi
            Abe)
相关文件:   src/gui_gtk_x11.c, src/gui_w32.c

Patch 8.0.1212
问题:       MS-Windows: tear-off menu does not work on 64 bit. (shaggyaxe)
解决方案:   Change how the menu handle is looked up. (Ken Takata, closes
            #1205)
相关文件:   src/gui_w32.c

Patch 8.0.1213
问题:       Setting 'mzschemedll' has no effect.
解决方案:   Move loading .vimrc to before call to mzscheme_main().
相关文件:   src/main.c

Patch 8.0.1214
问题:       Accessing freed memory when EXITFREE is set and there is more than
            one tab and window. (Dominique Pelle)
解决方案:   Free options later.  Skip redraw when exiting.
相关文件:   src/screen.c, src/misc2.c

Patch 8.0.1215
问题:       Newer gcc warns for implicit fallthrough.
解决方案:   Consistently use a FALLTHROUGH comment. (Christian Brabandt)
相关文件:   src/buffer.c, src/edit.c, src/eval.c, src/ex_docmd.c,
            src/ex_getln.c, src/main.c, src/message.c, src/normal.c,
            src/regexp.c, src/regexp_nfa.c, src/spell.c, src/window.c,
            src/if_perl.xs

Patch 8.0.1216
问题:       Tabline is not always updated for :file command. (Norio Takagi)
解决方案:   Set redraw_tabline. (Hirohito Higashi)
相关文件:   src/ex_cmds.c

Patch 8.0.1217
问题:       Can't use remote eval to inspect vars in debug mode.
解决方案:   Don't discard the call stack in debug mode. (closes #2237, #2247)
相关文件:   src/globals.h, src/ex_cmds2.c, src/main.c

Patch 8.0.1218
问题:       Writing to freed memory in autocmd.
解决方案:   Make a copy of the tag line. (Dominique Pelle, closes #2245)
相关文件:   src/tag.c, src/testdir/test_autocmd.vim

Patch 8.0.1219
问题:       Terminal test is flaky.
解决方案:   Add test function to list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1220
问题:       Skipping empty statusline groups is not correct.
解决方案:   Also set group_end_userhl. (itchyny)
相关文件:   src/buffer.c, src/testdir/test_statusline.vim

Patch 8.0.1221
问题:       Still too many old style tests.
解决方案:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2256)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test19.in,
            src/testdir/test19.ok, src/testdir/test20.in,
            src/testdir/test20.ok, src/testdir/test25.in,
            src/testdir/test25.ok, src/testdir/test28.in,
            src/testdir/test28.ok, src/testdir/test32.in,
            src/testdir/test32.ok, src/testdir/test38.in,
            src/testdir/test38.ok, src/testdir/test66.in,
            src/testdir/test66.ok, src/testdir/test79.in,
            src/testdir/test79.ok, src/testdir/test_ins_complete.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_substitute.vim,
            src/testdir/test_tab.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_undo.vim, src/testdir/test_visual.vim,
            src/testdir/test79.ok, src/testdir/test79.in,
            src/testdir/test28.in

Patch 8.0.1222
问题:       Test functions interfere with each other.
解决方案:   Cleanup tab pages, windows and buffers.  Reset option.
相关文件:   src/testdir/runtest.vim, src/testdir/test_filetype.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_lispwords.vim

Patch 8.0.1223
问题:       Crash when using autocomplete and tab pages.
解决方案:   Check if the current tab changed. (Christian Brabandt, closes
            #2239)
相关文件:   src/popupmnu.c, src/testdir/test_popup.vim, src/misc1.c,

Patch 8.0.1224
问题:       Still interference between test functions.
解决方案:   Clear autocommands. Wipe all buffers.  Fix tests that depend on a
            specific start context.
相关文件:   src/testdir/runtest.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_arglist.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_command_count.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_hardcopy.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_packadd.vim, src/testdir/test_signs.vim,
            src/testdir/test_autochdir.vim

Patch 8.0.1225
问题:       No check for spell region being zero. (geeknik)
解决方案:   Check for zero. (closes #2252)
相关文件:   src/spellfile.c, src/testdir/test_spell.vim

Patch 8.0.1226
问题:       Edit and popup tests failing.
解决方案:   Make the tests pass.
相关文件:   src/testdir/test_edit.vim, src/testdir/test_popup.vim

Patch 8.0.1227
问题:       Undefined left shift in readfile(). (Brian 'geeknik' Carpenter)
解决方案:   Add cast to unsigned. (Dominique Pelle, closes #2253)
相关文件:   src/fileio.c

Patch 8.0.1228
问题:       Invalid memory access in GUI test.
解决方案:   Check that the row is not outside of the screen.
相关文件:   src/screen.c

Patch 8.0.1229
问题:       Condition in vim_str2nr() is always true. (Nikolai Pavlov)
解决方案:   Remove the condition. (Closes #2259)
相关文件:   src/charset.c

Patch 8.0.1230
问题:       CTRL-A in Visual mode uses character after selection. (Nikolai
            Pavlov)
解决方案:   Check the length before using a character.
相关文件:   src/charset.c

Patch 8.0.1231
问题:       Expanding file name drops dash. (stucki)
解决方案:   Use the right position. (Christian Brabandt, closes #2184)
相关文件:   src/ex_docmd.c, src/testdir/test_cmdline.vim

Patch 8.0.1232
问题:       MS-Windows users are confused about default mappings.
解决方案:   Don't map keys in the console where they don't work.  Add a choice
            in the installer to use MS-Windows key bindings or not. (Christian
            Brabandt, Ken Takata, closes #2093)
相关文件:   Filelist, nsis/gvim.nsi, nsis/vimrc.ini, src/dosinst.c,
            runtime/mswin.vim

Patch 8.0.1233
问题:       Typo in dos installer.
解决方案:   Remove comma.
相关文件:   src/dosinst.c

Patch 8.0.1234
问题:       MS-Windows: composing characters are not shown properly.
解决方案:   Pass base character and composing characters to the renderer at
            once. (Ken Takata, closes #2206)
相关文件:   src/gui.c, src/gui_w32.c

Patch 8.0.1235
问题:       Cannot disable the terminal feature in a huge build. (lindhobe)
解决方案:   Adjust the autoconf check. (Kazunobu Kuriyama, closes #2242)
相关文件:   src/configure.ac, src/auto/configure, src/Makefile

Patch 8.0.1236
问题:       Mac features are confusing.
解决方案:   Make feature names more consistent, add "osxdarwin". Rename
            feature flags, cleanup Mac code. (Kazunobu Kuriyama, closes #2178)
            Also includes a fix for when Ruby throws an exception inside
            :rubyfile. (ujihisa)
相关文件:   runtime/doc/eval.txt, runtime/doc/os_mac.txt, src/auto/configure,
            src/config.h.in, src/configure.ac, src/digraph.c, src/edit.c,
            src/evalfunc.c, src/feature.h, src/fileio.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_mac.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/keymap.h, src/macros.h,
            src/main.c, src/mbyte.c, src/message.c, src/misc1.c, src/misc2.c,
            src/option.c, src/os_mac.h, src/os_macosx.m, src/os_unix.c,
            src/proto.h, src/pty.c, src/structs.h, src/term.c, src/termlib.c,
            src/ui.c, src/undo.c, src/version.c, src/vim.h, src/window.c

Patch 8.0.1237
问题:       ":set scroll&" often gives an error.
解决方案:   Don't use a fixed default value, use half the window height. Add a
            test. (Ozaki Kiichi, closes #2104)
相关文件:   src/Makefile, src/option.c, src/testdir/test_alot.vim,
            src/testdir/test_scroll_opt.vim

Patch 8.0.1238
问题:       Incremental search only shows one match.
解决方案:   When 'incsearch' and 'hlsearch' are both set highlight all
            matches. (haya14busa, itchyny, closes #2198)
相关文件:   runtime/doc/options.txt, src/ex_getln.c, src/proto/search.pro,
            src/search.c, src/testdir/test_search.vim

Patch 8.0.1239
问题:       Cannot use a lambda for the skip argument to searchpair().
解决方案:   Evaluate a partial, funcref and lambda. (LemonBoy, closes #1454,
            closes #2265)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/proto/evalfunc.pro,
            src/eval.c, src/proto/eval.pro, src/search.c,
            src/testdir/test_search.vim

Patch 8.0.1240
问题:       MS-Windows: term_start() does not support environment.
解决方案:   Implement the environment argument. (Yasuhiro Matsumoto, closes
            #2264)
相关文件:   src/os_win32.c, src/proto/os_win32.pro, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.0.1241
问题:       Popup test is flaky. (James McCoy)
解决方案:   Increase the wait time. (Dominique Pelle)
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1242
问题:       Function argument with only dash is seen as number zero. (Wang
            Shidong)
解决方案:   See a dash as a string. (Christian Brabandt)
相关文件:   src/testdir/test_ins_complete.vim, src/Makefile, src/eval.c

Patch 8.0.1243
问题:       No test for what 8.0.1227 fixes.
解决方案:   Add a test that triggers the problem. (Christian Brabandt)
相关文件:   src/testdir/test_normal.vim, src/testdir/test_search.vim

Patch 8.0.1244
问题:       Search test does not work correctly on MS-Windows.
解决方案:   Put text in a file instead of sending it to the terminal.
            (Christian Brabandt)
相关文件:   src/testdir/test_search.vim

Patch 8.0.1245
问题:       When WaitFor() has a wrong expression it just waits a second,
            which goes unnoticed. (James McCoy)
解决方案:   When WaitFor() times out throw an exception.  Fix places where the
            expression was wrong.
相关文件:   src/testdir/shared.vim, src/testdir/test_channel.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_terminal.vim

Patch 8.0.1246
问题:       Popup test has an arbitrary delay.
解决方案:   Wait for the ruler to show. (James McCoy)
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1247
问题:       Not easy to find Debian build info.
解决方案:   Add a badge in the README file. (Dominique Pelle)
相关文件:   README.md

Patch 8.0.1248 (after 8.0.1247)
问题:       Stray + in README file.
解决方案:   Remove the +.  Add a line break.
相关文件:   README.md

Patch 8.0.1249
问题:       No error when WaitFor() gets an invalid wrong expression.
解决方案:   Do not ignore errors in evaluation of the expression.  Fix places
            where the expression was wrong.
相关文件:   src/testdir/shared.vim, src/testdir/test_netbeans.vim

Patch 8.0.1250
问题:       'hlsearch' highlighting not removed after incsearch (lacygoill)
解决方案:   Redraw all windows. Start search at the end of the match.  Improve
            how CTRL-G works with incremental search. Add tests. (Christian
            Brabandt, Hirohito Higashi, haya14busa, closes #2267)
相关文件:   runtime/doc/options.txt, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 8.0.1251 (after 8.0.1249)
问题:       Invalid expression passed to WaitFor().
解决方案:   Check if the variable exists.
相关文件:   src/testdir/test_clientserver.vim

Patch 8.0.1252
问题:       Incomplete translations makefile for MinGW/Cygwin.
解决方案:   Add missing source files.  Make it work with msys2's bash. (Ken
            Takata)
相关文件:   src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak

Patch 8.0.1253
问题:       Still too many old style tests.
解决方案:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2272)
相关文件:   src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test12.in,
            src/testdir/test12.ok, src/testdir/test40.in,
            src/testdir/test40.ok, src/testdir/test45.in,
            src/testdir/test45.ok, src/testdir/test83.in,
            src/testdir/test83.ok, src/testdir/test_autocmd.vim,
            src/testdir/test_fold.vim, src/testdir/test_swap.vim,
            src/testdir/test_tagjump.vim

Patch 8.0.1254
问题:       Undefined left shift in gethexchrs(). (geeknik)
解决方案:   Use unsigned long. (idea by Christian Brabandt, closes #2255)
相关文件:   src/regexp.c, src/regexp_nfa.c


Patch 8.0.1255 (after 8.0.1248)
问题:       duplicate badge README file.
解决方案:   Remove one. (Dominique Pelle)
相关文件:   README.md

Patch 8.0.1256
问题:       Typo in configure variable vim_cv_tgent. (Matthieu Guillard)
解决方案:   Rename the variable. (closes #2281)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1257 (after 8.0.1254)
问题:       No test for fix of undefined behavior.
解决方案:   Add a test. (closes #2255)
相关文件:   src/testdir/test_search.vim

Patch 8.0.1258
问题:       'ttymouse' is set to "sgr" even though it's not supported. (Gary
            Johnson)
解决方案:   Adjust #ifdef
相关文件:   src/term.c

Patch 8.0.1259
问题:       Search test can be flaky.
解决方案:   Use WaitFor() instead of a delay.  Make it possible to pass a
            funcref to WaitFor() to avoid the need for global variables.
            (James McCoy, closes #2282)
相关文件:   src/testdir/shared.vim, src/testdir/test_search.vim

Patch 8.0.1260 (after 8.0.1259)
问题:       Using global variables for WaitFor().
解决方案:   Use a lambda function instead.  Don't check a condition if
            WaitFor() already checked it.
相关文件:   src/testdir/test_popup.vim, src/testdir/test_terminal.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_job_fails.vim, src/testdir/test_quotestar.vim

Patch 8.0.1261
问题:       Program in terminal window gets NL instead of CR. (Lifepillar)
解决方案:   Check the tty setup more often. (closes #1998)
相关文件:   src/terminal.c

Patch 8.0.1262
问题:       Terminal redir test is flaky.
解决方案:   Add it to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1263
问题:       Others can read the swap file if a user is careless with his
            primary group.
解决方案:   If the group permission allows for reading but the world
            permissions doesn't, make sure the group is right.
相关文件:   src/fileio.c, src/testdir/test_swap.vim, src/Makefile

Patch 8.0.1264
问题:       Terminal debugger gets stuck in small window.
解决方案:   Add "-quiet" to the gdb command. (Christian Brabandt, closes #2154)
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1265 (after 8.0.1263)
问题:       Swap test not skipped when there is one group.
解决方案:   Convert list to string for the message.
相关文件:   src/testdir/test_swap.vim

Patch 8.0.1266 (after 8.0.1263)
问题:       Test_swap_directory was accidentally commented out.
解决方案:   Uncomment the test.
相关文件:   src/testdir/test_swap.vim

Patch 8.0.1267 (after 8.0.1263)
问题:       Test_swap_group may leave file behind.
解决方案:   Add a try/finally.
相关文件:   src/testdir/test_swap.vim, src/testdir/test_undo.vim

Patch 8.0.1268
问题:       PC install instructions are incomplete.
解决方案:   Update the instructions. (Ken Takata)
相关文件:   src/INSTALLpc.txt

Patch 8.0.1269
问题:       Effect of autocommands on marks is not tested.
解决方案:   Add a couple of tests. (James McCoy, closes #2271)
相关文件:   src/testdir/test_autocmd.vim

Patch 8.0.1270
问题:       Mismatching file name with Filelist.
解决方案:   Rename color_ramp.vim to xterm_ramp.vim
相关文件:   src/testdir/color_ramp.vim, src/testdir/xterm_ramp.vim

Patch 8.0.1271
问题:       Still too many old style tests.
解决方案:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2290)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/sautest/autoload/footest.vim, src/testdir/test55.in,
            src/testdir/test55.ok, src/testdir/test_changelist.in,
            src/testdir/test_changelist.ok, src/testdir/test_fold.vim,
            src/testdir/test_ins_complete.vim,
            src/testdir/test_insertcount.in, src/testdir/test_insertcount.ok,
            src/testdir/test_listdict.vim, src/testdir/test_normal.vim,
            src/testdir/test_search.vim, src/testdir/test_search_mbyte.in

Patch 8.0.1272
问题:       Warnings for unused variables in tiny build.
解决方案:   Add #ifdef. (Dominique Pelle, closes #2288)
相关文件:   src/term.c

Patch 8.0.1273 (after 8.0.1271)
问题:       Old test file remaining.
解决方案:   Delete it.
相关文件:   src/testdir/test_search_mbyte.ok

Patch 8.0.1274
问题:       setbufline() fails when using folding.
解决方案:   Set "curwin" if needed. (Ozaki Kiichi, closes #2293)
相关文件:   src/evalfunc.c, src/testdir/test_bufline.vim

Patch 8.0.1275
问题:       CmdlineLeave autocmd prevents fold from opening. (Waivek)
解决方案:   Save and restore KeyTyped. (closes #2305)
相关文件:   src/fileio.c

Patch 8.0.1276
问题:       Typed key is lost when the terminal window is closed in exit
            callback. (Gabriel Barta)
解决方案:   When the current window changes bail out of the wait loop. (closes
            #2302)
相关文件:   src/misc2.c, src/terminal.c

Patch 8.0.1277
问题:       Terminal window CR-NL conversions may cause problems.
解决方案:   Avoid most conversions, only fetch the current backspace key value
            from the tty. (mostly by Ozaki Kiichi, closes #2278)
相关文件:   src/terminal.c

Patch 8.0.1278
问题:       GUI window always resizes when adding/removing a scrollbar,
            toolbar, etc.
解决方案:   Add the 'k' flag in 'guioptions' to keep the GUI window size and
            change the number of lines/columns instead. (Ychin, closes #703)
相关文件:   runtime/doc/options.txt, src/gui.c, src/gui_gtk_x11.c,
            src/gui_w32.c, src/option.h

Patch 8.0.1279
问题:       Initializing menus can be slow, especially when there are many
            keymaps, color schemes, etc.
解决方案:   Do the globbing for runtime files lazily. (Ken Takata)
相关文件:   runtime/doc/gui.txt, runtime/menu.vim

Patch 8.0.1280
问题:       Python None cannot be converted to a Vim type.
解决方案:   Convert it to v:none. (Ken Takata)
相关文件:   src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok,
            runtime/doc/if_pyth.txt

Patch 8.0.1281
问题:       Loading file type detection slows down startup.
解决方案:   Move functions to an autoload script.
相关文件:   runtime/filetype.vim, runtime/autoload/filetype.vim,
            runtime/scripts.vim

Patch 8.0.1282 (after 8.0.1281)
问题:       script-local variable defined in the wrong script
解决方案:   Move variable to autoload/filetype.vim.
相关文件:   runtime/filetype.vim, runtime/autoload/filetype.vim

Patch 8.0.1283
问题:       Test 86 fails under ASAN.
解决方案:   Fix that an item was added to a dictionary twice.
相关文件:   src/if_py_both.h

Patch 8.0.1284
问题:       Loading file type detection slows down startup.
解决方案:   Store the last pattern of an autocommand event to make appending
            quicker.
相关文件:   src/fileio.c

Patch 8.0.1285
问题:       Distributed autoload files may clash with user files. (Andy
            Wokula)
解决方案:   Use the "autoload/dist" directory.
相关文件:   runtime/filetype.vim, runtime/autoload/filetype.vim,
            runtime/autoload/dist/ft.vim, runtime/scripts.vim, Filelist,
            src/Makefile, nsis/gvim.nsi

Patch 8.0.1286
问题:       Occasional crash when using a channel. (Marek)
解决方案:   Decrement reference count later. (closes #2315)
相关文件:   src/channel.c

Patch 8.0.1287
问题:       The temp file used when updating the viminfo file may have the
            wrong permissions if setting the group fails.
解决方案:   Check if the group matches and reduce permissions if not.
相关文件:   src/ex_cmds.c

Patch 8.0.1288
问题:       GUI: cannot drag the statusline of a terminal window.
解决方案:   Handle the TERMINAL state. (Hirohito Higashi)
相关文件:   src/gui.c

Patch 8.0.1289
问题:       Mkview always includes the local directory.
解决方案:   Add the "curdir" value in 'viewoptions'. (Eric Roberts, closes
            #2316)
相关文件:   runtime/doc/options.txt, runtime/doc/starting.txt, src/ex_docmd.c,
            src/option.c

Patch 8.0.1290
问题:       seq_cur of undotree() wrong after undo.
解决方案:   Get the actual sequence number instead of decrementing the current
            one. (Ozaki Kiichi, closes #2319)
相关文件:   src/undo.c, src/testdir/test_undo.vim

Patch 8.0.1291
问题:       C indent wrong when * immediately follows comment. (John Bowler)
解决方案:   Do not see "/*" after "*" as a comment start. (closes #2321)
相关文件:   src/search.c, src/testdir/test3.in, src/testdir/test3.ok

Patch 8.0.1292
问题:       Quick clicks in the WinBar start Visual mode.
解决方案:   Use a double click in the WinBar like a normal click.
相关文件:   src/ui.c

Patch 8.0.1293
问题:       Setting a breakpoint in the terminal debugger sometimes fails.
解决方案:   Interrupt the program if needed.  Set the interface to async.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1294
问题:       GUI: get stuck when splitting a terminal window.
解决方案:   Stop blinking when values become zero. (Hirohito Higashi)
相关文件:   src/gui.c

Patch 8.0.1295
问题:       Cannot automatically get a server name in a terminal.
解决方案:   Add the --enable-autoservername flag to configure. (Cimbali,
            closes #2317)
相关文件:   runtime/doc/eval.txt, runtime/doc/various.txt, src/config.h.in,
            src/configure.ac, src/auto/configure, src/evalfunc.c,
            src/feature.h, src/main.c, src/version.c, src/Makefile

Patch 8.0.1296 (after 8.0.1294)
问题:       Checking the same condition twice. (John Marriott)
解决方案:   Check blinkwait.
相关文件:   src/gui.c

Patch 8.0.1297
问题:       +autoservername does not show enabled on MS-Windows.
解决方案:   Always define the flag on MS-Windows. (Ken Takata)
相关文件:   src/feature.h

Patch 8.0.1298
问题:       Missing test file.
解决方案:   Add samples/test000. (Christian Brabandt)
相关文件:   src/testdir/samples/test000, Filelist

Patch 8.0.1299
问题:       Bracketed paste does not work well in terminal window.
解决方案:   Send translated string to job right away. (Ozaki Kiichi, closes
            #2341)
相关文件:   src/terminal.c

Patch 8.0.1300
问题:       File permissions may end up wrong when writing.
解决方案:   Use fchmod() instead of chmod() when possible.  Don't truncate
            until we know we can change the file.
相关文件:   src/os_unix.c, src/proto/os_unix.pro, src/configure.ac,
            src/auto/configure, src/config.h.in, src/fileio.c

Patch 8.0.1301
问题:       Generated license file for NSIS has a modeline.
解决方案:   Adjust the pattern for sed. (Ken Takata)
相关文件:   runtime/doc/Makefile

Patch 8.0.1302
问题:       Still too many old style tests.
解决方案:   Convert a few more tests to new style. (Yegappan Lakshmanan,
            closes #2326)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/runtest.vim,
            src/testdir/test68.in, src/testdir/test68.ok,
            src/testdir/test73.in, src/testdir/test73.ok,
            src/testdir/test_close_count.in, src/testdir/test_close_count.ok,
            src/testdir/test_close_count.vim,
            src/testdir/test_erasebackword.in,
            src/testdir/test_erasebackword.ok,
            src/testdir/test_erasebackword.vim,
            src/testdir/test_find_complete.vim, src/testdir/test_fixeol.in,
            src/testdir/test_fixeol.ok, src/testdir/test_fixeol.vim,
            src/testdir/test_listchars.in, src/testdir/test_listchars.ok,
            src/testdir/test_listchars.vim, src/testdir/test_textformat.vim

Patch 8.0.1303
问题:       'ttymouse' is not set to "sgr" for Terminal.app and Iterm2.
解决方案:   Recognize Iterm2 by the termresponse.
相关文件:   src/term.c

Patch 8.0.1304
问题:       CTRL-G/CTRL-T don't work with incsearch and empty pattern.
解决方案:   Use the last search pattern. (Christian Brabandt, closes #2292)
相关文件:   src/ex_getln.c, src/proto/search.pro, src/search.c,
            src/testdir/test_search.vim

Patch 8.0.1305
问题:       writefile() never calls fsync().
解决方案:   Follow the 'fsync' option with override to enable or disable.
相关文件:   src/fileio.c, src/evalfunc.c, runtime/doc/eval.txt, src/globals.h,
            src/testdir/test_writefile.vim

Patch 8.0.1306
问题:       ASAN error stack trace is not useful.
解决方案:   Add "asan_symbolize". (James McCoy, closes #2344)
相关文件:   .travis.yml

Patch 8.0.1307 (after 8.0.1300)
问题:       Compiler warning for ignoring return value of ftruncate(). (Tony
            Mechelynck)
解决方案:   Assign returned value to "ignore".
相关文件:   src/fileio.c

Patch 8.0.1308
问题:       The "Reading from stdin" message may be undesired and there is no
            easy way to skip it.
解决方案:   Don't show the message with --not-a-term was used.
相关文件:   src/fileio.c

Patch 8.0.1309
问题:       Cannot use 'balloonexpr' in a terminal.
解决方案:   Add 'balloonevalterm' and add code to handle mouse movements in a
            terminal. Initial implementation for Unix with GUI.
相关文件:   src/option.c, src/option.h, src/os_unix.c, src/proto/os_unix.pro,
            src/feature.h, src/misc2.c, src/keymap.h, src/edit.c,
            src/ex_getln.c, src/message.c, src/misc1.c, src/normal.c,
            src/terminal.c, src/getchar.c, src/ex_cmds2.c, src/gui_beval.c,
            src/proto/gui_beval.pro, src/evalfunc.c, src/popupmnu.c,
            src/proto/popupmnu.pro, src/version.c, src/globals.h, src/gui.c,
            runtime/doc/options.txt, src/term.c,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1310
问题:       Cproto generates errors because of missing type.
解决方案:   Define _Float128 when generating prototypes.
相关文件:   src/vim.h

Patch 8.0.1311
问题:       No test for strpart().
解决方案:   Add a test. (Dominique Pelle, closes #2347)
相关文件:   src/testdir/test_functions.vim

Patch 8.0.1312 (after 8.0.1309)
问题:       balloon_show() only works in terminal when compiled with the GUI.
解决方案:   Add FEAT_BEVAL_GUI and refactor to move common code out of the GUI
            specific file.
相关文件:   src/feature.h, src/evalfunc.c, src/gui.c, src/gui_athena.c,
            src/gui_beval.c, src/proto/gui_beval.pro, src/beval.c,
            src/proto/beval.pro, src/gui_motif.c, src/gui_w32.c,
            src/gui_x11.c, src/integration.c, src/workshop.c, src/menu.c,
            src/netbeans.c, src/option.c, src/os_unix.c, src/os_win32.c,
            src/syntax.c, src/version.c, src/gui.h, src/gui_beval.h,
            src/vim.h, src/beval.h, src/option.h, src/ex_cmds2.c, src/ui.c,
            src/getchar.c, src/normal.c, src/popupmnu.c, src/globals.h,
            src/Makefile, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/Make_vms.mms, Filelist

Patch 8.0.1313 (after 8.0.1312)
问题:       Missing dependencies cause parallel make to fail.
解决方案:   Update dependencies.
相关文件:   src/Makefile

Patch 8.0.1314 (after 8.0.1312)
问题:       Build fails on Mac. (chdiza)
解决方案:   Add #ifdef around GUI fields.
相关文件:   src/beval.h

Patch 8.0.1315 (after 8.0.1312)
问题:       Build still fails on Mac. (chdiza)
解决方案:   Remove bogus typedef.
相关文件:   src/os_macosx.m

Patch 8.0.1316 (after 8.0.1312)
问题:       Build still still fails on Mac. (chdiza)
解决方案:   Remove another bogus typedef.
相关文件:   src/os_mac_conv.c

Patch 8.0.1317
问题:       Accessing freed memory in term_wait(). (Dominique Pelle)
解决方案:   Check that the buffer still exists.
相关文件:   src/terminal.c

Patch 8.0.1318
问题:       Terminal balloon only shows one line.
解决方案:   Split into several lines in a clever way.  Add balloon_split().
            Make balloon_show() accept a list in the terminal.
相关文件:   src/popupmnu.c, src/proto/popupmnu.pro, src/evalfunc.c,
            src/beval.c, src/proto/beval.pro, src/testdir/test_popup.vim,
            runtime/doc/eval.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1319
问题:       Can't build GUI on MS-Windows.
解决方案:   Don't define the balloon_split() function in a GUI-only build.
相关文件:   src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.1320
问题:       Popup test fails on GUI-only build.
解决方案:   Don't test balloon_split() when it's not available.
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1321
问题:       Can't build huge version with Athena. (Mark Kelly)
解决方案:   Move including beval.h to before structs.h. Include beval.pro like
            other proto files.
相关文件:   src/vim.h, src/beval.h, src/proto.h

Patch 8.0.1322
问题:       Textformat test isn't run. (Yegappan Lakshmanan)
解决方案:   Add target to the list of tests.
相关文件:   src/testdir/Make_all.mak

Patch 8.0.1323
问题:       Mouse events in a terminal window may cause endless loop.
解决方案:   Adjust position computation.  Don't stuff a mouse event when
            coming from normal_cmd().
相关文件:   src/normal.c, src/terminal.c

Patch 8.0.1324
问题:       Some xterm sends different mouse move codes.
解决方案:   Also accept 0x80 as a move event.
相关文件:   src/term.c

Patch 8.0.1325
问题:       More tests are not run.
解决方案:   Add targets to the list of tests. (Yegappan Lakshmanan)
相关文件:   src/testdir/Make_all.mak

Patch 8.0.1326
问题:       Largefile test fails on CI, glob test on MS-Windows.
解决方案:   Remove largefile test from list of all tests. Don't run
            Test_glob() on non-unix systems.  More cleanup. (Yegappan
            Lakshmanan, closes #2354)
相关文件:   src/testdir/Make_all.mak, src/testdir/test_escaped_glob.vim,
            src/testdir/test_plus_arg_edit.vim

Patch 8.0.1327
问题:       New proto file missing from distribution.
解决方案:   Add it. (closes #2355)
相关文件:   Filelist

Patch 8.0.1328
问题:       Trouble when using ":term ++close" with autocmd. (Gabriel Barta)
解决方案:   Use aucmd_prepbuf() and aucmd_restbuf() instead of setting curbuf.
            (closes #2339)
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1329
问题:       When a flaky test fails it also often fails the second time.
解决方案:   Sleep a couple of seconds before the second try.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1330
问题:       MS-Windows: job in terminal can't get back to Vim.
解决方案:   set VIM_SERVERNAME in the environment. (Yasuhiro Matsumoto, closes
            #2360)
相关文件:   runtime/doc/terminal.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1331
问题:       Possible crash when window can be zero lines high. (Joseph
            Dornisch)
解决方案:   Only set w_fraction if the window is at least two lines high.
相关文件:   src/window.c

Patch 8.0.1332
问题:       Highlighting in quickfix window could be better. (Axel Bender)
解决方案:   Use the qfSeparator highlight item. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.1333
问题:       Some tests are run twice.
解决方案:   Invoked most utf8 tests only from test_alot_utf8. (Yegappan
            Lakshmanan, closes #2369)
相关文件:   src/testdir/Make_all.mak, src/testdir/test_alot_utf8.vim,
            src/testdir/test_mksession_utf8.vim

Patch 8.0.1334
问题:       Splitting a window with a WinBar damages window layout.
            (Lifepillar)
解决方案:   Take the winbar into account when computing the new window
            position.  Add WINBAR_HEIGHT().
相关文件:   src/vim.h, src/window.c

Patch 8.0.1335
问题:       writefile() using fsync() may give an error for a device.
            (Yasuhiro Matsumoto)
解决方案:   Ignore fsync() failing. (closes #2373)
相关文件:   src/evalfunc.c

Patch 8.0.1336
问题:       Cannot use imactivatefunc() unless compiled with +xim.
解决方案:   Allow using imactivatefunc() when not compiled with +xim.
            (Yasuhiro Matsumoto, closes #2349)
相关文件:   runtime/doc/options.txt, runtime/doc/mbyte.txt, src/mbyte.c,
            src/option.c, src/option.h, src/structs.h,
            src/testdir/test_iminsert.vim, src/Makefile,
            src/testdir/Make_all.mak, src/vim.h

Patch 8.0.1337 (after 8.0.1336)
问题:       Typo in #ifdef.
解决方案:   Fix the #if line.
相关文件:   src/mbyte.c

Patch 8.0.1338 (after 8.0.1337)
问题:       USE_IM_CONTROL is confusing and incomplete.
解决方案:   Just use FEAT_MBYTE.  Call 'imactivatefunc' also without GUI.
相关文件:   src/vim.h, src/edit.c, src/ex_getln.c, src/getchar.c, src/gui.c,
            src/gui_mac.c, src/gui_w32.c, src/mbyte.c, src/normal.c,
            src/option.c, src/ui.c, src/globals.h, src/option.h

Patch 8.0.1339
问题:       No test for what 8.0.1335 fixes.
解决方案:   Add a test. (Yasuhiro Matsumoto, closes #2373)
相关文件:   src/testdir/test_writefile.vim

Patch 8.0.1340
问题:       MS-Windows: cannot build GUI without IME.
解决方案:   Define im_get_status() and im_set_active() when IME is not used.
相关文件:   src/mbyte.c

Patch 8.0.1341
问题:       'imactivatefunc' test fails on MS-Windows.
解决方案:   Skip the text.
相关文件:   src/testdir/test_iminsert.vim, runtime/doc/options.txt

Patch 8.0.1342
问题:       Cannot build with Motif and multi-byte. (Mohamed Boughaba)
解决方案:   Use the right input method status flag. (closes #2374)
相关文件:   src/mbyte.c

Patch 8.0.1343
问题:       MS-Windows: does not show colored emojis.
解决方案:   Implement colored emojis. Improve drawing speed. Make 'taamode'
            work. (Taro Muraoka, Yasuhiro Matsumoto, Ken Takata, close #2375)
相关文件:   appveyor.yml, runtime/doc/options.txt, src/gui_dwrite.cpp,
            src/gui_dwrite.h, src/gui_w32.c, src/proto/gui_w32.pro

Patch 8.0.1344
问题:       Using 'imactivatefunc' in the GUI does not work.
解决方案:   Do not use 'imactivatefunc' and 'imstatusfunc' in the GUI.
相关文件:   runtime/doc/options.txt, src/mbyte.c,
            src/testdir/test_iminsert.vim

Patch 8.0.1345
问题:       Race condition between stat() and open() for the viminfo temp
            file. (Simon Ruderich)
解决方案:   use open() with O_EXCL to atomically check if the file exists.
            Don't try using a temp file, renaming it will fail anyway.
相关文件:   src/ex_cmds.c

Patch 8.0.1346
问题:       Crash when passing 50 char string to balloon_split().
解决方案:   Fix off-by-one error.
相关文件:   src/testdir/test_popup.vim, src/popupmnu.c

Patch 8.0.1347
问题:       MS-Windows: build broken by misplaced curly.
解决方案:   Move curly after #endif.
相关文件:   src/ex_cmds.c

Patch 8.0.1348
问题:       Make testclean deletes script file on MS-Windows.
解决方案:   Rename file to avoid it starting with an "x".
相关文件:   src/testdir/xterm_ramp.vim, src/testdir/color_ramp.vim, Filelist

Patch 8.0.1349
问题:       Options test fails when using Motif or GTK GUI.
解决方案:   Use "fixed" instead of "fixedsys" for Unix. Don't try "xxx" for
            guifonteset.  Don't set 'termencoding' to anything but "utf-8" for
            GTK.  Give an error if 'termencoding' can't be converted.
相关文件:   src/testdir/gen_opt_test.vim, src/option.c

Patch 8.0.1350
问题:       Cannot build with +eval and -multi_byte.
解决方案:   Adjust #ifdefs. (John Marriott)  Always include the multi_byte
            feature when an input method feature is enabled.
相关文件:   src/mbyte.c, src/feature.h

Patch 8.0.1351
问题:       Warning for unused variables building with MinGW.
解决方案:   Change a few #ifdefs (suggested by John Marriott). Remove
            superfluous checks of FEAT_MBYTE.
相关文件:   src/gui_w32.c

Patch 8.0.1352
问题:       Dead URLs in the help go unnoticed.
解决方案:   Add a script to check URLs in the help files. (Christian Brabandt)
相关文件:   runtime/doc/Makefile, runtime/doc/test_urls.vim, Filelist

Patch 8.0.1353
问题:       QuickFixCmdPost is not used consistently.
解决方案:   Invoke QuickFixCmdPost consistently after QuickFixCmdPre.
            (Yegappan Lakshmanan, closes #2377)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1354
问题:       Shift-Insert doesn't always work in MS-Windows console.
解决方案:   Handle K_NUL differently. (Yasuhiro Matsumoto, closes #2381)
相关文件:   src/os_win32.c

Patch 8.0.1355 (after 8.0.1354)
问题:       Cursor keys don't work in MS-Windows console.
解决方案:   Revert the previous patch.  Also delete dead code.
相关文件:   src/os_win32.c

Patch 8.0.1356
问题:       Using simalt in a GUIEnter autocommand inserts strange characters.
            (Chih-Long Chang)
解决方案:   Ignore K_NOP in Insert mode. (closes #2379)
相关文件:   src/edit.c, src/ex_getln.c

Patch 8.0.1357
问题:       Startup test fails on OpenBSD. (Edd Barrett)
解决方案:   Check for "BSD" instead of "FreeBSD" being defined. (James McCoy,
            closes #2376, closes #2378)
相关文件:   src/vim.h

Patch 8.0.1358
问题:       Undercurl is not used in the terminal. (Kovid Goyal)
解决方案:   Only fall back to underline when undercurl highlighting is not
            defined. (closes #1306)
相关文件:   src/screen.c

Patch 8.0.1359
问题:       Libvterm ANSI colors can not always be recognized from the RGB
            values. The default color is wrong when t_RB is empty.
解决方案:   Add the ANSI color index to VTermColor.
相关文件:   src/libvterm/include/vterm.h, src/libvterm/src/pen.c,
            src/terminal.c

Patch 8.0.1360
问题:       The Terminal highlighting doesn't work in a terminal. (Ozaki
            Kiichi)
解决方案:   Use the Terminal highlighting when the cterm index is zero.
相关文件:   src/terminal.c

Patch 8.0.1361
问题:       Some users don't want to diff with hidden buffers.
解决方案:   Add the "hiddenoff" item to 'diffopt'. (Alisue, closes #2394)
相关文件:   runtime/doc/options.txt, src/buffer.c, src/diff.c,
            src/proto/diff.pro, src/testdir/test_diffmode.vim

Patch 8.0.1362
问题:       Terminal window colors wrong when using Terminal highlighting.
解决方案:   Set ansi_index when setting the default color.  Also cache the
            color index for Terminal. (Ozaki Kiichi, closes #2393)
相关文件:   src/libvterm/src/pen.c, src/proto/terminal.pro, src/syntax.c,
            src/terminal.c

Patch 8.0.1363
问题:       Recovering does not work when swap file ends in .stz.
解决方案:   Check for all possible swap file names. (Elfling, closes #2395,
            closes #2396)
相关文件:   src/memline.c

Patch 8.0.1364
问题:       There is no easy way to get the window position.
解决方案:   Add win_screenpos().
相关文件:   src/evalfunc.c, src/testdir/test_window_cmd.vim,
            runtime/doc/eval.txt

Patch 8.0.1365
问题:       When one channel test fails others fail as well.
解决方案:   Stop the job after a failure.  Also add a couple of tests to the
            list of flaky tests.
相关文件:   src/testdir/test_channel.vim, src/testdir/runtest.vim

Patch 8.0.1366
问题:       Balloon shows when cursor is in WinBar.
解决方案:   Don't show the balloon when row is negative.
相关文件:   src/beval.c

Patch 8.0.1367
问题:       terminal test hangs, executing abcde. (Stucki)
解决方案:   Rename abcde to abxde.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1368
问题:       Cannot drag status line or vertical separator of new terminal
            window. (UncleBill)
解决方案:   Adjust mouse row and column computation. (Yasuhiro Matsumoto,
            closes #2410)
相关文件:   src/terminal.c

Patch 8.0.1369
问题:       MS-Windows: drawing underline, curl and strikethrough is slow,
            mFallbackDC not properly updated.
解决方案:   Several performance improvements. (Ken Takata, Taro Muraoka,
            Yasuhiro Matsumoto, closes #2401)
相关文件:   runtime/doc/options.txt, src/gui_dwrite.cpp, src/gui_dwrite.h,
            src/gui_w32.c

Patch 8.0.1370
问题:       Channel test for callback is flaky.
解决方案:   Add the test to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1371
问题:       Shift-Insert doesn't always work in MS-Windows console.
解决方案:   Handle K_NUL differently if the second character is more than one
            byte. (Yasuhiro Matsumoto, closes #2381)
相关文件:   src/os_win32.c

Patch 8.0.1372
问题:       Profile log may be truncated halfway a character.
解决方案:   Find the start of the character. (Ozaki Kiichi, closes #2385)
相关文件:   src/ex_cmds2.c, src/testdir/test_profile.vim

Patch 8.0.1373
问题:       No error when setting 'renderoptions' to an invalid value before
            starting the GUI.
解决方案:   Always check the value. (Ken Takata, closes #2413)
相关文件:   src/gui_w32.c, src/option.c

Patch 8.0.1374
问题:       CTRL-A does not work with an empty line. (Alex)
解决方案:   Decrement the end only once. (Hirohito Higashi, closes #2387)
相关文件:   src/ops.c, src/testdir/test_increment.vim

Patch 8.0.1375
问题:       Window size wrong after maximizing with WinBar. (Lifepillar)
解决方案:   Fix height computations. Redraw window when it is zero height but
            has a WinBar. (closes #2356)
相关文件:   src/window.c, src/screen.c, src/vim.h

Patch 8.0.1376
问题:       Cursor in terminal not always updated.
解决方案:   Call gui_mch_flush(). (Ken Takata)
相关文件:   src/terminal.c

Patch 8.0.1377
问题:       Cannot call a dict function in autoloaded dict.
解决方案:   Call get_lval() passing the read-only flag.
相关文件:   src/userfunc.c, src/eval.c, src/testdir/sautest/autoload/foo.vim,
            src/testdir/sautest/autoload/globone.vim,
            src/testdir/sautest/autoload/globtwo.vim,
            src/testdir/test_escaped_glob.vim, src/Makefile,
            src/testdir/test_autoload.vim, src/Makefile,
            src/testdir/Make_all.mak

Patch 8.0.1378
问题:       Autoload script sources itself when defining function.
解决方案:   Pass TFN_NO_AUTOLOAD to trans_function_name(). (Yasuhiro
            Matsumoto, closes #2423)
相关文件:   src/userfunc.c, src/testdir/test_autoload.vim,
            src/testdir/sautest/autoload/sourced.vim

Patch 8.0.1379
问题:       Configure check for selinux does not check for header file.
解决方案:   Add an AC_CHECK_HEADER(). (Benny Siegert)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1380
问题:       When recovering a file with "vim -r swapfile" the hit-enter prompt
            is at the top of the window.
解决方案:   Invalidate the cursor position.
相关文件:   src/term.c

Patch 8.0.1381
问题:       ch_readraw() waits for NL if channel mode is NL.
解决方案:   Pass a "raw" flag to channel_read_block(). (Yasuhiro Matsumoto)
相关文件:   src/channel.c, src/proto/channel.pro,
            src/testdir/test_channel.vim, src/testdir/test_channel_pipe.py

Patch 8.0.1382
问题:       Get "no write since last change" message if a terminal is open.
            (Fritz mehner)
解决方案:   Don't consider a buffer changed if it's a terminal window.
相关文件:   src/ex_cmds.c, src/undo.c, src/proto/undo.pro

Patch 8.0.1383
问题:       Local additions in help skips some files. (joshklod)
解决方案:   Check the base file name length equals.
相关文件:   src/ex_cmds.c, src/testdir/test_help.vim

Patch 8.0.1384
问题:       Not enough quickfix help; confusing winid.
解决方案:   Add more examples in the help. When the quickfix window is not
            present, return zero for getqflist() with 'winid'. Add more tests
            for jumping to quickfix list entries. (Yegappan Lakshmanan, closes
            #2427)
相关文件:   runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1385
问题:       Python 3.5 is getting old.
解决方案:   Make Python 3.6 the default. (Ken Takata, closes #2429)
相关文件:   runtime/doc/if_pyth.txt, src/INSTALLpc.txt, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/bigvim.bat

Patch 8.0.1386
问题:       Cannot select modified buffers with getbufinfo().
解决方案:   Add the "bufmodified" flag. (Yegappan Lakshmanan, closes #2431)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim

Patch 8.0.1387
问题:       Wordcount test is old style.
解决方案:   Change into a new style test. (Yegappan Lakshmanan, closes #2434)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_ming.mak,
            src/testdir/Make_vms.mms, src/testdir/test_wordcount.in,
            src/testdir/test_wordcount.ok, src/testdir/test_wordcount.vim

Patch 8.0.1388
问题:       Char not overwritten with ambiguous width char, if the ambiguous
            char is single width but we reserve double-width space.
解决方案:   First clear the screen cells. (Ozaki Kiichi, closes #2436)
相关文件:   src/screen.c

Patch 8.0.1389
问题:       getqflist() items are missing if not set, that makes it more
            difficult to handle the values.
解决方案:   When a value is not available return zero or another invalid
            value. (Yegappan Lakshmanan, closes #2430)
相关文件:   runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1390
问题:       DirectX scrolling can be slow, vertical positioning is off.
解决方案:   Make scroll slightly faster when using "scrlines:1". Fix y
            position of displayed text. Fix DirectX with non-utf8 encoding.
            (Ken Takata, closes #2440)
相关文件:   src/INSTALLpc.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/gui_dwrite.cpp, src/gui_w32.c

Patch 8.0.1391
问题:       Encoding empty string to JSON sometimes gives "null".
解决方案:   Handle NULL string as empty string. (closes #2446)
相关文件:   src/testdir/test_json.vim, src/json.c

Patch 8.0.1392
问题:       Build fails with --with-features=huge --disable-channel.
解决方案:   Don't enable the terminal feature when the channel feature is
            missing. (Dominique Pelle, closes #2453)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1393
问题:       Too much highlighting with 'hlsearch' and 'incsearch' set.
解决方案:   Do not highlight matches when the pattern matches everything.
相关文件:   src/ex_getln.c

Patch 8.0.1394
问题:       Cannot intercept a yank command.
解决方案:   Add the TextYankPost autocommand event. (Philippe Vaucher et al.,
            closes #2333)
相关文件:   runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/dict.c,
            src/eval.c, src/fileio.c, src/ops.c, src/proto/dict.pro,
            src/proto/eval.pro, src/proto/fileio.pro,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.0.1395
问题:       It is not easy to see if a colorscheme is well written.
解决方案:   Add a script that checks for common mistakes. (Christian Brabandt)
相关文件:   runtime/colors/check_colors.vim, runtime/colors/README.txt

Patch 8.0.1396
问题:       Memory leak when CTRL-G in search command line fails.
解决方案:   Move restore_last_search_pattern to after "if".
相关文件:   src/ex_getln.c

Patch 8.0.1397
问题:       Pattern with \& following nothing gives an error.
解决方案:   Emit an empty node when needed.
相关文件:   src/regexp_nfa.c, src/testdir/test_search.vim

Patch 8.0.1398
问题:       :packadd does not load packages from the "start" directory.
            (Alejandro Hernandez)
解决方案:   Make :packadd look in the "start" directory if those packages were
            not loaded on startup.
相关文件:   src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.0.1399
问题:       Warnings and errors when building tiny version. (Tony Mechelynck)
解决方案:   Add #ifdefs.
相关文件:   src/ex_getln.c, src/ops.c

Patch 8.0.1400
问题:       Color scheme check script shows up as color scheme.
解决方案:   Move it to the "tools" subdirectory. (closes #2457)
相关文件:   Filelist, runtime/colors/check_colors.vim,
            runtime/colors/tools/check_colors.vim, runtime/colors/README.txt

Patch 8.0.1401
问题:       Cannot build with GTK but without XIM. (Guido)
解决方案:   Adjust #ifdef. (closes #2461)
相关文件:   src/gui.c

Patch 8.0.1402
问题:       Crash with nasty autocommand. (gy741, Dominique Pelle)
解决方案:   Check that the new current buffer isn't wiped out. (closes #2447)
相关文件:   src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.0.1403
问题:       Using freed buffer in grep command. (gy741, Dominique Pelle)
解决方案:   Lock the dummy buffer to avoid autocommands wiping it out.
相关文件:   src/quickfix.c, src/testdir/test_autocmd.vim

Patch 8.0.1404
问题:       Invalid memory access on exit when autocommands wipe out a buffer.
            (gy741, Dominique Pelle)
解决方案:   Check if the buffer is still valid. (closes #2449)
相关文件:   src/main.c

Patch 8.0.1405
问题:       Duplicated code for getting a typed character. CursorHold is
            called too often in the GUI. (lilydjwg)
解决方案:   Refactor code to move code up from mch_inchar().  Don't fire
            CursorHold if feedkeys() was used. (closes #2451)
相关文件:   src/gui.c, src/proto/gui.pro, src/main.c, src/ui.c,
            src/proto/ui.pro, src/os_unix.c

Patch 8.0.1406
问题:       Difficult to track changes to a quickfix list.
解决方案:   Add a "changedtick" value. (Yegappan Lakshmanan, closes #2460)
相关文件:   runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1407
问题:       GUI: CursorHold may trigger before 'updatetime' when using timers.
解决方案:   Check that 'updatetime' has passed.
相关文件:   src/gui.c

Patch 8.0.1408
问题:       Crash in setqflist().
解决方案:   Check for string to be NULL. (Dominique Pelle, closes #2464)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1409
问题:       Buffer overflow in :tags command.
解决方案:   Use vim_snprintf(). (Dominique Pelle, closes #2471, closes #2475)
            Add a test.
相关文件:   src/testdir/test_taglist.vim, src/tag.c

Patch 8.0.1410
问题:       Hang when using count() with an empty string.
解决方案:   Return zero for an empty string. (Dominique Pelle, closes #2465)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.0.1411
问题:       Reading invalid memory with CTRL-W :.
解决方案:   Correct the command characters. (closes #2469)
相关文件:   src/normal.c, src/testdir/test_window_cmd.vim, src/ops.c

Patch 8.0.1412
问题:       Using free memory using setloclist(). (Dominique Pelle)
解决方案:   Mark location list context as still in use when needed. (Yegappan
            Lakshmanan, closes #2462)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1413
问题:       Accessing freed memory in :cbuffer.
解决方案:   Get quickfix list after executing autocmds. (closes #2470)
相关文件:   src/quickfix.c, src/testdir/test_autocmd.vim

Patch 8.0.1414
问题:       Accessing freed memory in :lfile.
解决方案:   Get the current window after executing autocommands. (Yegappan
            Lakshmanan, closes #2473)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1415
问题:       Warning for unused function without timers feature.
解决方案:   Add #ifdef. (John Marriott)
相关文件:   src/gui.c

Patch 8.0.1416
问题:       Crash when searching for a sentence.
解决方案:   Return NUL when getting character at MAXCOL. (closes #2468)
相关文件:   src/misc1.c, src/misc2.c, src/testdir/test_search.vim,
            src/ex_docmd.c

Patch 8.0.1417
问题:       Test doesn't search for a sentence. Still fails when searching for
            start of sentence. (Dominique Pelle)
解决方案:   Add paren. Check for MAXCOL in dec().
相关文件:   src/testdir/test_search.vim, src/misc2.c

Patch 8.0.1418
问题:       No test for expanding backticks.
解决方案:   Add a test. (Dominique Pelle, closes #2479)
相关文件:   src/testdir/test_normal.vim

Patch 8.0.1419
问题:       Cursor column is not updated after ]s. (Gary Johnson)
解决方案:   Set the curswant flag.
相关文件:   src/testdir/test_spell.vim, src/normal.c, src/evalfunc.c

Patch 8.0.1420
问题:       Accessing freed memory in vimgrep.
解决方案:   Check that the quickfix list is still valid. (Yegappan Lakshmanan,
            closes #2474)
相关文件:   src/quickfix.c, src/testdir/test_autocmd.vim,
            src/testdir/test_quickfix.vim

Patch 8.0.1421
问题:       Accessing invalid memory with overlong byte sequence.
解决方案:   Check for NUL character. (test by Dominique Pelle, closes #2485)
相关文件:   src/misc2.c, src/testdir/test_functions.vim

Patch 8.0.1422
问题:       No fallback to underline when undercurl is not set. (Ben Jackson)
解决方案:   Check for the value to be empty instead of NULL. (closes #2424)
相关文件:   src/screen.c

Patch 8.0.1423
问题:       Error in return not caught by try/catch.
解决方案:   Call update_force_abort(). (Yasuhiro Matsumoto, closes #2483)
相关文件:   src/testdir/test_eval.in, src/testdir/test_eval_stuff.vim,
            src/Makefile, src/testdir/Make_all.mak, src/userfunc.c

Patch 8.0.1424
问题:       The timer_pause test is flaky on Travis.
解决方案:   Accept a longer sleep time on Mac.
相关文件:   src/testdir/test_timers.vim

Patch 8.0.1425
问题:       execute() does not work in completion of user command. (thinca)
解决方案:   Switch off redir_off and restore it. (Ozaki Kiichi, closes #2492)
相关文件:   src/evalfunc.c, src/testdir/test_usercommands.vim

Patch 8.0.1426
问题:       "gf" and <cfile> don't accept ? and & in URL. (Dmitrii Tcyganok)
解决方案:   Check for a URL and allow for extra characters. (closes #2493)
相关文件:   src/window.c, src/testdir/test_gf.vim

Patch 8.0.1427
问题:       The :leftabove modifier doesn't work for :copen.
解决方案:   Respect the split modifier. (Yegappan Lakshmanan, closes #2496)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1428
问题:       Compiler warning on 64 bit MS-Windows system.
解决方案:   Change type from "int" to "size_t". (Mike Williams)
相关文件:   src/ex_getln.c

Patch 8.0.1429
问题:       Crash when calling term_start() with empty argument.
解决方案:   Check for invalid argument. (Yasuhiro Matsumoto, closes #2503)
            Fix memory leak.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1430 (after 8.0.1429)
问题:       Crash when term_start() fails.
解决方案:   Initialize winpty_err.
相关文件:   src/terminal.c

Patch 8.0.1431
问题:       MS-Windows: vimtutor fails if %TMP% has special chars.
解决方案:   Add quotes. (Tamce, closes #2561)
相关文件:   vimtutor.bat

Patch 8.0.1432
问题:       After ":copen" can't get the window-ID of the quickfix window.
            (FalacerSelene)
解决方案:   Make it work without a quickfix list.  Add a test. (Yegappan
            Lakshmanan, closes #2541)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1433
问题:       Illegal memory access after undo. (Dominique Pelle)
解决方案:   Avoid the column becomes negative. (Christian Brabandt,
            closes #2533)
相关文件:   src/mbyte.c, src/testdir/test_undo.vim

Patch 8.0.1434
问题:       GTK: :promtfind does not put focus on text input. (Adam Novak)
解决方案:   When re-opening the dialog put focus on the text input. (Kazunobu
            Kuriyama, closes #2563)
相关文件:   src/gui_gtk.c

Patch 8.0.1435
问题:       Memory leak in test_arabic.
解决方案:   Free the from and to parts. (Christian Brabandt, closes #2569)
相关文件:   src/buffer.c, src/digraph.c, src/proto/digraph.pro

Patch 8.0.1436
问题:       Not enough information about what Python version may work.
解决方案:   Add "python_compiled", "python3_compiled", "python_dynamic" and
            "python3_dynamic" values for has().
相关文件:   src/evalfunc.c, runtime/doc/eval.txt

Patch 8.0.1437
问题:       Pkg-config doesn't work with cross compiling.
解决方案:   Use AC_PATH_TOOL() instead of AC_PATH_PROG(). (James McCoy,
            closes #2513)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1438
问题:       Filetype detection test not updated for change.
解决方案:   Update the test.
相关文件:   src/testdir/test_filetype.vim

Patch 8.0.1439
问题:       If cscope fails a search Vim may hang.
解决方案:   Bail out when a search error is encountered. (Safouane Baroudi,
            closes #2598)
相关文件:   src/if_cscope.c

Patch 8.0.1440
问题:       Terminal window: some vterm responses are delayed.
解决方案:   After writing input. check if there is output to read. (Ozaki
            Kiichi, closes #2594)
相关文件:   src/terminal.c, src/testdir/test_search.vim,
            src/testdir/test_terminal.vim

Patch 8.0.1441
问题:       Using ":undo 0" leaves undo in wrong state.
解决方案:   Instead of searching for state 1 and go above, just use the start.
            (Ozaki Kiichi, closes #2595)
相关文件:   src/undo.c, src/testdir/test_undo.vim

Patch 8.0.1442 (after 8.0.1439)
问题:       Using pointer before it is set.
解决方案:   Search in whole buffer instead of next token.
相关文件:   src/if_cscope.c

Patch 8.0.1443 (after 8.0.1441)
问题:       Compiler complains about uninitialized variable. (Tony Mechelynck)
解决方案:   Assign a value to the variable.
相关文件:   src/undo.c

Patch 8.0.1444
问题:       Missing -D_FILE_OFFSET_BITS=64 may cause problems if a library is
            compiled with it.
解决方案:   Include -D_FILE_OFFSET_BITS if some CFLAGS has it. (James McCoy,
            closes #2600)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1445
问题:       Cannot act on edits in the command line.
解决方案:   Add the CmdlineChanged autocommand event. (xtal8, closes #2603,
            closes #2524)
相关文件:   runtime/doc/autocmd.txt, src/ex_getln.c, src/fileio.c,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.0.1446
问题:       Accessing freed memory after window command in auto command.
            (gy741)
解决方案:   Adjust the pointer in the parent frame. (Christian Brabandt,
            closes #2467)
相关文件:   src/window.c, src/testdir/test_window_cmd.vim

Patch 8.0.1447
问题:       Still too many old style tests.
解决方案:   Turn a few tests into new style. (Yegappan Lakshmanan,
            closes #2509)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/main.aap, src/testdir/test15.in,
            src/testdir/test15.ok, src/testdir/test36.in,
            src/testdir/test36.ok, src/testdir/test50.in,
            src/testdir/test50.ok, src/testdir/test_regex_char_classes.vim,
            src/testdir/test_shortpathname.vim,
            src/testdir/test_textformat.vim

Patch 8.0.1448
问题:       Segmentation fault when Ruby throws an exception inside :rubyfile
            command.
解决方案:   Use rb_protect() instead of rb_load_protect(). (ujihisa,
            closes #2147, greywolf, closes #2512, #2511)
相关文件:   src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.0.1449
问题:       Slow redrawing with DirectX.
解决方案:   Avoid calling gui_mch_flush() unnecessarily, especially when
            updating the cursor. (Ken Takata, closes #2560)
相关文件:   runtime/doc/options.txt, src/channel.c, src/edit.c, src/getchar.c,
            src/gui.c, src/gui_dwrite.cpp, src/gui_dwrite.h, src/gui_w32.c,
            src/macros.h, src/main.c, src/message.c, src/netbeans.c,
            src/proto/gui.pro, src/proto/term.pro, src/screen.c, src/search.c,
            src/term.c, src/ui.c

Patch 8.0.1450
问题:       Endless loop when gui_mch_stop_blink() is called while blink_state
            is BLINK_OFF. (zdohnal)
解决方案:   Avoid calling gui_update_cursor() recursively.
相关文件:   src/gui.c, src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro,
            src/gui_mac.c, src/proto/gui_mac.pro, src/gui_photon.c,
            src/proto/gui_photon.pro, src/gui_w32.c, src/proto/gui_w32.pro,
            src/gui_x11.c, src/proto/gui_x11.pro

Patch 8.0.1451
问题:       It is difficult to set the python home directory properly for
            Python 2.7 and 3.5 since both use $PYTHONHOME.
解决方案:   Add the 'pythonhome' and 'pythonthreehome' options. (Kazuki
            Sakamoto, closes #1266)
相关文件:   runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/optwin.vim, src/if_python.c, src/if_python3.c,
            src/option.c, src/option.h

Patch 8.0.1452
问题:       Terminal test fails on some systems. (jonathonf)
解决方案:   Use "cat" instead of Python to produce the input.  Add a delay.
            (closes #2607)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1453
问题:       Terminal test fails on some slow terminals.
解决方案:   Increase timeout to 10 seconds.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1454
问题:       When in silent mode too much output is buffered.
解决方案:   Use line buffering instead of fully buffered. (Brian M. Carlson,
            closes #2537)
相关文件:   src/main.c

Patch 8.0.1455
问题:       If $SHELL contains a space then the default value of 'shell' is
            incorrect. (Matthew Horan)
解决方案:   Escape spaces in $SHELL. (Christian Brabandt, closes #459)
相关文件:   src/option.c, runtime/doc/options.txt,
            src/testdir/test_startup.vim

Patch 8.0.1456
问题:       Timer test on travis Mac is still flaky.
解决方案:   Increase time range a bit more.
相关文件:   src/testdir/test_timers.vim

Patch 8.0.1457
问题:       Clojure now supports a shebang line.
解决方案:   Detect clojure script from the shebang line. (David Burgin,
            closes #2570)
相关文件:   runtime/scripts.vim

Patch 8.0.1458
问题:       Filetype detection test does not check all scripts.
解决方案:   Add most scripts to the test
相关文件:   src/testdir/test_filetype.vim

Patch 8.0.1459
问题:       Cannot handle change of directory.
解决方案:   Add the DirChanged autocommand event. (Andy Massimino,
            closes #888)  Avoid changing directory for 'autochdir' too often.
相关文件:   runtime/doc/autocmd.txt, src/buffer.c, src/ex_docmd.c,
            src/fileio.c, src/main.c, src/vim.h, src/proto/misc2.pro,
            src/gui_mac.c, src/netbeans.c, src/os_win32.c,
            src/testdir/test_autocmd.vim

Patch 8.0.1460 (after 8.0.1459)
问题:       Missing file in patch.
解决方案:   Add changes to missing file.
相关文件:   src/misc2.c

Patch 8.0.1461 (after 8.0.1459)
问题:       Missing another file in patch.
解决方案:   Add changes to missing file.
相关文件:   src/ex_cmds.c

Patch 8.0.1462 (after 8.0.1459)
问题:       Missing yet another file in patch.
解决方案:   Add changes to missing file.
相关文件:   src/gui.c

Patch 8.0.1463
问题:       Test fails without 'autochdir' option.
解决方案:   Skip test if 'autochdir' is not supported.
相关文件:   src/testdir/test_autocmd.vim

Patch 8.0.1464
问题:       Completing directory after :find does not add slash.
解决方案:   Adjust the flags for globpath(). (Genki Sky)
相关文件:   src/misc1.c, src/testdir/test_find_complete.vim

Patch 8.0.1465
问题:       Python2 and python3 detection not tested. (Matej Cepl)
解决方案:   Add test for detecting python2 and python3.  Also detect a script
            using "js" as javascript.
相关文件:   runtime/scripts.vim, src/testdir/test_filetype.vim

Patch 8.0.1466
问题:       Older GTK versions don't have gtk_entry_get_text_length().
解决方案:   Add a function with #ifdefs to take care of GTK version
            differences. (Kazunobu Kuriyama, closes #2605)
相关文件:   src/gui_gtk.c

Patch 8.0.1467
问题:       Libvterm doesn't handle illegal byte sequence correctly.
解决方案:   After the invalid code check if there is space to store another
            character.  Allocate one more character. (zhykzhykzhyk, closes
            #2614, closes #2613)
相关文件:   src/libvterm/src/encoding.c, src/libvterm/src/state.c

Patch 8.0.1468
问题:       Illegal memory access in del_bytes().
解决方案:   Check for negative byte count. (Christian Brabandt, closes #2466)
相关文件:   src/message.c, src/misc1.c

Patch 8.0.1469
问题:       When package path is a symlink adding it to 'runtimepath' happens
            at the end.
解决方案:   Do not resolve symlinks before locating the position in
            'runtimepath'. (Ozaki Kiichi, closes #2604)
相关文件:   src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.0.1470
问题:       Integer overflow when using regexp pattern. (geeknik)
解决方案:   Use a long instead of int. (Christian Brabandt, closes #2251)
相关文件:   src/regexp_nfa.c

Patch 8.0.1471 (after 8.0.1401)
问题:       On MS-Windows CursorIM highlighting no longer works.
解决方案:   Adjust #if statements. (Ken Takata)
相关文件:   src/gui.c

Patch 8.0.1472
问题:       MS-Windows: nsis installer is a bit slow.
解决方案:   Use ReserveFile for vimrc.ini. (Ken Takata, closes #2522)
相关文件:   nsis/gvim.nsi

Patch 8.0.1473
问题:       MS-Windows: D&D fails between 32 and 64 bit apps.
解决方案:   Add the /HIGHENTROPYVA:NO linker option. (Ken Takata, closes #2504)
相关文件:   src/Make_mvc.mak

Patch 8.0.1474
问题:       Visual C 2017 has multiple MSVCVER numbers.
解决方案:   Assume the 2017 version if MSVCVER >= 1910. (Leonardo Valeri
            Manera, closes #2619)
相关文件:   src/Make_mvc.mak

Patch 8.0.1475
问题:       Invalid memory access in read_redo(). (gy741)
解决方案:   Convert the replacement character back from a negative number to
            CR or NL. (hint by Dominique Pelle, closes #2616)
相关文件:   src/testdir/test_undo.vim, src/normal.c, src/vim.h, src/ops.c

Patch 8.0.1476
问题:       Screen isn't always updated right away.
解决方案:   Adjust #ifdef: Call out_flush() when not running the GUI.
相关文件:   src/screen.c

Patch 8.0.1477
问题:       Redraw flicker when moving the mouse outside of terminal window.
解决方案:   Instead of updating the cursor color and shape every time leaving
            and entering a terminal window, only update when different from
            the previously used cursor.
相关文件:   src/terminal.c

Patch 8.0.1478
问题:       Unnecessary condition for "len" being zero.
解决方案:   Remove the condition. (Dominique Pelle)
相关文件:   src/regexp_nfa.c

Patch 8.0.1479
问题:       Insert mode completion state is confusing.
解决方案:   Move ctrl_x_mode into edit.c.  Add CTRL_X_NORMAL for zero.
相关文件:   src/edit.c, src/globals.h, src/proto/edit.pro, src/search.c,
            src/getchar.c

Patch 8.0.1480 (after 8.0.1479)
问题:       Patch missing change.
解决方案:   Add missing change.
相关文件:   src/evalfunc.c

Patch 8.0.1481
问题:       Clearing a pointer takes two lines.
解决方案:   Add vim_clear() to free and clear the pointer.
相关文件:   src/misc2.c, src/proto/misc2.pro, src/edit.c

Patch 8.0.1482
问题:       Using feedkeys() does not work to test Insert mode completion.
            (Lifepillar)
解决方案:   Do not check for typed keys when executing :normal or feedkeys().
            Fix thesaurus completion not working when 'complete' is empty.
相关文件:   src/edit.c, src/testdir/test_ins_complete.vim,
            src/testdir/test_popup.vim, src/testdir/test_edit.vim

Patch 8.0.1483
问题:       searchpair() might return an invalid value on timeout.
解决方案:   When the second search times out, do not accept a match from the
            first search. (Daniel Hahler, closes #2552)
相关文件:   src/search.c

Patch 8.0.1484
问题:       Redundant conditions.
解决方案:   Remove them. (Dominique Pelle)
相关文件:   src/terminal.c

Patch 8.0.1485
问题:       Weird autocmd may cause arglist to be changed recursively.
解决方案:   Prevent recursively changing the argument list. (Christian
            Brabandt, closes #2472)
相关文件:   src/ex_docmd.c, src/globals.h

Patch 8.0.1486
问题:       Accessing invalid memory with "it". (Dominique Pelle)
解决方案:   Avoid going over the end of the line. (Christian Brabandt,
            closes #2532)
相关文件:   src/search.c, src/testdir/test_textobjects.vim

Patch 8.0.1487 (after 8.0.1486)
问题:       Test 14 fails.
解决方案:   Fix of-by-one error.
相关文件:   src/search.c

Patch 8.0.1488 (after 8.0.1218)
问题:       Emacs tags no longer work. (zdohnal)
解决方案:   Do not skip over end of line.
相关文件:   src/tag.c, src/testdir/test_tagjump.vim

Patch 8.0.1489
问题:       There is no easy way to get the global directory, esp. if some
            windows have a local directory.
解决方案:   Make getcwd(-1) return the global directory. (Andy Massimino,
            closes #2606)
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_getcwd.vim

Patch 8.0.1490
问题:       Number of spell regions is spread out through the code.
解决方案:   Define MAXREGIONS.
相关文件:   src/spell.h, src/spellfile.c

Patch 8.0.1491
问题:       The minimum width of the popup menu is hard coded.
解决方案:   Add the 'pumwidth' option. (Christian Brabandt, James McCoy,
            closes #2314)
相关文件:   runtime/doc/options.txt, src/option.c, src/option.h,
            src/popupmnu.c

Patch 8.0.1492
问题:       Memory leak in balloon_split().
解决方案:   Free the balloon lines. Free the balloon when exiting.
相关文件:   src/misc2.c, src/evalfunc.c

Patch 8.0.1493
问题:       Completion items cannot be annotated.
解决方案:   Add a "user_data" entry to the completion item. (Ben Jackson,
            closes #2608, closes #2508)
相关文件:   runtime/doc/insert.txt, src/edit.c, src/structs.h,
            src/testdir/test_ins_complete.vim

Patch 8.0.1494
问题:       No autocmd triggered in Insert mode with visible popup menu.
解决方案:   Add TextChangedP. (Prabir Shrestha, Christian Brabandt,
            closes #2372, closes #1691)
            Fix that the TextChanged autocommands are not always triggered
            when sourcing a script.
相关文件:   runtime/doc/autocmd.txt, src/edit.c, src/globals.h, src/structs.h,
            src/fileio.c, src/proto/fileio.pro, src/vim.h, src/main.c,
            src/testdir/test_autocmd.vim

Patch 8.0.1495
问题:       Having 'pumwidth' default to zero has no merit.
解决方案:   Make the default 15, as the actual default value.
相关文件:   src/popupmnu.c, src/option.c

Patch 8.0.1496
问题:       Clearing a pointer takes two lines.
解决方案:   Add VIM_CLEAR() and replace vim_clear(). (Hirohito Higashi,
            closes #2629)
相关文件:   src/buffer.c, src/channel.c, src/crypt.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/gui_gtk_x11.c, src/gui_photon.c,
            src/gui_w32.c, src/gui_x11.c, src/hardcopy.c, src/if_cscope.c,
            src/macros.h, src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memline.c, src/menu.c, src/message.c, src/misc1.c,
            src/misc2.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_unix.c, src/os_win32.c, src/popupmnu.c,
            src/proto/misc2.pro, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/ui.c, src/undo.c, src/userfunc.c, src/window.c

Patch 8.0.1497
问题:       Getting the jump list requires parsing the output of :jumps.
解决方案:   Add getjumplist(). (Yegappan Lakshmanan, closes #2609)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/Makefile,
            src/evalfunc.c, src/list.c, src/proto/list.pro,
            src/testdir/Make_all.mak, src/testdir/test_jumplist.vim

Patch 8.0.1498 (after 8.0.1497)
问题:       getjumplist() returns duplicate entries. (lacygoill)
解决方案:   Call cleanup_jumplist(). (Yegappan Lakshmanan)
相关文件:   src/evalfunc.c, src/mark.c, src/proto/mark.pro,
            src/testdir/test_jumplist.vim

Patch 8.0.1499
问题:       Out-of-memory situation not correctly handled. (Coverity)
解决方案:   Check for NULL value.
相关文件:   src/terminal.c

Patch 8.0.1500
问题:       Possible NULL pointer dereference. (Coverity)
解决方案:   Check for the pointer not being NULL.
相关文件:   src/quickfix.c

Patch 8.0.1501
问题:       Out-of-memory situation not correctly handled. (Coverity)
解决方案:   Check for NULL value.
相关文件:   src/ops.c

Patch 8.0.1502
问题:       In out-of-memory situation character is not restored. (Coverity)
解决方案:   Restore the character in all situations.
相关文件:   src/ex_getln.c

Patch 8.0.1503
问题:       Access memory beyond end of string. (Coverity)
解决方案:   Keep allocated memory in separate pointer.  Avoid outputting the
            NUL character.
相关文件:   src/hardcopy.c

Patch 8.0.1504
问题:       Win32: the screen may be cleared on startup.
解决方案:   Only call shell_resized() when the size actually changed. (Ken
            Takata, closes #2527)
相关文件:   src/os_win32.c

Patch 8.0.1505
问题:       Debugger can't break on a condition. (Charles Campbell)
解决方案:   Add ":breakadd expr". (Christian Brabandt, closes #859)
相关文件:   runtime/doc/repeat.txt, src/eval.c, src/evalfunc.c,
            src/userfunc.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/proto/eval.pro, src/proto/ex_cmds2.pro, src/structs.h

Patch 8.0.1506
问题:       New version of HP NonStop (Tandem) doesn't like the default header
            for setenv().
解决方案:   Put a #ifdef around the setenv() entry. (Joachim Schmitz)
相关文件:   src/osdef2.h.in

Patch 8.0.1507
问题:       Timer test is a bit flaky.
解决方案:   Add it to the list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1508
问题:       The :drop command is not always available.
解决方案:   Include :drop in all builds. (Yasuhiro Matsumoto, closes #2639)
相关文件:   runtime/doc/windows.txt, src/ex_cmds.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/testdir/test_normal.vim,
            src/testdir/test_tabpage.vim

Patch 8.0.1509 (after 8.0.1508)
问题:       Test for failing drag-n-drop command no longer fails.
解决方案:   Check for the "dnd" feature.
相关文件:   src/testdir/test_normal.vim

Patch 8.0.1510
问题:       Cannot test if a command causes a beep.
解决方案:   Add assert_beeps().
相关文件:   runtime/doc/eval.txt, src/evalfunc.c, src/eval.c,
            src/proto/eval.pro, src/misc1.c, src/globals.h,
            src/testdir/test_normal.vim, src/testdir/test_assert.vim

Patch 8.0.1511 (after 8.0.1505)
问题:       Some code for the debugger watch expression is clumsy.
解决方案:   Clean up the code.
相关文件:   src/ex_cmds2.c, src/eval.c, src/proto/eval.pro

Patch 8.0.1512
问题:       Warning for possibly using NULL pointer. (Coverity)
解决方案:   Skip using the pointer if it's NULL.
相关文件:   src/ex_cmds.c

Patch 8.0.1513
问题:       The jumplist is not always properly cleaned up.
解决方案:   Call fname2fnum() before cleanup_jumplist(). (Yegappan Lakshmanan)
相关文件:   src/evalfunc.c, src/mark.c, src/proto/mark.pro

Patch 8.0.1514
问题:       Getting the list of changes is not easy.
解决方案:   Add the getchangelist() function. (Yegappan Lakshmanan,
            closes #2634)
相关文件:   runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_changelist.vim,
            src/Makefile

Patch 8.0.1515
问题:       BufWinEnter event fired when opening hidden terminal.
解决方案:   Do not fire BufWinEnter when the terminal is hidden and does not
            open a window. (Kenta Sato, closes #2636)
相关文件:   src/terminal.c

Patch 8.0.1516
问题:       Errors for job options are not very specific.
解决方案:   Add more specific error messages.
相关文件:   src/channel.c, src/globals.h

Patch 8.0.1517
问题:       Invalid memory access with pattern using look-behind match.
            (Dominique Pelle)
解决方案:   Get a pointer to the right line.
相关文件:   src/regexp.c

Patch 8.0.1518
问题:       Error messages suppressed after ":silent! try". (Ben Reilly)
解决方案:   Restore emsg_silent before executing :try. (closes #2531)
相关文件:   src/ex_docmd.c, src/testdir/test_eval_stuff.vim

Patch 8.0.1519
问题:       getchangelist() does not use argument as bufname().
解决方案:   Use get_buf_tv(). (Yegappan Lakshmanan, closes #2641)
相关文件:   src/evalfunc.c, src/testdir/test_changelist.vim

Patch 8.0.1520
问题:       Cursor is in the wrong line when using a WinBar in a Terminal
            window.
解决方案:   Adjust the row number. (Christian Brabandt, closes #2362)
相关文件:   src/screen.c, src/terminal.c

Patch 8.0.1521
问题:       Shift-Tab does not work in a terminal window.
解决方案:   Recognize Shift-Tab key press. (Jsees Luehrs, closes #2644)
相关文件:   src/terminal.c

Patch 8.0.1522 (after 8.0.1491)
问题:       Popup menu is positioned in the wrong place. (Davit Samvelyan,
            Boris Staletic)
解决方案:   Correct computation of the column and the conditions for that.
            (Hirohito Higashi, closes #2640)
相关文件:   src/popupmnu.c

Patch 8.0.1523
问题:       Cannot write and read terminal screendumps.
解决方案:   Add term_dumpwrite(), term_dumpread() and term_dumpdiff().
            Also add assert_equalfile().
相关文件:   src/terminal.c, src/proto/terminal.pro, src/evalfunc.c,
            src/normal.c, src/eval.c, src/proto/eval.pro,
            runtime/doc/eval.txt, src/testdir/test_assert.vim

Patch 8.0.1524 (after 8.0.1523)
问题:       Compiler warnings for uninitialized variables. (Tony Mechelynck)
解决方案:   Initialize variables.
相关文件:   src/terminal.c

Patch 8.0.1525
问题:       Using :wqa exits even if a job runs in a terminal window. (Jason
            Felice)
解决方案:   Check if a terminal has a running job. (closes #2654)
相关文件:   src/ex_cmds2.c, src/buffer.c, src/proto/buffer.pro, src/ex_cmds.c,
            src/testdir/test_terminal.vim

Patch 8.0.1526
问题:       No test using a screen dump yet.
解决方案:   Add a test for C syntax highlighting.  Add helper functions.
相关文件:   src/terminal.c, src/testdir/test_syntax.vim,
            src/testdir/shared.vim, src/testdir/screendump.vim,
            src/testdir/dumps/Test_syntax_c_01.dump, runtime/doc/terminal.txt,
            src/testdir/README.txt

Patch 8.0.1527 (after 8.0.1526)
问题:       Screen dump test fails on MS-Windows.
解决方案:   Skip dump test on MS-Windows for now.
相关文件:   src/testdir/test_syntax.vim

Patch 8.0.1528
问题:       Dead code found.
解决方案:   Remove the useless lines. (CodeAi, closes #2656)
相关文件:   src/screen.c, src/spell.c, src/syntax.c, src/window.c

Patch 8.0.1529
问题:       Assert_equalfile() does not close file descriptors. (Coverity)
解决方案:   Close the file descriptors.
相关文件:   src/eval.c

Patch 8.0.1530
问题:       Dump test fails when using a shadow directory.
解决方案:   Add the directory to the list of symlinks to make (Elimar
            Riesebieter)
相关文件:   src/Makefile

Patch 8.0.1531
问题:       Cannot use 24 bit colors in MS-Windows console.
解决方案:   Add support for vcon. (Nobuhiro Takasaki, Ken Takata,
            fixes #1270, fixes #2060)
相关文件:   runtime/doc/options.txt, src/misc1.c, src/option.c,
            src/evalfunc.c, src/os_win32.c, src/proto/os_win32.pro,
            src/feature.h, src/proto/term.pro, src/screen.c, src/syntax.c,
            src/term.c, src/testdir/gen_opt_test.vim, src/version.c

Patch 8.0.1532
问题:       Compiler warnings without termguicolors feature.
解决方案:   Add #ifdef. (John Marriott)  Cleanup the code a bit.
相关文件:   src/term.c

Patch 8.0.1533
问题:       Libterm doesn't support requesting fg and bg color.
解决方案:   Implement t_RF and t_RB.
相关文件:   src/libvterm/src/vterm_internal.h, src/libvterm/src/state.c,
            src/libvterm/src/vterm.c

Patch 8.0.1534
问题:       C syntax test fails when using gvim
解决方案:   Force running in a terminal.  Check that 'background' is correct
            even when $COLORFGBG is set.
相关文件:   src/testdir/test_syntax.vim, src/testdir/screendump.vim

Patch 8.0.1535 (after 8.0.1534)
问题:       C syntax test still fails when using gvim.
解决方案:   Clear Normal cterm highlighting instead of setting it.
相关文件:   src/testdir/test_syntax.vim, src/testdir/screendump.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.0.1536
问题:       Quotestar test is flaky when using the GUI.
解决方案:   Add check that the star register arrived at the server.  Increase
            timeouts.
相关文件:   src/testdir/test_quotestar.vim

Patch 8.0.1537
问题:       Xxd does not skip NUL lines when using ebcdic.
解决方案:   Check for a NUL before converting a character for ebcdic. (Tim
            Sell, closes #2668)
相关文件:   src/xxd/xxd.c

Patch 8.0.1538
问题:       Popupmenu is too far left when completion is long. (Linwei)
解决方案:   Adjust column computations. (Hirohito Higashi, closes #2661)
相关文件:   src/popupmnu.c

Patch 8.0.1539
问题:       No test for the popup menu positioning.
解决方案:   Add a screendump test for the popup menu.
相关文件:   src/terminal.c, src/testdir/test_syntax.vim,
            src/testdir/screendump.vim,
            src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_position_01.dump,
            src/testdir/dumps/Test_popup_position_02.dump,
            src/testdir/dumps/Test_popup_position_03.dump,
            runtime/doc/eval.txt

Patch 8.0.1540
问题:       Popup menu positioning fails with longer string.
解决方案:   Only align with right side of window when width is less than
            'pumwidth' (closes #2661)
相关文件:   src/popupmnu.c, src/testdir/screendump.vim,
            src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_position_04.dump

Patch 8.0.1541
问题:       synpat_T is taking too much memory.
解决方案:   Reorder members to reduce padding. (Dominique Pelle, closes #2671)
相关文件:   src/syntax.c

Patch 8.0.1542
问题:       Terminal screen dump does not include cursor position.
解决方案:   Mark the cursor position in the dump.
相关文件:   src/terminal.c,
            src/testdir/dumps/Test_popup_position_01.dump,
            src/testdir/dumps/Test_popup_position_02.dump,
            src/testdir/dumps/Test_popup_position_03.dump,
            src/testdir/dumps/Test_popup_position_04.dump,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.0.1543
问题:       With 'termguicolors' Normal color doesn't work correctly.
解决方案:   Set cterm_normal_bg_gui_color and cterm_normal_fg_color always.
            (Kazunobu Kuriyama, closes #981, closes #2332)
相关文件:   src/syntax.c

Patch 8.0.1544
问题:       When using 'termguicolors' SpellBad doesn't show.
解决方案:   When the GUI colors are not set fall back to the cterm colors.
相关文件:   src/syntax.c, src/screen.c, src/gui.h, src/structs.h

Patch 8.0.1545
问题:       Screen dumps not included in distribution.
解决方案:   Add dumps to the list of distributed files.
相关文件:   Filelist

Patch 8.0.1546
问题:       Using feedkeys() in a terminal window may trigger mappings.
            (Charles Sheridan)
解决方案:   Avoid triggering a mapping when peeking for a key.
相关文件:   src/getchar.c, src/terminal.c

Patch 8.0.1547
问题:       Undo in the options window makes it empty.
解决方案:   Set 'undolevels' while filling the buffer. (Yasuhiro Matsumoto,
            closes #2645)
相关文件:   runtime/optwin.vim

Patch 8.0.1548
问题:       Screen dump test script not included in distribution.
解决方案:   Add the script to the list of distributed files.
相关文件:   Filelist

Patch 8.0.1549
问题:       Various small problems in test files.
解决方案:   Include small changes.
相关文件:   src/testdir/test_channel.py, src/testdir/shared.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim

Patch 8.0.1550
问题:       Various small problems in source files.
解决方案:   Fix the problems.
相关文件:   src/README.txt, src/beval.c, src/json_test.c, src/mbyte.c,
            src/libvterm/include/vterm_keycodes.h, src/Makefile,
            src/gui_gtk.c, src/if_xcmdsrv.c, src/pty.c, src/if_python.c,
            src/if_py_both.h, uninstal.txt, src/dosinst.c, src/iscygpty.c,
            src/vimrun.c, src/os_vms.c

Patch 8.0.1551
问题:       On Mac 'maxmemtot' is set to a weird value.
解决方案:   For Mac use total memory and subtract system memory. For other
            systems accept both a 32 bit and 64 bit result. (Ozaki Kiichi,
            closes #2646)
相关文件:   src/os_unix.c

Patch 8.0.1552
问题:       May leak file descriptors when executing job.
解决方案:   Close more file descriptors. (Ozaki Kiichi, closes #2651)
相关文件:   src/os_unix.c, src/testdir/test_channel.vim

Patch 8.0.1553
问题:       Cannot see what digraph is used to insert a character.
解决方案:   Show the digraph with the "ga" command. (Christian Brabandt)
相关文件:   runtime/doc/various.txt, src/digraph.c, src/ex_cmds.c,
            src/proto/digraph.pro, src/testdir/shared.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_digraph.vim, src/testdir/test_ga.vim,
            src/testdir/test_arabic.vim

Patch 8.0.1554
问题:       Custom plugins loaded with --clean.
解决方案:   Do not include the home directory in 'runtimepath'.
相关文件:   src/option.c, src/main.c, src/proto/option.pro, src/structs.h,
            src/os_unix.h, src/os_amiga.h, src/os_dos.h, src/os_mac.h,
            runtime/doc/starting.txt

Patch 8.0.1555
问题:       Build error for some combination of features.
解决方案:   Declare variable in more situations.
相关文件:   src/main.c

Patch 8.0.1556
问题:       May not parse the t_RS response correctly, resulting in wrong
            characters in the input stream.
解决方案:   When the t_RS response is partly received wait for more
            characters.
相关文件:   src/term.c

Patch 8.0.1557
问题:       printf() does not work with only one argument. (Daniel Hahler)
解决方案:   Allow using just the format. (Ken Takata, closes #2687)
相关文件:   src/evalfunc.c, src/testdir/test_expr.vim

Patch 8.0.1558
问题:       No right-click menu in a terminal.
解决方案:   Implement the right click menu for the terminal.
相关文件:   src/popupmnu.c, src/proto/popupmnu.pro, src/normal.c, src/menu.c,
            src/proto/menu.pro, src/feature.h

Patch 8.0.1559
问题:       Build failure without GUI.
解决方案:   Adjust #ifdef for get_fpos_of_mouse().
相关文件:   src/ui.c

Patch 8.0.1560
问题:       Build failure without GUI on MS-Windows.
解决方案:   Adjust #ifdef for vcol2col().
相关文件:   src/ui.c

Patch 8.0.1561
问题:       Crash with rust syntax highlighting. (Edd Barrett)
解决方案:   Avoid going past the end of an empty line.
相关文件:   src/syntax.c

Patch 8.0.1562
问题:       The terminal debugger can't set a breakpoint with the mouse.
解决方案:   Add popup menu entries.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1563
问题:       Timeout of getwinposx() can be too short. (lilydjwg)
解决方案:   Add getwinpos(). (closes #2689)
相关文件:   src/evalfunc.c, src/term.c, src/proto/term.pro, runtime/doc/eval.txt

Patch 8.0.1564
问题:       Too many #ifdefs.
解决方案:   Graduate the +autocmd feature. Takes away 450 #ifdefs and
            increases code size of tiny Vim by only 40 Kbyte.
相关文件:   src/buffer.c, src/diff.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c,
            src/fileio.c, src/getchar.c, src/globals.h, src/gui.c,
            src/if_cscope.c, src/if_xcmdsrv.c, src/main.c, src/mbyte.c,
            src/memline.c, src/menu.c, src/misc1.c, src/gui_mac.c,
            src/misc2.c, src/move.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/option.h, src/feature.h, src/vim.h,
            src/os_amiga.c, src/os_mswin.c, src/os_unix.c, src/os_win32.c,
            src/quickfix.c, src/screen.c, src/search.c, src/spell.c,
            src/structs.h, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/ui.c, src/undo.c, src/userfunc.c,
            src/version.c, src/window.c

Patch 8.0.1565
问题:       Can't build Mac version without GUI.
解决方案:   Adjust when IME_WITHOUT_XIM is defined.
相关文件:   src/vim.h

Patch 8.0.1566
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_SCROLLBIND and FEAT_CURSORBIND.
相关文件:   src/buffer.c, src/diff.c, src/edit.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/gui.c,
            src/main.c, src/move.c, src/normal.c, src/option.c, src/term.c,
            src/version.c, src/window.c, src/globals.h, src/macros.h,
            src/option.h, src/structs.h

Patch 8.0.1567
问题:       Cannot build Win32 GUI without IME. (John Marriott)
解决方案:   Adjust when IME_WITHOUT_XIM and HAVE_INPUT_METHOD are defined and
            use it in a few more places.
相关文件:   src/vim.h, src/gui.c

Patch 8.0.1568
问题:       Can't build on older Mac, header file is missing.
解决方案:   Remove the header file. (Ozaki Kiichi, closes #2691)
相关文件:   src/os_unix.c

Patch 8.0.1569
问题:       Warning for uninitialized variable from gcc.
解决方案:   Initialize the variable.
相关文件:   src/quickfix.c

Patch 8.0.1570
问题:       Can't use :popup for a menu in the terminal. (Wei Zhang)
解决方案:   Make :popup work in the terminal.  Also fix that entries were
            included that don't work in the current state.
相关文件:   src/ex_docmd.c, src/popupmnu.c, src/proto/popupmnu.pro,
            src/menu.c, src/proto/menu.pro

Patch 8.0.1571 (after 8.0.1571)
问题:       Can't build without GUI.
解决方案:   Adjust #ifdef for gui_find_menu().
相关文件:   src/menu.c

Patch 8.0.1572
问题:       Mac: getting memory size doesn't work everywhere.
解决方案:   Use MACOS_X instead of MACOS_X_DARWIN. (Kazunobu Kuriyama)
相关文件:   src/os_unix.c

Patch 8.0.1573
问题:       getwinpos(1) may cause response to be handled as command.
解决方案:   Handle any cursor position report once one was requested. (partly
	    by Hirohito Higashi)
相关文件:   src/term.c

Patch 8.0.1574
问题:       Show cursor in wrong place when using popup menu. (Wei Zhang)
解决方案:   Force updating the cursor position.  Fix skipping over unused
            entries.
相关文件:   src/screen.c, src/proto/screen.pro, src/popupmnu.c

Patch 8.0.1575
问题:       Crash when using virtual replace.
解决方案:   Adjust orig_line_count.  Add more tests. (Christian Brabandt)
相关文件:   src/edit.c, src/testdir/test_visual.vim

Patch 8.0.1576
问题:       Perl VIM::Buffers() does not find every buffer.
解决方案:   Also find unlisted buffer by number or name. (Chris Weyl,
            closes #2692)
相关文件:   src/if_perl.xs

Patch 8.0.1577
问题:       Virtual replace test fails on MS-Windows.
解决方案:   Make adding a termcap entry work for a builtin terminal.
            Restore terminal keys in a better way.
相关文件:   src/term.c, src/testdir/test_visual.vim

Patch 8.0.1578
问题:       No test for :popup in terminal.
解决方案:   Add a screen dump test.
相关文件:   src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_command_01.dump,
            src/testdir/dumps/Test_popup_command_02.dump,
            src/testdir/dumps/Test_popup_command_03.dump

Patch 8.0.1579
问题:       Virtual replace test fails in GUI.
解决方案:   Don't save key options if they were not set.
相关文件:   src/testdir/test_visual.vim

Patch 8.0.1580
问题:       FEAT_CURSORBIND and FEAT_SCROLLBIND are unused.
解决方案:   Delete them.
相关文件:   src/feature.h

Patch 8.0.1581
问题:       Cannot build Win32 GUI without +eval.
解决方案:   Define HAVE_INPUT_METHOD without +eval. (Ken Takata)
相关文件:   src/vim.h

Patch 8.0.1582
问题:       In the MS-Windows console mouse movement is not used.
解决方案:   Pass mouse movement events when useful.
相关文件:   src/os_win32.c, src/proto/os_win32.pro, src/feature.h

Patch 8.0.1583
问题:       Using C99 comment.
解决方案:   Use old style comment. (Kazunobu Kuriyama)
相关文件:   src/quickfix.c

Patch 8.0.1584
问题:       Using C99 in Mac file gives compiler warning messages.
解决方案:   Add #pragmas to avoid the warnings. (Kazunobu Kuriyama)
相关文件:   src/os_macosx.m

Patch 8.0.1585
问题:       Enabling beval_term feature in Win32 GUI.
解决方案:   Only enable beval_term in Win32 console.
相关文件:   src/feature.h

Patch 8.0.1586
问题:       Imactivatefunc does not work on non-GUI Mac.
解决方案:   Fix logic in #ifdef.
相关文件:   src/vim.h

Patch 8.0.1587
问题:       inserting from the clipboard doesn't work literally
解决方案:   When pasting from the * or + register always assume literally.
相关文件:   src/ops.c, src/proto/ops.pro, src/testdir/test_paste.vim

Patch 8.0.1588
问题:       Popup menu hangs after typing CTRL-C.
解决方案:   Make CTRL-C exit the loop. (Ozaki Kiichi, closes #2697)
相关文件:   src/popupmnu.c

Patch 8.0.1589
问题:       Error for setting 'modifiable' when resetting it.
解决方案:   Check if 'modifiable' was actually set.
相关文件:   src/option.c

Patch 8.0.1590
问题:       Padding in list type wastes memory.
解决方案:   Reorder struct members to optimize padding. (Dominique Pelle,
            closes #2704)
相关文件:   src/structs.h

Patch 8.0.1591
问题:       MS-Windows: when reparsing the arguments 'wildignore' matters.
解决方案:   Save and reset 'wildignore'. (Yasuhiro Matsumoto, closes #2702)
相关文件:   src/os_win32.c

Patch 8.0.1592
问题:       Terminal windows in a session are not properly restored.
解决方案:   Add "terminal" in 'sessionoptions'.  When possible restore the
            command running in a terminal.
相关文件:   src/option.c, src/option.h, src/ex_docmd.c, src/terminal.c,
            src/proto/terminal.pro, src/evalfunc.c, src/structs.h,
            src/channel.c, src/testdir/test_terminal.vim,
            src/testdir/shared.vim, src/testdir/test_mksession.vim

Patch 8.0.1593
问题:       :qall never exits with an active terminal window.
解决方案:   Add a way to kill a job in a terminal window.
相关文件:   src/ex_cmds2.c, src/terminal.c, src/proto/terminal.pro,
            src/structs.h, src/channel.c, src/evalfunc.c,
            src/testdir/test_terminal.vim, runtime/doc/terminal.txt,
            runtime/doc/eval.txt

Patch 8.0.1594
问题:       :confirm qall not tested with active terminal window.
解决方案:   Add a test.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1595
问题:       No autocommand triggered before exiting.
解决方案:   Add the ExitPre autocommand event.
相关文件:   src/ex_docmd.c, src/fileio.c, src/vim.h,
            src/testdir/test_exit.vim, src/Makefile, src/testdir/Make_all.mak,
            runtime/doc/autocmd.txt

Patch 8.0.1596
问题:       No autocommand specifically for opening a terminal window.
解决方案:   Add TerminalOpen. (Yasuhiro Matsumoto, closes #2484)
相关文件:   runtime/doc/autocmd.txt, src/fileio.c, src/terminal.c,
            src/testdir/test_terminal.vim, src/vim.h

Patch 8.0.1597
问题:       Autocommand events are not sorted.
解决方案:   Sort the autocommand events.
相关文件:   src/vim.h

Patch 8.0.1598
问题:       Cannot select text in a terminal with the mouse.
解决方案:   When a job in a terminal is not consuming mouse events, use them
            for modeless selection.  Also stop Insert mode when clicking in a
            terminal window.
相关文件:   src/libvterm/include/vterm.h, src/libvterm/src/state.c,
            src/libvterm/src/vterm_internal.h, src/terminal.c,
            src/proto/terminal.pro, src/ui.c

Patch 8.0.1599
问题:       No error message when gdb does not support the terminal debugger.
解决方案:   Check for the response to open the Machine Interface.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1600
问题:       Crash when setting t_Co to zero when 'termguicolors' is set.
解决方案:   Use IS_CTERM instead of checking the number of colors.
            (closes #2710)
相关文件:   src/screen.c, src/testdir/test_highlight.vim

Patch 8.0.1601
问题:       Highlight test fails on Win32.
解决方案:   Check for vtp and vcon support.
相关文件:   src/evalfunc.c, src/testdir/test_highlight.vim

Patch 8.0.1602
问题:       Crash in parsing JSON.
解决方案:   Fail when using array or dict as dict key. (Damien)
相关文件:   src/json.c, src/testdir/test_json.vim

Patch 8.0.1603
问题:       Cannot build with +terminal but without +menu.
解决方案:   Add #ifdef. (Damien)
相关文件:   src/terminal.c

Patch 8.0.1604
问题:       Paste test may fail if $DISPLAY is not set.
解决方案:   Add WorkingClipboard() and use it in the paste test.
相关文件:   src/testdir/shared.vim, src/testdir/test_paste.vim

Patch 8.0.1605
问题:       Terminal test is a bit flaky.
解决方案:   Check for the shell prompt.  Use more lambda functions.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1606
问题:       Singular/plural variants not translated.
解决方案:   Add NGETTEXT argument to xgettext. (Sergey Alyoshin)
相关文件:   src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak,
            src/po/Makefile

Patch 8.0.1607
问题:       --clean loads user settings from .gvimrc.
解决方案:   Behave like "-U NONE" was used. (Ken Takata)
相关文件:   src/main.c, runtime/doc/starting.txt

Patch 8.0.1608
问题:       Win32: directx not enabled by default.
解决方案:   Change Makefile to enable directx by default. (Ken Takata)
相关文件:   runtime/doc/various.txt, src/Make_cyg_ming.mak,
            src/Make_mvc.mak

Patch 8.0.1609
问题:       Shell commands in the GUI use a dumb terminal.
解决方案:   Add the "!" flag to 'guioptions' to execute system commands in a
            special terminal window.  Only for Unix now.
相关文件:   src/os_unix.c, src/option.h, src/evalfunc.c, src/terminal.c,
            src/proto/terminal.pro, src/channel.c, src/proto/channel.pro,
            src/vim.h, runtime/doc/options.txt

Patch 8.0.1610 (after 8.0.1609)
问题:       Cannot build without GUI.
解决方案:   Add #ifdef.
相关文件:   src/terminal.c

Patch 8.0.1611
问题:       CTRL-W in system terminal does not go to job.
解决方案:   Do not use CTRL-W as a terminal command in a system terminal.
相关文件:   src/terminal.c

Patch 8.0.1612
问题:       Need to close terminal after shell stopped.
解决方案:   Make :terminal without argument close the window by default.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim,
            runtime/doc/terminal.txt

Patch 8.0.1613
问题:       Warning for unused variable in tiny build. (Tony Mechelynck)
解决方案:   Move declaration to inner block.
相关文件:   src/os_unix.c

Patch 8.0.1614
问题:       "make tags" doesn't include libvterm.
解决方案:   Add the libvterm sources to the tags command.
相关文件:   src/Makefile

Patch 8.0.1615
问题:       term_dumpload() does not use the right colors.
解决方案:   Initialize colors when not using create_vterm().
相关文件:   src/terminal.c

Patch 8.0.1616
问题:       Win32: shell commands in the GUI open a new console.
解决方案:   Use a terminal window for interactive use when 'guioptions'
            contains "!".
相关文件:   src/os_win32.c

Patch 8.0.1617 (after 8.0.1616)
问题:       Win32: :shell command in the GUI crashes.
解决方案:   Handle the situation that "cmd" is NULL. (Yasuhiro Matsumoto,
            closes #2721)
相关文件:   src/os_win32.c

Patch 8.0.1618
问题:       Color Grey50, used for ToolbarLine, is missing in the compiled-in
            table.
解决方案:   Add the color to the list. (Kazunobu Kuriyama)
相关文件:   src/term.c

Patch 8.0.1619
问题:       Win32 GUI: crash when winpty is not installed and trying to use
            :shell in a terminal window.
解决方案:   Check for NULL return form term_start(). (Yasuhiro Matsumoto,
            closes #2727)
相关文件:   src/os_win32.c

Patch 8.0.1620
问题:       Reading spell file has no good EOF detection.
解决方案:   Check for EOF at every character read for a length field.
相关文件:   src/misc2.c

Patch 8.0.1621
问题:       Using invalid default value for highlight attribute.
解决方案:   Use zero instead of -1.
相关文件:   src/syntax.c

Patch 8.0.1622
问题:       Possible NULL pointer dereference. (Coverity)
解决方案:   Reverse the check for a NULL pointer.
相关文件:   src/quickfix.c

Patch 8.0.1623
问题:       Terminal kill tests are flaky.
解决方案:   Instead of running Vim in a terminal, run it as a normal command.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1624
问题:       Options for term_dumpdiff() and term_dumpload() not implemented
            yet.
解决方案:   Implement the relevant options.
相关文件:   src/terminal.c, runtime/doc/eval.txt

Patch 8.0.1625
问题:       Test_quotestar is flaky when run in GTK GUI.
解决方案:   Do not call lose_selection when invoked from
            selection_clear_event().
相关文件:   src/gui_gtk_x11.c

Patch 8.0.1626
问题:       Compiler warning for possible loss of data.
解决方案:   Use size_t instead of int. (Christian Brabandt)
相关文件:   src/terminal.c

Patch 8.0.1627
问题:       Compiler warning for visibility attribute not supported on MinGW
            builds.
解决方案:   Don't add the attribute when we don't expect it to work.
            (Christian Brabandt)
相关文件:   src/libvterm/src/vterm_internal.h

Patch 8.0.1628
问题:       Channel log doesn't mention exiting.
解决方案:   Add a ch_log() call in getout().
相关文件:   src/main.c

Patch 8.0.1629
问题:       Mac: getpagesize() is deprecated.
解决方案:   Use sysconf() instead. (Ozaki Kiichi, closes #2741)
相关文件:   src/os_unix.c

Patch 8.0.1630
问题:       Trimming white space is not that easy.
解决方案:   Add the trim() function. (Bukn, Yasuhiro Matsumoto, closes #1280)
相关文件:   src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_functions.vim

Patch 8.0.1631
问题:       Testing with Vim running in terminal is a bit flaky.
解决方案:   Delete any .swp file so that later tests don't fail.
相关文件:   src/testdir/screendump.vim

Patch 8.0.1632
问题:       In a terminal dump NUL and space considered are different,
            although they are displayed the same.
解决方案:   When encountering NUL handle it like space.
相关文件:   src/terminal.c

Patch 8.0.1633
问题:       A TextChanged autocmd triggers when it is defined after creating a
            buffer.
解决方案:   Set b_last_changedtick when opening a buffer. (Hirohito Higashi,
            closes #2742)
相关文件:   src/buffer.c, src/testdir/test_autocmd.vim

Patch 8.0.1634
问题:       The ex_vimgrep() function is too long.
解决方案:   Split it in smaller functions. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.1635
问题:       Undefining _POSIX_THREADS causes problems with Python 3. (Micah
            Bucy, closes #2748)
解决方案:   Remove the lines.
相关文件:   src/if_python3.c

Patch 8.0.1636
问题:       No test for term_dumpload() and term_dumpdiff().
解决方案:   Add tests.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1637
问题:       No test for term_dumpdiff() options argument.
解决方案:   Add a test.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1638
问题:       Popup test fails depending on environment variable.
解决方案:   Reset $COLORFGBG when running Vim in a terminal. (closes #2693)
相关文件:   src/testdir/screendump.vim

Patch 8.0.1639
问题:       Libvterm code lags behind master.
解决方案:   Sync to head, solve merge problems.
相关文件:   src/libvterm/README, src/libvterm/bin/unterm.c,
            src/libvterm/bin/vterm-ctrl.c, src/libvterm/bin/vterm-dump.c,
            src/libvterm/doc/URLs, src/libvterm/doc/seqs.txt,
            src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h, src/libvterm/src/mouse.c,
            src/libvterm/src/parser.c, src/libvterm/src/pen.c,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/t/10state_putglyph.test,
            src/libvterm/t/25state_input.test, src/libvterm/t/harness.c,
            src/libvterm/t/26state_query.test

Patch 8.0.1640
问题:       Test_cwd() is flaky.
解决方案:   Add to list of flaky tests.
相关文件:   src/testdir/runtest.vim

Patch 8.0.1641
问题:       Job in terminal can't communicate with Vim.
解决方案:   Add the terminal API.
相关文件:   src/terminal.c, src/buffer.c, src/testdir/test_terminal.vim,
            src/testdir/screendump.vim, runtime/doc/terminal.txt

Patch 8.0.1642
问题:       Running Vim in terminal fails with two windows.
解决方案:   Pass the number of rows to RunVimInTerminal().
相关文件:   src/testdir/screendump.vim, src/testdir/test_terminal.vim

Patch 8.0.1643
问题:       Terminal API tests fail.
解决方案:   Explicitly set 'title'.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1644
问题:       Terminal API tests still fail.
解决方案:   Explicitly set 'title' in the terminal job. (Ozaki Kiichi,
            closes #2750)
相关文件:   src/testdir/test_terminal.vim, src/testdir/screendump.vim

Patch 8.0.1645
问题:       Test for terminal response to escape sequence fails for some
            people. (toothpik)
解决方案:   Run "cat" and let it echo the characters.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1646
问题:       MS-Windows: executable contains unreferenced functions and data.
解决方案:   Add /opt:ref to the compiler command. (Ken Takata)
相关文件:   src/Make_mvc.mak

Patch 8.0.1647
问题:       Terminal API may call a function not meant to be called by this
            API.
解决方案:   Require the function to start with Tapi_.
相关文件:   runtime/doc/terminal.txt, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.0.1648
问题:       Resource fork tool doesn't work on Python 3.
解决方案:   Use "print()" instead of "print". (Marius Gedminas)
相关文件:   src/dehqx.py

Patch 8.0.1649
问题:       No completion for argument list commands.
解决方案:   Add arglist completion. (Yegappan Lakshmanan, closes #2706)
相关文件:   runtime/doc/eval.txt, runtime/doc/map.txt, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/proto/ex_cmds2.pro,
            src/testdir/test_cmdline.vim, src/vim.h

Patch 8.0.1650
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_LISTCMDS, no reason to leave out buffer commands.
相关文件:   runtime/doc/various.txt, src/buffer.c, src/charset.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/version.c, src/feature.h

Patch 8.0.1651
问题:       Cannot filter :ls output for terminal buffers.
解决方案:   Add flags for terminal buffers. (Marcin Szamotulski, closes #2751)
相关文件:   runtime/doc/windows.txt, src/buffer.c,
            src/testdir/test_terminal.vim

Patch 8.0.1652
问题:       term_dumpwrite() does not output composing characters.
解决方案:   Use the cell index.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1653
问题:       Screen dump is made too soon.
解决方案:   Wait until the ruler is displayed. (Ozaki Kiichi, closes #2755)
相关文件:   src/testdir/dumps/Test_popup_command_01.dump,
            src/testdir/dumps/Test_popup_command_02.dump,
            src/testdir/screendump.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_terminal.vim

Patch 8.0.1654
问题:       Warnings for conversion of void to function pointer.
解决方案:   Use a temp variable that is a function pointer.
相关文件:   src/if_python.c, src/if_python3.c

Patch 8.0.1655
问题:       Outdated gdb message in terminal debugger unclear.
解决方案:   Specifically mention the required gdb version.  Avoid getting
            stuck on pagination.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.0.1656
问题:       No option to have xxd produce upper case variable names.
解决方案:   Add the -C argument. (Matt Panaro, closes #2772)
相关文件:   src/xxd/xxd.c

Patch 8.0.1657
问题:       Crash when reading a channel.
解决方案:   Clear the write flag before writing. (idea by Shinya Ohyanagi,
            closes #2769).
相关文件:   src/channel.c

Patch 8.0.1658
问题:       Capitalize argument not available in long form.
解决方案:   Recognize -capitalize.  Update man page.
相关文件:   src/xxd/xxd.c, runtime/doc/xxd.1, runtime/doc/xxd.man

Patch 8.0.1659
问题:       Scroll events not recognized for some xterm emulators.
解决方案:   Recognize mouse codes 0x40 and 0x41 as scroll events.
相关文件:   src/term.c

Patch 8.0.1660
问题:       The terminal API "drop" command doesn't support options.
解决方案:   Implement the options.
相关文件:   src/terminal.c, src/ex_docmd.c, src/proto/ex_docmd.pro,
            src/ex_cmds.h, src/eval.c, src/misc2.c, src/fileio.c,
            src/testdir/test_terminal.vim, runtime/doc/terminal.txt

Patch 8.0.1661
问题:       Warnings from 64 bit compiler.
解决方案:   Add type casts. (Mike Williams)
相关文件:   src/terminal.c

Patch 8.0.1662
问题:       Showing dump diff doesn't mention both file names.
解决方案:   Add the file name in the separator line.
相关文件:   src/terminal.c

Patch 8.0.1663 (after 8.0.1660)
问题:       Cannot build without multi-byte feature.
解决方案:   Add #ifdef.
相关文件:   src/ex_docmd.c

Patch 8.0.1664
问题:       Test failure because of not allocating enough space.
解决方案:   Allocate more bytes.
相关文件:   src/terminal.c

Patch 8.0.1665
问题:       When running a terminal from the GUI 'term' is not useful.
解决方案:   Use $TERM in the GUI if it starts with "xterm". (closes #2776)
相关文件:   src/os_unix.c, runtime/doc/terminal.txt

Patch 8.0.1666
问题:       % argument in ch_log() causes trouble.
解决方案:   Use string as third argument in internal ch_log(). (Dominique
            Pelle, closes #2784)
相关文件:   src/evalfunc.c, src/testdir/test_channel.vim

Patch 8.0.1667
问题:       Terminal window tests are flaky.
解决方案:   Increase the waiting time for Vim to start.
相关文件:   src/testdir/screendump.vim

Patch 8.0.1668
问题:       Terminal debugger: can't re-open source code window.
解决方案:   Add the :Source command.  Also create the window if needed when
            gdb stops at a source line.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1669
问题:       :vimgrep may add entries to the wrong quickfix list.
解决方案:   Use the list identifier. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1670
问题:       Terminal window tests are still a bit flaky.
解决方案:   Increase the waiting time for the buffer to be created.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1671
问题:       Crash when passing non-dict argument as env to job_start().
解决方案:   Check for valid argument. (Ozaki Kiichi, closes #2765)
相关文件:   src/channel.c, src/testdir/test_channel.vim

Patch 8.0.1672
问题:       Error during completion causes command to be cancelled.
解决方案:   Reset did_emsg before waiting for another character. (Tom M.)
相关文件:   src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.0.1673
问题:       Terminal window tests are still a bit flaky.
解决方案:   Increase the waiting time even more. (Elimar Riesebieter)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1674
问题:       Libvterm can't handle a long OSC string that is split.
解决方案:   When an incomplete OSC string is received copy it to the parser
            buffer. Increase the size of the parser buffer to be able to
            handle longer strings.
相关文件:   src/libvterm/src/parser.c, src/libvterm/src/vterm.c

Patch 8.0.1675
问题:       Unused macro argument in libvterm. (Randall W. Morris)
解决方案:   Remove the argument.
相关文件:   src/libvterm/src/parser.c

Patch 8.0.1676
问题:       No compiler warning for wrong printf format.
解决方案:   Add a printf attribute for gcc. Fix reported problems. (Dominique
            Pelle, closes #2789)
相关文件:   src/channel.c, src/vim.h, src/proto/channel.pro

Patch 8.0.1677
问题:       No compiler warning for wrong format in vim_snprintf().
解决方案:   Add printf attribute for gcc.  Fix reported problems.
相关文件:   src/vim.h, src/proto.h, src/eval.c, src/fileio.c, src/mbyte.c,
            src/ops.c, src/spellfile.c, src/undo.c, src/json.c

Patch 8.0.1678
问题:       Errorformat "%r" implies "%>". (Jan Gosmann)
解决方案:   Jump to before setting fmt_ptr. (Yegappan Lakshmanan,
            closes #2785)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1679
问题:       Compiler warning for printf format. (Chdiza)
解决方案:   Change type to "long long". (closes #2791)
相关文件:   src/ops.c

Patch 8.0.1680
问题:       Memory allocated by libvterm does not show up in profile.
解决方案:   Pass allocator functions to vterm_new().
相关文件:   src/terminal.c

Patch 8.0.1681
问题:       The format attribute fails with MinGW. (John Marriott)
解决方案:   Don't use the format attribute with MinGW.
相关文件:   src/vim.h, src/proto.h, src/channel.c

Patch 8.0.1682
问题:       Auto indenting breaks inserting a block.
解决方案:   Do not check for cursor movement if indent was changed. (Christian
            Brabandt, closes #2778)
相关文件:   src/testdir/test_blockedit.vim, src/testdir/Make_all.mak,
            src/Makefile, src/ops.c

Patch 8.0.1683
问题:       Python upgrade breaks Vim when defining PYTHON_HOME.
解决方案:   Do not define PYTHON_HOME and PYTHON3_HOME in configure. (Naoki
            Inada, closes #2787)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1684
问题:       ml_get errors when using terminal window for shell command.
            (Blay263)
解决方案:   Do not change the size of the current window.
相关文件:   src/terminal.c

Patch 8.0.1685
问题:       Can't set ANSI colors of a terminal window.
解决方案:   Add term_setansicolors(), term_getansicolors() and
            g:term_ansi_colors. (Andy Massimino, closes #2747)
相关文件:   runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/evalfunc.c, src/proto/terminal.pro, src/structs.h,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1686 (after 8.0.1683)
问题:       Python does not work when configuring with specific dir. (Rajdeep)
解决方案:   Do define PYTHON_HOME and PYTHON3_HOME in configure if the Python
            config dir was specified.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1687
问题:       64 bit compiler warnings.
解决方案:   change type, add type cast. (Mike Williams)
相关文件:   src/terminal.c

Patch 8.0.1688
问题:       Some macros are used without a semicolon, causing auto-indent to be
            wrong.
解决方案:   Use the do-while(0) trick. (Ozaki Kiichi, closes #2729)
相关文件:   src/buffer.c, src/dosinst.c, src/ex_cmds.c, src/gui_at_sb.c,
            src/macros.h, src/main.c, src/memline.c, src/option.c,
            src/os_vms.c, src/screen.c, src/window.c

Patch 8.0.1689
问题:       No tests for xxd.
解决方案:   Add a test. (Christian Brabandt)
相关文件:   src/Makefile, src/testdir/Make_all.mak, src/testdir/Makefile,
            src/testdir/test_xxd.vim, src/testdir/runtest.vim

Patch 8.0.1690
问题:       Not easy to run one test with gvim instead of vim.
解决方案:   Add VIMTESTTARGET in Makefile.
相关文件:   src/Makefile

Patch 8.0.1691
问题:       Xxd test sometimes fails.
解决方案:   Wipe out the XXDfile buffer.
相关文件:   src/testdir/test_xxd.vim

Patch 8.0.1692 (after 8.0.1686)
问题:       Python may not work when using statically linked library.
解决方案:   Do not define PYTHON_HOME and PYTHON3_HOME in configure if the
            Python library is linked statically.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1693
问题:       Xxd is excluded from coverage statistics.
解决方案:   Don't skip the xxd directory. (Christian Brabandt)
相关文件:   .travis.yml

Patch 8.0.1694
问题:       Terminal API test is a bit flaky.
解决方案:   Wait longer for Vim to stop.
相关文件:   src/testdir/screendump.vim

Patch 8.0.1695
问题:       Xxd test not run on MS-Windows.
解决方案:   Use xxd.exe if it exists.
相关文件:   src/testdir/test_xxd.vim

Patch 8.0.1696
问题:       Coverage statistics don't work.
解决方案:   Include the xxd directory. (Christian Brabandt)
相关文件:   .travis.yml

Patch 8.0.1697
问题:       Various tests are still a bit flaky.
解决方案:   Increase the default wait time to five seconds.
相关文件:   src/testdir/shared.vim, src/testdir/screendump.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_terminal.vim

Patch 8.0.1698
问题:       Coverage statistics don't work on coveralls.
解决方案:   Use curly braces for $SRCDIR.
相关文件:   .travis.yml

Patch 8.0.1699
问题:       Leftover stuff for Python 1.4.
解决方案:   Remove outdated Python 1.4 stuff. (Naoki Inada, closes #2794)
相关文件:   src/Makefile, src/config.aap.in, src/config.mk.in,
            src/configure.ac, src/auto/configure

Patch 8.0.1700
问题:       Coverage statistics still don't work on coveralls.
解决方案:   Exclude the xxd directory again.
相关文件:   .travis.yml

Patch 8.0.1701
问题:       Can disable COLOR_EMOJI with MSVC but not MinGW.
解决方案:   Add COLOR_EMOJI flag.  Also add some empty lines for readability.
相关文件:   src/Make_cyg_ming.mak

Patch 8.0.1702
问题:       Leaking memory when autocommands make a quickfix list invalid.
解决方案:   Call FreeWild(). (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.1703
问题:       In the tutor 'showcmd' is not set.
解决方案:   Set 'showcmd' in the vimtutor script. (Ken Takata, closes #2792)
相关文件:   src/vimtutor

Patch 8.0.1704
问题:       'backupskip' default doesn't work for Mac.
解决方案:   Use "/private/tmp". (Rainer Müller, closes #2793)
相关文件:   src/option.c, src/testdir/test_options.vim,
            runtime/doc/options.txt

Patch 8.0.1705
问题:       When making a vertical split the mode message isn't always
            updated, "VISUAL" remains. (Alexei Averchenko)
解决方案:   Only reset clear_cmdline when filling all columns of the last
            screen line. (Tom M. closes #2611)
相关文件:   src/screen.c, src/testdir/test_window_cmd.vim

Patch 8.0.1706
问题:       Cannot send CTRL-\ to a terminal window.
解决方案:   Make CTRL-W CTRL-\ send CTRL-\ to a terminal window.
相关文件:   src/terminal.c, runtime/doc/terminal.txt

Patch 8.0.1707
问题:       When 'wfh' is set ":bel 10new" scrolls window. (Andrew Pyatkov)
解决方案:   Set the fraction before changing the window height. (closes #2798)
相关文件:   src/window.c

Patch 8.0.1708
问题:       Mkdir with 'p' flag fails on existing directory, which is
            different from the mkdir shell command.
解决方案:   Don't fail if the directory already exists. (James McCoy,
            closes #2775)
相关文件:   src/evalfunc.c, src/testdir/test_eval_stuff.vim,
            runtime/doc/eval.txt

Patch 8.0.1709
问题:       Some non-C89 code may slip through.
解决方案:   Enforce C89 in configure. Fix detected problems. (James McCoy,
            closes #2735)
相关文件:   src/channel.c, src/configure.ac, src/auto/configure,
            src/gui_gtk_x11.c, src/if_python3.c

Patch 8.0.1710
问题:       Building with Ruby fails.
解决方案:   Don't add -ansi when building with Ruby.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1711
问题:       Term_setsize() is not implemented yet.
解决方案:   Implement it.
相关文件:   src/evalfunc.c, src/terminal.c, src/proto/terminal.pro,
            src/testdir/test_terminal.vim, runtime/doc/eval.txt

Patch 8.0.1712
问题:       Terminal scrollback is not limited.
解决方案:   Add the 'terminalscroll' option.
相关文件:   src/terminal.c, src/option.h, src/option.c,
            runtime/doc/options.txt, runtime/doc/terminal.txt

Patch 8.0.1713
问题:       Terminal debugger doesn't handle arguments.
解决方案:   Use <f-args> and pass all the arguments to gdb, e.g. the core file
            or process number. (suggested by Christian Brabandt) Disallow
            starting the debugger twice.
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1714
问题:       Term_setsize() does not give an error in a normal buffer.
解决方案:   Add an error message.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1715
问题:       Terminal buffer can be 1 more than 'terminalscroll' lines.
解决方案:   Change > to >=.
相关文件:   src/terminal.c

Patch 8.0.1716
问题:       Test for term_setsize() does not give a good error message.
解决方案:   use assert_inrange().
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1717
问题:       C89 check causes too much trouble.
解决方案:   Remove enforcing C89 for now.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1718
问题:       Terminal scrollback test fails on MS-Windows.
解决方案:   Check for the last line of output anticipating there might be an
            empty line below it.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1719
问题:       Cannot specify which Python executable configure should use.
解决方案:   Add --with-python-command and --with-python3-command.
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1720
问题:       When a timer is running a terminal window may not close after a
            shell has exited.
解决方案:   Call job_status() more often.
相关文件:   src/terminal.c

Patch 8.0.1721
问题:       No test for using the 'termsize' option.
解决方案:   Add a test.
相关文件:   src/testdir/screendump.vim, src/testdir/test_terminal.vim

Patch 8.0.1722
问题:       Cannot specify a minimal size for a terminal window.
解决方案:   Support the "rows*cols" format for 'winsize'.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim, src/option.c,
            runtime/doc/options.txt

Patch 8.0.1723
问题:       Using one item array size declaration is misleading.
解决方案:   Instead of using "[1]" and actually using a larger array, use
            "[]".  This is to verify that this C99 feature works for all
            compilers.
相关文件:   src/structs.h, src/getchar.c

Patch 8.0.1724
问题:       Declarations cannot be halfway a block.
解决方案:   Move one declaration to check if this works for all compilers.
相关文件:   src/main.c

Patch 8.0.1725
问题:       Terminal debugger doesn't handle command arguments.
解决方案:   Add the :TermdebugCommand command.  Use a ! to execute right away.
            (Christian Brabandt)
相关文件:   runtime/pack/dist/opt/termdebug/plugin/termdebug.vim,
            runtime/doc/terminal.txt

Patch 8.0.1726 (after 8.0.1724)
问题:       Older MSVC doesn't support declarations halfway a block.
解决方案:   Move the declaration back to the start of the block.
相关文件:   src/main.c

Patch 8.0.1727
问题:       qf_get_properties() function is too long.
解决方案:   Refactor the code. (Yegappan Lakshmanan, closes #2807)
相关文件:   src/quickfix.c

Patch 8.0.1728
问题:       Condition always false, useless code.
解决方案:   Remove the code. (Nikolai Pavlov, closes #2808)
相关文件:   src/message.c

Patch 8.0.1729
问题:       No comma after last enum item.
解决方案:   Add a few commas to check if this works for all compilers.  Also
            add a few // comments.
相关文件:   src/structs.h

Patch 8.0.1730
问题:       No configure check for the used C99 features.
解决方案:   Add a compilation check.  Tentatively document C99 features.
相关文件:   src/configure.ac, src/auto/configure, runtime/doc/develop.txt

Patch 8.0.1731
问题:       Characters deleted on completion. (Adrià Farrés)
解决方案:   Also check the last item for the ORIGINAL_TEXT flag. (Christian
            Brabandt, closes #1645)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.1732
问题:       Crash when terminal API call deletes the buffer.
解决方案:   Lock the buffer while calling a function. (closes #2813)
相关文件:   src/buffer.c, src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/test_autocmd.vim

Patch 8.0.1733
问题:       Incomplete testing for completion fix. (Lifepillar)
解决方案:   Add a test with CTRL-P.
相关文件:   src/testdir/test_popup.vim

Patch 8.0.1734
问题:       Package directory not added to 'rtp' if prefix matches.
解决方案:   Check the match is a full match. (Ozaki Kiichi, closes #2817)
            Also handle different ways of spelling a path.
相关文件:   src/testdir/test_packadd.vim, src/ex_cmds2.c

Patch 8.0.1735 (after 8.0.1723 and 8.0.1730)
问题:       Flexible array member feature not supported by HP-UX. (John
            Marriott)
解决方案:   Do not use the flexible array member feature of C99.
相关文件:   src/configure.ac, src/auto/configure, src/structs.h,
            src/getchar.c, runtime/doc/develop.txt

Patch 8.0.1736
问题:       Check for C99 features is incomplete.
解决方案:   Use AC_PROG_CC_C99 and when C99 isn't fully supported check the
            features we need. (James McCoy, closes #2820)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1737
问题:       fchown() used when it is not supported.
解决方案:   Add #ifdef.
相关文件:   src/fileio.c

Patch 8.0.1738
问题:       ":args" output is hard to read.
解决方案:   Make columns with the names if the output is more than one line.
相关文件:   src/ex_cmds2.c, src/version.c, src/proto/version.pro,
            src/testdir/test_arglist.vim

Patch 8.0.1739
问题:       MS-Windows with msys2 cannot build Ruby statically.
解决方案:   Define RUBY_VERSION. (Gray Wolf, closes #2826)
相关文件:   src/Make_cyg_ming.mak

Patch 8.0.1740
问题:       Warning for signed-unsigned incompatibility.
解决方案:   Change type from "char *" to "char_u *". (John Marriott)
相关文件:   src/ex_cmds2.c

Patch 8.0.1741
问题:       MS-Windows with msys2 cannot build Ruby statically.
解决方案:   Add RUBY_VERSION to CFLAGS later. (Gray Wolf, closes #2833)
相关文件:   src/Make_cyg_ming.mak

Patch 8.0.1742
问题:       Cannot get a list of all the jobs.  Cannot get the command of
            the job.
解决方案:   When job_info() is called without an argument return a list of
            jobs.  Otherwise, include the command that the job is running.
            (Yegappan Lakshmanan)
相关文件:   runtime/doc/eval.txt, src/channel.c, src/evalfunc.c,
            src/proto/channel.pro, src/structs.h, src/testdir/test_channel.vim

Patch 8.0.1743
问题:       Terminal window options are named inconsistently.
解决方案:   prefix terminal window options with "termwin".  Keep the old names
            for now as an alias.
相关文件:   src/option.c, src/option.h, src/structs.h, src/terminal.c,
            src/testdir/test_terminal.vim, src/testdir/gen_opt_test.vim,
            runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/terminal.txt, runtime/optwin.vim

Patch 8.0.1744
问题:       On some systems /dev/stdout isn't writable.
解决方案:   Skip test if writing is not possible. (James McCoy, closes #2830)
相关文件:   src/testdir/test_writefile.vim

Patch 8.0.1745
问题:       Build failure on MS-Windows.
解决方案:   Build job arguments for MS-Windows. Fix allocating job twice.
相关文件:   src/structs.h, src/channel.c, src/os_unix.c, src/misc2.c,
            src/terminal.c, src/proto/misc2.pro

Patch 8.0.1746
问题:       MS-Windows: channel tests fail.
解决方案:   Make a copy of the command before splitting it.
相关文件:   src/channel.c

Patch 8.0.1747
问题:       MS-Windows: term_start() does not set job_info() cmd.
解决方案:   Share the code from job_start() to set jv_argv.
相关文件:   src/testdir/test_terminal.vim, src/channel.c, src/misc2.c,
            src/proto/misc2.pro, src/terminal.c

Patch 8.0.1748
问题:       CmdlineEnter command uses backslash instead of slash.
解决方案:   Don't treat the character as a file name. (closes #2837)
相关文件:   src/fileio.c, src/testdir/test_autocmd.vim

Patch 8.0.1749
问题:       VMS: 100% CPU use, redefining mch_open() and mch_fopen() fails.
解决方案:   Do not wait indefinitely in RealWaitForChar(). (Neil Rieck)
            Do not redefine mch_open() and mch_fopen() on VMS. (Zoltan
            Arpadffy)
相关文件:   src/os_vms.c, src/vim.h

Patch 8.0.1750
问题:       Crash when clearing location list in autocommand.
解决方案:   Check if "qi" equals "ql_info". (Yegappan Lakshmanan)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1751
问题:       #ifdef causes bad highlighting.
解决方案:   Move code around. (Ozaki Kiichi, closes #2731)
相关文件:   src/ui.c

Patch 8.0.1752
问题:       qf_set_properties() is to long.
解决方案:   Refactor the function.  Define INVALID_QFIDX. (Yegappan
            Lakshmanan, closes #2812)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1753
问题:       Various warnings from a static analyser
解决方案:   Add type casts, remove unneeded conditions. (Christian Brabandt,
            closes #2770)
相关文件:   src/evalfunc.c, src/ex_cmds2.c, src/fileio.c, src/getchar.c,
            src/normal.c, src/os_unix.c, src/search.c, src/term.c

Patch 8.0.1754
问题:       ex_helpgrep() is too long.
解决方案:   Refactor the function. (Yegappan Lakshmanan, closes #2766)
相关文件:   src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1755
问题:       MS-Windows GUI: high unicode char received as two utf-16 words.
解决方案:   Keep the first word until the second word is received. (Chris
            Morgan, closes #2800)
相关文件:   src/gui_w32.c

Patch 8.0.1756
问题:       GUI: after prompting for a number the mouse shape is sometimes
            wrong.
解决方案:   Call setmouse() after setting "State". (Hirohito Higashi,
            closes #2709)
相关文件:   src/misc1.c

Patch 8.0.1757
问题:       Unnecessary changes in libvterm.
解决方案:   Bring back // comments and trailing comma in enums.
相关文件:   src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c, src/libvterm/src/keyboard.c,
            src/libvterm/src/parser.c, src/libvterm/src/pen.c,
            src/libvterm/src/screen.c, src/libvterm/src/state.c,
            src/libvterm/src/unicode.c, src/libvterm/src/utf8.h,
            src/libvterm/src/vterm.c, src/libvterm/src/vterm_internal.h

Patch 8.0.1758
问题:       open_line() returns TRUE/FALSE for success/failure.
解决方案:   Return OK or FAIL.
相关文件:   src/misc1.c, src/normal.c, src/edit.c

Patch 8.0.1759
问题:       Memory leak from duplicate options. (Yegappan Lakshmanan)
解决方案:   Don't set the default value twice.
相关文件:   src/option.c

Patch 8.0.1760
问题:       Wrong number of arguments to vms_read().
解决方案:   Drop the first argument. (Ozaki Kiichi)
相关文件:   src/ui.c

Patch 8.0.1761
问题:       Job in terminal window with no output channel is killed.
解决方案:   Keep the job running when the input is a tty. (Ozaki Kiichi,
            closes #2734)
相关文件:   src/channel.c, src/os_unix.c, src/testdir/test_channel.vim

Patch 8.0.1762
问题:       Terminal debug logging is a bit complicated.
解决方案:   Make log_tr() use variable arguments (Ozaki Kiichi, closes #2730)
相关文件:   src/term.c

Patch 8.0.1763
问题:       :argedit does not reuse an empty unnamed buffer.
解决方案:   Add the BLN_CURBUF flag and fix all the side effects. (Christian
            Brabandt, closes #2713)
相关文件:   src/buffer.c, src/ex_cmds2.c, src/proto/buffer.pro,
            src/testdir/test_arglist.vim, src/testdir/test_command_count.vim

Patch 8.0.1764
问题:       Lgtm considers tutor.es to be EcmaScript.
解决方案:   Add a config file for lgtm. (Bas van Schaik, closes #2844)
相关文件:   .lgtm.yml, Filelist

Patch 8.0.1765
问题:       CTRL-G j in Insert mode is incorrect when 'virtualedit' is set.
解决方案:   Take coladd into account. (Christian Brabandt, closes #2743)
相关文件:   src/charset.c, src/testdir/test_virtualedit.vim

Patch 8.0.1766 (after 8.0.1758)
问题:       Expanding abbreviation doesn't work. (Tooth Pik)
解决方案:   Return OK instead of FALSE and FAIL instead of TRUE. (Christian
            Brabandt)
相关文件:   src/edit.c, src/testdir/test_mapping.vim

Patch 8.0.1767
问题:       With 'incsearch' text may jump up and down. ()
解决方案:   Besides w_botline also save and restore w_empty_rows.
            (closes #2530)
相关文件:   src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_scrolling_01.dump

Patch 8.0.1768
问题:       SET_NO_HLSEARCH() used in a wrong way.
解决方案:   Make it a function. (suggested by Dominique Pelle,
            closes #2850)
相关文件:   src/vim.h, src/ex_docmd.c, src/proto/ex_docmd.pro, src/search.c,
            src/ex_getln.c, src/option.c, src/screen.c, src/tag.c

Patch 8.0.1769
问题:       Repeated saving and restoring viewstate for 'incsearch'.
解决方案:   Use a structure.
相关文件:   src/ex_getln.c

Patch 8.0.1770
问题:       Assert functions don't return anything.
解决方案:   Return non-zero when the assertion fails.
相关文件:   src/evalfunc.c, src/eval.c, src/proto/eval.pro,
            src/testdir/test_assert.vim, runtime/doc/eval.txt

Patch 8.0.1771
问题:       In tests, when WaitFor() fails it doesn't say why. (James McCoy)
解决方案:   Add WaitForAssert(), which produces an assert error when it fails.
相关文件:   src/testdir/shared.vim, src/testdir/test_terminal.vim,
            src/testdir/screendump.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_job_fails.vim

Patch 8.0.1772
问题:       Quickfix: mixup of FALSE and FAIL, returning -1.
解决方案:   Use FAIL and INVALID_QFIDX. (Yegappan Lakshmanan)
相关文件:   src/quickfix.c

Patch 8.0.1773
问题:       Dialog messages are not translated.
解决方案:   Add N_() and _() where needed. (Sergey Alyoshin)
相关文件:   src/diff.c, src/ex_cmds2.c, src/ex_docmd.c, src/message.c,
            src/po/Make_cyg.mak, src/po/Make_ming.mak, src/po/Make_mvc.mak,
            src/po/Makefile, src/quickfix.c, src/vim.h

Patch 8.0.1774
问题:       Reading very long lines can be slow.
解决方案:   Read up to 1 Mbyte at a time to avoid a lot of copying.  Add a
            check for going over the column limit.
相关文件:   src/fileio.c

Patch 8.0.1775
问题:       MS-Windows: warning for unused variable.
解决方案:   Move declaration inside #ifdef. (Mike Williams)
相关文件:   src/channel.c

Patch 8.0.1776
问题:       In tests, when WaitFor() fails it doesn't say why.
解决方案:   Turn a few more WaitFor() into WaitForAssert().
相关文件:   src/testdir/test_popup.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_search.vim, src/testdir/test_terminal.vim,
            src/testdir/test_timers.vim

Patch 8.0.1777
问题:       Cannot cleanup before loading another colorscheme.
解决方案:   Add the ColorSchemePre autocommand event.
相关文件:   src/fileio.c, src/syntax.c, src/vim.h, src/testdir/test_gui.vim,
            runtime/colors/README.txt

Patch 8.0.1778
问题:       Script to check translations does not always work.
解决方案:   Go to first line before searching for MIME.
相关文件:   src/po/check.vim

Patch 8.0.1779
问题:       Deleting in a block selection causes problems.
解决方案:   Check the length of the line before adding bd.textcol and
            bd.textlen. (Christian Brabandt, closes #2825)
相关文件:   src/ops.c, src/testdir/test_blockedit.vim

Patch 8.0.1780
问题:       Test fails because Vim in a terminal uses wrong 'encoding'.
解决方案:   Set encoding in the test where it matters. (James McCoy,
            closes #2847)
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1781
问题:       File names in quickfix window are not always shortened.
解决方案:   Shorten the file name when opening the quickfix window. (Yegappan
            Lakshmanan, closes #2851, closes #2846)
相关文件:   src/testdir/test_quickfix.vim, src/fileio.c, src/proto/fileio.pro,
            src/quickfix.c

Patch 8.0.1782
问题:       No simple way to label quickfix entries.
解决方案:   Add the "module" item, to be used instead of the file name for
            display purposes. (Marcin Szamotulski, closes #1757)
相关文件:   runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/alloc.h,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1783
问题:       Cannot use 256 colors in a MS-Windows console.
解决方案:   Add 256 color support. (Nobuhiro Takasaki, closes #2821)
相关文件:   src/misc1.c, src/option.c, src/os_win32.c, src/proto/os_win32.pro,
            src/term.c, src/proto/term.pro, src/terminal.c

Patch 8.0.1784 (after 8.0.1782)
问题:       Gvim test gets stuck in dialog.
解决方案:   Rename the file used.
相关文件:   src/testdir/test_quickfix.vim

Patch 8.0.1785 (after 8.0.1783)
问题:       Missing symbol in Win32 small build.
解决方案:   Define VTERM_ANSI_INDEX_NONE without the terminal feature. Also
            fix unused function with #ifdef.
相关文件:   src/term.c, src/os_win32.c

Patch 8.0.1786
问题:       No test for 'termwinkey'.
解决方案:   Add a test.  Make feedkeys() handle terminal_loop() returning
            before characters are consumed.
相关文件:   src/testdir/test_terminal.vim, src/terminal.c, src/evalfunc.c,
            src/ex_docmd.c, src/getchar.c, src/keymap.h

Patch 8.0.1787
问题:       Cannot insert the whole cursor line.
解决方案:   Make CTRL-R CTRL-L work. (Andy Massimino, closes #2857)
相关文件:   runtime/doc/cmdline.txt, src/ex_getln.c, src/ops.c,
            src/testdir/test_cmdline.vim

Patch 8.0.1788
问题:       Tool to check a color scheme is not installed.
解决方案:   Update the install rule. (Christian Brabandt)
相关文件:   src/Makefile

Patch 8.0.1789
问题:       BufWinEnter does not work well for a terminal window.
解决方案:   Do not trigger BufWinEnter when opening a terminal window.
相关文件:   src/terminal.c, runtime/doc/autocmd.txt,
            src/testdir/test_terminal.vim

Patch 8.0.1790
问题:       'winfixwidth' is not always respected by :close.
解决方案:   Prefer a frame without 'winfixwidth' or 'winfixheight'. (Jason
            Franklin)
相关文件:   src/window.c, src/testdir/test_winbuf_close.vim

Patch 8.0.1791
问题:       Using uint8_t does not work everywhere.
解决方案:   Use char_u instead.
相关文件:   src/term.c, src/proto/term.pro, src/os_win32.c

Patch 8.0.1792
问题:       MS-Windows users expect -? to work like --help.
解决方案:   Add -?. (Christian Brabandt, closes #2867)
相关文件:   src/main.c

Patch 8.0.1793
问题:       No test for "vim -g".
解决方案:   Add a test for "-g" and "-y".
相关文件:   src/testdir/shared.vim, src/testdir/test_gui.vim

Patch 8.0.1794
问题:       Duplicate term options after renaming.
解决方案:   Remove the old names 'termkey', 'termsize' and 'terminalscroll'.
相关文件:   src/option.c, src/terminal.c, src/option.h,
            src/testdir/gen_opt_test.vim, src/testdir/screendump.vim

Patch 8.0.1795
问题:       Lose contact with jobs when :gui forks.
解决方案:   Don't fork when there is a running job. Make log message for a
            died job clearer.  Also close the terminal when stderr and stdout
            are the same FD.
相关文件:   src/gui.h, src/gui.c, src/channel.c, src/proto/channel.pro,
            src/os_unix.c, src/terminal.c

Patch 8.0.1796
问题:       GUI: click on tab fails when the focus is in a terminal window.
解决方案:   Handle K_TABLINE.
相关文件:   src/terminal.c

Patch 8.0.1797
问题:       Terminal window is redrawn too often and scrolling is repeated.
解决方案:   Don't scroll immediately but only when redrawing.  Avoid redrawing
            the whole terminal window on every change.
相关文件:   src/terminal.c, src/screen.c, src/proto/terminal.pro

Patch 8.0.1798
问题:       MS-Windows: file considered read-only when another program has
            opened it.
解决方案:   Pass file sharing flag to CreateFile(). (Linwei, closes #2860)
相关文件:   src/os_win32.c

Patch 8.0.1799
问题:       No test for :registers command.
解决方案:   Add a test. (Dominique Pelle, closes #2880)
相关文件:   src/testdir/test_registers.vim

Patch 8.0.1800
问题:       X11: getting color is slow.
解决方案:   Avoid using sprintf() and XParseColor(), put the RGB values in
            XColor directly.
相关文件:   src/gui_x11.c

Patch 8.0.1801
问题:       MS-Windows: redirecting terminal output does not work.
解决方案:   Intercept the text written to the terminal and write it to the
            file.
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1802 (after 8.0.1802)
问题:       MS-Windows: terminal test fails.
解决方案:   Close redirected output file earlier.
相关文件:   src/terminal.c

Patch 8.0.1803
问题:       Warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Initialize it.
相关文件:   src/terminal.c

Patch 8.0.1804
问题:       Using :normal in terminal window causes problems. (Dominique
            Pelle)
解决方案:   Don't call terminal_loop() for :normal. (closes #2886)
相关文件:   src/ex_docmd.c, src/proto/ex_docmd.pro, src/evalfunc.c

Patch 8.0.1805
问题:       qf_parse_line() is too long.
解决方案:   Split it in parts.  Properly handle vim_realloc() failing.
            (Yegappan Lakshmanan, closes #2881)
相关文件:   src/quickfix.c

Patch 8.0.1806
问题:       InsertCharPre causes problems for autocomplete. (Lifepillar)
解决方案:   Check for InsertCharPre before calling vpeekc(). (Christian
            Brabandt, closes #2876)
相关文件:   src/edit.c, src/testdir/test_popup.vim

Patch 8.0.1807
问题:       Function to set terminal name is too long.
解决方案:   Refactor the function.  Fix typo in test.
相关文件:   src/term.c, src/testdir/test_options.vim

Patch 8.0.1808 (after 8.0.1807)
问题:       Can't build without TGETENT.
解决方案:   Add #ifdef
相关文件:   src/term.c

Patch 8.0.1809
问题:       Various typos.
解决方案:   Correct the mistakes, change "cursur" to "cursor". (closes #2887)
相关文件:   src/edit.c, src/normal.c, src/screen.c, src/proto/screen.pro,
            src/ui.c

Patch 8.0.1810
问题:       Buffer of a terminal only updated in Terminal-Normal mode.
解决方案:   Copy the terminal window content to the buffer when in
            Terminal-Job mode.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro

Patch 8.0.1811
问题:       No test for winrestcmd().
解决方案:   Add a test. (Dominique Pelle, closes #2894)
相关文件:   src/testdir/test_window_cmd.vim

Patch 8.0.1812
问题:       The qf_jump_to_usable_window() function is too long.
解决方案:   Split it in parts. (Yegappan Lakshmanan, closes #2891)
相关文件:   src/quickfix.c

Patch 8.0.1813
问题:       Windows installer doesn't install terminal debugger.
解决方案:   Add the package to the list of files to install.
相关文件:   nsis/gvim.nsi

Patch 8.0.1814
问题:       Crash with terminal window and with 'lazyredraw' set. (Antoine)
解决方案:   Check the terminal still exists after update_screen().
相关文件:   src/terminal.c

Patch 8.0.1815 (after 8.0.1814)
问题:       Still a crash with terminal window and with 'lazyredraw' set.
            (Antoine)
解决方案:   Do not wipe out the buffer when updating the screen.
相关文件:   src/terminal.c, src/proto/terminal.pro, src/screen.c,
            src/proto/screen.pro, src/ui.c

Patch 8.0.1816
问题:       No test for setcmdpos().
解决方案:   Add a test. (Dominique Pelle, closes #2901)
相关文件:   src/testdir/test_cmdline.vim

Patch 8.0.1817
问题:       A timer may change v:count unexpectedly.
解决方案:   Save and restore v:count and similar variables when a timer
            callback is invoked. (closes #2897)
相关文件:   src/eval.c, src/proto/eval.pro, src/ex_cmds2.c, src/structs.h,
            src/testdir/test_timers.vim

Patch 8.0.1818 (after 8.0.1810)
问题:       Lines remove from wrong buffer when using terminal window.
解决方案:   Make sure to use tl_buffer.
相关文件:   src/terminal.c

Patch 8.0.1819
问题:       Swap file warning for a file in a non-existing directory, if there
            is another with the same file name. (Juergen Weigert)
解决方案:   When expanding the file name fails compare the file names.
相关文件:   src/testdir/test_swap.vim, src/memline.c

Patch 8.0.1820
问题:       Terminal window redirecting stdout does not show stderr. (Matéo
            Zanibelli)
解决方案:   When stdout is not connected to pty_master_fd then use it for
            stderr. (closes #2903)
相关文件:   src/os_unix.c, src/testdir/test_terminal.vim

Patch 8.0.1821
问题:       Cursor in terminal window moves when pressing CTRL-W. (Dominique
            Pelle)
解决方案:   Do not more the cursor or redraw when not in Terminal-Normal mode.
            (closes #2904)
相关文件:   src/terminal.c

Patch 8.0.1822
问题:       Make uninstall does not remove colors/tools.
解决方案:   Add a line to delete the tools directory. (Kazunobu Kuriyama)
相关文件:   src/Makefile

Patch 8.0.1823
问题:       Test for terminal stdout redirection is flaky.
解决方案:   Wait for the job to finish.
相关文件:   src/testdir/test_terminal.vim

Patch 8.0.1824
问题:       Coverity warns for variable that may be uninitialized.
解决方案:   Initialize the variable.
相关文件:   src/terminal.c

Patch 8.0.1825
问题:       Might use NULL pointer when out of memory. (Coverity)
解决方案:   Handle NULL pointer better.
相关文件:   src/getchar.c

Patch 8.0.1826
问题:       Configure uses old compiler flag.
解决方案:   Remove _DARWIN_C_SOURCE. (Kazunobu Kuriyama)
相关文件:   src/configure.ac, src/auto/configure

Patch 8.0.1827
问题:       Compiler warning for signed/unsigned char pointers. (Cesar Romani)
解决方案:   Change the type of jv_argv.
相关文件:   src/channel.c, src/structs.h

Patch 8.0.1828
问题:       Get no clue why :gui does not fork.
解决方案:   Add a channel log message.
相关文件:   src/channel.c

Patch 8.0.1829
问题:       MS-Windows: script for vimdiff can't handle ! chars.
解决方案:   Escape the ! chars. (Hans Ginzel, closes #2896)
相关文件:   src/dosinst.c

Patch 8.0.1830
问题:       Switching to Terminal-Normal mode does not redraw. (Dominique
            Pelle)
解决方案:   Also redraw when not updating the snapshot. (closes #2904)
相关文件:   src/terminal.c

Patch 8.0.1831
问题:       Sometimes the quickfix title is incorrectly prefixed with ':'.
解决方案:   Prepend the colon in another way. (Yegappan Lakshmanan, closes
            #2905)
相关文件:   src/evalfunc.c, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.0.1832
问题:       Cannot use :unlet for an environment variable.
解决方案:   Make it work.  Use unsetenv() if available. (Yasuhiro Matsumoto,
            closes #2855)
相关文件:   runtime/doc/eval.txt, src/config.h.in, src/configure.ac,
            src/auto/configure, src/eval.c, src/misc1.c, src/proto/misc1.pro,
            src/testdir/test_unlet.vim

Patch 8.0.1833
问题:       X11: ":echo 3.14" gives E806.
解决方案:   set LC_NUMERIC to "C". (Dominique Pelle, closes #2368)
相关文件:   src/gui_x11.c

Patch 8.0.1834
问题:       GUI: find/replace dialog does not handle some chars properly.
解决方案:   Escape '?' when needed.  Always escape backslash. (closes #2418,
            closes #2435)
相关文件:   src/gui.c

Patch 8.0.1835
问题:       Print document name does not support multi-byte.
解决方案:   Use StartDocW() if needed. (Yasuhiro Matsumoto, closes #2478)
相关文件:   src/os_mswin.c

Patch 8.0.1836
问题:       Buffer-local window options may not be recent if the buffer is
            still open in another window.
解决方案:   Copy the options from the window instead of the outdated window
            options. (Bjorn Linse, closes #2336)
相关文件:   src/buffer.c, src/testdir/test_options.vim

Patch 8.0.1837
问题:       One character cmdline abbreviation not triggered after '<,'>.
解决方案:   Skip over the special range. (Christian Brabandt, closes #2320)
相关文件:   src/ex_getln.c, src/testdir/test_mapping.vim

Patch 8.0.1838
问题:       Cursor in wrong position when switching to Terminal-Normal mode.
            (Dominique Pelle)
解决方案:   Move to the end of the line if coladvance() fails.  Do not take a
            snapshot a second time.
相关文件:   src/terminal.c

Patch 8.0.1839
问题:       Script to check .po file doesn't check for plural header.
解决方案:   Add a check that the plural header is present when needed.
相关文件:   src/po/check.vim

Patch 8.0.1840
问题:       getwinpos() is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #2911)
相关文件:   src/testdir/test_gui.vim

Patch 8.0.1841
问题:       HP-UX does not have setenv().
解决方案:   Use vim_setenv(). (John Marriott)
相关文件:   src/misc1.c

Patch 8.0.1842
问题:       Popup menu inside terminal window isn't cleared.
解决方案:   Use NOT_VALID in pum_undisplay(). (suggested by Christian
            Brabandt, closes #2908)
相关文件:   src/popupmnu.c

Patch 8.0.1843
问题:       Entry for 'wrap' in options window is wrong. (John Little)
解决方案:   Make the change apply locally.
相关文件:   runtime/optwin.vim

Patch 8.0.1844
问题:       Superfluous quickfix code, missing examples.
解决方案:   Remove unneeded code.  Add a few examples.  Add a bit more
            testing. (Yegappan Lakshmanan, closes #2916)
相关文件:   runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.0.1845
问题:       Various comment updates needed, missing white space.
解决方案:   Update comments, add white space.
相关文件:   src/getchar.c, src/testdir/test_cscope.vim, src/gui_mac.c

Patch 8.0.1846
问题:       Python interface is incompatible with lldb.
解决方案:   For OutputType set the base to be PyFile_Type. (Boxu Zhang)
            Partly disabled to avoid a crash.
相关文件:   src/if_py_both.h, src/if_python.c, src/if_python3.c

Patch 8.0.1847
问题:       Some build options don't have an example.
解决方案:   Add a couple more examples and compiler flags.
相关文件:   src/Makefile

Patch 8.0.1848
问题:       'termwinscroll' does not work properly. (Dominique Pelle)
解决方案:   Subtract removed scrollback from the scrollback count.  Add a test
            for 'termwinscroll'. (closes #2909)
相关文件:   src/terminal.c, src/testdir/test_terminal.vim

Patch 8.0.1849
问题:       Compiler warning for unused arguments and missing prototype.
解决方案:   Add UNUSED.  Add static.
相关文件:   src/mbyte.c, src/if_ruby.c

Patch 8.0.1850
问题:       Todo items in source code not visible for users.
解决方案:   Move the todo items to the help file.
相关文件:   src/terminal.c


==============================================================================
8.2 版 本				*version-8.2* *version8.2* *vim-8.2*

本小节讨论 8.1 和 8.2 版本之间的改进。

这个版本有几百个漏洞修正，若干新特性和许多次要的改进。



弹出窗口					*new-popup-window*
-------------

弹出窗口可用来在其它窗口之上显示文本。可以是简单的信息，如 "Build finished
successfully"，编辑函数调用时函数的原型，可变的弹出菜单，还有许多其它用途。见
|popup-window|。

弹出窗口非常灵活: 定位可以相对于文本，绝对位置或在屏幕的中间。大小可以固定也可
以进行调整以放进文本。"zindex" 值指定弹出窗口之间谁在谁之上。

新的 'wincolor' 选项可为整个弹出窗口设置颜色。也可用于普通窗口。


文本属性					*new-text-properties*
---------------

文本属性给插件作者如何高亮的灵活性。可用于外部的处理语法高亮的异步解析器。或者
在弹出窗口中高亮文本。删除或插入字符时，文本属性与文本捆绑，这使它们可用于文本
标记。见 |text-properties|。

加入监听器函数，用来向服务器报告文本的改动，以便服务器能动态地刷新高亮，标记语
法错误，诸如此类。见 |listener_add()|。


Vim 脚本改进					*new-vimscript-8.2*
-----------------------

函数现在可以用 "->" 进行链式调用: >
	mylist->filter(filterexpr)->map(mapexpr)->sort()->join()
如果调用链没有结果，可用新的 `:eval` 命令。

加入 `:scriptversion` 命令以支持后向不兼容的改动。比如，仅支持 ".." 来连接字符
串，从而可用 "." 来更统一地访问字典成员。

加入 `:const` 以支持不能改变的变量的声明: >
	const TIMER_DELAY = 400

加入 heredoc-风格的赋值，从而能方便地把行的列表赋给变量，而无需引号或继续行: >
	let lines =<< trim END
	   line one
	   line two
	END

加入 |Blob| 类型。可以方便地处理二进制数据。

加入 /= 和 %= 赋值操作符。

字典可以用 #{} 来定义按本义出现的键。这避免了许多引号的使用:  >
	let options = #{width: 30, height: 24}


其它改进						*new-other-8.2*
------------------

- 'incsearch' 的置位也应用于 `:substitute`。
- 加入 |modifyOtherKeys| 以支持更多键组合的映射。
- 加入  Windows 10 的 ConPTY 支持，支持终端的全色彩。
- MS-Windows 安装器支持翻译，安静安装，外观也好很多。


改动							*changed-8.2*
-------

包含了 xdiff 库，避免了外部 diff 程序的需要，并使差异的更新快许多。

代码使用了更多现代的 C 特性，如 // 注释。

放弃了旧编译器的支持: Borland C++、MSVC 2008。

删除 Hangul 输入支持，实际上已经不能用了。

删除旧的 Amiga 编译器的 Makefiles: Dice、Manx 和 SAS。

如果找到没有任何改动的交换文件，会被自动删除。

删除了 FEAT_TAG_OLDSTATIC 代码，它减慢了标签的搜索。
删除了 FEAT_TAG_ANYWHITE 代码，它在任何编译版本中都没有打开。
删除了 UNICODE16 代码，没有用。
删除了 Workshop 支持，没人再用了。
删除了 Aap build 文件，过时了。
删除了波斯语支持。过时且没人用。

重新实现了 VIMDLL，它共享了 vim 和 gvim 的共用部分，以减少总安装大小。

现在在所有版本上都包含以下特性: |+multi_byte|、|+virtualedit|、|+vreplace|、
|+localmap|、|+cmdline_hist|、|+cmdline_compl|、|+insert_expand|、
|+modify_fname|、|+comments|


新增							*added-8.2*
-----

新增函数:
	所有的 popup_ 函数。
	所有的 prop_ 函数。
	所有的 sign_ 函数。
	所有的 sound_ 函数。

	|appendbufline()|
	|balloon_gettext()|
	|bufadd()|
	|bufload()|
	|ch_readblob()|
	|chdir()|
	|debugbreak()|
	|deletebufline()|
	|environ()|
	|expandcmd()|
	|getenv()|
	|getimstatus()|
	|getmousepos()|
	|gettagstack()|
	|interrupt()|
	|isinf()|
	|list2str()|
	|listener_add()|
	|listener_flush()|
	|listener_remove()|
	|prompt_setcallback()|
	|prompt_setinterrupt()|
	|prompt_setprompt()|
	|pum_getpos()|
	|rand()|
	|readdir()|
	|reg_executing()|
	|reg_recording()|
	|rubyeval()|
	|screenchars()|
	|screenpos()|
	|screenstring()|
	|setenv()|
	|settagstack()|
	|srand()|
	|state()|
	|str2list()|
	|strptime()|
	|swapinfo()|
	|swapname()|
	|term_setapi()|
	|test_getvalue()|
	|test_null_blob()|
	|test_refcount()|
	|test_scrollbar()|
	|test_setmouse()|
	|win_execute()|
	|win_splitmove()|
	|winlayout()|

新增自动命令:
	|CompleteChanged|
	|DiffUpdated|
	|SafeState|
	|SafeStateAgain|
	|SourcePost|
	|TerminalWinOpen|

新增命令:
    跳转到相对于光标位置的错误:
	`:cabove`
	`:cafter`
	`:cbefore`
	`:cbelow`
	`:labove`
	`:lbefore`
	`:lbelow`
	`:lafter`
    局部于标签页的目录:
	`:tcd`
	`:tchdir`
    其它:
	`:const`
	`:eval`
	`:redrawtabline`
	`:scriptversion`
	`:spellrare`
	`:tlmenu`
	`:tlnoremenu`
	`:tlunmenu`
	`:wsverb`
	`:xrestore`

新增选项:
	'completepopup'
	'completeslash'
	'cursorlineopt'
	'modelineexpr'
	'previewpopup'
	'scrollfocus'
	'tagfunc'
	'termwintype'
	'varsofttabstop'
	'vartabstop'
	'wincolor'


补丁							*patches-8.2*
-------

这些补丁在 8.1 发布后被加入，在 8.2 中发布。

Patch 8.1.0001
问题:       The netrw plugin does not work.
解决方案:   Make it accept version 8.x.
文件:        runtime/autoload/netrw.vim

Patch 8.1.0002
问题:       :stopinsert changes the message position.
解决方案:   Save and restore msg_col and msg_row in clearmode(). (Jason
            Franklin)
文件:       src/screen.c, src/testdir/test_messages.vim

Patch 8.1.0003
问题:       The :compiler command is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #2930)
文件:       src/Makefile, src/testdir/test_alot.vim,
            src/testdir/test_compiler.vim

Patch 8.1.0004
问题:       Test for :compiler command sometimes fails.
解决方案:   Be less strict about the error message. (Dominique Pelle)
文件:       src/testdir/test_compiler.vim

Patch 8.1.0005
问题:       Test for :compiler command fails on MS-Windows.
解决方案:   Ignore difference in path.
文件:       src/testdir/test_compiler.vim

Patch 8.1.0006
问题:       syn_id2cterm_bg() may be undefined. (Axel Bender)
解决方案:   Adjust #ifdef.
文件:       src/syntax.c

Patch 8.1.0007
问题:       No test for "o" and "O" in Visual block mode.
解决方案:   Add a test. (Dominique Pelle, closes #2932)
文件:       src/testdir/test_visual.vim

Patch 8.1.0008
问题:       No test for strwidth().
解决方案:   Add a test. (Dominique Pelle, closes #2931)
文件:       src/testdir/test_functions.vim

Patch 8.1.0009
问题:       Tabpages insufficiently tested.
解决方案:   Add more test coverage. (Dominique Pelle, closes #2934)
文件:       src/testdir/test_tabpage.vim

Patch 8.1.0010
问题:       efm_to_regpat() is too long.
解决方案:   Split off three functions. (Yegappan Lakshmanan, closes #2924)
文件:       src/quickfix.c

Patch 8.1.0011
问题:       maparg() and mapcheck() confuse empty and non-existing.
解决方案:   Return <Nop> for an existing non-empty mapping. (closes #2940)
文件:       src/evalfunc.c, src/testdir/test_maparg.vim

Patch 8.1.0012
问题:       Misplaced #endif.
解决方案:   Move the #endif to after the expression. (David Binderman)
文件:       src/fileio.c

Patch 8.1.0013
问题:       Using freed memory when changing terminal cursor color.
解决方案:   Make a copy of the color. (Dominique Pelle, closes #2938,
            closes #2941)
文件:       src/terminal.c

Patch 8.1.0014
问题:       qf_init_ext() is too long.
解决方案:   Split it into multiple functions. (Yegappan Lakshmanan,
            closes #2939)
文件:       src/quickfix.c

Patch 8.1.0015
问题:       Cursor color wrong when closing a terminal window, ending up in
            another terminal window. (Dominique Pelle)
解决方案:   Bail out of terminal_loop() when the buffer changes.
            (closes #2942)
文件:       src/terminal.c

Patch 8.1.0016
问题:       Possible crash in term_wait(). (Dominique Pelle)
解决方案:   Check for a valid buffer after ui_delay(). (closes #2944)
文件:       src/terminal.c

Patch 8.1.0017
问题:       Shell command completion has duplicates. (Yegappan Lakshmanan)
解决方案:   Use a hash table to avoid duplicates. (Ozaki Kiichi, closes #539,
            closes #2733)
文件:       src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.0018
问题:       Using "gn" may select wrong text when wrapping.
解决方案:   Avoid wrapping when searching forward. (Christian Brabandt)
文件:       src/search.c, src/testdir/test_gn.vim

Patch 8.1.0019
问题:       Error when defining a Lambda with index of a function result.
解决方案:   When not evaluating an expression and skipping a function call,
            set the return value to VAR_UNKNOWN.
文件:       src/userfunc.c, src/testdir/test_lambda.vim

Patch 8.1.0020
问题:       Cannot tell whether a register is being used for executing or
            recording.
解决方案:   Add reg_executing() and reg_recording(). (Hirohito Higashi,
            closes #2745)  Rename the global variables for consistency.  Store
            the register name in reg_executing.
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/getchar.c, src/normal.c,
            src/ops.c, src/globals.h, src/edit.c, src/fileio.c, src/message.c,
            src/screen.c

Patch 8.1.0021
问题:       Clang warns for undefined behavior.
解决方案:   Move #ifdef outside of sprintf() call. (suggestion by Michael
            Jarvis, closes #2946)
文件:       src/term.c

Patch 8.1.0022
问题:       Repeating put from expression register fails.
解决方案:   Re-evaluate the expression register. (Andy Massimino,
            closes #2945)
文件:       src/getchar.c, src/testdir/test_put.vim

Patch 8.1.0023
问题:       gcc 8.1 warns for use of strncpy(). (John Marriott)
解决方案:   Use mch_memmove() instead of STRNCPY().
文件:       src/memline.c

Patch 8.1.0024
问题:       % command not tested on #ifdef and comment.
解决方案:   Add tests. (Dominique Pelle, closes #2956)
文件:       src/testdir/test_goto.vim

Patch 8.1.0025
问题:       No test for the undofile() function.
解决方案:   Add test. (Dominique Pelle, closes #2958)
文件:       src/testdir/test_undo.vim

Patch 8.1.0026
问题:       Terminal test fails with very tall terminal. (Tom)
解决方案:   Fix the terminal window size in the test.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0027
问题:       Difficult to make a plugin that feeds a line to a job.
解决方案:   Add the initial code for the "prompt" buftype.
文件:       runtime/doc/channel.txt, runtime/doc/eval.txt,
            runtime/doc/options.txt, runtime/doc/tags, runtime/doc/todo.txt,
            src/Makefile, src/buffer.c, src/channel.c, src/diff.c, src/edit.c,
            src/evalfunc.c, src/normal.c, src/ops.c, src/option.c,
            src/proto/buffer.pro, src/proto/channel.pro, src/proto/edit.pro,
            src/proto/ops.pro, src/structs.h, src/testdir/Make_all.mak,
            src/testdir/screendump.vim, src/testdir/test_prompt_buffer.vim

Patch 8.1.0028 (after 8.1.0027)
问题:       Prompt buffer test fails on MS-Windows.
解决方案:   Disable the test for now. Remove stray assert.
文件:       src/testdir/test_prompt_buffer.vim

Patch 8.1.0029
问题:       Terminal test fails on MS-Windows when "wc" exists.
解决方案:   Skip test with redirection on MS-Windows.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0030
问题:       Stopping Vim running in a terminal may not work.
解决方案:   Instead of sending <Esc> send CTRL-O.
文件:       src/testdir/screendump.vim, src/testdir/test_prompt_buffer.vim

Patch 8.1.0031
问题:       Terminal test aucmd_on_close is flaky.
解决方案:   Wait a bit longer.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0032
问题:       BS in prompt buffer starts new line.
解决方案:   Do not allow BS over the prompt.  Make term_sendkeys() handle
            special keys. Add a test.
文件:       src/option.c, src/terminal.c, src/testdir/test_prompt_buffer.vim

Patch 8.1.0033
问题:       Keys to stop Vim in terminal are wrong. (Marius Gedminas)
解决方案:   Move ":" to before CTRL-U.
文件:       src/testdir/screendump.vim

Patch 8.1.0034
问题:       Cursor not restored with ":edit #".
解决方案:   Don't assume autocommands moved the cursor when it was moved to
            the first non-blank.
文件:       src/ex_cmds.c, src/testdir/test_edit.vim

Patch 8.1.0035
问题:       Not easy to switch between prompt buffer and other windows.
解决方案:   Accept CTRL-W commands in Insert mode.  Start and stop Insert mode
            as one would expect.
文件:       src/edit.c, src/ex_docmd.c, src/structs.h, src/window.c

Patch 8.1.0036
问题:       Not restoring Insert mode if leaving a prompt buffer by using a
            mouse click.
解决方案:   Set b_prompt_insert appropriately. Also correct cursor position
            when moving cursor to last line.
文件:       src/buffer.c, src/edit.c, src/window.c

Patch 8.1.0037
问题:       Cannot easily append lines to another buffer.
解决方案:   Add appendbufline().
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_edit.vim

Patch 8.1.0038
问题:       Popup test causes Vim to exit.
解决方案:   Disable the broken part of the test for now.
文件:       src/testdir/test_popup.vim

Patch 8.1.0039
问题:       Cannot easily delete lines in another buffer.
解决方案:   Add deletebufline().
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_bufline.vim

Patch 8.1.0040
问题:       Warnings from 64-bit compiler.
解决方案:   Add type casts. (Mike Williams)
文件:       src/edit.c

Patch 8.1.0041
问题:       Attribute "width" missing from python window attribute list.
解决方案:   Add the item. (Ken Takata) Order the list like the items are used
            in the WindowAttr() function.
文件:       src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 8.1.0042
问题:       If omni completion opens a window Insert mode is stopped.
            (Hirohito Higashi)
解决方案:   Only set stop_insert_mode in a prompt buffer window.
文件:       src/window.c

Patch 8.1.0043
问题:       ++bad argument of :edit does not work properly.
解决方案:   Return FAIL from get_bad_opt() only when there is no valid
            argument. (Dominique Pelle, Christian Brabandt, closes #2966,
            closes #2947)
文件:       src/ex_docmd.c, src/testdir/test_plus_arg_edit.vim

Patch 8.1.0044
问题:       If a test function exits Vim this may go unnoticed.
解决方案:   Check for a test function quitting Vim.  Fix tests that did exit
            Vim.
文件:       src/testdir/runtest.vim, src/testdir/test_assert.vim

Patch 8.1.0045 (after 8.1.0038)
问题:       Popup test isn't run completely.
解决方案:   Remove "finish".  Clean up function definitions.
文件:       src/testdir/test_popup.vim

Patch 8.1.0046
问题:       Loading a session file fails if 'winheight' is a big number.
解决方案:   Set 'minwinheight' to zero at first.  Don't give an error when
            setting 'minwinheight' while 'winheight' is a big number.
            Fix using vertical splits. Fix setting 'minwinwidth'.
            (closes #2970)
文件:       src/testdir/test_mksession.vim, src/option.c, src/window.c,
            src/proto/window.pro

Patch 8.1.0047
问题:       No completion for :unlet $VAR.
解决方案:   Add completion. (Jason Franklin)
文件:       src/ex_docmd.c, src/testdir/test_unlet.vim

Patch 8.1.0048
问题:       vim_str2nr() does not handle numbers close to the maximum.
解决方案:   Check for overflow more precisely. (Ken Takata, closes #2746)
文件:       src/charset.c

Patch 8.1.0049
问题:       Shell cannot tell running in a terminal window.
解决方案:   Add the VIM_TERMINAL environment variable. (Christian Brabandt)
文件:       runtime/doc/terminal.txt, src/os_unix.c, src/os_win32.c,
            src/testdir/test_terminal.vim

Patch 8.1.0050 (after 8.1.0049)
问题:       $VIM_TERMINAL is also set when not in a terminal window.
解决方案:   Pass a flag to indicate whether the job runs in a terminal.
文件:       src/channel.c, src/proto/channel.pro, src/evalfunc.c,
            src/terminal.c, src/os_unix.c, src/proto/os_unix.pro,
            src/os_win32.c

Patch 8.1.0051 (after 8.1.0050)
问题:       MS-Windows: missing #endif.
解决方案:   Add the #endif.
文件:       src/os_win32.c

Patch 8.1.0052
问题:       When a mapping to <Nop> times out the next mapping is skipped.
解决方案:   Reset "timedout" when waiting for a character. (Christian
            Brabandt, closes #2921)
文件:       src/getchar.c

Patch 8.1.0053
问题:       The first argument given to 'completefunc' can be Number or
            String, depending on the value.
解决方案:   Avoid guessing the type of an argument, use typval_T in the
            callers of call_vim_function(). (Ozaki Kiichi, closes #2993)
文件:       src/edit.c, src/eval.c, src/ex_getln.c, src/mbyte.c, src/normal.c,
            src/proto/eval.pro, src/testdir/test_ins_complete.vim

Patch 8.1.0054
问题:       Compiler warning for using %ld for "long long".
解决方案:   Add a type cast. (closes #3002)
文件:       src/os_unix.c

Patch 8.1.0055 (after 8.1.0053)
问题:       Complete test has wrong order of arguments. Wrong type for
            sentinel variable.
解决方案:   Swap arguments, use VAR_UNKNOWN. (Ozaki Kiichi)
文件:       src/mbyte.c, src/testdir/test_ins_complete.vim

Patch 8.1.0056
问题:       Crash when using :hardcopy with illegal byte.
解决方案:   Check for string_convert() returning NULL. (Dominique Pelle)
文件:       src/hardcopy.c, src/testdir/test_hardcopy.vim

Patch 8.1.0057
问题:       Popup menu displayed wrong when using autocmd.
解决方案:   Use aucmd_prepbuf().  Force updating status line if the popup menu
            is going to be redrawn anyway. (Christian Brabandt, closes #3009)
文件:       src/edit.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0058
问题:       Display problem with margins and scrolling.
解决方案:   Place the cursor in the right column. (Kouichi Iwamoto,
            closes #3016)
文件:       src/screen.c

Patch 8.1.0059
问题:       Displayed digraph for "ga" wrong with 'encoding' "cp1251".
解决方案:   Convert from 'encoding' to "utf-8" if needed. (closes #3015)
文件:       src/digraph.c, src/testdir/test_digraph.vim

Patch 8.1.0060
问题:       Crash when autocommands delete the current buffer. (Dominique
            Pelle)
解决方案:   Check that autocommands don't change the buffer.
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0061
问题:       Window title is wrong after resetting and setting 'title'.
解决方案:   Move resetting the title into maketitle(). (Jason Franklin)
文件:       src/option.c, src/buffer.c

Patch 8.1.0062
问题:       Popup menu broken if a callback changes the window layout. (Qiming
            Zhao)
解决方案:   Recompute the popup menu position if needed.  Redraw the ruler
            even when the popup menu is displayed.
文件:       src/popupmnu.c, src/proto/popupmnu.pro, src/screen.c

Patch 8.1.0063
问题:       Mac: NSStringPboardType is deprecated.
解决方案:   Use NSPasteboardTypeString. (Akshay Hegde, closes #3022)
文件:       src/os_macosx.m

Patch 8.1.0064
问题:       Typing CTRL-W in a prompt buffer shows mode "-- --".
解决方案:   Set restart_edit to 'A' and check for it.
文件:       src/edit.c, src/window.c, src/screen.c

Patch 8.1.0065 (after 8.1.0062)
问题:       Balloon displayed at the wrong position.
解决方案:   Do not reposition the popup menu at the cursor position.
文件:       src/popupmnu.c

Patch 8.1.0066
问题:       Nasty autocommand causes using freed memory. (Dominique Pelle)
解决方案:   Do not force executing autocommands if the value of 'syntax' or
            'filetype' did not change.
文件:       src/option.c

Patch 8.1.0067
问题:       Syntax highlighting not working when re-entering a buffer.
解决方案:   Do force executing autocommands when not called recursively.
文件:       src/option.c

Patch 8.1.0068
问题:       Nasty autocommands can still cause using freed memory.
解决方案:   Disallow using setloclist() and setqflist() recursively.
文件:       src/evalfunc.c

Patch 8.1.0069
问题:       Cannot handle pressing CTRL-C in a prompt buffer.
解决方案:   Add prompt_setinterrupt().
文件:       runtime/doc/eval.txt, src/edit.c, src/evalfunc.c, src/channel.c,
            src/proto/channel.pro

Patch 8.1.0070
问题:       Missing part of the changes for prompt_setinterrupt().
解决方案:   Add the missing changes.
文件:       src/structs.h

Patch 8.1.0071
问题:       Terminal debugger only works with the terminal feature.
解决方案:   Make it also work with a prompt buffer.  Makes it possible to use
            on MS-Windows. Various other improvements. (closes #3012)
文件:       runtime/doc/terminal.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0072
问题:       Use of 'termwinkey' is inconsistent.
解决方案:   Change the documentation and the behavior. (Ken Takata)
文件:       src/terminal.c, runtime/doc/terminal.txt

Patch 8.1.0073
问题:       Crash when autocommands call setloclist(). (Dominique Pelle)
解决方案:   If the quickfix list changes then don't jump to the error.
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0074 (after 8.1.0073)
问题:       Crash when running quickfix tests.
解决方案:   Do not alloc a new location list when checking for the reference
            to be still valid.
文件:       src/quickfix.c

Patch 8.1.0075
问题:       No Vim logo in README file.
解决方案:   Add one. (Árni Dagur, closes #3024)
文件:        README.md

Patch 8.1.0076
问题:       Command getting cleared with CTRL-W : in a terminal window. (Jason
            Franklin)
解决方案:   Call redraw_after_callback() when editing the command line.
文件:       src/terminal.c

Patch 8.1.0077
问题:       Header of README file is not nice.
解决方案:   Move text to the bottom.
文件:        README.md

Patch 8.1.0078
问题:       "..." used inconsistently in messages.
解决方案:   Drop the space before " ...".
文件:       src/spellfile.c, src/regexp_nfa.c

Patch 8.1.0079
问题:       Superfluous space in messages.
解决方案:   Remove the spaces. (closes #3030)
文件:       src/gui_w32.c

Patch 8.1.0080
问题:       Can't see the breakpoint number in the terminal debugger.
解决方案:   Use the breakpoint number for the sign. (Christian Brabandt)
文件:       runtime/doc/terminal.txt,
            runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0081
问题:       The terminal debugger doesn't adjust to changed 'background'.
解决方案:   Add an OptionSet autocommand. (Christian Brabandt)
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0082
问题:       In terminal window, typing : at more prompt, inserts ':' instead
            of starting another Ex command.
解决方案:   Add skip_term_loop and set it when putting ':' in the typeahead
            buffer.
文件:       src/globals.h, src/main.c, src/message.c

Patch 8.1.0083
问题:       "is" and "as" have trouble with quoted punctuation.
解决方案:   Check for punctuation before a quote. (Jason Franklin)
文件:       src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.0084
问题:       User name completion does not work on MS-Windows.
解决方案:   Use NetUserEnum() to get user names. (Yasuhiro Matsumoto)
文件:       src/Make_ivc.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/misc1.c

Patch 8.1.0085
问题:       No test for completing user name and language.
解决方案:   Add tests. (Dominique Pelle, closes #2978)
文件:       src/testdir/test_cmdline.vim

Patch 8.1.0086
问题:       No tests for libcall() and libcallnr().
解决方案:   Add tests. (Dominique Pelle, closes #2982)
文件:       src/testdir/test_functions.vim

Patch 8.1.0087
问题:       v:shell_error is always zero when using terminal for "!cmd".
解决方案:   Use "exitval" of terminal-job. (Ozaki Kiichi, closes #2994)
文件:       src/os_unix.c, src/os_win32.c, src/proto/terminal.pro,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0088
问题:       Terminal test for stdout and stderr is a bit flaky.
解决方案:   Wait for both stdout and stderr to have been processed. (Ozaki
            Kiichi, closes #2991)
文件:       src/testdir/test_terminal.vim

Patch 8.1.0089
问题:       error when ending the terminal debugger
解决方案:   Fix deleting defined signs for breakpoints.  Make the debugger
            work better on MS-Windows.
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0090
问题:       "..." used inconsistently in a message.
解决方案:   Define the message with " ..." once. (hint by Ken Takata)
文件:       src/regexp_nfa.c

Patch 8.1.0091
问题:       MS-Windows: Cannot interrupt gdb when program is running.
解决方案:   Add debugbreak() and use it in the terminal debugger.
            Respect 'modified' in a prompt buffer.
文件:       src/evalfunc.c, runtime/doc/eval.txt, src/undo.c,
	    runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0092 (after 8.1.0091)
问题:       Prompt buffer test fails.
解决方案:   Set 'nomodified' before closing the window. (Ozaki Kiichi,
            closes #3051)
文件:       src/testdir/test_prompt_buffer.vim

Patch 8.1.0093
问题:       non-MS-Windows: Cannot interrupt gdb when program is running.
解决方案:   Only use debugbreak() on MS-Windows.
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0094
问题:       Help text "usage:" is not capitalized.
解决方案:   Make it "Usage:". (closes #3044)
文件:       src/main.c

Patch 8.1.0095
问题:       Dialog for ":browse tabnew" says "new window".
解决方案:   Use "new tab page". (closes #3053)
文件:       src/ex_docmd.c

Patch 8.1.0096
问题:       Inconsistent use of the word autocommands.
解决方案:   Don't use auto-commands or "auto commands".
文件:       src/fileio.c

Patch 8.1.0097
问题:       Superfluous space before exclamation mark.
解决方案:   Remove the space.  Don't translate debug message.
文件:       src/regexp_nfa.c

Patch 8.1.0098
问题:       Segfault when pattern with \z() is very slow.
解决方案:   Check for NULL regprog.  Add "nfa_fail" to test_override() to be
            able to test this.  Fix that 'searchhl' resets called_emsg.
文件:       src/syntax.c, runtime/doc/eval.txt, src/evalfunc.c, src/vim.h,
            src/testdir/test_syntax.vim, src/globals.h, src/screen.c,
            src/regexp.c, src/regexp_nfa.c

Patch 8.1.0099
问题:       Exclamation mark in error message not needed.
解决方案:   Remove the exclamation mark.
文件:       src/regexp_nfa.c

Patch 8.1.0100
问题:       Terminal debugger: error when setting a watch point.
解决方案:   Don't try defining a sign for a watch point.
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0101
问题:       No test for getcmdwintype().
解决方案:   Add a test. (Dominique Pelle, closes #3068)
文件:       src/testdir/test_cmdline.vim

Patch 8.1.0102
问题:       Cannot build without syntax highlighting.
解决方案:   Add #ifdef around using reg_do_extmatch.
文件:       src/regexp.c

Patch 8.1.0103
问题:       Long version string cannot be translated.
解决方案:   Build the string in init_longVersion().
文件:       src/globals.h, src/version.h, src/version.c,
            src/proto/version.pro, src/main.c

Patch 8.1.0104
问题:       Can't build without the +eval feature.
解决方案:   Add #ifdef.
文件:       src/regexp_nfa.c

Patch 8.1.0105
问题:       All tab stops are the same.
解决方案:   Add the variable tabstop feature. (Christian Brabandt,
            closes #2711)
文件:       runtime/doc/change.txt, runtime/doc/options.txt,
            runtime/doc/various.txt, runtime/optwin.vim, src/beval.c,
            src/beval.h, src/buffer.c, src/charset.c, src/edit.c,
            src/evalfunc.c, src/ex_cmds.c, src/feature.h, src/gui_beval.c,
            src/gui_w32.c, src/hardcopy.c, src/message.c, src/misc1.c,
            src/ops.c, src/option.c, src/option.h, src/proto/misc1.pro,
            src/proto/option.pro, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/gen_opt_test.vim,
            src/testdir/test_breakindent.vim, src/testdir/test_vartabs.vim,
            src/version.c, src/workshop.c, src/Makefile

Patch 8.1.0106 (after 8.1.0103)
问题:       Build fails when HAVE_DATE_TIME is undefined.
解决方案:   Always define init_longVersion(). (Christian Brabandt,
            closes #3075)
文件:       src/version.c

Patch 8.1.0107
问题:       Python: getting buffer option clears message. (Jacob Niehus)
解决方案:   Don't use aucmd_prepbuf(). (closes #3079)
文件:       src/option.c

Patch 8.1.0108
问题:       No Danish translations.
解决方案:   Add Danish message translations. (closes #3073)  Move list of
            languages to a common makefile.
文件:       src/po/Makefile, src/po/Make_cyg.mak, src/po/Make_mvc.mak,
            src/po/Make_ming.mak, src/po/Make_all.mak, src/po/da.po

Patch 8.1.0109
问题:       New po makefile missing from distribution.
解决方案:   Add it to the file list.
文件:       Filelist

Patch 8.1.0110
问题:       File name not displayed with ":file" when 'F' is in 'shortmess'.
解决方案:   Always display the file name when there is no argument (Christian
            Brabandt, closes #3070)
文件:       src/ex_cmds.c, src/testdir/test_options.vim

Patch 8.1.0111
问题:       .po files do not use recommended names.
解决方案:   Give a warning if the recommended name is not used.  Accept the
            recommended name for conversion. (Christian Brabandt, Ken Takata)
文件:       src/po/Makefile, src/po/sjiscorr.c, src/po/check.vim

Patch 8.1.0112
问题:       No error when using bad arguments with searchpair().
解决方案:   Add error messages.
文件:       src/evalfunc.c, src/testdir/test_search.vim

Patch 8.1.0113
问题:       Compiler warning for unused variable. (Yegappan Lakshmanan)
解决方案:   Add UNUSED. (Christian Brabandt)
文件:       src/screen.c

Patch 8.1.0114
问题:       Confusing variable name.
解决方案:   Rename new_ts to new_vts_array.  Change zero to NULL.
文件:       src/ex_cmds.c, src/option.c

Patch 8.1.0115
问题:       The matchparen plugin may throw an error.
解决方案:   Change the skip argument from zero to "0".
文件:       runtime/plugin/matchparen.vim

Patch 8.1.0116
问题:       Display problem with 'vartabstop' and 'linebreak'. (Chauca
            Fuentes)
解决方案:   Call tabstop_padding(). (Christian Brabandt, closes #3076)
文件:       src/screen.c, src/testdir/test_vartabs.vim

Patch 8.1.0117
问题:       URL in install program still points to SourceForge.
解决方案:   Change it to www.vim.org. (closes #3100)
文件:       src/dosinst.c

Patch 8.1.0118
问题:       Duplicate error message for put command.
解决方案:   Check return value of u_save(). (Jason Franklin)
文件:       src/ops.c, src/testdir/test_messages.vim src/testdir/test_put.vim

Patch 8.1.0119
问题:       Failing test goes unnoticed because testdir/messages is not
            written.
解决方案:   Set 'nomodifiable' only local to the buffer.
文件:       src/testdir/test_put.vim

Patch 8.1.0120
问题:       Buffer 'modified' set even when :sort has no changes.
解决方案:   Only set 'modified' when lines are moved. (Jason Franklin)
文件:       src/ex_cmds.c, src/testdir/test_sort.vim

Patch 8.1.0121
问题:       Crash when using ballooneval related to 'vartabstop'.
解决方案:   Initialize balloonEval->vts to NULL. (Markus Braun)
文件:       src/ex_cmds2.c, src/gui_beval.c, src/gui_w32.c, src/gui.c

Patch 8.1.0122
问题:       Translators don't always understand the maintainer message.
解决方案:   Add a comment that ends up in the generated po file. (Christian
            Brabandt, closes #3037)
文件:       src/message.c

Patch 8.1.0123
问题:       MS-Windows: colors are wrong after setting 'notgc'.
解决方案:   Only call control_console_color_rgb() for the win32 terminal.
            (Nobuhiro Takasaki, closes #3107)
文件:       src/option.c

Patch 8.1.0124
问题:       has('vcon') returns true even for non-win32 terminal.
解决方案:   Check the terminal type. (Nobuhiro Takasaki, closes #3106)
文件:       src/evalfunc.c

Patch 8.1.0125
问题:       Virtual edit replace with multi-byte fails at end of line. (Lukas
            Werling)
解决方案:   use ins_char() to add the character. (Christian Brabandt,
            closes #3114)  Rename PCHAR() to PBYTE() to avoid mistakes like
            this.
文件:       src/ops.c, src/testdir/test_virtualedit.vim, src/macros.h

Patch 8.1.0126
问题:       Various problems with 'vartabstop'.
解决方案:   Fix memory leak.  Fix crash. Add a few more tests. (Christian
            Brabandt, closes #3076)
文件:       src/ex_cmds.c, src/option.c, src/screen.c,
            src/testdir/test_vartabs.vim

Patch 8.1.0127
问题:       Build failure when disabling the session feature. (Pawel Slowik)
解决方案:   Adjust #ifdef for vim_chdirfile().
文件:       src/misc2.c

Patch 8.1.0128
问题:       Building with MinGW does not work out-of-the-box.
解决方案:   Add instructions for MSYS2.  Set default WINVER.  Add batch files
            to set $PATH for MSYS2.
文件:       src/Make_cyg_ming.mak, src/INSTALLpc.txt, src/msys32.bat,
            src/msys64.bat, Filelist

Patch 8.1.0129
问题:       Still some xterm-like terminals get a stray "p" on startup.
解决方案:   Consider all terminals that reply with a version smaller than 95
            as not an xterm. (James McCoy)
文件:       src/term.c

Patch 8.1.0130
问题:       ":profdel func" does not work if func was called already.
            (Dominique Pelle)
解决方案:   Reset uf_profiling and add a flag to indicate initialization was
            done.
文件:       src/structs.h, src/userfunc.c

Patch 8.1.0131
问题:       :profdel is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3123)
文件:       src/testdir/test_profile.vim

Patch 8.1.0132
问题:       Lua tests are old style.
解决方案:   Convert to new style tests.  Improve coverage. (Dominique Pelle,
            closes #3091)
文件:       src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_vms.mms,
            src/testdir/test85.in, src/testdir/test_lua.vim

Patch 8.1.0133
问题:       tagfiles() can have duplicate entries.
解决方案:   Simplify the filename to make checking for duplicates work better.
            Add a test. (Dominique Pelle, closes #2979)
文件:       src/tag.c, src/testdir/test_taglist.vim

Patch 8.1.0134
问题:       Lua interface does not support funcref.
解决方案:   Add funcref support. (Luis Carvalho)
文件:       src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.0135
问题:       Undo message delays screen update for CTRL-O u.
解决方案:   Add smsg_attr_keep(). (closes #3125)
文件:       src/message.c, src/proto.h, src/undo.c

Patch 8.1.0136
问题:       Lua tests don't cover new features.
解决方案:   Add more tests. (Dominique Pelle, closes #3130)
文件:       runtime/doc/if_lua.txt, src/testdir/test_lua.vim

Patch 8.1.0137
问题:       CI does not run with TCL.
解决方案:   Add TCL to the travis config. (Dominique Pelle, closes #3133)
文件:       .travis.yml

Patch 8.1.0138
问题:       Negative value of 'softtabstop' not used correctly.
解决方案:   Use get_sts_value(). (Tom Ryder)
文件:       src/edit.c, src/option.c, src/Makefile, src/testdir/test_tab.vim

Patch 8.1.0139
问题:       Lua tests fail on some platforms.
解决方案:   Accept a hex number with and without "0x". (Ken Takata,
            closes #3137)
文件:       src/testdir/test_lua.vim

Patch 8.1.0140
问题:       Recording into a register has focus events. (Michael Naumann)
解决方案:   Don't record K_FOCUSGAINED and K_FOCUSLOST. (closes #3143)
文件:       src/getchar.c

Patch 8.1.0141
问题:       :cexpr no longer jumps to the first error.
解决方案:   Use the quickfix list identifier. (Yegappan Lakshmanan,
            closes #3092)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0142
问题:       Xterm and vt320 builtin termcap missing keypad keys.
解决方案:   Add the escape sequences. (Kouichi Iwamoto, closes #2973)
文件:       src/term.c

Patch 8.1.0143
问题:       Matchit and matchparen don't handle E363.
解决方案:   Catch the E363 error. (Christian Brabandt)
文件:       runtime/pack/dist/opt/matchit/plugin/matchit.vim,
            runtime/plugin/matchparen.vim

Patch 8.1.0144
问题:       The :cd command does not have good test coverage.
解决方案:   Add more tests. (Dominique Pelle, closes #2972)
文件:       src/testdir/test_cd.vim

Patch 8.1.0145
问题:       Test with grep is failing on MS-Windows.
解决方案:   Skip the test.
文件:       src/testdir/test_quickfix.vim

Patch 8.1.0146
问题:       When $LANG is set the compiler test may fail.
解决方案:   Unset $LANG.
文件:       src/testdir/test_compiler.vim

Patch 8.1.0147
问题:       Compiler warning when building with Python 3.7.
解决方案:   #undef PySlice_GetIndicesEx before redefining it. (Ozaki Kiichi,
            closes #3153)
文件:       src/if_python3.c

Patch 8.1.0148
问题:       Memory leak when using :tcl expr command.
解决方案:   Free the result of expression evaluation. (Dominique Pelle,
            closes #3150)
文件:       src/if_tcl.c

Patch 8.1.0149
问题:       The generated sessions file does not restore tabs properly if :lcd
            was used in one of them.
解决方案:   Create the tab pages before setting the directory. (Yee Cheng
            Chin, closes #3152)
文件:       src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0150
问题:       Insufficient test coverage for Tcl.
解决方案:   Add more tests. (Dominique Pelle, closes #3140)
文件:       src/testdir/test_tcl.vim

Patch 8.1.0151
问题:       Mksession test fails on MS-Windows.
解决方案:   Always use an argument for :lcd.
文件:       src/testdir/test_mksession.vim

Patch 8.1.0152
问题:       Cannot easily run individual tests on MS-Windows.
解决方案:   Move the list of tests to a separate file.  Add a build rule in
            the MSVC makefile.
文件:       Filelist, src/Makefile, src/Make_all.mak, src/Make_mvc.mak

Patch 8.1.0153 (after 8.1.0152)
问题:       Build with SHADOWDIR fails. (Elimar Riesebieter)
解决方案:   Create a link for Make_all.mak. (Tony Mechelynck)
文件:       src/Makefile

Patch 8.1.0154
问题:       Crash with "set smarttab shiftwidth=0 softtabstop=-1".
解决方案:   Fall back to using 'tabstop'. (closes #3155)
文件:       src/edit.c, src/testdir/test_tab.vim

Patch 8.1.0155
问题:       Evim.man missing from the distribution.
解决方案:   Add it to the list.
文件:       Filelist

Patch 8.1.0156
问题:       MS-Windows compiler warning.
解决方案:   Add a type cast. (Mike Williams)
文件:       src/version.c

Patch 8.1.0157
问题:       Old iTerm2 is not recognized, resulting in stray output.
解决方案:   Recognize the termresponse.
文件:       src/term.c

Patch 8.1.0158
问题:       GUI: input() fails if CTRL-C was pressed before. (Michael Naumann)
解决方案:   call vpeekc() to drop the CTRL-C from the input stream.
文件:       src/ex_docmd.c

Patch 8.1.0159
问题:       Completion for user names does not work if a prefix is also a full
            matching name. (Nazri Ramliy)
解决方案:   Accept both full and partial matches. (Dominique Pelle)
文件:       src/misc1.c, src/ex_docmd.c

Patch 8.1.0160
问题:       No Danish manual translations.
解决方案:   Add the Danish manual translations to the file list.
文件:       Filelist

Patch 8.1.0161
问题:       Buffer not updated with 'autoread' set if file was deleted.
            (Michael Naumann)
解决方案:   Don't set the timestamp to zero. (closes #3165)
文件:       src/fileio.c, src/testdir/test_stat.vim

Patch 8.1.0162
问题:       Danish and German man pages are not installed. (Tony Mechelynck)
解决方案:   Adjust the makefile
文件:       src/Makefile

Patch 8.1.0163
问题:       Insufficient testing for Tcl.
解决方案:   Add a few more tests. (Dominique Pelle, closes #3166)
文件:       src/testdir/test_tcl.vim

Patch 8.1.0164
问题:       luaeval('vim.buffer().name') returns an error.
解决方案:   Return an empty string. (Dominique Pelle, closes #3167)
文件:       src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.0165
问题:       :clist output can be very long.
解决方案:   Support filtering :clist entries. (Yegappan Lakshmanan)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0166
问题:       Using dict_add_nr_str() is clumsy.
解决方案:   Split into two functions. (Ozaki Kiichi, closes #3154)
文件:       src/channel.c, src/dict.c, src/edit.c, src/evalfunc.c,
            src/ex_cmds2.c, src/ops.c, src/option.c, src/proto/dict.pro,
            src/quickfix.c, src/tag.c, src/terminal.c, src/undo.c

Patch 8.1.0167
问题:       Lock flag in new dictitem is reset in many places.
解决方案:   Always reset the lock flag.
文件:       src/dict.c, src/channel.c, src/ex_cmds2.c, src/userfunc.c,
            src/if_perl.xs, src/if_py_both.h

Patch 8.1.0168
问题:       Output of :marks is too short with multi-byte chars. (Tony
            Mechelynck)
解决方案:   Get more bytes from the text line.
文件:       src/mark.c, src/testdir/test_marks.vim

Patch 8.1.0169 (after 8.1.0165)
问题:       Calling message_filtered() a bit too often.
解决方案:   Only call message_filtered() when filtering is already false.
文件:       src/quickfix.c, runtime/doc/quickfix.txt

Patch 8.1.0170
问题:       Invalid memory use with complicated pattern. (Andy Massimino)
解决方案:   Reallocate the list of listids when needed. (closes #3175)
            Remove unnecessary function prototypes.
文件:       src/regexp_nfa.c

Patch 8.1.0171
问题:       Typing CTRL-W n in a terminal window causes ml_get error.
解决方案:   When resizing the terminal outside of terminal_loop() make sure
            the snapshot is complete.
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0172
问题:       'viminfofile' option does not behave like a file name.
解决方案:   Add the P_EXPAND flag. (closes #3178)
文件:       src/option.c

Patch 8.1.0173
问题:       Compiler warning on MS-Windows.
解决方案:   Add type cast. (Mike Williams)
文件:       src/libvterm/src/state.c

Patch 8.1.0174
问题:       After paging up and down fold line is wrong.
解决方案:   Correct the computation of w_topline and w_botline. (Hirohito
            Higashi)
文件:       src/move.c, src/testdir/test_fold.vim

Patch 8.1.0175
问题:       Marks test fails in very wide window. (Vladimir Lomov)
解决方案:   Extend the text to match 'columns'. (closes #3180, closes #3181)
文件:       src/testdir/test_marks.vim

Patch 8.1.0176
问题:       Overlapping string argument for strcpy(). (Coverity)
解决方案:   Use STRMOVE() instead of STRCPY(). (Dominique Pelle, closes #3187)
文件:       src/term.c

Patch 8.1.0177
问题:       Defining function in sandbox is inconsistent, cannot use :function
            but can define a lambda.
解决方案:   Allow defining a function in the sandbox, but also use the sandbox
            when executing it. (closes #3182)
文件:       src/userfunc.c, src/ex_cmds.h

Patch 8.1.0178
问题:       Warning for passing pointer to non-pointer argument.
解决方案:   Use zero instead of NULL.
文件:       src/if_ole.cpp

Patch 8.1.0179
问题:       Redundant condition for boundary check.
解决方案:   Remove the condition. (Dominique Pelle). Change FALSE to FAIL.
文件:       src/undo.c

Patch 8.1.0180
问题:       Static analysis errors in Lua interface. (Coverity)
解决方案:   Check for NULL pointers.
文件:       src/if_lua.c

Patch 8.1.0181
问题:       Memory leak with trailing characters in skip expression.
解决方案:   Free the return value.
文件:       src/eval.c, src/testdir/test_search.vim

Patch 8.1.0182
问题:       Unicode standard was updated.
解决方案:   Include the changes. (Christian Brabandt)
文件:       src/mbyte.c

Patch 8.1.0183
问题:       Lua API changed, breaking the build.
解决方案:   Adjust prototype of lua_rawgeti(). (Ken Takata,
            closes #3157, closes #3144)
文件:       src/if_lua.c

Patch 8.1.0184
问题:       Not easy to figure out the window layout.
解决方案:   Add "wincol" and "winrow" to what getwininfo() returns.
文件:       src/evalfunc.c, src/testdir/test_bufwintabinfo.vim,
            runtime/doc/eval.txt

Patch 8.1.0185
问题:       Running tests writes lua.vim even though it is not used.
解决方案:   Stop writing lua.vim.
文件:       src/testdir/test1.in, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak, src/testdir/Make_vms.mms,
            src/testdir/Makefile

Patch 8.1.0186
问题:       Test for getwininfo() fails in GUI.
解决方案:   Account for missing tabline.
文件:       src/testdir/test_bufwintabinfo.vim

Patch 8.1.0187 (after 8.1.0184)
问题:       getwininfo() and win_screenpos() return different numbers.
解决方案:   Add one to "wincol" and "winrow" from getwininfo().
文件:       src/evalfunc.c, src/testdir/test_bufwintabinfo.vim,
            runtime/doc/eval.txt

Patch 8.1.0188
问题:       No test for ":cscope add".
解决方案:   Add a test. (Dominique Pelle, closes #3212)
文件:       src/testdir/test_cscope.vim

Patch 8.1.0189
问题:       Function defined in sandbox not tested.
解决方案:   Add a text.
文件:       src/testdir/test_functions.vim

Patch 8.1.0190
问题:       Perl refcounts are wrong.
解决方案:   Improve refcounting.  Add a test. (Damien)
文件:       src/if_perl.xs, src/testdir/test_perl.vim

Patch 8.1.0191 (after 8.1.0190)
问题:       Perl test fails in 24 line terminal.
解决方案:   Create fewer windows.
文件:       src/testdir/test_perl.vim

Patch 8.1.0192
问题:       Executing regexp recursively fails with a crash.
解决方案:   Move global variables into "rex".
文件:       src/regexp.c, src/regexp.h, src/regexp_nfa.c

Patch 8.1.0193
问题:       Terminal debugger buttons don't always work. (Dominique Pelle)
解决方案:   Set 'cpo' to its default value.
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0194
问题:       Possibly use of NULL pointer. (Coverity)
解决方案:   Reset the re_in_use flag earlier.
文件:       src/regexp.c

Patch 8.1.0195
问题:       Terminal debugger commands don't always work. (Dominique Pelle)
解决方案:   Set 'cpo' to its default value when defining commands. (Christian
            Brabandt)
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0196
问题:       Terminal debugger error with .gdbinit file.
解决方案:   Check two lines for the "new ui" response. (hint from Hirohito
            Higashi)
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0197
问题:       Windows GUI: title for search/replace is wrong.
解决方案:   Remove remark about doubling backslash. (closes #3230)
文件:       src/gui_win32.c

Patch 8.1.0198
问题:       There is no hint that syntax is disabled for 'redrawtime'.
解决方案:   Add a message.
文件:       src/syntax.c

Patch 8.1.0199
问题:       spellbadword() does not check for caps error. (Dominique Pelle)
解决方案:   Adjust capcol when advancing.
文件:       src/userfunc.c

Patch 8.1.0200
问题:       spellbadword() not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3235)
文件:       src/testdir/test_spell.vim

Patch 8.1.0201
问题:       Newer Python uses "importlib" instead of "imp".
解决方案:   Use "importlib" for newer Python versions. (Ozaki Kiichi,
            closes #3163)
文件:       src/if_py_both.h, src/testdir/test87.in

Patch 8.1.0202
问题:       :version always shows +packages. (Takuya Fujiwara)
解决方案:   Add #ifdef (closes #3198) Also for has().
文件:       src/version.c, src/evalfunc.c

Patch 8.1.0203
问题:       Building with Perl 5.28 fails on Windows.
解决方案:   Define Perl_mg_get. (closes #3196)
文件:       src/if_perl.xs

Patch 8.1.0204
问题:       inputlist() is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3240)
文件:       src/testdir/test_functions.vim

Patch 8.1.0205
问题:       Invalid memory access with invalid modeline.
解决方案:   Pass pointer limit. Add a test. (closes #3241)
文件:       src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_modeline.vim, src/option.c

Patch 8.1.0206 (after 8.1.0205)
问题:       Duplicate test function name.
解决方案:   Rename both functions.
文件:       src/testdir/test_modeline.vim, src/testdir/test_glob2regpat.vim

Patch 8.1.0207
问题:       Need many menu translation files to cover regions.
解决方案:   When there is no region match, try without. (Christian Brabandt)
文件:       runtime/menu.vim

Patch 8.1.0208 (after 8.1.0205)
问题:       File left behind after running individual test.
解决方案:   Delete the file.
文件:       src/testdir/test_modeline.vim

Patch 8.1.0209
问题:       Stderr output from Ruby messes up display.
解决方案:   Turn the stderr output into a Vim message. (Masataka Pocke
            Kuwabara, closes #3238)
文件:       src/if_ruby.c

Patch 8.1.0210
问题:       Still a few K&R function declarations.
解决方案:   Use ANSI function declarations (Hirohito Higashi)
文件:       src/eval.c, src/evalfunc.c, src/list.c

Patch 8.1.0211
问题:       Expanding a file name "~" results in $HOME. (Aidan Shafran)
解决方案:   Change "~" to "./~" before expanding. (closes #3072)
文件:       src/testdir/test_expand.vim, src/ex_docmd.c, src/eval.c,
            src/proto/eval.pro, src/evalfunc.c, src/if_cscope.c, src/misc1.c

Patch 8.1.0212
问题:       Preferred cursor column not set in interfaces.
解决方案:   Set w_set_curswant when setting the cursor. (David Hotham,
            closes #3060)
文件:       src/if_lua.c, src/if_mzsch.c, src/if_perl.xs, src/if_py_both.h,
            src/if_ruby.c, src/if_tcl.c, src/testdir/test_lua.vim,
            src/testdir/test_perl.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_ruby.vim,
            src/testdir/test_tcl.vim

Patch 8.1.0213
问题:       CTRL-W CR does not work properly in a quickfix window.
解决方案:   Split the window if needed. (Jason Franklin)
文件:       src/normal.c, src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/window.c

Patch 8.1.0214
问题:       +autochdir feature not reported by has() or :version.
解决方案:   Add the feature in the list.
文件:       src/evalfunc.c, src/version.c

Patch 8.1.0215
问题:       No error if configure --with-x cannot configure X.
解决方案:   Check that when --with-x is used X can be configured.
文件:       src/configure.ac, src/auto/configure

Patch 8.1.0216
问题:       Part of file not indented properly.
解决方案:   Adjust the indent. (Ken Takata)
文件:       src/getchar.c

Patch 8.1.0217
问题:       Compiler warning for variable set but not used.
解决方案:   Move tilde_file inside #ifdef. (Hirohito Higashi, closes #3255)
文件:       src/ex_docmd.c

Patch 8.1.0218
问题:       Cannot add matches to another window. (Qiming Zhao)
解决方案:   Add the "window" argument to matchadd() and matchaddpos().
            (closes #3260)
文件:       src/evalfunc.c, runtime/doc/eval.txt, src/testdir/test_match.vim

Patch 8.1.0219
问题:       Expanding ## fails to escape backtick.
解决方案:   Escape a backtick in a file name. (closes #3257)
文件:       src/ex_docmd.c, src/testdir/test_edit.vim

Patch 8.1.0220
问题:       Ruby converts v:true and v:false to a number.
解决方案:   Use Qtrue and Qfalse instead. (Masataka Pocke Kuwabara,
            closes #3259)
文件:       src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.1.0221
问题:       Not enough testing for the Ruby interface.
解决方案:   Add more tests. (Dominique Pelle, closes #3252)
文件:       runtime/doc/if_ruby.txt, src/testdir/test_ruby.vim

Patch 8.1.0222
问题:       Errors are reported for "make install".
解决方案:   Skip missing language files. (Christian Brabandt, closes #3254)
文件:       src/installman.sh

Patch 8.1.0223
问题:       Completing shell command finds sub-directories in $PATH.
解决方案:   Remove EW_DIR when completing an item in $PATH. (Jason Franklin)
文件:       src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.0224
问题:       Hang in bracketed paste mode when t_PE not encountered.
解决方案:   Break out of the loop when got_int is set. (suggested by Christian
            Brabandt, closes #3146)
文件:       src/edit.c

Patch 8.1.0225
问题:       Mode() does not indicate using CTRL-O from Insert mode.
解决方案:   Add "niI", "niR" and "niV" to mode() result. (closes #3000)
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.1.0226
问题:       Too many #ifdefs.
解决方案:   Graduate the +vreplace feature, it's not much code and quite a few
            #ifdefs.
文件:       runtime/doc/change.txt, runtime/doc/various.txt, src/edit.c,
            src/evalfunc.c, src/gui.c, src/misc1.c, src/misc2.c, src/normal.c,
            src/ops.c, src/screen.c, src/version.c, src/feature.h,
            src/globals.h, src/macros.h, src/vim.h

Patch 8.1.0227
问题:       Spaces instead of tabs in makefile.
解决方案:   Use tabs and fix sorting. (Ken Takata)
文件:       src/po/Make_all.mak

Patch 8.1.0228
问题:       Dropping files is ignored while Vim is busy.
解决方案:   Postpone the effect of dropping files until it's safe.
文件:       src/ex_docmd.c, src/proto/ex_docmd.pro, src/gui.c, src/gui.h,
            src/screen.c, src/main.c, src/gui_mac.c

Patch 8.1.0229
问题:       Crash when dumping profiling data.
解决方案:   Reset flag indicating that initialization was done.
文件:       src/userfunc.c

Patch 8.1.0230
问题:       Directly checking 'buftype' value.
解决方案:   Add the bt_normal() function. (Yegappan Lakshmanan)
文件:       src/buffer.c, src/ex_docmd.c, src/fileio.c, src/proto/buffer.pro,
            src/quickfix.c

Patch 8.1.0231
问题:       :help -? goes to help for -+.
解决方案:   Add -? to list of special cases. (Hirohito Higashi)
文件:       src/ex_cmds.c, src/testdir/test_help_tagjump.vim

Patch 8.1.0232
问题:       Ruby error does not include backtrace.
解决方案:   Add an error backtrace. (Masataka Pocke Kuwabara, closes #3267)
文件:       src/if_ruby.c

Patch 8.1.0233
问题:       "safe" argument of call_vim_function() is always FALSE.
解决方案:   Remove the argument.
文件:       src/eval.c, src/proto/eval.pro, src/edit.c, src/mbyte.c,
            src/normal.c, src/ex_getln.c

Patch 8.1.0234
问题:       Incorrect reference counting in Perl interface.
解决方案:   Call SvREFCNT_inc more often, add a test. (Damien)
文件:       src/if_perl.xs, src/testdir/test_perl.vim

Patch 8.1.0235 (after 8.1.0231)
问题:       More help tags that jump to the wrong location.
解决方案:   Add more exceptions and a table for "expr-" tags. (Hirohito
            Higashi)
文件:       src/ex_cmds.c, src/testdir/test_help_tagjump.vim

Patch 8.1.0236 (after 8.1.0232)
问题:       Ruby build fails when ruby_intern is missing.
解决方案:   Do not use ruby_intern2. (Ken Takata)
文件:       src/if_ruby.c

Patch 8.1.0237
问题:       Ruby on Cygwin doesn't always work.
解决方案:   Use LIBRUBY_SO if LIBRUBY_ALIASES isn't set. (Ken Takata)
文件:       src/configure.ac, src/auto/configure

Patch 8.1.0238
问题:       'buftype' is cleared when using ":term ++hidden cat". (Marcin
            Szamotulski)
解决方案:   Set the "options initialized" flag earlier. (closes #3278)
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0239 (after 8.1.0236)
问题:       Now Ruby build fails on other systems.
解决方案:   Always define rb_intern. (Ken Takata, closes #3275)
文件:       src/if_ruby.c

Patch 8.1.0240
问题:       g:actual_curbuf set in wrong scope. (Daniel Hahler)
解决方案:   Prepend the "g:" name space. (closes #3279)
文件:       src/buffer.c

Patch 8.1.0241
问题:       Effect of ":tabmove N" is not clear.
解决方案:   Add a test that shows the behavior. (Christian Brabandt,
            closes #3288)
文件:       src/testdir/test_tabpage.vim

Patch 8.1.0242
问题:       Insert mode completion may use an invalid buffer pointer. (Akib
            Nizam)
解决方案:   Check for ins_buf to be valid. (closes #3290)
文件:       src/edit.c

Patch 8.1.0243
问题:       Using :term ++close ++hidden closes a window. (Marcin Szamotulski)
解决方案:   Don't close the window if only using it temporarily for unloading
            the terminal buffer. (closes #3287)
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0244
问题:       No redraw when using a STOP signal on Vim and then a CONT signal.
解决方案:   Catch the CONT signal and force a redraw. (closes #3285)
文件:       src/os_unix.c, src/term.c, src/proto/term.pro

Patch 8.1.0245
问题:       Calling setline() in TextChangedI autocmd breaks undo. (Jason
            Felice)
解决方案:   Don't save lines for undo when already saved. (closes #3291)
文件:       src/edit.c, src/testdir/test_autocmd.vim

Patch 8.1.0246 (after 8.1.0245)
问题:       Build failure without the +eval feature.
解决方案:   Add #ifdef
文件:       src/edit.c

Patch 8.1.0247
问题:       Python: error message for failing import is incorrect.
解决方案:   Adjust how modules are loaded. (Ozaki Kiichi, closes #3162)
文件:       src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok

Patch 8.1.0248
问题:       duplicated quickfix code.
解决方案:   Move the code to a function.
文件:       src/quickfix.c

Patch 8.1.0249
问题:       GTK: when screen DPI changes Vim does not handle it.
解决方案:   Handle the gtk-xft-dpi signal. (Roel van de Kraats,
            closes #2357)
文件:       src/gui_gtk_x11.c

Patch 8.1.0250
问题:       MS-Windows using VTP: windows size change incorrect.
解决方案:   Call SetConsoleScreenBufferSize() first. (Nobuhiro Takasaki,
            closes #3164)
文件:       src/os_win32.c

Patch 8.1.0251
问题:       Using a full path is supported for 'directory' but not for
            'backupdir'. (Mikolaj Machowski)
解决方案:   Support 'backupdir' as well. (Christian Brabandt, closes #179)
文件:       runtime/doc/options.txt, src/fileio.c, src/memline.c,
            src/proto/memline.pro, src/testdir/test_alot.vim,
            src/testdir/test_backup.vim, src/Make_all.mak

Patch 8.1.0252
问题:       Quickfix functions are too long.
解决方案:   Refactor. (Yegappan Lakshmanan, closes #2950)
文件:       src/quickfix.c

Patch 8.1.0253
问题:       Saving and restoring window title does not always work.
解决方案:   Use the stack push and pop commands. (Kouichi Iwamoto,
            closes #3059)
文件:       runtime/doc/term.txt, src/main.c, src/option.c, src/os_unix.c,
            src/proto/term.pro, src/term.c, src/term.h, src/vim.h,
            src/buffer.c, src/ex_docmd.c, src/option.c, src/os_amiga.c,
            src/os_mswin.c, src/os_win32.c

Patch 8.1.0254 (after 8.1.0253)
问题:       Cannot build on MS-Windows; Unused macro HAVE_HANDLE_DROP.
解决方案:   Adjust #ifdef. Delete the macro.
文件:       src/main.c, src/vim.h

Patch 8.1.0255 (after 8.1.0251)
问题:       Backup test fails when using shadow directory.
解决方案:   Remove check for "src".
文件:       src/testdir/test_backup.vim

Patch 8.1.0256 (after 8.1.0245)
问题:       Using setline() in TextChangedI splits undo.
解决方案:   Use another solution for undo not working properly.
文件:       src/edit.c, src/testdir/test_autocmd.vim

Patch 8.1.0257
问题:       No test for pathshorten().
解决方案:   Add a test. (Dominique Pelle, closes #3295)
文件:       src/testdir/test_functions.vim

Patch 8.1.0258
问题:       Not enough testing for the CompleteDone event.
解决方案:   Add a test. (closes #3297)
文件:       src/testdir/test_ins_complete.vim

Patch 8.1.0259
问题:       No test for fixed quickfix issue.
解决方案:   Add a test.  Clean up the code a bit. (Yegappan Lakshmanan)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0260
问题:       No LGTM logo in README file.
解决方案:   Add one. (Bas van Schaik, closes #3305)
文件:        README.md

Patch 8.1.0261
问题:       Coverity complains about a negative array index.
解决方案:   When qf_id2nr() cannot find the list then don't set qf_curlist.
文件:       src/quickfix.c

Patch 8.1.0262
问题:       Not enough testing for getftype().
解决方案:   Add a test. (Dominique Pelle, closes #3300)
文件:       src/evalfunc.c, src/testdir/test_stat.vim

Patch 8.1.0263
问题:       Channel log doesn't show part of channel.
解决方案:   Add "sock", "out", "err" or "in". (Ozaki Kiichi, closes #3303)
文件:       src/channel.c

Patch 8.1.0264
问题:       Backup tests fail when CWD is in /tmp.
解决方案:   Make 'backupskip' empty. (Christian Brabandt, closes #3301)
文件:       src/testdir/test_backup.vim

Patch 8.1.0265
问题:       The getcmdline() function is way too big.
解决方案:   Factor out the incremental search highlighting.
文件:       src/ex_getln.c

Patch 8.1.0266
问题:       Parsing Ex address range is not a separate function.
解决方案:   Refactor do_one_cmd() to separate address parsing.
文件:       src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.0267
问题:       No good check if restoring quickfix list worked.
解决方案:   Let qf_restore_list() return OK/FAIL. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0268
问题:       File type checking has too many #ifdef.
解决方案:   Always define the S_IF macros. (Ken Takata, closes #3306)
文件:       src/buffer.c, src/evalfunc.c, src/fileio.c, src/if_cscope.c,
            src/os_unix.c, src/os_unix.h, src/vim.h

Patch 8.1.0269
问题:       Ruby Kernel.#p method always returns nil.
解决方案:   Copy p method implementation from Ruby code. (Masataka Pocke
            Kuwabara, closes #3315)
文件:       src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.1.0270
问题:       Checking for a Tab in a line could be faster.
解决方案:   Use strchr() instead of strrchr(). (closes #3312)
文件:       src/ex_cmds.c

Patch 8.1.0271
问题:       'incsearch' doesn't work for :s, :g or :v.
解决方案:   Also use 'incsearch' for other commands that use a pattern.
文件:       src/ex_getln.c, src/globals.h, src/screen.c,
            src/testdir/test_search.vim

Patch 8.1.0272
问题:       Options test fails if temp var ends in slash. (Tom Briden)
解决方案:   Check for optional slash. (closes #3308)
文件:       src/testdir/test_options.vim

Patch 8.1.0273
问题:       Invalid memory access when using 'incsearch'.
解决方案:   Reset "patlen" when using previous search pattern.
文件:       src/ex_getln.c

Patch 8.1.0274
问题:       'incsearch' triggers on ":source".
解决方案:   Check for the whole command name.
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0275
问题:       'incsearch' with :s doesn't start at cursor line.
解决方案:   Set cursor before parsing address. (closes #3318)
            Also accept a match at the start of the first line.
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0276
问题:       No test for 'incsearch' highlighting with :s.
解决方案:   Add a screendump test.
文件:       src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_01.dump

Patch 8.1.0277
问题:       'incsearch' highlighting wrong in a few cases.
解决方案:   Fix using last search pattern.  Restore highlighting when changing
            command. (issue #3321)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_02.dump,
            src/testdir/dumps/Test_incsearch_substitute_03.dump

Patch 8.1.0278
问题:       'incsearch' highlighting does not accept reverse range.
解决方案:   Swap the range when needed. (issue #3321)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_04.dump

Patch 8.1.0279
问题:       'incsearch' highlighting does not skip white space.
解决方案:   Skip white space after the command. (issue #3321)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_05.dump

Patch 8.1.0280
问题:       'incsearch' highlighting does not work for ":g!/".
解决方案:   Skip the exclamation mark. (Hirohito Higashi)
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0281
问题:       Parsing command modifiers is not separated.
解决方案:   Move command modifier parsing to a separate function.
文件:       src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_cmds.h,
            src/globals.h, src/feature.h

Patch 8.1.0282
问题:       'incsearch' does not work with command modifiers.
解决方案:   Skip command modifiers.
文件:       src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 8.1.0283 (after 8.1.0282)
问题:       Missing test dump.
解决方案:   Add the dump file
文件:       src/testdir/dumps/Test_incsearch_substitute_06.dump

Patch 8.1.0284
问题:       'cursorline' highlighting wrong with 'incsearch'.
解决方案:   Move the cursor back if the match is outside the range.
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_07.dump
            src/testdir/dumps/Test_incsearch_substitute_08.dump

Patch 8.1.0285
问题:       Compiler warning for conversion.
解决方案:   Add a type cast. (Mike Williams)
文件:       src/ex_getln.c

Patch 8.1.0286
问题:       'incsearch' does not apply to :smagic and :snomagic.
解决方案:   Add support. (Hirohito Higashi)
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0287
问题:       MAX is not defined everywhere.
解决方案:   Define MAX where needed.
文件:       src/ex_getln.c

Patch 8.1.0288
问题:       Quickfix code uses cmdidx too often.
解决方案:   Add is_loclist_cmd(). (Yegappan Lakshmanan)
文件:       src/ex_docmd.c, src/proto/ex_docmd.pro, src/quickfix.c

Patch 8.1.0289
问题:       Cursor moves to wrong column after quickfix jump.
解决方案:   Set the curswant flag. (Andy Massimino, closes #3331)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0290
问题:       "cit" on an empty HTML tag changes the whole tag.
解决方案:   Only adjust the area in Visual mode. (Andy Massimino,
            closes #3332)
文件:       src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.0291
问题:       'incsearch' highlighting not used for :sort.
解决方案:   Handle pattern in :sort command.
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_sort_01.dump

Patch 8.1.0292
问题:       MS-Windows: the text "self-installing" confuses some users.
解决方案:   Remove the text from the uninstall entry. (closes #3337)
文件:       src/dosinst.c

Patch 8.1.0293
问题:       Checks for type of stack is cryptic.
解决方案:   Define IS_QF_STACK() and IS_LL_STACK(). (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0294
问题:       MS-Windows: sometimes uses short directory name.
解决方案:   Expand to long file name with correct caps. (Nobuhiro Takasaki,
            closes #3334)
文件:       src/os_win32.c

Patch 8.1.0295
问题:       No 'incsearch' highlighting for :vimgrep and similar commands.
解决方案:   Parse the :vimgrep command and similar ones to locate the search
            pattern. (Hirohito Higashi, closes #3344)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_vimgrep_01.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_02.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_03.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_04.dump,
            src/testdir/dumps/Test_incsearch_vimgrep_05.dump

Patch 8.1.0296
问题:       Command parsing for 'incsearch' is a bit ugly.
解决方案:   Return when there is no pattern.  Put common checks together.
文件:       src/ex_getln.c

Patch 8.1.0297 (after 8.1.0294)
问题:       MS-Windows: tests fail, Vim crashes.
解决方案:   Fix long file name handling.
文件:       src/os_win32.c

Patch 8.1.0298
问题:       Window resize test sometimes fails on Mac.
解决方案:   Add Test_popup_and_window_resize() to flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0299 (after 8.1.0298)
问题:       misplaced comment
解决方案:   Remove comment
文件:       src/testdir/runtest.vim

Patch 8.1.0300
问题:       The old window title might be freed twice. (Dominique Pelle)
解决方案:   Do not free "oldtitle" in a signal handler but set a flag to have
            it freed later.
文件:       src/os_unix.c

Patch 8.1.0301
问题:       GTK: Input method popup displayed on wrong screen.
解决方案:   Add the screen position offset. (Ken Takata, closes #3268)
文件:       src/gui_beval.c, src/gui_gtk_x11.c, src/mbyte.c,
            src/proto/gui_gtk_x11.pro

Patch 8.1.0302
问题:       Crash when using :suspend and "fg".
解决方案:   Undo patch 8.1.0244.
文件:       src/os_unix.c, src/term.c, src/proto/term.pro

Patch 8.1.0303
问题:       line2byte() is wrong for last line with 'noeol' and 'nofixeol'.
解决方案:   Fix off-by-one error. (Shane Harper, closes #3351)
文件:       src/memline.c, src/testdir/test_functions.vim

Patch 8.1.0304
问题:       No redraw when using a STOP signal on Vim and then a CONT signal.
解决方案:   Catch the CONT signal and set the terminal to raw mode.  This is
            like 8.1.0244 but without the screen redraw and a fix for
            multi-threading suggested by Dominique Pelle.
文件:       src/os_unix.c, src/term.c, src/proto/term.pro

Patch 8.1.0305
问题:       Missing support for Lua 5.4 32 bits on Unix.
解决方案:   Define lua_newuserdatauv. (Kazunobu Kuriyama)
文件:       src/if_lua.c

Patch 8.1.0306
问题:       Plural messages are not translated properly.
解决方案:   Add more usage of NGETTEXT(). (Sergey Alyoshin)
文件:       src/vim.h, src/buffer.c, src/ex_cmds.c, src/ex_docmd.c,
            src/fileio.c, src/misc1.c, src/ops.c

Patch 8.1.0307
问题:       There is no good way to get the window layout.
解决方案:   Add the winlayout() function. (Yegappan Lakshmanan)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/proto/window.pro,
            src/window.c, src/testdir/test_window_id.vim

Patch 8.1.0308
问题:       A quick undo shows "1 seconds ago". (Tony Mechelynck)
解决方案:   Add singular/plural message.
文件:       src/undo.c

Patch 8.1.0309
问题:       Profiling does not show a count for condition lines. (Daniel
            Hahler)
解决方案:   Count lines when not skipping. (Ozaki Kiichi, closes #2499)
文件:       src/ex_docmd.c, src/testdir/test_profile.vim

Patch 8.1.0310
问题:       File info message not always suppressed with 'F' in 'shortmess'.
            (Asheq Imran)
解决方案:   Save and restore msg_silent. (Christian Brabandt, closes #3221)
文件:       src/buffer.c, src/memline.c, src/testdir/test_options.vim

Patch 8.1.0311
问题:       Filtering entries in a quickfix list is not easy.
解决方案:   Add the cfilter plugin. (Yegappan Lakshmanan)
文件:       runtime/pack/dist/opt/cfilter/plugin/cfilter.vim,
            runtime/doc/quickfix.txt

Patch 8.1.0312
问题:       Wrong type for flags used in signal handlers.
解决方案:   Use sig_atomic_t. (Dominique Pelle, closes #3356)
文件:       src/globals.h, src/os_unix.c, src/os_win32.h

Patch 8.1.0313
问题:       Information about a swap file is unavailable.
解决方案:   Add swapinfo(). (Enzo Ferber)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/memline.c,
            src/proto/memline.pro, src/testdir/test_swap.vim

Patch 8.1.0314 (after 8.1.0313)
问题:       Build failure without the +eval feature. (Brenton Horne)
解决方案:   Add #ifdef.  Also add the "dirty" item.
文件:       src/memline.c, runtime/doc/eval.txt, src/testdir/test_swap.vim

Patch 8.1.0315
问题:       Helpgrep with language doesn't work properly. (Takuya Fujiwara)
解决方案:   Check for the language earlier. (Hirohito Higashi)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0316
问题:       swapinfo() test fails on Travis.
解决方案:   Handle a long host name. (Ozaki Kiichi, closes #3361)
            Also make the version check flexible. (James McCoy)
文件:       src/testdir/test_swap.vim

Patch 8.1.0317
问题:       Cscope test fails when using shadow directory.
解决方案:   Resolve symlink in Vim. (James McCoy, closes #3364)
文件:       src/testdir/test_cscope.vim

Patch 8.1.0318
问题:       The getftype() test may fail for char devices if the file
            disappeared in between the listing and the getftype() call.
解决方案:   Ignore empty result. (Ozaki Kiichi, closes #3360)
文件:       src/testdir/test_stat.vim

Patch 8.1.0319
问题:       bzero() function prototype doesn't work for Android.
解决方案:   Add an #ifdef. (Elliott Hughes, closes #3365)
文件:       src/osdef1.h.in

Patch 8.1.0320
问题:       Too much 'incsearch' highlight for pattern matching everything.
解决方案:   Add the skiplen to the command and remove the line range.
            (Christian Brabandt)  Check for empty pattern earlier.
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_09.dump

Patch 8.1.0321 (after 8.1.0320)
问题:       'incsearch' regression: /\v highlights everything.
解决方案:   Put back the empty_pattern() check.
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_search_01.dump,
            src/testdir/dumps/Test_incsearch_search_02.dump

Patch 8.1.0322
问题:       Test_copy_winopt() does not restore 'hidden'.
解决方案:   Restore the option, fix indent. (Ozaki Kiichi, closes #3367)
文件:       src/testdir/test_options.vim

Patch 8.1.0323
问题:       Reverse order of VTP calls only needed the first time.
解决方案:   Add a flag to remember the state. (Nobuhiro Takasaki, closes #3366)
文件:       src/os_win32.c

Patch 8.1.0324
问题:       Off-by-one error in cmdidx check. (Coverity)
解决方案:   Use ">=" instead of ">".
文件:       src/ex_docmd.c

Patch 8.1.0325
问题:       Strings in swap file may not be NUL terminated. (Coverity)
解决方案:   Limit the length of the used string.
文件:       src/memline.c

Patch 8.1.0326
问题:       Screen dump does not consider NUL and space equal.
解决方案:   Use temp variables instead of character from cell.
文件:       src/terminal.c, src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.0327
问题:       The "g CTRL-G" command isn't tested much.
解决方案:   Add more tests. (Dominique Pelle, closes #3369)
文件:       src/testdir/test_normal.vim

Patch 8.1.0328
问题:       inputlist() doesn't work with a timer. (Dominique Pelle)
解决方案:   Don't redraw when cmdline_row is zero. (Hirohito Higashi,
            closes #3239)
文件:       src/misc1.c, src/screen.c

Patch 8.1.0329
问题:       Using inputlist() during startup results in garbage. (Dominique
            Pelle)
解决方案:   Make sure the xterm tracing is stopped when disabling the mouse.
文件:       src/os_unix.c

Patch 8.1.0330
问题:       The qf_add_entries() function is too long.
解决方案:   Split in two parts. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0331
问题:       Insufficient test coverage for :mkview and :loadview.
解决方案:   Add tests. (Dominique Pelle, closes #3385)
文件:       src/testdir/test_mksession.vim

Patch 8.1.0332
问题:       Get Gdk-Critical error on first balloon show.
解决方案:   Get screen geometry using the draw area widget. (Davit Samvelyan,
            closes #3386)
文件:       src/gui_beval.c

Patch 8.1.0333
问题:       :mkview does not restore cursor properly after "$". (Dominique
            Pelle)
解决方案:   Position the cursor with "normal! $".
文件:       src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0334
问题:       'autowrite' takes effect when buffer is not to be written.
解决方案:   Don't write buffers that are not supposed to be written. (Even Q
            Jones, closes #3391)  Add tests for 'autowrite'.
文件:       src/ex_cmds2.c, src/testdir/test_writefile.vim

Patch 8.1.0335
问题:       mkview test fails on CI.
解决方案:   Attempt to force recomputing curswant after folding.
文件:       src/testdir/test_mksession.vim

Patch 8.1.0336
问题:       mkview test still fails on CI.
解决方案:   Ignore curswant, don't see another solution.
文件:       src/testdir/test_mksession.vim

Patch 8.1.0337
问题:       :file fails in quickfix command.
解决方案:   Allow :file without argument when curbuf_lock is set. (Jason
            Franklin)
文件:       src/ex_docmd.c, src/testdir/test_quickfix.vim

Patch 8.1.0338
问题:       MS-Windows: VTP doesn't work properly with PowerShell.
解决方案:   Adjust the color index. (Nobuhiro Takasaki, closes #3347)
文件:       src/os_win32.c

Patch 8.1.0339
问题:       Wrong highlight when 'incsearch' set and cancelling :s.
解决方案:   Reset search line range. (Hirohito Higashi, Masamichi Abe)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_10.dump

Patch 8.1.0340
问题:       No test for :spellinfo.
解决方案:   Add a test. (Dominique Pelle, closes #3394)
文件:       src/testdir/test_spell.vim

Patch 8.1.0341
问题:       :argadd in empty buffer changes the buffer name. (Pavol Juhas)
解决方案:   Don't re-use the current buffer when not going to edit the file.
            (closes #3397)  Do re-use the current buffer for :next.
文件:       src/ex_cmds2.c, src/testdir/test_arglist.vim,
            src/testdir/test_command_count.vim

Patch 8.1.0342
问题:       Crash when a callback deletes a window that is being used. (Ozaki
            Kiichi)
解决方案:   Do not unload a buffer that is being displayed while redrawing the
            screen. Also avoid invoking callbacks while redrawing.
            (closes #2107)
文件:       src/buffer.c, src/misc2.c

Patch 8.1.0343
问题:       'shellslash' is not used for getcwd() with local directory.
            (Daniel Hahler)
解决方案:   Call slash_adjust() later. (closes #3399)
文件:       src/evalfunc.c

Patch 8.1.0344
问题:       'hlsearch' highlighting has a gap after /$.
解决方案:   Remove suspicious code. (Ricky Zhou, closes #3400)
文件:       src/screen.c, src/testdir/test_hlsearch.vim

Patch 8.1.0345
问题:       Cannot get the window id associated with the location list.
解决方案:   Add the "filewinid" argument to getloclist(). (Yegappan
            Lakshmanan, closes #3202)
文件:       runtime/doc/eval.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0346
问题:       Building with Aap is outdated and unused.
解决方案:   Remove the Aap build files.
文件:       Filelist, src/main.aap, src/testdir/main.aap, src/config.aap.in,
            runtime/macros/maze/main.aap

Patch 8.1.0347
问题:       Some tests fail on Solaris.
解决方案:   Skip writefile test. Fix path to libc.so. Improve test for Turkish
            case change. (Libor Bukata, Bjorn Linse, closes #3403)
文件:       src/testdir/test_functions.vim, src/testdir/test_normal.vim,
            src/testdir/test_writefile.vim

Patch 8.1.0348
问题:       On Travis the slowest build is run last. (Dominique Pelle)
解决方案:   Reorder the build entries.
文件:       .travis.yml

Patch 8.1.0349
问题:       Crash when wiping buffer in a callback.
解决方案:   Do not handle messages when only peeking for a character.
            (closes #2107)  Add "redraw_flag" to test_override().
文件:       src/os_unix.c, src/os_win32.c, src/screen.c, src/evalfunc.c,
            src/globals.h, runtime/doc/eval.txt

Patch 8.1.0350
问题:       Vim may block on ch_sendraw() when the job is sending data back to
            Vim, which isn't read yet. (Nate Bosch)
解决方案:   Add the "noblock" option to job_start(). (closes #2548)
文件:       src/channel.c, src/structs.h, src/testdir/test_channel.vim,
            runtime/doc/channel.txt

Patch 8.1.0351
问题:       'incsearch' for :/foo/s//<Esc> changes last search pattern.
解决方案:   Save the last search pattern earlier.
文件:       src/ex_docmd.c, src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0352
问题:       Browsing compressed tar files does not always work.
解决方案:   Use the "file" command to get the compression type.
文件:       runtime/autoload/tar.vim

Patch 8.1.0353
问题:       An "after" directory of a package is appended to 'rtp', which
            will be after the user's "after" directory. ()
解决方案:   Insert the package "after" directory before any other "after"
            directory in 'rtp'. (closes #3409)
文件:       src/ex_cmds2.c, src/testdir/test_packadd.vim

Patch 8.1.0354 (after 8.1.0353)
问题:       Packadd test fails on MS-Windows.
解决方案:   Ignore difference between forward and backward slashes.
文件:       src/testdir/test_packadd.vim

Patch 8.1.0355
问题:       Incorrect adjusting the popup menu for the preview window.
解决方案:   Compute position and height properly. (Ronan Pigott)  Also show at
            least ten items. (closes #3414)
文件:       src/popupmnu.c

Patch 8.1.0356
问题:       Using :s with 'incsearch' prevents CTRL-R CTRL-W. (Boris Staletic)
解决方案:   When past the pattern put cursor back in the start position.
            (closes #3413)
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.0357
问题:       Instructions for tests are outdated. (Jason Franklin)
解决方案:   Update the text.
文件:       src/testdir/README.txt

Patch 8.1.0358
问题:       Crash when using term_dumpwrite() after the job finished.
解决方案:   Check for a finished job and give an error message.
文件:       src/terminal.c

Patch 8.1.0359
问题:       No clue what test failed when using a screendump twice.
解决方案:   Add an extra argument to VerifyScreenDump().
文件:       src/testdir/screendump.vim

Patch 8.1.0360
问题:       Using an external diff program is slow and inflexible.
解决方案:   Include the xdiff library. (Christian Brabandt, closes #2732)
            Use it by default.
文件:       Filelist, runtime/doc/diff.txt, runtime/doc/options.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Makefile, src/diff.c,
            src/structs.h, src/testdir/dumps/Test_diff_01.dump,
            src/testdir/dumps/Test_diff_02.dump,
            src/testdir/dumps/Test_diff_03.dump,
            src/testdir/dumps/Test_diff_04.dump,
            src/testdir/dumps/Test_diff_05.dump,
            src/testdir/dumps/Test_diff_06.dump,
            src/testdir/dumps/Test_diff_07.dump,
            src/testdir/dumps/Test_diff_08.dump,
            src/testdir/dumps/Test_diff_09.dump,
            src/testdir/dumps/Test_diff_10.dump,
            src/testdir/dumps/Test_diff_11.dump,
            src/testdir/dumps/Test_diff_12.dump,
            src/testdir/dumps/Test_diff_13.dump,
            src/testdir/dumps/Test_diff_14.dump,
            src/testdir/dumps/Test_diff_15.dump,
            src/testdir/dumps/Test_diff_16.dump,
            src/testdir/test_diffmode.vim, src/xdiff/COPYING,
            src/xdiff/xdiff.h, src/xdiff/xdiffi.c, src/xdiff/xdiffi.h,
            src/xdiff/xemit.c, src/xdiff/xemit.h, src/xdiff/xhistogram.c,
            src/xdiff/xinclude.h, src/xdiff/xmacros.h, src/xdiff/xpatience.c,
            src/xdiff/xprepare.c, src/xdiff/xprepare.h, src/xdiff/xtypes.h,
            src/xdiff/xutils.c, src/xdiff/xutils.h, src/xdiff/README.txt

Patch 8.1.0361
问题:       Remote user not used for completion. (Stucki)
解决方案:   Use $USER too. (Dominique Pelle, closes #3407)
文件:       src/misc1.c

Patch 8.1.0362
问题:       Cannot get the script line number when executing a function.
解决方案:   Store the line number besides the script ID. (Ozaki Kiichi,
            closes #3362)  Also display the line number with ":verbose set".
文件:       runtime/doc/cmdline.txt, runtime/doc/eval.txt, src/Make_all.mak,
            src/buffer.c, src/eval.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
            src/globals.h, src/main.c, src/menu.c, src/option.c,
            src/proto/eval.pro, src/structs.h, src/syntax.c,
            src/testdir/test_alot.vim, src/testdir/test_expand_func.vim,
            src/testdir/test_maparg.vim, src/term.c src/userfunc.c

Patch 8.1.0363
问题:       Internal diff isn't used by default as advertised.
解决方案:   Add "internal" to the default value of 'diffopt'.
            Also add couple of files missing from the distribution.
文件:       src/option.c, runtime/doc/options.txt, Filelist

Patch 8.1.0364
问题:       Compiler warning in xdiff code. (Yegappan Lakshmanan)
解决方案:   Initialize directly.
文件:       src/xdiff/xemit.c, src/xdiff/README.txt

Patch 8.1.0365
问题:       Function profile doesn't specify where it was defined.
解决方案:   Show the script name and line number.
文件:       src/userfunc.c, src/testdir/test_profile.vim

Patch 8.1.0366
问题:       Pieces of the xdiff code are not used.
解决方案:   Add "#if 0" to omit unused code.
文件:       src/xdiff/xemit.c

Patch 8.1.0367
问题:       getchar(1) no longer processes pending messages. (Yasuhiro
            Matsumoto)
解决方案:   Call parse_queued_messages().
文件:       src/evalfunc.c

Patch 8.1.0368
问题:       GTK code has too many #ifdefs and building fails with GTK 2.10.
解决方案:   Always use gtk_widget_get_window() and define it for older GTK
            versions. (Ken Takata, closes #3421)
文件:       src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c, src/mbyte.c, src/vim.h

Patch 8.1.0369
问题:       Continuation lines cannot contain comments.
解决方案:   Support using "\ .
文件:       src/ex_cmds2.c, src/testdir/test_eval_stuff.vim,
            runtime/indent/vim.vim, runtime/doc/repeat.txt

Patch 8.1.0370
问题:       Not using internal diff if 'diffopt' is not changed.
解决方案:   Correct initialization of diff_flags. (Christian Brabandt)
文件:       src/diff.c

Patch 8.1.0371
问题:       Argument types for select() may be wrong.
解决方案:   Use a configure macro. (Tobias Ulmer)
文件:       src/config.h.in, src/configure.ac, src/auto/configure,
            src/os_unix.c

Patch 8.1.0372
问题:       Screen updating slow when 'cursorline' is set.
解决方案:   Only redraw the old and new cursor line, not all lines.
文件:       src/edit.c, src/move.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0373 (after 8.1.0372)
问题:       Screen updating still slow when 'cursorline' is set.
解决方案:   Fix setting last_cursorline.
文件:       src/move.c

Patch 8.1.0374
问题:       Moving the cursor is slow when 'relativenumber' is set.
解决方案:   Only redraw the number column, not all lines.
文件:       src/screen.c, src/move.c

Patch 8.1.0375
问题:       Cannot use diff mode with Cygwin diff.exe. (Igor Forca)
解决方案:   Skip over unrecognized lines in the diff output.
文件:       src/diff.c, src/testdir/test_diffmode.vim

Patch 8.1.0376
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Initialize the variable.
文件:       src/screen.c

Patch 8.1.0377
问题:       Xdiff doesn't use the Vim memory allocation functions.
解决方案:   Change the xdl_ defines.  Check for out-of-memory.  Rename
            "ignored" to "vim_ignored".
文件:       src/xdiff/xdiff.h, src/xdiff/xpatience.c, src/xdiff/xdiffi.c,
            src/channel.c, src/diff.c, src/evalfunc.c, src/ex_cmds.c,
            src/fileio.c, src/main.c, src/mbyte.c, src/netbeans.c,
            src/os_unix.c, src/os_win32.c, src/ui.c, src/window.c,
            src/globals.h, src/term.c

Patch 8.1.0378
问题:       CI build failure.
解决方案:   Include vim.h as ../vim.h.  Fix compiler warning.
文件:       src/xdiff/xdiff.h, src/xdiff/xpatience.c

Patch 8.1.0379
问题:       Build dependencies are incomplete.
解决方案:   Update the build dependencies, mainly for xdiff.  Adjust object
            directory for libvterm and xdiff.
文件:       src/Makefile, src/configure.ac, src/auto/configure,
            src/libvterm/src/screen.c, src/libvterm/src/termscreen.c,
            src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0380
问题:       "make proto" doesn't work well.
解决方案:   Define a few more types for cproto.  Update proto files.  Fix that
            workshop didn't build.
文件:       src/vim.h, src/protodef.h, src/if_ruby.c, src/workshop.c,
            src/proto/digraph.pro, src/hardcopy.pro, src/proto/option.pro,
            src/proto/window.pro

Patch 8.1.0381
问题:       Variable declaration not at start of block.
解决方案:   Fix line ordering.
文件:       src/xdiff/xpatience.c

Patch 8.1.0382
问题:       Some make programs can't handle dependency on "xdiff/../".
解决方案:   Strip it out.
文件:       src/Makefile

Patch 8.1.0383
问题:       Missing source file rename.
解决方案:   Update the dependency.
文件:       src/Make_mvc.mak

Patch 8.1.0384
问题:       Sign ordering depends on +netbeans feature.
解决方案:   Also order signs without +netbeans. (Christian Brabandt,
            closes #3224)
文件:       src/structs.h, src/buffer.c

Patch 8.1.0385
问题:       Coveralls badge doesn't update.
解决方案:   Update the URL
文件:       README.md

Patch 8.1.0386
问题:       Cannot test with non-default option value.
解决方案:   Add test_option_not_set().
文件:       runtime/doc/eval.txt, src/option.c, src/proto/option.pro,
            src/evalfunc.c

Patch 8.1.0387
问题:       No test for 'ambiwidth' detection.
解决方案:   Add a test.
文件:       src/testdir/test_startup_utf8.vim

Patch 8.1.0388
问题:       Coverity complains about possible NULL pointer use.
解决方案:   Use get_tv_string() instead of get_tv_string_chk().
文件:       src/evalfunc.c

Patch 8.1.0389
问题:       :behave command is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3429)
文件:       src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_behave.vim

Patch 8.1.0390
问题:       Scrollbars are not tested.
解决方案:   Add test_scrollbar() and a test.
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_gui.vim

Patch 8.1.0391
问题:       Building in a shadow directory fails.
解决方案:   Don't link the xdiff directory but what's in it. (closes #3428)
文件:       src/Makefile

Patch 8.1.0392
问题:       Error while typing :/foo/s// with 'incsearch' enabled.
解决方案:   Do not give search errors when highlighting matches.
文件:       src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_getln.c,
            src/testdir/test_search.vim

Patch 8.1.0393
问题:       Not all white space difference options available.
解决方案:   Add "iblank", "iwhiteall" and "iwhiteeol" to 'diffopt'.
文件:       src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_17.dump,
            src/testdir/dumps/Test_diff_18.dump,
            src/testdir/dumps/Test_diff_19.dump,
            src/testdir/dumps/Test_diff_20.dump

Patch 8.1.0394
问题:       Diffs are not always updated correctly.
解决方案:   When using internal diff update for any changes properly.
文件:       src/structs.h, src/diff.c, src/proto/diff.pro, src/misc1.c,
            src/main.c

Patch 8.1.0395
问题:       Compiler warning on 64-bit MS-Windows.
解决方案:   Add type cast. (Mike Williams)
文件:       src/diff.c

Patch 8.1.0396
问题:       Another compiler warning on 64-bit MS-Windows.
解决方案:   Add type cast. (Mike Williams)
文件:       src/xdiff/xutils.c

Patch 8.1.0397
问题:       No event triggered after updating diffs.
解决方案:   Add the DiffUpdated event.
文件:       src/vim.h, src/diff.c, src/fileio.c,
            src/testdir/test_diffmode.vim, runtime/doc/autocmd.txt

Patch 8.1.0398
问题:       No test for -o and -O command line arguments.
解决方案:   Add a test. (Dominique Pelle, closes #3438)
文件:       src/testdir/test_startup.vim

Patch 8.1.0399
问题:       'hlsearch' highlight remains in other window after cancelling
            command.
解决方案:   Redraw all windows. Also remove unnecessary delays. (closes #3437)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_11.dump,
            src/testdir/dumps/Test_incsearch_substitute_12.dump,
            src/testdir/dumps/Test_incsearch_substitute_13.dump

Patch 8.1.0400
问题:       Using freed memory with :diffget.
解决方案:   Skip ex_diffupdate() while updating diffs. (closes #3442)
文件:       src/diff.c

Patch 8.1.0401
问题:       Can't get swap name of another buffer.
解决方案:   Add swapname(). (Ozaki Kiichi, closes #3441)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_swap.vim

Patch 8.1.0402
问题:       The DiffUpdate event isn't triggered for :diffput.
解决方案:   Also trigger DiffUpdate for :diffget and :diffput.
文件:       src/diff.c

Patch 8.1.0403
问题:       Header file missing from distribution.
解决方案:   Add src/protodef.h.
文件:       Filelist

Patch 8.1.0404
问题:       Accessing invalid memory with long argument name.
解决方案:   Use item_count instead of checking for a terminating NULL.
            (Dominique Pelle, closes #3444)
文件:       src/testdir/test_arglist.vim, src/version.c

Patch 8.1.0405
问题:       Too many #ifdefs for GTK.
解决方案:   Define macros instead of using #ifdef. (Ken Takata, closes #3436)
文件:       src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c, src/vim.h

Patch 8.1.0406
问题:       Several command line arguments are not tested.
解决方案:   Add tests for -A, -F, -H, -p and -V. (Dominique Pelle,
            closes #3446)
文件:       src/testdir/test_startup.vim

Patch 8.1.0407
问题:       Quickfix code mixes using the stack and a list pointer.
解决方案:   Use a list pointer in more places. (Yegappan Lakshmanan,
            closes #3443)
文件:       src/quickfix.c

Patch 8.1.0408
问题:       MSVC: cannot use the "x64" native compiler option.
解决方案:   Ignore case for %Platform%.  Improve documentation. (Ken Takata)
文件:       src/INSTALLpc.txt, src/msvc2015.bat

Patch 8.1.0409 (after 8.1.0406)
问题:       Startup test fails on MS-Windows.
解决方案:   Do the Arabic test in silent Ex mode.  Loosen the check for -V2.
文件:       src/testdir/test_startup.vim

Patch 8.1.0410
问题:       The ex_copen() function is too long.
解决方案:   Refactor to split off two functions. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0411
问题:       Renamed file missing from distribution.
解决方案:   Rename screen.c to termscreen.c (Zdenek Dohnal, closes #3449)
文件:       Filelist

Patch 8.1.0412
问题:       Cannot build with GTK 2.4.
解决方案:   Add back a few #ifdefs. (Ken Takata, closes #3447)
            Also support older GTK. (Tom Christensen)
文件:       src/gui_gtk_x11.c

Patch 8.1.0413
问题:       Test output is duplicated or missing.
解决方案:   Adjust the MS-Windows and Unix test makefiles. (Ken Takata,
            closes #3452)
文件:       src/testdir/Make_dos.mak, src/testdir/Makefile

Patch 8.1.0414
问题:       v:option_old and v:option_new are cleared when using :set in
            OptionSet autocmd. (Gary Johnson)
解决方案:   Don't trigger OptionSet recursively.
文件:       src/option.c

Patch 8.1.0415
问题:       Not actually using 16 colors with vtp.
解决方案:   Always use 256 colors when vtp is used. (Nobuhiro Takasaki,
            closes #3432)
文件:       src/option.c, src/term.c

Patch 8.1.0416
问题:       Sort doesn't report deleted lines.
解决方案:   Call msgmore(). (Christian Brabandt, closes #3454)
文件:       src/ex_cmds.c, src/testdir/test_sort.vim

Patch 8.1.0417
问题:       Several command line arguments are not tested.
解决方案:   Add tests for -m, -M, -R and -Vfile. (Dominique Pelle,
            closes #3458)
文件:       src/testdir/test_startup.vim

Patch 8.1.0418
问题:       MS-Windows: cannot separate Lua include and library directories.
解决方案:   Add LUA_LIBDIR and LUA_INCDIR. (Ken Takata, closes #3464)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0419
问题:       Cygwin: running cproto fails with -O2.
解决方案:   Strip -O2 for cproto. (Ken Takata, closes #3465)
文件:       src/Makefile

Patch 8.1.0420
问题:       Generating vim.lib when using ActivePerl 5.20.3 or later.
解决方案:   Redefine XS_EXTERNAL(). (Ken Takata, closes #3462)
文件:       src/if_perl.xs

Patch 8.1.0421
问题:       MS-Windows: Ruby path is wrong for Ruby 1.9 and later.
解决方案:   Let -I argument depend on Ruby version. (Ken Takata, closes #3461)
文件:       src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0422
问题:       Cannot create map file with MinGW.
解决方案:   Add support for $MAP. (Ken Takata, closes #3460)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0423
问题:       MS-Windows: using dup-close for flushing a file.
解决方案:   Use _commit(). (Ken Takata, closes #3463)
文件:       src/memfile.c, src/os_mac.h, src/os_win32.h

Patch 8.1.0424
问题:       Test output is very verbose, loading CI log is slow.
解决方案:   Redirect output to /dev/null. (Ken Takata, closes #3456)
文件:       src/testdir/Makefile

Patch 8.1.0425
问题:       ml_get error and crash with appendbufline(). (Masashi Iizuka)
解决方案:   Set per-window buffer info. (Hirohito Higashi, closes #3455)
文件:       src/buffer.c, src/testdir/test_bufline.vim

Patch 8.1.0426
问题:       Accessing invalid memory in SmcOpenConnection().
解决方案:   Reduce size of errorstring by one. (Dominique Pelle, closes #3469)
文件:       src/os_unix.c, src/testdir/test_startup.vim

Patch 8.1.0427
问题:       MS-Windows GUI: using invalid encoded file name.
解决方案:   Drop the file name and return NULL. (Ken Takata, closes #3467)
文件:       src/gui_w32.c

Patch 8.1.0428
问题:       The :suspend command is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3472)
文件:       src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_suspend.vim

Patch 8.1.0429 (after 8.1.0343)
问题:       No test for :lcd with 'shellslash'.
解决方案:   Add a test. (Daniel Hahler, closes #3475)
文件:       src/testdir/test_getcwd.vim

Patch 8.1.0430
问题:       Xargadd file left behind after running test.
解决方案:   Delete the file. (Dominique Pelle)
文件:       src/testdir/test_arglist.vim

Patch 8.1.0431
问题:       The qf_jump() function is too long.
解决方案:   Refactor to split it into several functions. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0432
问题:       Compiler warning for signed/unsigned.
解决方案:   Add type cast. (Mike Williams)
文件:       src/xdiff/xemit.c

Patch 8.1.0433
问题:       Mapping can obtain text from inputsecret(). (Tommy Allen)
解决方案:   Disallow CTRL-R = and CTRL-\ e when using inputsecret().
文件:       src/ex_getln.c

Patch 8.1.0434
问题:       copy_loclist() is too long.
解决方案:   Split in multiple functions. (Yegappan Lakshmanan)
文件:       src/proto/quickfix.pro, src/quickfix.c, src/window.c

Patch 8.1.0435
问题:       Cursorline highlight not removed in some situation. (Vitaly
            Yashin)
解决方案:   Reset last_cursorline when resetting 'cursorline'. (Christian
            Brabandt, closes #3481)
文件:       src/move.c, src/proto/move.pro, src/option.c

Patch 8.1.0436
问题:       Can get the text of inputsecret() with getcmdline(). (Tommy Allen)
解决方案:   Don't return the text.
文件:       src/ex_getln.c

Patch 8.1.0437
问题:       May access freed memory when syntax HL times out. (Philipp Gesang)
解决方案:   Clear b_sst_first when clearing b_sst_array.
文件:       src/syntax.c

Patch 8.1.0438
问题:       The ex_make() function is too long.
解决方案:   Split it into several functions. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0439
问题:       Recursive use of getcmdline() still not protected.
解决方案:   Instead of saving the command buffer when making a call which may
            cause recursiveness, save the buffer when actually being called
            recursively.
文件:       src/ex_getln.c, src/proto/ex_getln.pro, src/getchar.c, src/main.c

Patch 8.1.0440
问题:       remove() with a range not sufficiently tested.
解决方案:   Add a test. (Dominique Pelle, closes #3497)
文件:       src/testdir/test_listdict.vim

Patch 8.1.0441
问题:       Build failure without command line history.
解决方案:   Move cmdline_init() outside of #ifdef.
文件:       src/ex_getln.c

Patch 8.1.0442
问题:       GUI: Cursor not drawn after ":redraw | sleep".
解决方案:   Flush the output. (closes #3496)
文件:       src/ex_docmd.c

Patch 8.1.0443
问题:       Unnecessary static function prototypes.
解决方案:   Remove unnecessary prototypes.
文件:       src/arabic.c, src/blowfish.c, src/buffer.c, src/charset.c,
            src/crypt_zip.c, src/digraph.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_eval.c, src/ex_getln.c, src/fileio.c, src/getchar.c,
            src/gui.c, src/gui_at_fs.c, src/gui_athena.c, src/gui_gtk_x11.c,
            src/gui_mac.c, src/gui_motif.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/hangulin.c, src/hardcopy.c, src/if_cscope.c,
            src/if_mzsch.c, src/if_python3.c, src/if_xcmdsrv.c,
            src/integration.c, src/json.c, src/main.c, src/mbyte.c,
            src/memline.c, src/message.c, src/misc1.c, src/misc2.c,
            src/move.c, src/netbeans.c, src/normal.c, src/ops.c, src/option.c,
            src/os_unix.c, src/os_win32.c, src/pty.c, src/regexp.c,
            src/screen.c, src/search.c, src/sha256.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c, src/ui.c,
            src/undo.c, src/version.c, src/window.c, src/workshop.c

Patch 8.1.0444
问题:       Unnecessary check for NULL pointer.
解决方案:   Remove check and call vim_free() directly.
文件:       src/beval.c

Patch 8.1.0445
问题:       Setting 'term' does not store location for termcap options.
解决方案:   Set the script context for termcap options that are changed when
            'term' is set.
文件:       src/option.c, src/proto/option.pro, src/term.c,
            src/testdir/test_options.vim

Patch 8.1.0446
问题:       Options test fails in the GUI.
解决方案:   Don't try changing 'term' in the GUI.
文件:       src/testdir/test_options.vim

Patch 8.1.0447
问题:       GUI scrollbar test fails with Athena and Motif.
解决方案:   When not using on-the-fly scrolling call normal_cmd().
文件:       src/evalfunc.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.0448
问题:       Cursorline not removed when using 'cursorbind'. (Justin Keyes)
解决方案:   Store the last cursor line per window. (closes #3488)
文件:       src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_with_cursorline_01.dump,
            src/testdir/dumps/Test_diff_with_cursorline_02.dump,
            src/testdir/dumps/Test_diff_with_cursorline_03.dump,
            src/structs.h, src/move.c

Patch 8.1.0449
问题:       When 'rnu' is set folded lines are not displayed correctly.
            (Vitaly Yashin)
解决方案:   When only redrawing line numbers do draw folded lines.
            (closes #3484)
文件:       src/screen.c, src/testdir/test_fold.vim,
            src/testdir/dumps/Test_folds_with_rnu_01.dump,
            src/testdir/dumps/Test_folds_with_rnu_02.dump

Patch 8.1.0450 (after patch 8.1.0449)
问题:       Build failure without the +fold feature.
解决方案:   Add #ifdef.
文件:       src/screen.c

Patch 8.1.0451
问题:       Win32 console: keypad keys don't work.
解决方案:   Use numbers instead of characters to avoid the value becoming
            negative. (Mike Williams)
文件:       src/os_win32.c

Patch 8.1.0452
问题:       MS-Windows: not finding intl.dll.
解决方案:   Also find intl.dll next to libintl.dll. (Ken Takata)
文件:       src/os_win32.c, runtime/doc/mlang.txt

Patch 8.1.0453
问题:       MS-Windows: executable() is not reliable.
解决方案:   Use $PATHEXT properly. (Yasuhiro Matsumoto, closes #3512)
文件:       src/os_win32.c, src/testdir/test_functions.vim

Patch 8.1.0454
问题:       resolve() was not tested with a symlink cycle.
解决方案:   Add a test. (Dominique Pelle, closes #3513)
文件:       src/testdir/test_functions.vim

Patch 8.1.0455
问题:       Checking for empty quickfix stack is not consistent.
解决方案:   Use qf_stack_empty(). (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0456
问题:       Running test hangs when the input file is being edited.
解决方案:   Use a SwapExists autocommand to ignore editing the test script.
文件:       src/testdir/Makefile, src/testdir/runtest.vim

Patch 8.1.0457 (after 8.1.0451)
问题:       Win32 console: key mappings don't work.
解决方案:   Use another solution for the keypad keys that doesn't break
            mappings. Some values will be negative. (Mike Williams)
文件:       src/os_win32.c

Patch 8.1.0458
问题:       Ml_get error and crash when using "do".
解决方案:   Adjust cursor position also when diffupdate is not needed.
            (Hirohito Higashi)
文件:       src/diff.c, src/testdir/test_diffmode.vim

Patch 8.1.0459
问题:       Test_executable fails when there is a dog in the system.
解决方案:   Rename the dog. (Hirohito Higashi)
文件:       src/testdir/test_functions.vim

Patch 8.1.0460
问题:       assert_fails() does not take a message argument
解决方案:   Add the argument.
文件:       src/evalfunc.c, src/eval.c, src/testdir/test_assert.vim

Patch 8.1.0461
问题:       Quickfix code uses too many /* */ comments.
解决方案:   Change to // comments. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0462
问题:       When using ConPTY Vim can be a child process.
解决方案:   To find a Vim window use both EnumWindows() and
            EnumChildWindows(). (Nobuhiro Takasaki, closes #3521)
文件:       src/os_mswin.c

Patch 8.1.0463
问题:       "simalt ~x" in .vimrc blocks swap file prompt.
解决方案:   Flush buffers before prompting. (Yasuhiro Matsumoto,
            closes #3518, closes #2192)
文件:       src/memline.c

Patch 8.1.0464
问题:       MS-Windows: job_info() has cmd without backslashes. (Daniel
            Hahler)
解决方案:   Use rem_backslash(). (closes #3517, closes #3404)  Add a test.
            (Yasuhiro Matsumoto)
文件:       src/misc2.c, src/testdir/test_channel.vim

Patch 8.1.0465 (after 8.1.0452)
问题:       Client-server test fails.
解决方案:   Change logic in EnumWindows().
文件:       src/os_mswin.c

Patch 8.1.0466 (after 8.1.0463)
问题:       Autocmd test fails.
解决方案:   Do call inchar() when flushing typeahead.
文件:       src/vim.h, src/getchar.c, src/proto/getchar.pro, src/memline.c,
            src/message.c, src/misc1.c

Patch 8.1.0467 (after 8.1.0063)
问题:       Cannot build with Mac OS X 10.5.
解决方案:   Change #ifdef into #if. (Akshay Hegde, closes #3022)
文件:       src/os_macosx.m

Patch 8.1.0468
问题:       MS-Windows: Filter command with pipe character fails. (Johannes
            Riecken)
解决方案:   Find the pipe character outside of quotes. (Yasuhiro Matsumoto,
            closes #1743, closes #3523)
文件:       src/ex_cmds.c, src/testdir/test_filter_cmd.vim

Patch 8.1.0469
问题:       Too often indexing in qf_lists[].
解决方案:   Use a qf_list_T pointer. (Yegappan Lakshmanan)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0470
问题:       Pointer ownership around fname_expand() is unclear.
解决方案:   Allow b_ffname and b_sfname to point to the same allocated memory,
            only free one.  Update comments.
文件:       src/buffer.c, src/structs.h, src/fileio.c, src/ex_cmds.c

Patch 8.1.0471
问题:       Some tests are flaky or fail on some systems.
解决方案:   Increase waiting time for port number. Use "cmd /c" to execute
            "echo" on win32. (Ken Takata, closes #3534)
文件:       src/testdir/shared.vim, src/testdir/test_channel.vim

Patch 8.1.0472
问题:       Dosinst command has a few flaws.
解决方案:   Register DisplayIcon, DisplayVersion and Publisher for the
            uninstaller. (closes #3485)  Don't set 'diffexpr' if internal diff
            is supported. Allow for using Vi compatible from the command line.
            Remove needless sleeps.  Add comments in the generated _vimrc.
            (Ken Takata, closes #3525)
文件:       src/dosinst.c

Patch 8.1.0473
问题:       User doesn't notice file does not exist when swap file does.
解决方案:   Add a note that the file cannot be found.  Make the "still
            running" notice stand out.
文件:       src/memline.c

Patch 8.1.0474
问题:       Directory where if_perl.c is written is inconsistent.
解决方案:   use auto/if_perl.c for MS-Windows. (Ken Takata, closes #3540)
文件:       src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0475
问题:       Memory not freed on exit when quit in autocmd.
解决方案:   Remember funccal stack when executing autocmd.
文件:       src/structs.h, src/userfunc.c, src/proto/userfunc.pro,
            src/fileio.c, src/eval.c, src/ex_cmds2.c, src/main.c

Patch 8.1.0476
问题:       Memory leaks in test_escaped_glob.
解决方案:   Avoid failure when running the shell, use the sandbox.
文件:       src/testdir/test_escaped_glob.vim

Patch 8.1.0477 (after 8.1.0475)
问题:       Tiny build fails.
解决方案:   Add a dummy declaration for funccal_entry_T.
文件:       src/structs.h

Patch 8.1.0478
问题:       Cannot build with perl using MinGW.
解决方案:   Add -I. (Ken Takata, Cesar Romani)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0479
问题:       Failure when setting 'varsofttabstop' to end in a comma. (Ralf
            Schandl)
解决方案:   Reject value with trailing comma.  Add test for invalid values
            (closes #3544)
文件:       src/testdir/test_vartabs.vim, src/option.c

Patch 8.1.0480
问题:       MinGW build file uses different -I flags than MVC.
解决方案:   Add -I to $CFLAGS. (Ken Takata)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0481
问题:       When "Terminal" highlight is reverted cursor doesn't show.
解决方案:   Get the colors of the "Terminal" group. (closes #3546)
文件:       src/terminal.c

Patch 8.1.0482
问题:       MinGW "make clean" deletes all .exe files.
解决方案:   Only delete .exe files that it builds. (Ken Takata)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0483
问题:       MinGW does not build tee.exe.
解决方案:   Add build instructions. (Yasuhiro Matsumoto, closes #3548)
文件:       src/Make_cyg_ming.mak, src/tee/Makefile

Patch 8.1.0484
问题:       Some file types are not recognized.
解决方案:   Update the file type detection.
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.0485
问题:       term_start() does not check if directory is accessible.
解决方案:   Add mch_access() call. (Jason Franklin)
文件:       src/channel.c, src/testdir/test_terminal.vim

Patch 8.1.0486 (after 8.1.0485)
问题:       Can't build in MS-Windows.
解决方案:   Put mch_access() call inside #ifdef
文件:       src/channel.c

Patch 8.1.0487
问题:       No menus specifically for the terminal window.
解决方案:   Add :tlmenu. (Yee Cheng Chin, closes #3439) Add a menu test.
文件:       runtime/delmenu.vim, runtime/doc/autocmd.txt, runtime/doc/gui.txt,
            runtime/doc/index.txt, runtime/doc/terminal.txt,
            runtime/doc/usr_42.txt, runtime/menu.vim, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/menu.c, src/proto/menu.pro,
            src/popupmnu.c, src/structs.h, src/testdir/test_menu.vim

Patch 8.1.0488
问题:       Using freed memory in quickfix code. (Dominique Pelle)
解决方案:   Add the quickfix_busy() flag to postpone deleting quickfix lists
            until it is safe. (Yegappan Lakshmanan, closes #3538)
文件:       src/quickfix.c, src/proto/quickfix.pro, src/misc2.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0489
问题:       Crash when autocmd clears vimpgrep location list.
解决方案:   Return from qf_jump_edit_buffer() early. (Yegappan Lakshmanan)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0490
问题:       MS-Windows: doesn't handle missing libwinpthread-1.dll.
解决方案:   Adjust Cygwin/MinGW build file. (Ken Takata, closes #2827)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0491
问题:       If a terminal dump has CR it is considered corrupt.
解决方案:   Ignore CR characters. (Nobuhiro Takasaki, closes #3558)
文件:       src/terminal.c

Patch 8.1.0492
问题:       "Edit with existing Vim" list can get long.
解决方案:   Move the list to a submenu. (Ken Takata, closes #3561)
文件:       src/GvimExt/gvimext.cpp

Patch 8.1.0493
问题:       argv() and argc() only work on the current argument list.
解决方案:   Add a window ID argument. (Yegappan Lakshmanan, closes #832)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_arglist.vim,
            src/eval.c, src/proto/eval.pro

Patch 8.1.0494
问题:       Functions do not check for a window ID in other tabs.
解决方案:   Also find the window ID in other than the current tab.
文件:       src/evalfunc.c

Patch 8.1.0495
问题:       :filter only supports some commands.
解决方案:   Add :filter support for more commands. (Marcin Szamotulski,
            closes #2856)
文件:       runtime/doc/various.txt, src/eval.c, src/mark.c, src/option.c,
            src/syntax.c, src/testdir/test_filter_cmd.vim, src/userfunc.c

Patch 8.1.0496
问题:       No tests for indent files.
解决方案:   Add a mechanism for running indent file tests.  Add a first test
            for Vim indenting.
文件:       runtime/indent/Makefile, runtime/indent/testdir/runtest.vim,
            runtime/indent/testdir/cleantest.vim, runtime/indent/README.txt,
            runtime/indent/testdir/README.txt, runtime/indent/testdir/vim.in,
            runtime/indent/testdir/vim.ok, Filelist

Patch 8.1.0497
问题:       :%diffput changes order of lines. (Markus Braun)
解决方案:   Do adjust marks when using internal diff.
文件:       src/diff.c, src/testdir/test_diffmode.vim

Patch 8.1.0498
问题:       /etc/gitconfig not recognized at a gitconfig file.
解决方案:   Add pattern to filetype detection. (closes #3568)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.0499
问题:       :2vimgrep causes an ml_get error
解决方案:   Pass tomatch pointer instead of value. (Yegappan Lakshmanan)
文件:       src/ex_getln.c, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0500
问题:       Cleaning up in src/tee may not always work.
解决方案:   Use "rm" when appropriate. (Michael Soyka, closes #3571)
文件:       src/tee/Makefile

Patch 8.1.0501
问题:       Cppcheck warns for using array index before bounds check.
解决方案:   Swap the conditions. (Dominique Pelle)
文件:       src/memline.c

Patch 8.1.0502
问题:       Internal diff fails when diffing a context diff. (Hirohito Higashi)
解决方案:   Only use callback calls with one line. (closes #3581)
文件:       src/diff.c, src/testdir/dumps/test_diff_of_diff_01.dump

Patch 8.1.0503
问题:       Missing change to diff test. (Hirohito Higashi)
解决方案:   Add the missing test function.
文件:       src/testdir/test_diffmode.vim

Patch 8.1.0504
问题:       When CTRL-C is mapped it triggers InsertLeave.
解决方案:   Make CTRL-C behave the same way when typed or used in a mapping.
文件:       src/edit.c, src/testdir/test_edit.vim

Patch 8.1.0505
问题:       Filter command test may fail if helplang is not set.
解决方案:   Set 'helplang' for the test. (James McCoy, closes #3591)
文件:       src/testdir/test_filter_cmd.vim

Patch 8.1.0506
问题:       Modeline test fails when run by root.
解决方案:   Set 'modeline' for the test. (James McCoy, closes #3592)
文件:       src/testdir/test_modeline.vim

Patch 8.1.0507
问题:       .raml files not properly detected.
解决方案:   Recognize .raml as raml instead of yaml. (closes #3594)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.0508
问题:       Suspend test fails when run by root.
解决方案:   Accept both '$' and '#' for the prompt. (James McCoy, closes #3590)
文件:       src/testdir/test_suspend.vim

Patch 8.1.0509
问题:       Checking cwd not accessible fails for root. (James McCoy)
解决方案:   Skip this part of the test for root. (closes #3595)
文件:       src/testdir/test_terminal.vim

Patch 8.1.0510
问题:       Filter test fails when $LANG is C.UTF-8.
解决方案:   Set 'helplang' to "en" for any C language. (Christian Brabandt,
            closes #3577)
文件:       src/option.c

Patch 8.1.0511
问题:       ml_get error when calling a function with a range.
解决方案:   Don't position the cursor after the last line.
文件:       src/userfunc.c, src/testdir/test_functions.vim

Patch 8.1.0512
问题:       'helplang' default is inconsistent for C and C.UTF-8.
解决方案:   Don't accept a value unless it starts with two letters.
文件:       src/ex_cmds2.c

Patch 8.1.0513
问题:       No error for set diffopt+=algorithm:.
解决方案:   Check for missing argument. (Hirohito Higashi, closes #3598)
文件:       src/diff.c, src/testdir/gen_opt_test.vim

Patch 8.1.0514
问题:       CTRL-W ^ does not work when alternate buffer has no name.
解决方案:   Use another method to split and edit the alternate buffer. (Jason
            Franklin)
文件:       src/testdir/test_normal.vim, src/testdir/test_window_cmd.vim,
            src/normal.c, src/window.c, runtime/doc/windows.txt

Patch 8.1.0515
问题:       Reloading a script gives errors for existing functions.
解决方案:   Allow redefining a function once when reloading a script.
文件:       src/testdir/test_functions.vim, src/userfunc.c, src/structs.h,
            src/globals.h, src/buffer.c, src/ex_cmds2.c, src/main.c,
            src/option.c, runtime/doc/eval.txt

Patch 8.1.0516
问题:       :move command marks buffer modified when nothing changed.
解决方案:   Do not set 'modified'.  Add a test. (Jason Franklin)
文件:       src/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_move.vim, src/ex_cmds.c

Patch 8.1.0517
问题:       Test_window_split_edit_alternate() fails on AppVeyor.
解决方案:   Disable the failing part for now.
文件:       src/testdir/test_window_cmd.vim

Patch 8.1.0518
问题:       Test_window_split_edit_bufnr() fails on AppVeyor.
解决方案:   Disable the failing part for now.
文件:       src/testdir/test_window_cmd.vim

Patch 8.1.0519
问题:       Cannot save and restore the tag stack.
解决方案:   Add gettagstack() and settagstack(). (Yegappan Lakshmanan,
            closes #3604)
文件:       runtime/doc/eval.txt, runtime/doc/tagsrch.txt,
            runtime/doc/usr_41.txt, src/alloc.h, src/dict.c, src/evalfunc.c,
            src/list.c, src/misc2.c, src/proto/dict.pro, src/proto/list.pro,
            src/proto/misc2.pro, src/proto/tag.pro, src/tag.c,
            src/testdir/test_tagjump.vim

Patch 8.1.0520
问题:       Screen diff test sometimes fails.
解决方案:   Add to list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0521
问题:       Cannot build with +eval but without +quickfix.
解决方案:   Remove #ifdef for e_stringreq. (John Marriott)
文件:       src/evalfunc.c

Patch 8.1.0522
问题:       :terminal does not show trailing empty lines.
解决方案:   Add empty lines. (Hirohito Higashi, closes #3605)
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0523
问题:       Opening window from quickfix leaves empty buffer behind.
解决方案:   Add qf_jump_newwin(). (Yegappan Lakshmanan, closes #2574)
文件:       src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0524 (after 8.1.0522)
问题:       Terminal test fails on Windows.
解决方案:   Skip Test_terminal_does_not_truncate_last_newlines() for now.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0525 (after 8.1.0524)
问题:       Terminal test skips part on Windows.
解决方案:   Fix Test_terminal_does_not_truncate_last_newlines(). (Hirohito
            Higashi, closes #3606)
文件:       src/Make_mvc.mak, src/testdir/test_terminal.vim

Patch 8.1.0526
问题:       Running out of signal stack in RealWaitForChar. (Vladimir Marek)
解决方案:   Make the fd_set variables static.
文件:       src/os_unix.c

Patch 8.1.0527
问题:       Using 'shiftwidth' from wrong buffer for folding.
解决方案:   Use "buf" instead of "curbuf". (Christian Brabandt)
文件:       src/fold.c

Patch 8.1.0528
问题:       Various typos in comments.
解决方案:   Fix the typos.
文件:       src/fileio.c, src/gui.c, src/macros.h, src/screen.c, src/search.c,
            src/spell.c, src/spellfile.c, src/vim.h, src/testdir/README.txt,
            src/INSTALL, src/gui_athena.c, src/gui_gtk.c, src/gui_gtk_x11.c,
            src/gui_motif.c, src/gui_xmebw.c, src/if_tcl.c, src/os_amiga.c,
            src/gui_w32.c, src/os_win32.c, src/gui_mac.c, src/os_vms_fix.com

Patch 8.1.0529
问题:       Flaky test sometimes fails in different ways.
解决方案:   When the second run gives a different error, try running the test
            again, up to five times.
文件:       src/testdir/runtest.vim

Patch 8.1.0530
问题:       Channel and terminal tests that start a server can be flaky.
解决方案:   Add all channel and terminal tests that start a server to the list
            of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0531
问题:       Flaky tests often fail with a common error message.
解决方案:   Add a pattern to match an error message indicating a flaky test.
文件:       src/testdir/runtest.vim

Patch 8.1.0532
问题:       Cannot distinguish between quickfix and location list.
解决方案:   Add an explicit type variable. (Yegappan Lakshmanan)
文件:       src/quickfix.c

Patch 8.1.0533
问题:       Screendump tests can be flaky.
解决方案:   Add VerifyScreenDump to the pattern of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0534
问题:       MS-Windows installer uses different $HOME than Vim.
解决方案:   Use the Vim logic also in the MS-Windows installer. (Ken Takata,
            closes #3564)
文件:       src/dosinst.c, src/misc1.c

Patch 8.1.0535
问题:       Increment/decrement might get interrupted by updating folds.
解决方案:   Disable fold updating for a moment. (Christian Brabandt,
            closes #3599)
文件:       src/ops.c

Patch 8.1.0536
问题:       File time test fails when using NFS.
解决方案:   Use three file times instead of localtim(). (James McCoy,
            closes #3618)
文件:       src/testdir/test_stat.vim

Patch 8.1.0537
问题:       ui_breakcheck() may be called recursively, which doesn't work.
解决方案:   When called recursively, just return. (James McCoy, closes #3617)
文件:       src/ui.c

Patch 8.1.0538
问题:       Evaluating a modeline might invoke using a shell command. (Paul
            Huber)
解决方案:   Set the sandbox flag when setting options from a modeline.
文件:       src/buffer.c

Patch 8.1.0539
问题:       Cannot build without the sandbox.
解决方案:   Set the secure option instead of using the sandbox.  Also restrict
            the characters from 'spelllang' that are used for LANG.vim.
            (suggested by Yasuhiro Matsumoto)
文件:       runtime/doc/options.txt, src/buffer.c, src/option.c

Patch 8.1.0540
问题:       May evaluate insecure value when appending to option.
解决方案:   Set the secure flag when changing an option that was previously
            set insecurely.  Also allow numbers for the characters from
            'spelllang' that are used for LANG.vim. (closes #3623)
文件:       src/option.c

Patch 8.1.0541
问题:       Help message in dosinst.c is outdated.
解决方案:   Update the comment. (Ken Takata, closes #3626)
文件:       src/dosinst.c

Patch 8.1.0542
问题:       shiftwidth() does not take 'vartabstop' into account.
解决方案:   Use the cursor position or a position explicitly passed.
            Also make >> and << work better with 'vartabstop'. (Christian
            Brabandt)
文件:       runtime/doc/change.txt, runtime/doc/eval.txt, src/edit.c,
            src/evalfunc.c, src/normal.c, src/ops.c, src/option.c,
            src/proto/edit.pro, src/proto/option.pro,
            src/testdir/test_vartabs.vim

Patch 8.1.0543
问题:       Coverity warns for leaking memory and using wrong struct.
解决方案:   Free pointer when allocation fails. Change "boff" to "loff".
            (closes #3634)
文件:       src/ex_getln.c, src/move.c

Patch 8.1.0544 (after 8.1.0540)
问题:       Setting 'filetype' in a modeline causes an error (Hirohito
            Higashi).
解决方案:   Don't add the P_INSECURE flag when setting 'filetype' from a
            modeline.  Also for 'syntax'.
文件:       src/option.c, src/testdir/test_modeline.vim

Patch 8.1.0545
问题:       When executing indent tests user preferences interfere.
解决方案:   Add "--clean".
文件:       runtime/indent/Makefile, runtime/indent/testdir/runtest.vim

Patch 8.1.0546
问题:       Modeline test with keymap fails.
解决方案:   Check that the keymap feature is available.
文件:       src/testdir/test_modeline.vim

Patch 8.1.0547
问题:       Modeline test with keymap still fails.
解决方案:   Check that the keymap feature is available for the failure assert.
文件:       src/testdir/test_modeline.vim

Patch 8.1.0548
问题:       Crash when job callback unloads a buffer. (James McCoy)
解决方案:   Don't round up the wait time to 10 msec in ui_inchar().
文件:       src/ui.c

Patch 8.1.0549
问题:       Netbeans test depends on README.txt contents.
解决方案:   Use a generated file instead.
文件:       src/testdir/test_netbeans.vim, src/testdir/test_netbeans.py

Patch 8.1.0550
问题:       Expression evaluation may repeat an error message. (Jason
            Franklin)
解决方案:   Increment did_emsg and check for the value when giving an error
            for the echo command.
文件:       src/message.c, src/eval.c, src/testdir/test108.ok

Patch 8.1.0551 (after 8.1.0550)
问题:       Expression evaluation may repeat an error message. (Jason
            Franklin)
解决方案:   Check for the value of did_emsg when giving an error
            for the :execute command.
文件:       src/eval.c

Patch 8.1.0552
问题:       Saved last search pattern may not be restored.
解决方案:   Call restore_last_search_pattern().  Add a check for balancing
            saving and restoring the last search pattern.
文件:       src/ex_getln.c, src/search.c

Patch 8.1.0553
问题:       It is not easy to edit a script that was sourced.
解决方案:   Add a count to ":scriptnames", so that ":script 40" edits the
            script with script ID 40.
文件:       src/ex_cmds.h, src/ex_cmds2.c, src/testdir/test_scriptnames.vim,
            src/Make_all.mak, src/testdir/Make_all.mak, runtime/doc/repeat.txt

Patch 8.1.0554
问题:       Popup menu overlaps with preview window.
解决方案:   Adjust the height computation. (Hirohito Higashi, closes #3414)
文件:       src/popupmnu.c, src/testdir/test_popup.vim,
            src/testdir/dumps/Test_popup_and_previewwindow_01.dump

Patch 8.1.0555
问题:       Crash when last search pat is set but not last substitute pat.
解决方案:   Do not mix up last search pattern and last substitute pattern.
            (closes #3647)
文件:       src/search.c, src/testdir/test_search.vim

Patch 8.1.0556
问题:       Saving/restoring search patterns share saved last_idx.
解决方案:   Use a separate saved last_idx for saving search patterns for
            functions and incremental search.
文件:       src/search.c

Patch 8.1.0557
问题:       Termdebug: gdb may use X.Y for breakpoint number. (Ryou Ezoe)
解决方案:   Handle X.Y breakpoint numbers. (Yasuhiro Matsumoto, close #3641)
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0558
问题:       Some MS-Windows instructions are outdated.
解决方案:   Update the uninstall instructions and the NSIS README. (Ken
            Takata, closes #3614)  Also update remark about diff.exe.
文件:       nsis/README.txt, uninstal.txt

Patch 8.1.0559
问题:       Command line completion not sufficiently tested.
解决方案:   Add more tests. (Dominique Pelle, closes #3622)
文件:       src/testdir/test_arglist.vim, src/testdir/test_filetype.vim,
            src/testdir/test_history.vim, src/testdir/test_messages.vim,
            src/testdir/test_syntax.vim

Patch 8.1.0560
问题:       Cannot use address type "other" with user command.
解决方案:   Add "other" to the list. (Daniel Hahler, closes #3655)  Also
            reject "%" for commands with "other".  Add some more tests.
文件:       src/ex_docmd.c, src/testdir/test_usercommands.vim

Patch 8.1.0561
问题:       MSVC error format has changed.
解决方案:   Make the space between the line number and colon optional.
文件:       src/option.h

Patch 8.1.0562
问题:       Parsing of 'diffopt' is slightly wrong.
解决方案:   Fix the parsing and add a test. (Jason Franklin, Christian
            Brabandt)
文件:       src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_09.dump,
            src/testdir/dumps/Test_diff_11.dump, src/testdir/screendump.vim

Patch 8.1.0563
问题:       Setting v:errors to a string give confusing error. (Christian
            Brabandt)
解决方案:   Change internal error into normal error message.
文件:       src/eval.c

Patch 8.1.0564
问题:       Setting v:errors to wrong type still possible.
解决方案:   Return after giving an error message. (Christian Brabandt)
文件:       src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.0565
问题:       Asan complains about reading before allocated block.
解决方案:   Workaround: Avoid offset from becoming negative.
文件:       src/gui.c

Patch 8.1.0566
问题:       SGR not enabled for mintty because $TERM is "xterm".
解决方案:   Detect mintty by the termresponse. (Ken Takata, closes #3667)
文件:       src/term.c

Patch 8.1.0567 (after 8.1.0565)
问题:       Error for NUL byte in ScreenLines goes unnoticed.
解决方案:   Add an internal error message.
文件:       src/gui.c

Patch 8.1.0568 (after 8.1.0567)
问题:       Error message for NUL byte in ScreenLines breaks Travis CI.
解决方案:   Use a normal message fornow.
文件:       src/gui.c

Patch 8.1.0569
问题:       Execute() always resets display column to zero. (Sha Liu)
解决方案:   Don't reset it to zero, restore the previous value. (closes #3669)
文件:       src/evalfunc.c, src/testdir/test_execute_func.vim

Patch 8.1.0570
问题:       'commentstring' not used when adding fold marker. (Maxim Kim)
解决方案:   Only use empty 'comments' middle when leader is empty. (Christian
            Brabandt, closes #3670)
文件:       src/misc1.c, src/testdir/test_fold.vim

Patch 8.1.0571 (after 8.1.0569)
问题:       Non-silent execute() resets display column to zero.
解决方案:   Keep the display column as-is.
文件:       src/evalfunc.c, src/testdir/test_execute_func.vim

Patch 8.1.0572
问题:       Stopping a job does not work properly on OpenBSD.
解决方案:   Do not use getpgid() to check the process group of the job
            process ID, always pass the negative process ID to kill().
            (George Koehler, closes #3656)
文件:       src/os_unix.c

Patch 8.1.0573
问题:       Cannot redefine user command without ! in same script
解决方案:   Allow redefining user command without ! in same script, like with
            functions.
文件:       src/ex_docmd.c, src/testdir/test_usercommands.vim,
            runtime/doc/map.txt

Patch 8.1.0574
问题:       'commentstring' not used when adding fold marker in C.
解决方案:   Require white space before middle comment part. (mostly by
            Hirohito Higashi)
文件:       src/misc1.c, src/testdir/test_fold.vim

Patch 8.1.0575
问题:       Termdebug: clearing multi-breakpoint does not work.
解决方案:   Delete all X.Y breakpoints.  Keep more information about placed
            breakpoints. (Ozaki Kiichi, closes #3641)
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0576
问题:       Indent script tests pick up installed scripts.
解决方案:   Use current runtime indent scripts.
文件:       runtime/indent/Makefile

Patch 8.1.0577
问题:       Tabpage right-click menu never shows "Close tab".
解决方案:   Always create the "Close tab" item but ignore the event if there
            is only one tab.
文件:       src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c, src/gui.c

Patch 8.1.0578
问题:       Cannot disable arabic, rightleft and farsi in configure.
解决方案:   Add configure flags. (Diego Fernando Carrión, closes #1867)
文件:       src/configure.ac, src/auto/configure, src/config.h.in,
            src/feature.h, src/Makefile

Patch 8.1.0579
问题:       Cannot attach properties to text.
解决方案:   First part of adding text properties.
文件:       Filelist, runtime/doc/Makefile, runtime/doc/eval.txt,
            runtime/doc/textprop.txt, src/Make_all.mak, src/Make_cyg_ming.mak,
            src/Make_mvc.mak, src/Makefile, src/buffer.c, src/edit.c,
            src/evalfunc.c, src/feature.h, src/memline.c, src/misc1.c,
            src/misc2.c, src/proto.h, src/proto/memline.pro,
            src/proto/textprop.pro, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/test_textprop.vim,
            src/textprop.c, src/userfunc.c, src/version.c

Patch 8.1.0580
问题:       Invalid memory access when using text properties.
解决方案:   Disable text properties for now.
文件:       src/feature.h

Patch 8.1.0581
问题:       Double free without the text properties feature.
解决方案:   Reset the dirty flag.
文件:       src/memline.c

Patch 8.1.0582
问题:       Text properties are not enabled.
解决方案:   Fix sizeof argument and re-enable the text properties feature.
            Fix memory leak.
文件:       src/feature.h, src/textprop.c

Patch 8.1.0583
问题:       Using illogical name for get_dict_number()/get_dict_string().
解决方案:   Rename to start with dict_.
文件:       src/dict.c, src/proto/dict.pro, src/edit.c, src/eval.c,
            src/evalfunc.c, src/quickfix.c, src/tag.c, src/terminal.c,
            src/textprop.c

Patch 8.1.0584
问题:       With search CTRL-L does not pick up composing characters.
解决方案:   Check for composing characters. (Christian Brabandt, closes #3682)
            [code change was accidentally included in 8.1.0579]
文件:       src/testdir/test_search.vim

Patch 8.1.0585
问题:       Undo test may fail on MS-Windows.
解决方案:   Also handle lower case drive letters.
文件:       src/testdir/test_undo.vim

Patch 8.1.0586
问题:       :digraph output is not easy to read.
解决方案:   Add highlighting for :digraphs. (Marcin Szamotulski, closes #3572)
            Also add section headers for :digraphs!.
文件:       src/ex_docmd.c, src/digraph.c, src/proto/digraph.pro,
            src/ex_cmds.h, runtime/doc/digraph.txt

Patch 8.1.0587
问题:       GvimExt: realloc() failing is not handled properly.
解决方案:   Check for NULL return. (Jan-Jaap Korpershoek, closes #3689)
文件:       src/GvimExt/gvimext.cpp

Patch 8.1.0588
问题:       Cannot define a sign with space in the text.
解决方案:   Allow for escaping characters. (Ben Jackson, closes #2967)
文件:       src/ex_cmds.c, src/testdir/test_signs.vim

Patch 8.1.0589
问题:       Compilation error in gvimext.cpp.
解决方案:   Return a value.  Also fix using uninitialized variable.
文件:       src/GvimExt/gvimext.cpp, src/dosinst.c

Patch 8.1.0590
问题:       When a job ends the closed channels are not handled.
解决方案:   When a job is detected to have ended, check the channels again.
            (closes #3530)
文件:       src/channel.c, src/proto/channel.pro, src/misc2.c

Patch 8.1.0591
问题:       Channel sort test is flaky.
解决方案:   Do not check if the job is running, it may have be done very fast.
文件:       src/testdir/test_channel.vim

Patch 8.1.0592
问题:       The libvterm tests are not run as part of Vim tests.
解决方案:   Add testing libvterm.
文件:       src/Makefile, src/libvterm/Makefile

Patch 8.1.0593
问题:       Illegal memory access in libvterm test.
解决方案:   Fix off-by-one error.
文件:       src/libvterm/src/vterm.c, src/libvterm/Makefile,
            src/libvterm/t/run-test.pl

Patch 8.1.0594
问题:       Libvterm tests fail to run on Mac.
解决方案:   Only run libvterm tests on Linux.
文件:       src/Makefile

Patch 8.1.0595
问题:       Libvterm tests are not run with coverage.
解决方案:   Adjust the Travis config.  Show the actually run commands.
文件:       .travis.yml, src/libvterm/Makefile

Patch 8.1.0596
问题:       Not all parts of printf() are tested.
解决方案:   Add a few more test cases. (Dominique Pelle, closes #3691)
文件:       src/testdir/test_expr.vim

Patch 8.1.0597
问题:       Cannot run test_libvterm from the top directory.
解决方案:   Add test target in toplevel Makefile.
文件:       Makefile

Patch 8.1.0598
问题:       Indent tests may use the wrong Vim binary.
解决方案:   Pass in the just built Vim binary.
文件:       Makefile

Patch 8.1.0599
问题:       Without the +eval feature the indent tests don't work.
解决方案:   Skip the body of the tests.
文件:       runtime/indent/testdir/cleantest.vim,
            runtime/indent/testdir/runtest.vim

Patch 8.1.0600
问题:       Channel test is flaky.
解决方案:   Add test to list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0601
问题:       A few compiler warnings.
解决方案:   Add type casts. (Mike Williams)
文件:       src/GvimExt/gvimext.cpp, src/memline.c, src/textprop.c

Patch 8.1.0602
问题:       DirChanged is also triggered when the directory didn't change.
            (Daniel Hahler)
解决方案:   Compare the current with the new directory. (closes #3697)
文件:       src/ex_docmd.c, src/testdir/test_autocmd.vim, src/misc2.c,
            src/testdir/test_autochdir.vim

Patch 8.1.0603
问题:       The :stop command is not tested.
解决方案:   Test :stop using a terminal window.
文件:       src/testdir/test_terminal.vim, src/testdir/shared.vim

Patch 8.1.0604
问题:       Autocommand test fails on MS-Windows.
解决方案:   Use pathcmp() instead of strcmp() to check if a directory differs.
文件:       src/ex_docmd.c, src/misc2.c

Patch 8.1.0605
问题:       Running make in the top directory echoes a comment.
解决方案:   Prefix with @. (closes #3698)
文件:       Makefile

Patch 8.1.0606
问题:       'cryptmethod' defaults to a very old method.
解决方案:   Default to "blowfish2", it is now widely available.
文件:       src/option.c, runtime/doc/options.txt

Patch 8.1.0607
问题:       Proto files are not in sync with the source code.
解决方案:   Update the proto files.
文件:       src/os_mswin.c, src/proto/buffer.pro, src/proto/ex_cmds.pro,
            src/proto/ex_getln.pro, src/proto/misc2.pro,
            src/proto/userfunc.pro

Patch 8.1.0608
问题:       Coveralls is not updating.
解决方案:   Adjust path in Travis config.
文件:       .travis.yml

Patch 8.1.0609
问题:       MS-Windows: unused variable, depending on the Ruby version.
解决方案:   Put ruby_sysinit and NtInitialize inside #ifdef and make them
            consistent. (Ken Takata)
文件:       src/if_ruby.c

Patch 8.1.0610
问题:       MS-Windows ctags file list differs from Unix.
解决方案:   Define TAGS_FILES in the common makefile. (partly by Ken Takata)
文件:       src/Make_all.mak, src/Makefile, src/Make_mvc.mak,
            src/Make_cyg_ming.mak

Patch 8.1.0611
问题:       Crash when using terminal with long composing characters.
解决方案:   Make space for all characters. (Yasuhiro Matsumoto, closes #3619,
            closes #3703)
文件:       src/terminal.c

Patch 8.1.0612
问题:       Cannot use two global runtime dirs with configure.
解决方案:   Support a comma in --with-global-runtime. (James McCoy,
            closes #3704)
文件:       src/config.h.in, src/configure.ac, src/feature.h, src/os_unix.h,
            src/auto/configure, src/Makefile

Patch 8.1.0613
问题:       When executing an insecure function the secure flag is stuck.
            (Gabriel Barta)
解决方案:   Restore "secure" instead of decrementing it. (closes #3705)
文件:       src/testdir/test_autocmd.vim, src/option.c, src/buffer.c

Patch 8.1.0614
问题:       Placing signs can be complicated.
解决方案:   Add functions for defining and placing signs.  Introduce a group
            name to avoid different plugins using the same signs. (Yegappan
            Lakshmanan, closes #3652)
文件:       runtime/doc/eval.txt, runtime/doc/sign.txt,
            runtime/doc/usr_41.txt, src/alloc.h, src/buffer.c, src/evalfunc.c,
            src/ex_cmds.c, src/globals.h, src/list.c, src/misc2.c,
            src/netbeans.c, src/proto/buffer.pro, src/proto/ex_cmds.pro,
            src/proto/list.pro, src/proto/misc2.pro, src/structs.h,
            src/testdir/test_signs.vim, src/workshop.c

Patch 8.1.0615
问题:       Get_tv function names are not consistent.
解决方案:   Rename to tv_get.
文件:       src/eval.c, src/proto/eval.pro, src/channel.c, src/dict.c,
            src/evalfunc.c, src/list.c, src/message.c, src/tag.c,
            src/terminal.c, src/textprop.c, src/window.c, src/ex_cmds.c,
            src/os_unix.c, src/os_win32.c, src/json.c, src/regexp.c,
            src/edit.c, src/misc2.c, src/popupmnu.c

Patch 8.1.0616
问题:       NSIS installer is outdated.
解决方案:   Use modern syntax, MUI2 and make it work better. Add translations.
            (Guopeng Wen, Ken Takata, closes #3501)
文件:       Filelist, nsis/gvim.nsi, nsis/icons/header.svg,
            nsis/icons/welcome.svg, nsis/icons/header.bmp,
            nsis/icons/un_header.bmp, nsis/icons/uninstall.bmp,
            nsis/icons/welcome.bmp, nsis/lang/danish.nsi, nsis/lang/dutch.nsi,
            nsis/lang/english.nsi, nsis/lang/german.nsi,
            nsis/lang/italian.nsi, nsis/lang/japanese.nsi,
            nsis/lang/simpchinese.nsi, nsis/lang/tradchinese.nsi,
            src/dosinst.c

Patch 8.1.0617 (after 8.1.0616)
问题:       NSIS installer gets two files from the wrong directory.
解决方案:   Change ${VIMRT} to "..\".
文件:       nsis/gvim.nsi

Patch 8.1.0618
问题:       term_getjob() does not return v:null as documented.
解决方案:   Do return v:null. (Damien)  Add a test.
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0619
问题:       :echomsg and :echoerr do not handle List and Dict like :echo does.
            (Daniel Hahler)
解决方案:   Be more tolerant about the expression result type.
文件:       src/eval.c, src/proto/eval.pro, src/evalfunc.c,
            src/proto/evalfunc.pro, runtime/doc/eval.txt,
            src/testdir/test_messages.vim, src/message.c

Patch 8.1.0620
问题:       Overruling CONF_ARGS from the environment no longer works. (Tony
            Mechelynck)
解决方案:   Do not define any CONF_ARGS by default.
文件:       src/Makefile

Patch 8.1.0621
问题:       Terminal debugger does not handle unexpected debugger exit.
解决方案:   Check for debugger job ended and close unused buffers. (Damien)
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.0622
问题:       Adding quickfix items marks items as valid errors. (Daniel Hahler)
解决方案:   Check when items are valid. (Yegappan Lakshmanan, closes #3683,
            closes #3633)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0623
问题:       Iterating through window frames is repeated.
解决方案:   Define FOR_ALL_FRAMES. (Yegappan Lakshmanan)
文件:       src/ex_docmd.c, src/globals.h, src/screen.c, src/window.c

Patch 8.1.0624 (after 8.1.0620)
问题:       Overruling CONF_ARGS from the environment still does not work.
            (Tony Mechelynck)
解决方案:   Add back CONF_ARGS next to the new numbered ones.
文件:       src/Makefile

Patch 8.1.0625
问题:       MS-Windows: terminal test fails in white console.
解决方案:   Accept both white and black background colors.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0626
问题:       MS-Windows: no resize to fit parent when using --windowid.
解决方案:   Pass FALSE for "mustset" in gui_set_shellsize(). (Agorgianitis
            Loukas, closes #3616)
文件:       src/gui.c

Patch 8.1.0627
问题:       Python cannot handle function name of script-local function.
解决方案:   Use <SNR> instead of the special byte code. (Ozaki Kiichi, closes
            #3681)
文件:       src/if_py_both.h, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim

Patch 8.1.0628
问题:       Compiler warning on MS-Windows.
解决方案:   Add type cast. (Mike Williams)
文件:       src/if_py_both.h

Patch 8.1.0629
问题:       "gn" selects the wrong text with a multi-line match.
解决方案:   Get the end position from searchit() directly. (closes #3695)
文件:       src/testdir/test_gn.vim, src/search.c, src/proto/search.pro,
            src/edit.c, src/evalfunc.c, src/ex_docmd.c, src/ex_getln.c,
            src/normal.c

Patch 8.1.0630
问题:      "wincmd p" does not work after using an autocmd window.
解决方案:   Store "prevwin" in aco_save_T. (Christian Brabandt, closes #3690)
文件:       src/fileio.c, src/structs.h, src/testdir/test_window_cmd.vim

Patch 8.1.0631
问题:       Test for :stop fails on Arch.
解决方案:   Check five lines for the expected output. (closes #3714)
文件:       src/testdir/test_terminal.vim

Patch 8.1.0632
问题:       Using sign group names is inefficient.
解决方案:   Store group names in a hash table and use a reference to them.
            Also remove unnecessary use of ":exe" from the tests.  (Yegappan
            Lakshmanan, closes #3715)
文件:       src/buffer.c, src/ex_cmds.c, src/structs.h,
            src/testdir/test_signs.vim

Patch 8.1.0633
问题:       Crash when out of memory while opening a terminal window.
解决方案:   Handle out-of-memory more gracefully.
文件:       src/terminal.c, src/libvterm/src/vterm.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c

Patch 8.1.0634
问题:       Text properties cannot cross line boundaries.
解决方案:   Support multi-line text properties.
文件:       src/textprop.c, src/testdir/test_textprop.vim,
            runtime/doc/eval.txt

Patch 8.1.0635
问题:       Coverity complains about null pointer use.
解决方案:   Avoid using a null pointer.
文件:       src/evalfunc.c

Patch 8.1.0636
问题:       line2byte() gives wrong values with text properties. (Bjorn Linse)
解决方案:   Compute byte offsets differently when text properties were added.
            (closes #3718)
文件:       src/structs.h, src/textprop.c, src/proto/textprop.pro,
            src/memline.c, src/testdir/test_textprop.vim

Patch 8.1.0637
问题:       Nsis file no longer used.
解决方案:   Remove the file. (Ken Takata)
文件:       nsis/vimrc.ini, Filelist

Patch 8.1.0638
问题:       Text property highlighting is off by one column. (Bjorn Linse)
解决方案:   Update text property highlighting earlier.  Let it overrule syntax
            highlighting.
文件:       src/structs.h, src/screen.c

Patch 8.1.0639
问题:       text properties test fails on MS-Windows
解决方案:   Set fileformat to "unix".
文件:       src/testdir/test_textprop.vim

Patch 8.1.0640
问题:       Get E14 while typing command :tab with 'incsearch' set.
解决方案:   Do not give an error when looking for the command. (Hirohito
            Higashi)
文件:       src/testdir/test_search.vim, src/ex_docmd.c

Patch 8.1.0641
问题:       No check for out-of-memory when converting regexp.
解决方案:   Bail out when lalloc() returns NULL. (John Marriott)
文件:       src/regexp_nfa.c

Patch 8.1.0642
问题:       swapinfo() leaks memory. (Christian Brabandt)
解决方案:   Avoid allocating the strings twice.
文件:       src/memline.c, src/dict.c, src/proto/dict.pro

Patch 8.1.0643
问题:       Computing byte offset wrong. (Bjorn Linse)
解决方案:   Use the right variable for array index.
文件:       src/memline.c, src/testdir/test_textprop.vim

Patch 8.1.0644
问题:       Finding next sign ID is inefficient.
解决方案:   Add next_sign_id. (Yegappan Lakshmanan, closes #3717)
文件:       runtime/doc/eval.txt, src/buffer.c, src/evalfunc.c, src/ex_cmds.c,
            src/globals.h, src/main.c, src/proto/buffer.pro, src/structs.h,
            src/testdir/test_signs.vim

Patch 8.1.0645
问题:       Coverity warns for possible use of NULL pointer.
解决方案:   Check return value of vterm_obtain_screen().
文件:       src/terminal.c

Patch 8.1.0646
问题:       Cannot build with Ruby 2.6.0.
解决方案:   Add rb_ary_detransient(). (Ozaki Kiichi, closes #3724)
文件:       src/if_ruby.c

Patch 8.1.0647
问题:       MS-Windows: balloon_show() does not handle wide characters.
解决方案:   Use CreateWindowExW(). (Yasuhiro Matsumoto, closes #3708)
文件:       src/gui_w32.c

Patch 8.1.0648
问题:       Custom operators can't act upon a forced motion. (Christian
            Wellenbrock)
解决方案:   Add the forced motion to the mode() result. (Christian Brabandt,
            closes #3490)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/globals.h, src/normal.c,
            src/testdir/test_mapping.vim

Patch 8.1.0649
问题:       setjmp() variables defined globally are used in one file.
解决方案:   Move the declarations to that file.
文件:       src/globals.h, src/os_unix.c

Patch 8.1.0650
问题:       Command line argument -q [errorfile] is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3730)
文件:       src/testdir/test_startup.vim

Patch 8.1.0651
问题:       :args \"foo works like :args without argument.
解决方案:   Fix check for empty argument. (closes #3728)
文件:       src/ex_cmds2.c, src/testdir/test_arglist.vim

Patch 8.1.0652
问题:       Freeing memory for balloon eval too early.
解决方案:   Store the pointer in BalloonEval and free it later. (Yasuhiro
            Matsumoto, closes #3725)
文件:       src/beval.h, src/gui_w32.c

Patch 8.1.0653 (after 8.1.0651)
问题:       Arglist test fails on MS-windows.
解决方案:   Only use a file name with a double quote on Unix.
文件:       src/testdir/test_arglist.vim

Patch 8.1.0654
问题:       When deleting a line text property flags are not adjusted.
解决方案:   Adjust text property flags in preceding and following lines.
文件:       src/memline.c, src/misc2.c, src/proto/misc2.pro,
            src/testdir/test_textprop.vim

Patch 8.1.0655
问题:       When appending a line text property flags are not added.
解决方案:   Add text properties to a newly added line.
文件:       src/memline.c, src/testdir/test_textprop.vim, src/textprop.c

Patch 8.1.0656
问题:       Trying to reconnect to X server may cause problems.
解决方案:   Do no try reconnecting when exiting. (James McCoy)
文件:       src/os_unix.c

Patch 8.1.0657 (after 8.1.0656)
问题:       Get error for using regexp recursively. (Dominique Pelle)
解决方案:   Do no check if connection is desired.
文件:       src/os_unix.c

Patch 8.1.0658
问题:       Deleting signs and completion for :sign is insufficient.
解决方案:   Add deleting signs in a specified or any group from the current
            cursor location.  Add group and priority to sign command
            completion. Add tests for different sign unplace commands. Update
            help text.  Add tests for sign jump with group. Update help for
            sign jump. (Yegappan Lakshmanan, closes #3731)
文件:       runtime/doc/sign.txt, src/buffer.c, src/evalfunc.c, src/ex_cmds.c,
            src/netbeans.c, src/proto/buffer.pro, src/proto/ex_cmds.pro,
            src/testdir/test_signs.vim

Patch 8.1.0659 (after 8.1.0658)
问题:       Build failure without the sign feature.
解决方案:   Put the sign struct declarations outside of the #ifdef.
文件:       src/structs.h

Patch 8.1.0660
问题:       sign_unplace() may leak memory.
解决方案:   Free the group name before returning.  Add a few more tests.
            (Yegappan Lakshmanan)
文件:       src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.0661
问题:       Clipboard regexp might be used recursively.
解决方案:   Check for recursive use and bail out.
文件:       src/regexp.c, src/proto/regexp.pro, src/os_unix.c

Patch 8.1.0662
问题:       Needlessly searching for tilde in string.
解决方案:   Only check the first character. (James McCoy, closes #3734)
文件:       src/misc1.c

Patch 8.1.0663
问题:       Text property display wrong when 'number' is set. (Dominique
            Pelle)
解决方案:   Compare with "vcol"  instead of "col".
文件:       src/screen.c

Patch 8.1.0664
问题:       Configure "fail-if-missing" does not apply to the enable-gui
            argument. (Rhialto)
解决方案:   Make configure fail if a GUI was specified and "fail-if-missing"
            is enabled and the GUI test fails.
文件:       src/configure.ac, src/auto/configure

Patch 8.1.0665
问题:       Text property display wrong when 'spell' is set. (Dominique Pelle)
解决方案:   Remove unnecessary assignment to char_attr.  Combine attributes if
            needed.  Add a screenshot test.
文件:       src/screen.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0666 (after 8.1.0665)
问题:       Text property test fails.
解决方案:   Update screenshot.
文件:       src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0667 (after 8.1.0665)
问题:       Textprop test leaves file behind.
解决方案:   Delete the file. (Dominique Pelle, closes #3743)
文件:       src/testdir/test_textprop.vim

Patch 8.1.0668
问题:       No test for overstrike mode in the command line.
解决方案:   Add a test. (Dominique Pelle, closes #3742)
文件:       src/testdir/test_cmdline.vim

Patch 8.1.0669
问题:       The ex_sign() function is too long.
解决方案:   Refactor the function.  Add a bit more testing. (Yegappan
            Lakshmanan, closes #3745)
文件:       src/testdir/test_signs.vim, src/ex_cmds.c

Patch 8.1.0670
问题:       Macro for popup menu width is unused.
解决方案:   Remove it. (Hirohito Higashi)
文件:       src/popupmnu.c

Patch 8.1.0671
问题:       Cursor in the wrong column after auto-formatting.
解决方案:   Check for deleting more spaces than adding. (closes #3748)
文件:       src/ops.c, src/testdir/test_textformat.vim, src/mark.c,
            src/proto/mark.pro, src/misc1.c

Patch 8.1.0672
问题:       The Lua interface doesn't know about v:null.
解决方案:   Add Lua support for v:null. (Uji, closes #3744)
文件:       src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.0673
问题:       Functionality for signs is spread out over several files.
解决方案:   Move most of the sign functionality into sign.c. (Yegappan
            Lakshmanan, closes #3751)
文件:       Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.txt, src/buffer.c,
            src/evalfunc.c, src/ex_cmds.c, src/proto.h, src/proto/buffer.pro,
            src/proto/ex_cmds.pro, src/proto/sign.pro, src/sign.c

Patch 8.1.0674
问题:       Leaking memory when updating a single line.
解决方案:   Do not call start_search_hl() twice.
文件:       src/screen.c

Patch 8.1.0675
问题:       Text property column is screen columns is not practical.
解决方案:   Use byte values for the column.
文件:       src/structs.h, src/textprop.c, src/proto/textprop.pro,
            runtime/doc/eval.txt, runtime/doc/textprop.txt,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0676
问题:       Textprop screendump test fails.
解决方案:   Add missing changes.
文件:       src/screen.c

Patch 8.1.0677
问题:       Look-behind match may use the wrong line number. (Dominique Pelle)
解决方案:   Use the line number in regsave instead of the one in behind_pos,
            we may be looking at the previous line. (closes #3749)
文件:       src/regexp.c

Patch 8.1.0678
问题:       Text properties as not adjusted for inserted text.
解决方案:   Adjust text properties when inserting text.
文件:       src/misc1.c, src/proto/misc1.pro, src/textprop.c,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0679
问题:       Sign functions do not take buffer argument as documented.
解决方案:   Use get_buf_tv(). (Yegappan Lakshmanan, closes #3755)
文件:       src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.0680
问题:       Not easy to see what features are unavailable.
解决方案:   Highlight disabled features in the :version output. (Nazri Ramliy,
            closes #3756)
文件:       src/version.c

Patch 8.1.0681
问题:       Text properties as not adjusted for deleted text.
解决方案:   Adjust text properties when backspacing to delete text.
文件:       src/edit.c, src/misc1.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.0682
问题:       Text properties are not adjusted when backspacing replaced text.
解决方案:   Keep text properties on text restored in replace mode.
文件:       src/edit.c, src/textprop.c,  src/globals.h,
            src/testdir/test_textprop.vim

Patch 8.1.0683
问题:       Spell highlighting does not always end. (Gary Johnson)
解决方案:   Also reset char_attr when spell errors are highlighted.
文件:       src/screen.c

Patch 8.1.0684
问题:       Warnings from 64-bit compiler.
解决方案:   Add type casts. (Mike Williams)
文件:       src/memline.c, src/textprop.c

Patch 8.1.0685
问题:       get_buf_tv() is named inconsistently.
解决方案:   Rename it to tv_get_buf(). (Yegappan Lakshmanan, closes #3759)
文件:       src/evalfunc.c, src/proto/evalfunc.pro, src/terminal.c,
            src/textprop.c

Patch 8.1.0686
问题:       When 'y' is in 'cpoptions' yanking for the clipboard changes redo.
解决方案:   Do not use the 'y' flag when "gui_yank" is TRUE. (Andy Massimino,
            closes #3760)
文件:       src/normal.c

Patch 8.1.0687
问题:       Sentence text object in Visual mode is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3758)
文件:       src/testdir/test_visual.vim

Patch 8.1.0688
问题:       Text properties are not restored by undo.
解决方案:   Also save text properties for undo.
文件:       src/structs.h, src/undo.c, src/memline.c, src/proto/memline.pro

Patch 8.1.0689 (after 8.1.0688)
问题:       Undo with text properties not tested.
解决方案:   Add a test function.
文件:       src/testdir/test_textprop.vim

Patch 8.1.0690
问题:       setline() and setbufline() do not clear text properties.
解决方案:   Clear text properties when setting the text.
文件:       src/evalfunc.c, src/testdir/test_textprop.vim

Patch 8.1.0691
问题:       Text properties are not adjusted for :substitute.
解决方案:   Adjust text properties as well as possible.
文件:       src/ex_cmds.c, src/textprop.c, src/proto/textprop.pro,
            src/testdir/test_textprop.vim

Patch 8.1.0692
问题:       If a buffer was deleted a channel can't write to it.
解决方案:   When the buffer exists but was unloaded, prepare it for writing.
            (closes #3764)
文件:       src/channel.c, src/testdir/test_channel.vim

Patch 8.1.0693 (after 8.1.0692)
问题:       Channel test fails sometimes.
解决方案:   Avoid race condition.
文件:       src/testdir/test_channel.vim

Patch 8.1.0694
问题:       When using text props may free memory that is not allocated.
            (Andy Massimino)
解决方案:   Allocate the line when adjusting text props. (closes #3766)
文件:       src/textprop.c

Patch 8.1.0695
问题:       Internal error when using :popup.
解决方案:   When a menu only exists in Terminal mode give an error. (Naruhiko
            Nishino, closes #3765)
文件:       runtime/doc/gui.txt, src/globals.h, src/menu.c, src/popupmnu.c,
            src/testdir/test_popup.vim

Patch 8.1.0696
问题:       When test_edit fails 'insertmode' may not be reset and the next
            test may get stuck. (James McCoy)
解决方案:   Always reset 'insertmode' after executing a test.  Avoid that an
            InsertCharPre autocommand or a 'complete' function can change the
            state. (closes #3768)
文件:       src/testdir/runtest.vim, src/edit.c

Patch 8.1.0697
问题:       ":sign place" requires the buffer argument.
解决方案:   Make the argument optional.  Also update the help and clean up the
            sign test. (Yegappan Lakshmanan, closes #3767)
文件:       runtime/doc/eval.txt, runtime/doc/sign.txt, src/sign.c,
            src/testdir/test_signs.vim

Patch 8.1.0698
问题:       Clearing the window is used too often, causing the command line
            to be cleared when opening a tab. (Miroslav Koškár)
解决方案:   Use NOT_VALID instead of CLEAR.  (suggested by Jason Franklin,
            closes #630)  Also do this for a few other places where clearing
            the screen isn't really needed.
文件:       src/window.c

Patch 8.1.0699
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Add a dummy init.
文件:       src/edit.c

Patch 8.1.0700 (after 8.1.0698)
问题:       Using "gt" sometimes does not redraw a tab. (Jason Franklin)
解决方案:   Always set must_redraw in redraw_all_later().
文件:       src/screen.c

Patch 8.1.0701
问题:       Sign message not translated and inconsistent spacing.
解决方案:   Add _() for translation.  Add a space. (Ken Takata)  Also use
            MSG_BUF_LEN instead of BUFSIZ.
文件:       src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0702
问题:       ":sign place" only uses the current buffer.
解决方案:   List signs for all buffers when there is no buffer argument.
            Fix error message for invalid buffer name in sign_place().
            (Yegappan Lakshmanan, closes #3774)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/sign.c,
            src/testdir/test_signs.vim

Patch 8.1.0703
问题:       Compiler warnings with 64-bit compiler.
解决方案:   Change types, add type casts. (Mike Williams)
文件:       src/textprop.c, src/undo.c

Patch 8.1.0704
问题:       Building with Ruby 2.6 gives compiler warnings.
解决方案:   Define a stub for rb_ary_detransient. (Ozaki Kiichi, closes #3779)
文件:       src/if_ruby.c

Patch 8.1.0705
问题:       :colorscheme isn't tested enough
解决方案:   Improve test coverage of :colorscheme. (Dominique Pelle, closes
            #3777)  Remove unnecessary sleep.
文件:       src/testdir/test_gui.vim

Patch 8.1.0706
问题:       Tabline is not always redrawn when something that is used in
            'tabline' changes.
解决方案:   Add ":redrawtabline" so that a plugin can at least cause the
            redraw when needed.
文件:       runtime/doc/various.txt, runtime/doc/options.txt, src/ex_docmd.c,
            src/ex_cmds.h, src/screen.c, src/proto/screen.pro,
            src/ex_cmdidxs.h, src/testdir/test_tabline.vim

Patch 8.1.0707
问题:       Text property columns are not adjusted for changed indent.
解决方案:   Adjust text properties.
文件:       src/misc1.c, src/testdir/test_textprop.vim

Patch 8.1.0708
问题:       Third argument for redrawWinline() is always FALSE.
解决方案:   Drop the argument. (neovim #9479)
文件:       src/edit.c, src/move.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0709
问题:       Windows are updated for every added/deleted sign.
解决方案:   Do not call update_debug_sign().  Only redraw when the line with
            the sign is visible.  (idea from neovim #9479)
文件:       src/sign.c, src/screen.c, src/proto/screen.pro

Patch 8.1.0710
问题:       When using timers may wait for job exit quite long.
解决方案:   Return from ui_wait_for_chars_or_timer() when a job or channel
            needs to be handled. (Ozaki Kiichi, closes #3783)
文件:       src/ui.c, src/testdir/test_channel.vim

Patch 8.1.0711
问题:       Test files still use function!.
解决方案:   Remove the exclamation mark.  Fix overwriting a function.
文件:       src/testdir/test49.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_charsearch.vim,
            src/testdir/test_charsearch_utf8.vim,
            src/testdir/test_display.vim, src/testdir/test_edit.vim,
            src/testdir/test_eval_func.vim, src/testdir/test_fnameescape.vim,
            src/testdir/test_getcwd.vim, src/testdir/test_highlight.vim,
            src/testdir/test_hlsearch.vim, src/testdir/test_ins_complete.vim,
            src/testdir/test_lambda.vim, src/testdir/test_listdict.vim,
            src/testdir/test_listlbr.vim, src/testdir/test_listlbr_utf8.vim,
            src/testdir/test_marks.vim, src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_messages.vim, src/testdir/test_number.vim,
            src/testdir/test_options.vim, src/testdir/test_partial.vim,
            src/testdir/test_smartindent.vim, src/testdir/test_substitute.vim,
            src/testdir/test_system.vim, src/testdir/test_terminal.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_utf8.vim,
            src/testdir/test_utf8_comparisons.vim,
            src/testdir/test_vartabs.vim, src/testdir/test_vimscript.vim,
            src/testdir/test_window_cmd.vim, src/testdir/test_xxd.vim

Patch 8.1.0712
问题:       MS-Windows build instructions are a bit outdated.
解决方案:   Update the instructions. (Ken Takata)
文件:       src/INSTALLpc.txt

Patch 8.1.0713
问题:       Images for NSIS take up too much space.
解决方案:   Put the images in a zip file.
文件:       nsis/icons.zip, nsis/icons/disabled.bmp, nsis/icons/enabled.bmp,
            nsis/icons/header.bmp, nsis/icons/header.svg,
            nsis/icons/un_header.bmp, nsis/icons/uninstall.bmp,
            nsis/icons/vim_16c.ico, nsis/icons/vim_uninst_16c.ico,
            nsis/icons/welcome.bmp, nsis/icons/welcome.svg,
            nsis/README.txt, Filelist, Makefile

Patch 8.1.0714
问题:       Unnecessary #if lines in GTK code.
解决方案:   Remove the #if. (Ken Takata, closes #3785)
文件:       src/gui_beval.c, src/if_mzsch.c

Patch 8.1.0715
问题:       Superfluous call to redraw_win_later().
解决方案:   Remove the call.
文件:       src/move.c

Patch 8.1.0716
问题:       Get warning message when 'completefunc' returns nothing.
解决方案:   Allow for returning v:none to suppress the warning message.
            (Yasuhiro Matsumoto, closes #3789)
文件:       runtime/doc/insert.txt, src/edit.c,
            src/testdir/test_ins_complete.vim

Patch 8.1.0717
问题:       There is no function for the ":sign jump" command.
解决方案:   Add the sign_jump() function. (Yegappan Lakshmanan, closes #3780)
文件:       runtime/doc/eval.txt, runtime/doc/sign.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/proto/sign.pro,
            src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0718
问题:       A couple compiler warnings.
解决方案:   Rename shadowed variables.  Add UNUSED.
文件:       src/misc1.c

Patch 8.1.0719
问题:       Too many #ifdefs.
解决方案:   Always build with the +visualextra feature.
文件:       src/evalfunc.c, src/version.c, src/normal.c, src/ops.c,
            src/feature.h, runtime/doc/various.txt

Patch 8.1.0720
问题:       Cannot easily change the current quickfix list index.
解决方案:   Add the "idx" argument to setqflist(). (Yegappan Lakshmanan,
            closes #3701)
文件:       runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0721
问题:       Conceal mode is not sufficiently tested.
解决方案:   Add screendump tests.  Check all 'concealcursor' values.
文件:       src/testdir/test_conceal.vim, src/Make_all.mak,
            src/testdir/Make_all.mak
            src/testdir/dumps/Test_conceal_two_windows_01.dump,
            src/testdir/dumps/Test_conceal_two_windows_02.dump,
            src/testdir/dumps/Test_conceal_two_windows_03.dump,
            src/testdir/dumps/Test_conceal_two_windows_04.dump,
            src/testdir/dumps/Test_conceal_two_windows_05.dump,
            src/testdir/dumps/Test_conceal_two_windows_06i.dump,
            src/testdir/dumps/Test_conceal_two_windows_06v.dump,
            src/testdir/dumps/Test_conceal_two_windows_06c.dump,
            src/testdir/dumps/Test_conceal_two_windows_06n.dump,
            src/testdir/dumps/Test_conceal_two_windows_07i.dump,
            src/testdir/dumps/Test_conceal_two_windows_07v.dump,
            src/testdir/dumps/Test_conceal_two_windows_07c.dump,
            src/testdir/dumps/Test_conceal_two_windows_07n.dump,
            src/testdir/dumps/Test_conceal_two_windows_08i.dump,
            src/testdir/dumps/Test_conceal_two_windows_08v.dump,
            src/testdir/dumps/Test_conceal_two_windows_08c.dump,
            src/testdir/dumps/Test_conceal_two_windows_08n.dump,
            src/testdir/dumps/Test_conceal_two_windows_09i.dump,
            src/testdir/dumps/Test_conceal_two_windows_09v.dump,
            src/testdir/dumps/Test_conceal_two_windows_09c.dump,
            src/testdir/dumps/Test_conceal_two_windows_09n.dump

Patch 8.1.0722
问题:       Cannot build without the virtualedit feature.
解决方案:   Make getviscol2() always available.
文件:       src/misc2.c, src/proto/misc2.pro, src/ops.c

Patch 8.1.0723
问题:       Cannot run specific test when in src/testdir the same was as in
            the src directory.
解决方案:   Move build rule to src/testdir/Makefile.
文件:       src/testdir/Make_all.mak, src/testdir/Make_amiga.mak,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak,
            src/Makefile, src/Make_all.mak, src/testdir/Makefile,
            src/testdir/README.txt, src/Make_mvc.mak

Patch 8.1.0724
问题:       Build for MinGW fails.
解决方案:   Avoid specifying dependencies in included makefile.
文件:       src/testdir/Make_all.mak, src/testdir/Makefile,
            src/testdir/Make_dos.mak, src/testdir/Make_ming.mak

Patch 8.1.0725
问题:       Conceal mode is not completely tested.
解决方案:   Add tests for moving the cursor in Insert mode.
文件:       src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_two_windows_10.dump,
            src/testdir/dumps/Test_conceal_two_windows_11.dump,
            src/testdir/dumps/Test_conceal_two_windows_12.dump,
            src/testdir/dumps/Test_conceal_two_windows_13.dump

Patch 8.1.0726
问题:       Redrawing specifically for conceal feature.
解决方案:   Use generic redrawing methods.
文件:       src/edit.c, src/gui.c, src/main.c, src/normal.c, src/screen.c,
            src/proto/screen.pro, src/window.c

Patch 8.1.0727
问题:       Compiler warning for sprintf() argument.
解决方案:   Add type cast.
文件:       src/dosinst.c

Patch 8.1.0728
问题:       Cannot avoid breaking after a single space.
解决方案:   Add the 'p' flag to 'formatoptions'. (Tom Ryder)
文件:       runtime/doc/change.txt, src/edit.c, src/option.h,
            src/testdir/test_textformat.vim

Patch 8.1.0729
问题:       There is a SourcePre autocommand event but not a SourcePost.
解决方案:   Add the SourcePost autocommand event. (closes #3739)
文件:       src/vim.h, src/fileio.c, src/ex_cmds2.c, runtime/doc/autocmd.txt,
            src/testdir/test_source.vim, src/testdir/Make_all.mak

Patch 8.1.0730
问题:       Compiler warning for get_buf_arg() unused.
解决方案:   Add #ifdef. (John Marriott)
文件:       src/evalfunc.c

Patch 8.1.0731
问题:       JS encoding does not handle negative infinity.
解决方案:   Add support for negative infinity for JS encoding. (Dominique
            Pelle, closes #3792)
文件:       runtime/doc/eval.txt, src/json.c, src/testdir/test_json.vim

Patch 8.1.0732
问题:       Cannot build without the eval feature.
解决方案:   Make a copy of the sourced file name.
文件:       src/ex_cmds2.c

Patch 8.1.0733
问题:       Too many #ifdefs for the multi-byte feature.
解决方案:   Tentatively always enable the multi-byte feature.  If you have a
            problem with this, please discuss on the Vim maillist.
文件:       src/configure.ac, src/auto/configure, src/feature.h, src/Makefile,
            src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.0734
问题:       The hlsearch state is not stored in a session file.
解决方案:   Add "nohlsearch" if appropriate. (Jason Franklin)
文件:       src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0735
问题:       Cannot handle binary data.
解决方案:   Add the Blob type. (Yasuhiro Matsumoto, closes #3638)
文件:       runtime/doc/eval.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_ruby.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/Makefile, src/blob.c, src/channel.c, src/eval.c,
            src/evalfunc.c, src/if_perl.xs, src/if_py_both.h, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/json.c, src/netbeans.c,
            src/proto.h, src/proto/blob.pro, src/proto/channel.pro,
            src/structs.h, src/testdir/Make_all.mak, src/vim.h, src/globals.h,
            src/testdir/test_blob.vim, src/testdir/test_channel.vim

Patch 8.1.0736
问题:       Code for Blob not sufficiently tested.
解决方案:   Add more tests.  Fix uncovered crash.  Add test_null_blob().
文件:       src/testdir/test_blob.vim, src/testdir/test_assign.vim, src/eval.c,
            src/testdir/test_eval_stuff.vim, src/testdir/test_lambda.vim,
            runtime/doc/eval.txt, src/evalfunc.c, src/blob.c,
            src/testdir/test49.vim

Patch 8.1.0737
问题:       Compiler warning for uninitialized variable.
解决方案:   Add initialization. (John Marriott)
文件:       src/eval.c

Patch 8.1.0738
问题:       Using freed memory, for loop over blob leaks memory.
解决方案:   Clear pointer after freeing memory.  Decrement reference count
            after for loop over blob.
文件:       src/eval.c

Patch 8.1.0739
问题:       Text objects in not sufficiently tested.
解决方案:   Add a few more test cases. (Dominique Pelle, closes #3795)
文件:       src/testdir/test_visual.vim

Patch 8.1.0740
问题:       Tcl test fails.
解决方案:   When the argument is empty don't give an error, instead rely on
            the error reporting higher up.
文件:       src/eval.c

Patch 8.1.0741
问题:       Viminfo with Blob is not tested.
解决方案:   Extend the viminfo test.  Fix reading a blob.  Fixed storing a
            special variable value.
文件:       src/testdir/test_viminfo.vim, src/eval.c, src/blob.c,
            src/proto/blob.pro

Patch 8.1.0742
问题:       Not all Blob operations are tested.
解决方案:   Add more testing for Blob.
文件:       src/testdir/test_blob.vim, src/evalfunc.c,
            src/testdir/test_eval_stuff.vim

Patch 8.1.0743
问题:       Giving error messages is not flexible.
解决方案:   Add semsg().  Change argument from "char_u *" to "char *", also
            for msg() and get rid of most MSG macros. (Ozaki Kiichi, closes
            #3302)  Also make emsg() accept a "char *" argument.  Get rid of
            an enormous number of type casts.
文件:       src/blob.c, src/blowfish.c, src/buffer.c, src/channel.c,
            src/crypt.c, src/dict.c, src/diff.c, src/digraph.c, src/edit.c,
            src/eval.c, src/evalfunc.c, src/ex_cmds.c, src/ex_cmds.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
            src/farsi.h, src/fileio.c, src/fold.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_beval.c, src/gui_gtk_x11.c, src/gui_mac.c,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c, src/hangulin.c,
            src/hardcopy.c, src/hashtab.c, src/if_cscope.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perl.xs, src/if_py_both.h, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c,
            src/json.c, src/list.c, src/main.c, src/mark.c, src/mbyte.c,
            src/memfile.c, src/memline.c, src/menu.c, src/message.c,
            src/misc1.c, src/misc2.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_mswin.c, src/os_unix.c,
            src/os_win32.c, src/popupmnu.c, src/proto.h, src/proto/buffer.pro,
            src/proto/digraph.pro, src/proto/ex_docmd.pro,
            src/proto/ex_eval.pro, src/proto/ex_getln.pro,
            src/proto/hardcopy.pro, src/proto/mbyte.pro,
            src/proto/message.pro, src/proto/misc2.pro, src/proto/option.pro,
            src/proto/spell.pro, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/search.c, src/sign.c, src/spell.c,
            src/spellfile.c, src/structs.h, src/syntax.c, src/tag.c,
            src/term.c, src/terminal.c, src/textprop.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/version.c, src/vim.h, src/window.c,

Patch 8.1.0744 (after 8.1.0743)
问题:       Compiler warnings for signed/unsigned strings.
解决方案:   A few more type cast fixes.
文件:       src/option.c, src/if_perl.xs, src/if_py_both.h, src/integration.c

Patch 8.1.0745
问题:       Compiler warnings for signed/unsigned string.
解决方案:   Remove type casts. (John Marriott)
文件:       src/ex_docmd.c, src/mbyte.c

Patch 8.1.0746
问题:       Highlighting not updated with conceal and 'cursorline'. (Jason
            Franklin)
解决方案:   Do not use a zero line number.  Check if 'conceallevel' is set for
            the current window.
文件:       src/main.c, src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_cul_01.dump,
            src/testdir/dumps/Test_conceal_cul_02.dump,
            src/testdir/dumps/Test_conceal_cul_03.dump

Patch 8.1.0747
问题:       map() with a bad expression doesn't give an error. (Ingo Karkat)
解决方案:   Check for giving an error message. (closes #3800)
文件:       src/eval.c, src/testdir/test_filter_map.vim

Patch 8.1.0748
问题:       Using sprintf() instead of semsg().
解决方案:   Use semsg().  Fix bug with E888. (Ozaki Kiichi, closes #3801)
文件:       src/regexp.c

Patch 8.1.0749 (after 8.1.0747)
问题:       Error message contains garbage. (Dominique Pelle)
解决方案:   Use correct pointer to failed expression.
文件:       src/eval.c

Patch 8.1.0750
问题:       When the last sign is deleted the signcolumn may not be removed
            even though 'signcolumn' is "auto".
解决方案:   When deleting the last sign redraw the buffer. (Dominique Pelle,
            closes #3803, closes #3804)
文件:       src/sign.c

Patch 8.1.0751
问题:       Some regexp errors are not tested.
解决方案:   Add a test function.
文件:       src/testdir/test_regexp_latin.vim

Patch 8.1.0752
问题:       One more compiler warning for signed/unsigned string. (Tony
            Mechelynck)
解决方案:   Remove type cast.
文件:       src/ex_docmd.c

Patch 8.1.0753
问题:       printf format not checked for semsg().
解决方案:   Add GNUC attribute and fix reported problems. (Dominique Pelle,
            closes #3805)
文件:       src/buffer.c, src/diff.c, src/eval.c, src/evalfunc.c,
            src/ex_docmd.c, src/if_cscope.c, src/netbeans.c, src/proto.h,
            src/proto/message.pro, src/quickfix.c, src/regexp_nfa.c,
            src/sign.c, src/spellfile.c, src/window.c, src/gui_x11.c

Patch 8.1.0754
问题:       Preferred column is lost when setting 'cursorcolumn'.
解决方案:   Change option flag to P_RWINONLY. (Takayuki Kurosawa,
            closes #3806)
文件:       src/option.c, src/testdir/test_cursor_func.vim

Patch 8.1.0755
问题:       Error message for get() on a Blob with invalid index.
解决方案:   Return an empty Blob, like get() on a List does.
文件:       src/evalfunc.c, src/testdir/test_blob.vim

Patch 8.1.0756
问题:       copy() does not make a copy of a Blob.
解决方案:   Make a copy.
文件:       src/eval.c, src/testdir/test_blob.vim

Patch 8.1.0757
问题:       Not enough documentation for Blobs.
解决方案:   Add a section about Blobs.
文件:       runtime/doc/eval.txt

Patch 8.1.0758
问题:       Font number is always one instead of the actual.
解决方案:   Use "%d" instead of "1". (Ken Takata)
文件:       src/gui_x11.c

Patch 8.1.0759
问题:       Showing two characters for tab is limited.
解决方案:   Allow for a third character for "tab:" in 'listchars'. (Nathaniel
            Braun, Ken Takata, closes #3810)
文件:       runtime/doc/options.txt, src/globals.h, src/message.c,
            src/option.c, src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.0760
问题:       No proper test for using 'termencoding'.
解决方案:   Add a screendump test.  Fix using double width characters in a
            screendump.
文件:       src/terminal.c, src/testdir/test_termencoding.vim,
            src/testdir/Make_all.mak,
            src/testdir/dumps/Test_tenc_euc_jp_01.dump

Patch 8.1.0761
问题:       Default value for brief_wait is wrong.
解决方案:   Make the default FALSE. (Ozaki Kiichi, closes #3812, closes #3799)
文件:       src/ui.c

Patch 8.1.0762
问题:       Compiler warning.
解决方案:   Add type cast. (Mike Williams)
文件:       src/channel.c

Patch 8.1.0763
问题:       Nobody is using the Sun Workshop support.
解决方案:   Remove the Workshop support.
文件:       runtime/doc/workshop.txt, runtime/doc/help.txt,
            runtime/doc/netbeans.txt, src/Makefile, src/auto/configure,
            src/beval.c, src/buffer.c, src/config.h.in, src/config.mk.in,
            src/configure.ac, src/evalfunc.c, src/ex_cmds.c, src/ex_cmds.h,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/globals.h,
            src/gui.c, src/gui_beval.c, src/gui_motif.c, src/gui_x11.c,
            src/integration.c, src/integration.h, src/main.c, src/misc2.c,
            src/nbdebug.c, src/netbeans.c, src/proto.h,
            src/proto/workshop.pro, src/ui.c, src/version.c, src/vim.h,
            src/workshop.c, src/workshop.h, src/wsdebug.c, src/wsdebug.h,
            src/ex_cmdidxs.h

Patch 8.1.0764
问题:       List of distributed files is outdated.
解决方案:   Remove workshop files.  Add blob files.
文件:       Filelist

Patch 8.1.0765
问题:       String format of a Blob can't be parsed back.
解决方案:   Use 0z format.
文件:       src/blob.c, src/eval.c, src/testdir/test_blob.vim

Patch 8.1.0766
问题:       Various problems when using Vim on VMS.
解决方案:   Various fixes. Define long_long_T. (Zoltan Arpadffy)
文件:       src/eval.c, src/feature.h, src/fileio.c, src/gui_motif.c,
            src/gui_x11.c, src/gui_xmebw.c, src/json.c, src/Make_vms.mms,
            src/ops.c, src/os_vms_conf.h, src/vim.h, src/xdiff/xdiff.h,
            src/xdiff/xinclude.h

Patch 8.1.0767
问题:       When deleting lines at the bottom signs are misplaced.
解决方案:   Properly update the line number of signs at the end of a buffer
            after a delete/undo operation. (Yegappan Lakshmanan, closes #3798)
文件:       src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0768
问题:       Updating completions may cause the popup menu to flicker.
解决方案:   Avoid updating the text below the popup menu before drawing the
            popup menu.
文件:       src/popupmnu.c, src/proto/popupmnu.pro, src/edit.c, src/screen.c

Patch 8.1.0769
问题:       :stop is covered in two tests.
解决方案:   Remove Test_stop_in_terminal().  Make other test exit Vim cleanly.
            (Ozaki Kiichi, closes #3814)
文件:       src/testdir/test_terminal.vim, src/testdir/test_suspend.vim

Patch 8.1.0770
问题:       Inconsistent use of ELAPSED_FUNC.
解决方案:   Consistently use ELAPSED_FUNC.  Also turn ELAPSED_TYPE into a
            typedef. (Ozaki Kiichi, closes #3815)
文件:       src/channel.c, src/gui.c, src/misc1.c, src/os_unix.c, src/vim.h

Patch 8.1.0771
问题:       Some shell filetype patterns end in a star.
解决方案:   Make sure that patterns not ending in a star are preferred.
文件:       runtime/filetype.vim, runtime/autoload/dist/ft.vim

Patch 8.1.0772
问题:       The sign_define_by_name() function is too long.
解决方案:   Split it into smaller functions. (Yegappan Lakshmanan,
            closes #3819)
文件:       src/sign.c

Patch 8.1.0773
问题:       Not all crypt code is tested.
解决方案:   Disable unused crypt code.  Add more test coverage.
文件:       src/structs.h, src/crypt.c, src/testdir/test_crypt.vim,
            src/proto/crypt.pro, src/fileio.c

Patch 8.1.0774
问题:       VMS build is missing the blob file.
解决方案:   Add the blob file to the build rules. (Zoltan Arpadffy)
文件:       src/Make_vms.mms, runtime/doc/os_vms.txt

Patch 8.1.0775
问题:       Matching too many files as zsh. (Danek Duvall)
解决方案:   Be more specific with zsh filetype patterns.
文件:       runtime/filetype.vim

Patch 8.1.0776
问题:       Travis does not build a version without GUI on Linux.
解决方案:   Add an environment for tiny features without GUI.
文件:       .travis.yml

Patch 8.1.0777
问题:       Win32: using pipes for channel does not work well.
解决方案:   Use a larger buffer and handle overlaps. (Yasuhiro Matsumoto,
            closes #3782)
文件:       src/channel.c, src/os_win32.c

Patch 8.1.0778
问题:       Terminal test fails on MS-Windows.
解决方案:   Temporarily skip the test on MS-Windows.  Do run it both in
            terminal and GUI on other systems.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0779
问题:       Argument for message functions is inconsistent.
解决方案:   Make first argument to msg() "char *".
文件:        src/buffer.c, src/crypt.c, src/edit.c, src/ex_cmds.c, src/eval.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/farsi.c,
            src/if_cscope.c, src/fileio.c, src/getchar.c, src/globals.h,
            src/gui.c, src/if_perl.xs, src/netbeans.c, src/gui_w32.c,
            src/hardcopy.c, src/if_mzsch.c, src/if_py_both.h, src/if_ruby.c,
            src/if_tcl.c, src/mark.c, src/mbyte.c, src/menu.c, src/memline.c,
            src/message.c, src/misc1.c, src/misc2.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_unix.c, src/os_win32.c,
            src/proto/message.pro, src/quickfix.c, src/sign.c, src/regexp.c,
            src/ui.c, src/screen.c, src/search.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c, src/undo.c,
            src/userfunc.c, src/version.c, src/vim.h, src/window.c,
            src/proto/eval.pro, src/evalfunc.c, src/ex_eval.c, src/farsi.h

Patch 8.1.0780
问题:       Terminal test fails on Mac.
解决方案:   Skip the test on Mac.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0781
问题:       Build error when using if_xcmdsrv.c.
解决方案:   Add missing part of 8.1.0779.
文件:       src/if_xcmdsrv.c

Patch 8.1.0782
问题:       Win32: cursor blinks when Vim is not active.
解决方案:   Remove call to setActiveWindow(). (Yasuhiro Matsumoto,
            closes #3778)
文件:       src/gui_w32.c, src/proto/gui_w32.pro, src/menu.c

Patch 8.1.0783
问题:       Compiler warning for signed/unsigned.
解决方案:   Add type cast.  Change type of buffer. (Ozaki Kiichi, closes #3827)
文件:       src/main.c, src/message.c

Patch 8.1.0784
问题:       Messy indent in if statement.
解决方案:   Improve structure of if statement. (Ozaki Kiichi, closes #3826)
文件:       src/os_win32.c

Patch 8.1.0785
问题:       Depending on the configuration some functions are unused.
解决方案:   Add more #ifdefs, remove unused functions. (Dominique Pelle,
            closes #3822)
文件:       src/buffer.c, src/channel.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/fileio.c, src/getchar.c, src/gui_gtk_x11.c, src/hashtab.c,
            src/json.c, src/mbyte.c, src/message.c, src/misc1.c, src/misc2.c,
            src/ops.c, src/option.c, src/os_unix.c, src/proto/os_unix.pro,
            src/proto/regexp.pro, src/proto/terminal.pro, src/regexp.c,
            src/screen.c, src/search.c, src/syntax.c, src/term.c,
            src/terminal.c, src/ui.c, src/userfunc.c

Patch 8.1.0786
问题:       ml_get error when updating the status line and a terminal had its
            scrollback cleared.  (Chris Patuzzo)
解决方案:   Check the cursor position when drawing the status line.
            (closes #3830)
文件:       src/buffer.c, src/testdir/test_terminal.vim

Patch 8.1.0787
问题:       Compiler warning for unused function. (Tony Mechelynck)
解决方案:   Tune #ifdef around setjmp functions.
文件:       src/os_unix.c

Patch 8.1.0788
问题:       Cannot build with tiny features.
解决方案:   Adjust #ifdefs.
文件:       src/os_unix.c

Patch 8.1.0789
问题:       Sourcing a session sets v:errmsg.
解决方案:   Use "%argdel" instead of "argdel *". (Jason Franklin)
文件:       src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0790
问题:       Code for creating tabpages in session is too complex.
解决方案:   Simplify the code. (Jason Franklin)
文件:       src/ex_docmd.c

Patch 8.1.0791
问题:       A few compiler warnings on VMS.
解决方案:   Remove type cast.  Adjust #ifdef. (Zoltan Arpadffy)
文件:       src/os_unix.c, src/proto.h

Patch 8.1.0792
问题:       Popup menu is displayed on top of the cmdline window if it is
            opened from Insert completion. (Bjorn Linse)
解决方案:   Remove the popup menu.  Restore the cursor position.
            (closes #3838)
文件:       src/edit.c, src/ex_getln.c

Patch 8.1.0793
问题:       Incorrect error messages for functions that now take a Blob
            argument.
解决方案:   Adjust the error messages. (Dominique Pelle, closes #3846)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/globals.h,
            src/testdir/test_blob.vim, src/testdir/test_listdict.vim

Patch 8.1.0794
问题:       White space before " -Ntabmove" causes problems.
解决方案:   Skip whitespace. (Ozaki Kiichi, closes #3841)
文件:       src/ex_docmd.c, src/testdir/test_tabpage.vim

Patch 8.1.0795 (after 8.1.0792)
问题:       Cannot build without popup menu.
解决方案:   Add #ifdef
文件:       src/ex_getln.c

Patch 8.1.0796
问题:       MS-Windows 7: problem with named pipe on channel.
解决方案:   Put back the disconnect/connect calls. (Yasuhiro Matsumoto,
            closes #3833)
文件:       src/channel.c, src/testdir/test_terminal.vim

Patch 8.1.0797
问题:       Error E898 is used twice.
解决方案:   Rename the Blob error to E899. (closes #3853)
文件:       src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_listdict.vim

Patch 8.1.0798
问题:       Changing a blob while iterating over it works strangely.
解决方案:   Make a copy of the Blob before iterating.
文件:       src/blob.c, src/proto/blob.pro, src/eval.c,
            src/testdir/test_blob.vim

Patch 8.1.0799
问题:       Calling deleted function; test doesn't work on Mac.
解决方案:   Wait for the function to be called before deleting it. Use a job
            to write to the pty, unless in the GUI. (Ozaki Kiichi,
            closes #3854)
文件:       src/testdir/test_channel.vim, src/testdir/test_terminal.vim

Patch 8.1.0800
问题:       May use a lot of memory when a function creates a cyclic
            reference.
解决方案:   After saving a funccal many times, invoke the garbage collector.
            (closes #3835)
文件:       src/userfunc.c

Patch 8.1.0801
问题:       MinGW: no hint that tests fail because of small terminal.
解决方案:   Add a rule for test1 that checks for "wrongtermsize".
            (msoyka-of-wharton)
文件:       src/testdir/Make_ming.mak

Patch 8.1.0802
问题:       Negative index doesn't work for Blob.
解决方案:   Make it work, add a test. (closes #3856)
文件:       src/blob.c, src/proto/blob.pro, src/eval.c,
            src/testdir/test_blob.vim

Patch 8.1.0803
问题:       Session file has problem with single quote in file name. (Jon
            Crowe)
解决方案:   Use a double quoted string.  Add a test.
文件:       src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0804
问题:       Crash when setting v:errmsg to empty list. (Jaon Franklin)
解决方案:   Separate getting value and assigning result.
文件:       src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.0805
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_MBYTE, part 1.
文件:       src/buffer.c, src/charset.c, src/diff.c, src/digraph.c,
            src/edit.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/fold.c, src/gui.c, src/gui_mac.c, src/gui_photon.c,
            src/gui_w32.c

Patch 8.1.0806
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_MBYTE, part 2.
文件:       src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c, src/gui_w32.c,
            src/gui_x11.c, src/hardcopy.c, src/if_xcmdsrv.c, src/json.c,
            src/kword_test.c, src/main.c, src/mbyte.c, src/memline.c,
            src/message.c, src/misc1.c, src/misc2.c, src/move.c, src/normal.c,
            src/ops.c, src/option.c, src/charset.c

Patch 8.1.0807
问题:       Session test fails on MS-Windows.
解决方案:   Don't try creating file with illegal name.
文件:       src/testdir/test_mksession.vim

Patch 8.1.0808
问题:       MS-Windows: build error with GUI.
解决方案:   Remove "static".
文件:       src/gui_w32.c

Patch 8.1.0809
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_MBYTE, part 3.
文件:       src/os_amiga.c, src/os_mswin.c, src/os_unix.c, src/os_w32exe.c,
            src/os_win32.c, src/quickfix.c, src/regexp.c, src/regexp_nfa.c,
            src/screen.c

Patch 8.1.0810
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_MBYTE, part 4.
文件:       src/getchar.c, src/search.c, src/sign.c, src/spell.c,
            src/spellfile.c, src/syntax.c, src/tag.c, src/term.c, src/ui.c,
            src/version.c, src/winclip.c, src/window.c, src/glbl_ime.cpp,
            src/ex_cmds.h, src/globals.h, src/gui.h, src/if_py_both.h,
            src/macros.h, src/option.h, src/os_mac.h, src/os_win32.h,
            src/proto.h, src/spell.h, src/structs.h, src/vim.h

Patch 8.1.0811
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_MBYTE, the final chapter.
文件:       src/feature.h, src/vim.h, src/crypt_zip.c, src/fileio.c,
            src/message.c, src/spell.h, src/structs.h, src/config.h.in,
            src/configure.ac, src/auto/configure, src/testdir/runtest.vim,
            src/testdir/test_alot_utf8.vim, src/testdir/test_arabic.vim,
            src/testdir/test_charsearch_utf8.vim,
            src/testdir/test_cmdline.vim, src/testdir/test_digraph.vim,
            src/testdir/test_display.vim, src/testdir/test_edit.vim,
            src/testdir/test_erasebackword.vim,
            src/testdir/test_expr_utf8.vim, src/testdir/test_functions.vim,
            src/testdir/test_ga.vim, src/testdir/test_iminsert.vim,
            src/testdir/test_increment_dbcs.vim, src/testdir/test_json.vim,
            src/testdir/test_makeencoding.vim, src/testdir/test_maparg.vim,
            src/testdir/test_mapping.vim, src/testdir/test_marks.vim,
            src/testdir/test_match.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_mksession_utf8.vim, src/testdir/test_normal.vim,
            src/testdir/test_plus_arg_edit.vim, src/testdir/test_profile.vim,
            src/testdir/test_put.vim, src/testdir/test_regex_char_classes.vim,
            src/testdir/test_regexp_utf8.vim, src/testdir/test_search.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_spell.vim,
            src/testdir/test_startup_utf8.vim,
            src/testdir/test_termencoding.vim, src/testdir/test_terminal.vim,
            src/testdir/test_utf8.vim, src/testdir/test_utf8_comparisons.vim,
            src/testdir/test_viminfo.vim, src/testdir/test_virtualedit.vim,
            src/testdir/test_visual.vim, src/testdir/test_wordcount.vim,
            src/testdir/test_writefile.vim, src/appveyor.bat, src/os_macosx.m

Patch 8.1.0812
问题:       Unicode 16 feature is not useful and cannot be detected.
解决方案:   Remove UNICODE16.
文件:       src/screen.c, src/vim.h, src/feature.h

Patch 8.1.0813
问题:       FileChangedShell not sufficiently tested.
解决方案:   Add a more comprehensive test case.
文件:       src/testdir/test_autocmd.vim

Patch 8.1.0814
问题:       :mksession cannot handle a very long 'runtimepath'. (Timothy
            Madden)
解决方案:   Expand each part separately, instead of the whole option at once.
            (Christian Brabandt, closes #3466)
文件:       src/option.c, src/testdir/test_mksession.vim

Patch 8.1.0815
问题:       Dialog for file changed outside of Vim not tested.
解决方案:   Add a test.  Move FileChangedShell test.  Add 'L' flag to
            feedkeys().
文件:       src/testdir/test_autocmd.vim, src/testdir/test_filechanged.vim,
            src/testdir/Make_all.mak, src/evalfunc.c, runtime/doc/eval.txt

Patch 8.1.0816
问题:       Test for 'runtimepath' in session fails on MS-Windows.
解决方案:   Skip the test for now.
文件:       src/testdir/test_mksession.vim

Patch 8.1.0817
问题:       ":=" command is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3859)
文件:       src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_ex_equal.vim

Patch 8.1.0818
问题:       MS-Windows: cannot send large data with ch_sendraw().
解决方案:   Split write into several WriteFile() calls. (Yasuhiro Matsumoto,
            closes #3823)
文件:       src/channel.c, src/os_win32.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py, src/vim.h

Patch 8.1.0819
问题:       A failed assert with a long string is hard to read.
解决方案:   Shorten the assert message.
文件:       src/eval.c, src/testdir/test_assert.vim

Patch 8.1.0820
问题:       Test for sending large data over channel sometimes fails.
解决方案:   Handle that the job may have finished early.  Also fix that file
            changed test doesn't work in the GUI and reduce flakyness. (Ozaki
            Kiichi, closes #3861)
文件:       src/testdir/test_channel.vim, src/testdir/test_filechanged.vim

Patch 8.1.0821
问题:       Xxd "usage" output and other arguments not tested.
解决方案:   Add a test to trigger the usage output in various ways.  Fix
            uncovered problem.
文件:       src/testdir/test_xxd.vim, src/xxd/xxd.c

Patch 8.1.0822
问题:       Peeking and flushing output slows down execution.
解决方案:   Do not update the mode message when global_busy is set.  Do not
            flush when only peeking for a character. (Ken Takata)
文件:       src/getchar.c, src/screen.c, src/proto/screen.pro, src/edit.c

Patch 8.1.0823
问题:       Not sufficient testing of xxd.
解决方案:   Add some more test coverage.
文件:       src/testdir/test_xxd.vim

Patch 8.1.0824
问题:       SunOS/Solaris has a problem with ttys.
解决方案:   Add mch_isatty() with extra handling for SunOS. (Ozaki Kiichi,
            closes #3865)
文件:       src/auto/configure, src/channel.c, src/config.h.in,
            src/configure.ac, src/os_unix.c, src/proto/pty.pro, src/pty.c,
            src/terminal.c

Patch 8.1.0825
问题:       Code for autocommands is mixed with file I/O code.
解决方案:   Move autocommand code to a separate file. (Yegappan Lakshmanan,
            closes #3863)
文件:       Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.txt, src/autocmd.c,
            src/fileio.c, src/globals.h, src/proto.h, src/proto/autocmd.pro,
            src/proto/fileio.pro

Patch 8.1.0826
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_VIRTUALEDIT.  Adds about 10Kbyte to the code.
文件:       src/buffer.c, src/charset.c, src/edit.c, src/eval.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/feature.h,
            src/globals.h, src/gui.c, src/if_py_both.h, src/macros.h,
            src/mark.c, src/mbyte.c, src/memline.c, src/menu.c, src/misc1.c,
            src/misc2.c, src/move.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/option.h, src/screen.c, src/search.c,
            src/spell.c, src/structs.h, src/tag.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/version.c, src/vim.h, src/window.c

Patch 8.1.0827 (after 8.1.0825)
问题:       Missing dependency in Makefile.
解决方案:   Add dependency from autocmd.o on auto/osdef.h
文件:       src/Makefile

Patch 8.1.0828
问题:       Still using FEAT_VIRTUALEDIT.
解决方案:   Remove last use of FEAT_VIRTUALEDIT.
文件:       src/quickfix.c

Patch 8.1.0829
问题:       When 'hidden' is set session creates extra buffers.
解决方案:   Move :badd commands to the end. (Jason Franklin)
文件:       src/ex_docmd.c, src/testdir/test_mksession.vim

Patch 8.1.0830
问题:       Test leaves directory behind on MS-Windows.
解决方案:   Close buffer before deleting directory.
文件:       src/testdir/test_swap.vim

Patch 8.1.0831
问题:       Xxd test fails if man page has dos fileformat.
解决方案:   Make a copy with unix fileformat.
文件:       src/testdir/test_xxd.vim

Patch 8.1.0832
问题:       confirm() is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #3868)
文件:       src/testdir/test_functions.vim

Patch 8.1.0833
问题:       Memory leak when jumps output is filtered.
解决方案:   Free the filtered name. (Dominique Pelle, closes #3869)
文件:       src/mark.c

Patch 8.1.0834
问题:       GUI may wait too long before dealing with messages.  Returning
            early may cause a mapping to time out.
解决方案:   Use the waiting loop from Unix also for the GUI.
            (closes #3817, closes #3824)
文件:       src/ui.c, src/proto/ui.pro, src/os_unix.c, src/gui.c,
            src/testdir/screendump.vim

Patch 8.1.0835
问题:       GUI build fails on MS-Windows.
解决方案:   Adjust #ifdef.
文件:       src/ui.c

Patch 8.1.0836
问题:       User completion test can fail on MS-Windows.
解决方案:   Allow for other names before "Administrator".
文件:       src/testdir/test_cmdline.vim

Patch 8.1.0837
问题:       Timer interrupting cursorhold and mapping not tested.
解决方案:   Add tests with timers. (Ozaki Kiichi, closes #3871)
文件:       src/testdir/test_autocmd.vim, src/testdir/test_mapping.vim

Patch 8.1.0838
问题:       Compiler warning for type conversion.
解决方案:   Add a type cast. (Mike Williams)
文件:       src/channel.c

Patch 8.1.0839
问题:       When using VTP wrong colors after a color scheme change.
解决方案:   When VTP is active always clear after a color scheme change.
            (Nobuhiro Takasaki, closes #3872)
文件:       src/ex_docmd.c

Patch 8.1.0840
问题:       getchar(0) never returns a character in the terminal.
解决方案:   Call wait_func() at least once.
文件:       src/ui.c, src/testdir/test_timers.vim, src/gui_gtk_x11.c,
            src/gui_w32.c, src/gui_photon.c, src/gui_x11.c

Patch 8.1.0841
问题:       Travis config to get Lua on MacOS is too complicated.
解决方案:   Use an addons entry. (Ozaki Kiichi, closes #3876)
文件:       .travis.yml

Patch 8.1.0842
问题:       getchar_zero test fails on MS-Windows.
解决方案:   Disable the test for now.
文件:       src/testdir/test_timers.vim

Patch 8.1.0843
问题:       Memory leak when running "make test_cd".
解决方案:   Free the stack element when failing. (Dominique Pelle,
            closes #3877)
文件:       src/misc2.c

Patch 8.1.0844
问题:       When timer fails test will hang forever.
解决方案:   Use reltime() to limit waiting time. (Ozaki Kiichi, closes #3878)
文件:       src/testdir/test_timers.vim

Patch 8.1.0845
问题:       Having job_status() free the job causes problems.
解决方案:   Do not actually free the job or terminal yet, put it in a list and
            free it a bit later. Do not use a terminal after checking the job
            status.  (closes #3873)
文件:       src/channel.c, src/terminal.c, src/proto/terminal.pro, src/misc2.c

Patch 8.1.0846
问题:       Not easy to recognize the system Vim runs on.
解决方案:   Add more items to the features list. (Ozaki Kiichi, closes #3855)
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_channel.vim, src/testdir/test_functions.vim,
            src/testdir/test_terminal.vim, src/testdir/test_writefile.vim

Patch 8.1.0847
问题:       May use terminal after it was cleaned up.
解决方案:   Use the job pointer.
文件:       src/terminal.c

Patch 8.1.0848
问题:       Cannot build with Ruby 1.8. (Tom G. Christensen)
解决方案:   Use rb-str_new2(). (Yasuhiro Matsumoto, closes #3883,
            closes #3884)
文件:       src/if_ruby.c

Patch 8.1.0849
问题:       Cursorline highlight is not always updated.
解决方案:   Set w_last_cursorline when redrawing.  Fix resetting cursor flags
            when using the popup menu.
文件:       src/screen.c, src/popupmnu.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_cursorline_yank_01.dump

Patch 8.1.0850
问题:       Test for 'backupskip' is not correct.
解决方案:   Split the option in parts and use expand(). (Michael Soyka)
文件:       src/testdir/test_options.vim

Patch 8.1.0851
问题:       feedkeys() with "L" does not work properly.
解决方案:   Do not set typebuf_was_filled when using "L". (Ozaki Kiichi,
            closes #3885)
文件:       src/evalfunc.c, src/testdir/test_autocmd.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.0852
问题:       findfile() and finddir() are not properly tested.
解决方案:   Extend the test and add more. (Dominique Pelle, closes #3880)
文件:       src/testdir/test_findfile.vim

Patch 8.1.0853 (after 8.1.0850)
问题:       Options test fails on Mac.
解决方案:   Remove a trailing slash from $TMPDIR.
文件:       src/testdir/test_options.vim

Patch 8.1.0854
问题:       xxd does not work with more than 32 bit addresses.
解决方案:   Add support for 64 bit addresses. (Christer Jensen, closes #3791)
文件:       src/xxd/xxd.c

Patch 8.1.0855
问题:       Cannot build xxd with MSVC 10.
解决方案:   Move declaration to start of block.
文件:       src/xxd/xxd.c

Patch 8.1.0856
问题:       When scrolling a window other than the current one the cursorline
            highlighting is not always updated. (Jason Franklin)
解决方案:   Call redraw_for_cursorline() after scrolling.  Only set
            w_last_cursorline when drawing the cursor line.  Reset the lines
            to be redrawn also when redrawing the whole window.
文件:       src/move.c, src/proto/move.pro, src/normal.c

Patch 8.1.0857
问题:       Indent functionality is not separated.
解决方案:   Move indent functionality into a new file. (Yegappan Lakshmanan,
            closes #3886)
文件:       Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/edit.c, src/indent.c,
            src/misc1.c, src/proto.h, src/proto/edit.pro,
            src/proto/indent.pro, src/proto/misc1.pro

Patch 8.1.0858
问题:       'indentkeys' and 'cinkeys' defaults are different.
解决方案:   Make them the same, update docs. (close #3882)
文件:       src/option.c, runtime/doc/options.txt, runtime/doc/indent.txt

Patch 8.1.0859
问题:       "%v" in 'errorformat' does not handle multi-byte characters.
解决方案:   Handle multi-byte characters. (Yegappan Lakshmanan, closes #3700)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0860
问题:       Debug lines left in the code.
解决方案:   Delete the lines.
文件:       src/edit.c

Patch 8.1.0861
问题:       Building with MinGW and static libc doesn't work.
解决方案:   Change the LIB argument. (Ken Takata)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0862
问题:       No verbose version of character classes.
解决方案:   Add [:ident:], [:keyword:] and [:fname:]. (Ozaki Kiichi,
            closes #1373)
文件:       runtime/doc/pattern.txt, src/regexp.c, src/regexp_nfa.c,
            src/testdir/test_regexp_utf8.vim

Patch 8.1.0863
问题:       Cannot see what signal caused a job to end.
解决方案:   Add "termsig" to job_info(). (Ozaki Kiichi, closes #3786)
文件:       runtime/doc/eval.txt, src/channel.c, src/os_unix.c, src/structs.h,
            src/testdir/test_channel.vim

Patch 8.1.0864
问题:       Cannot have a local value for 'scrolloff' and 'sidescrolloff'.
            (Gary Holloway)
解决方案:   Make 'scrolloff' and 'sidescrolloff' global-local. (mostly by
            Aron Widforss, closes #3539)
文件:       runtime/doc/options.txt, src/edit.c, src/ex_cmds.c,
            src/ex_docmd.c, src/gui.c, src/misc2.c, src/move.c, src/normal.c,
            src/option.c, src/proto/option.pro, src/option.h, src/search.c,
            src/structs.h, src/window.c, src/testdir/test_options.vim

Patch 8.1.0865
问题:       When 'listchars' only contains "nbsp:X" it does not work.
解决方案:   Set extra_check when lcs_nbsp is set. (Ralf Schandl, closes #3889)
文件:       src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.0866
问题:       Build file dependencies are outdated. (John Little)
解决方案:   Run "make proto" and "make depend".
文件:       src/vim.h, src/Makefile, src/proto/sign.pro, src/proto/gui_w32.pro

Patch 8.1.0867
问题:       Cannot build Python interface with Python 2.4. (Tom G. Christensen)
解决方案:   Define PyBytes_FromStringAndSize. (Ken Takata, closes #3888)
文件:       src/if_python.c

Patch 8.1.0868
问题:       Crash if triggering garbage collector after a function call.
            (Michael Henry)
解决方案:   Don't call the garbage collector right away, do it later.
            (closes #3894)
文件:       src/userfunc.c

Patch 8.1.0869
问题:       Travis CI script is too complicated.
解决方案:   Add names to environments.  Move appveyor script outside of src
            directory. (Ozaki Kiichi, closes #3890)
文件:       .travis.yml, appveyor.yml, ci/appveyor.bat, src/appveyor.bat,
            Filelist

Patch 8.1.0870
问题:       Vim doesn't use the new ConPTY support in Windows 10.
解决方案:   Use ConPTY support, if available. (Nobuhiro Takasaki, closes #3794)
文件:       runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/terminal.txt, src/channel.c, src/evalfunc.c,
            src/globals.h, src/option.c, src/option.h, src/os_win32.c,
            src/proto/terminal.pro, src/structs.h, src/terminal.c,
            src/testdir/gen_opt_test.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_mksession.vim, src/testdir/test_terminal.vim

Patch 8.1.0871
问题:       Build error when building with Ruby 2.6.0.
解决方案:   Change argument of rb_int2big_stub(). (Android Baumann,
            closes #3899)
文件:       src/if_ruby.c

Patch 8.1.0872
问题:       Confusing condition.
解决方案:   Use "==" instead of "<=".
文件:       src/gui_gtk_x11.c

Patch 8.1.0873
问题:       List if distributed files does not include the matchit autoload
            directory.
解决方案:   Add the directory.
文件:       src/Filelist

Patch 8.1.0874
问题:       Using old style comments in new file.
解决方案:   Convert to // comments in new file. (Yegappan Lakshmanan)
文件:       src/indent.c

Patch 8.1.0875
问题:       Not all errors of marks and findfile()/finddir() are tested.
解决方案:   Add more test coverage. (Dominique Pelle)
文件:       src/testdir/test_findfile.vim, src/testdir/test_marks.vim

Patch 8.1.0876
问题:       Completion match not displayed when popup menu is not shown.
解决方案:   Call update_screen() when not displaying the popup menu to show
            the inserted match. (Ken Takata, Hirohito Higashi)
文件:       src/edit.c

Patch 8.1.0877
问题:       New buffer used every time the quickfix window is opened.
解决方案:   Reuse the buffer. (Yegappan Lakshmanan, closes #3902)
文件:       src/buffer.c, src/proto/quickfix.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.0878
问题:       Test for has('bsd') fails on some BSD systems.
解决方案:   Adjust the uname match. (James McCoy, closes #3909)
文件:       src/testdir/test_functions.vim

Patch 8.1.0879
问题:       MS-Windows: temp name encoding can be wrong.
解决方案:   Convert from active code page to 'encoding'. (Yasuhiro Matsumoto,
            closes #3520, closes #1698)
文件:       src/fileio.c

Patch 8.1.0880
问题:       MS-Windows: inconsistent selection of winpty/conpty.
解决方案:   Name option 'termwintype', use ++type argument and "term_pty" for
            term_start(). (Hirohito Higashi, closes #3915)
文件:       runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/terminal.txt, src/channel.c, src/option.c,
            src/option.h, src/structs.h, src/terminal.c,
            src/testdir/gen_opt_test.vim, runtime/optwin.vim,
            runtime/doc/quickref.txt

Patch 8.1.0881
问题:       Can execute shell commands in rvim through interfaces.
解决方案:   Disable using interfaces in restricted mode. Allow for writing
            file with writefile(), histadd() and a few others.
文件:       runtime/doc/starting.txt, src/if_perl.xs, src/if_cmds.h,
            src/ex_cmds.c, src/ex_docmd.c, src/evalfunc.c,
            src/testdir/test_restricted.vim, src/testdir/Make_all.mak

Patch 8.1.0882 (after 8.1.0879)
问题:       Checking for FEAT_MBYTE which doesn't exist anymore. (Christ van
            Willegen)
解决方案:   Remove it.
文件:       src/fileio.c

Patch 8.1.0883
问题:       Missing some changes for Ex commands.
解决方案:   Add missing changes in header file.
文件:       src/ex_cmds.h

Patch 8.1.0884
问题:       Double check for bsd systems.
解决方案:   Delete the old line.
文件:       src/testdir/test_functions.vim

Patch 8.1.0885
问题:       Test for restricted hangs on MS-Windows GUI.
解决方案:   Skip the test.
文件:       src/testdir/test_restricted.vim

Patch 8.1.0886
问题:       Compiler warning for adding to NULL pointer and a condition that
            is always true.
解决方案:   Check for NULL pointer before adding. Remove useless "if".
            (Friedirch, closes #3913)
文件:       src/dosinst.c, src/search.c

Patch 8.1.0887
问题:       The 'l' flag in :substitute is sticky.
解决方案:   Reset the flag. (Dominique Pelle, closes #3925)
文件:       src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.0888
问题:       The a: dict is not immutable as documented.
解决方案:   Make the a:dict immutable, add a test. (Ozaki Kiichi, Yasuhiro
            Matsumoto, closes #3929)
文件:       src/eval.c, src/userfunc.c, src/testdir/test_let.vim,
            src/testdir/test_listdict.vim

Patch 8.1.0889
问题:       MS-Windows: a channel write may hang.
解决方案:   Check for WriteFile() not writing anything. (Yasuhiro Matsumoto,
            closes #3920)
文件:       src/channel.c, src/testdir/test_channel.vim,
            src/testdir/test_channel_pipe.py

Patch 8.1.0890
问题:       Pty allocation wrong if using file for out channel and using null
            for in channel and null for error channel.
解决方案:   Correct using use_file_for_out in condition. (Ozaki Kiichi, closes
            #3917)
文件:       src/os_unix.c, src/testdir/test_channel.vim

Patch 8.1.0891
问题:       Substitute command insufficiently tested.
解决方案:   Add more test coverage. (Dominique Pelle)
文件:       src/testdir/test_substitute.vim

Patch 8.1.0892
问题:       Failure when closing a window when location list is in use.
解决方案:   Handle the situation gracefully. Make sure memory for 'switchbuf'
            is not freed at the wrong time. (Yegappan Lakshmanan,
            closes #3928)
文件:       src/eval.c, src/evalfunc.c, src/proto/window.pro, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/window.c

Patch 8.1.0893
问题:       Terminal test is a bit flaky.
解决方案:   Add test_terminal_no_cmd() to list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0894
问题:       MS-Windows: resolve() does not return a reparse point.
解决方案:   Improve resolve(). (Yasuhiro Matsumoto, closes #3896)
文件:       runtime/doc/eval.txt, src/buffer.c, src/evalfunc.c,
            src/os_mswin.c, src/proto/os_mswin.pro,
            src/testdir/test_functions.vim

Patch 8.1.0895 (after 8.1.0879)
问题:       MS-Windows: dealing with temp name encoding not quite right.
解决方案:   Use more wide functions. (Ken Takata, closes #3921)
文件:       src/fileio.c

Patch 8.1.0896
问题:       Tests for restricted mode not run for MS-Windows GUI.
解决方案:   Make tests also work in MS-Windows GUI.
文件:       src/testdir/test_restricted.vim

Patch 8.1.0897
问题:       Can modify a:000 when using a reference.
解决方案:   Make check for locked variable stricter. (Ozaki Kiichi,
            closes #3930)
文件:       src/dict.c, src/eval.c, src/evalfunc.c, src/proto/eval.pro,
            src/testdir/test_channel.vim, src/testdir/test_let.vim,
            src/userfunc.c

Patch 8.1.0898
问题:       A messed up rgb.txt can crash Vim. (Pavel Cheremushkin)
解决方案:   Limit to 10000 entries.  Also don't retry many times when the file
            cannot be read.
文件:       src/term.c

Patch 8.1.0899
问题:       No need to check restricted mode for setwinvar().
解决方案:   Remove check_restricted().
文件:       src/eval.c

Patch 8.1.0900
问题:       ConPTY may crash with 32-bit build.
解决方案:   Fix function declarations. (Ken Takata, closes #3943)
文件:       src/terminal.c

Patch 8.1.0901
问题:       Index in getjumplist() may be wrong. (Epheien)
解决方案:   Call cleanup_jumplist() earlier. (Yegappan Lakshmanan,
            closes #3942)
文件:       src/evalfunc.c, src/testdir/test_jumplist.vim

Patch 8.1.0902
问题:       Incomplete set of assignment operators.
解决方案:   Add /=, *= and %=. (Ozaki Kiichi, closes #3931)
文件:       runtime/doc/eval.txt src/eval.c src/testdir/test_vimscript.vim

Patch 8.1.0903
问题:       Struct uses more bytes than needed.
解决方案:   Reorder members of regitem_S. (Dominique Pelle, closes #3936)
文件:       src/regexp.c

Patch 8.1.0904
问题:       USE_LONG_FNAME never defined.
解决方案:   Remove using USE_LONG_FNAME. (Ken Takata, closes #3938)
文件:       src/buffer.c, src/ex_cmds.c, src/fileio.c

Patch 8.1.0905
问题:       Complicated regexp causes a crash. (Kuang-che Wu)
解决方案:   Limit the recursiveness of addstate(). (closes #3941)
文件:       src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0906
问题:       Using clumsy way to get console window handle.
解决方案:   Use GetConsoleWindow(). (Ken Takata, closes #3940)
文件:       src/os_mswin.c

Patch 8.1.0907
问题:       CI tests on AppVeyor are failing.
解决方案:   Reduce the recursiveness limit for regexp.
文件:       src/regexp_nfa.c

Patch 8.1.0908
问题:       Can't handle large value for %{nr}v in regexp. (Kuang-che Wu)
解决方案:   Give an error if the value is too large. (closes #3948)
文件:       src/regexp_nfa.c

Patch 8.1.0909
问题:       MS-Windows: using ConPTY even though it is not stable.
解决方案:   When ConPTY version is unstable, prefer using winpty. (Ken Takata,
            closes #3949)
文件:       runtime/doc/options.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/terminal.c

Patch 8.1.0910
问题:       Crash with tricky search pattern. (Kuang-che Wu)
解决方案:   Check for running out of memory. (closes #3950)
文件:       src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0911
问题:       Tag line with Ex command cannot have extra fields.
解决方案:   Recognize |;" as the end of the command. (closes #2402)
文件:       runtime/doc/tagsrch.txt, src/tag.c, src/testdir/test_taglist.vim

Patch 8.1.0912
问题:       MS-Windows: warning for signed/unsigned.
解决方案:   Add type cast. (Nobuhiro Takasaki, closes #3945)
文件:       src/terminal.c

Patch 8.1.0913
问题:       CI crashes when running out of memory.
解决方案:   Apply 'maxmempattern' also to new regexp engine.
文件:       src/regexp_nfa.c

Patch 8.1.0914
问题:       Code related to findfile() is spread out.
解决方案:   Put findfile() related code into a new source file. (Yegappan
            Lakshmanan, closes #3934)
文件:       Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.txt, src/findfile.c,
            src/misc1.c, src/misc2.c, src/proto.h, src/proto/findfile.pro,
            src/proto/misc1.pro, src/proto/misc2.pro, src/proto/window.pro,
            src/window.c

Patch 8.1.0915
问题:       fsync() may not work properly on Mac.
解决方案:   Use fcntl() with F_FULLFSYNC. (suggested by Justin M. Keyes)
文件:       src/fileio.c, src/proto/fileio.pro, src/evalfunc.c, src/memfile.c

Patch 8.1.0916
问题:       With Python 3.7 "find_module" is not made available.
解决方案:   Also add "find_module" with Python 3.7. (Joel Frederico,
            closes #3954)
文件:       src/if_py_both.h

Patch 8.1.0917
问题:       Double free when running out of memory.
解决方案:   Remove one free. (Ken Takata, closes #3955)
文件:       src/userfunc.c

Patch 8.1.0918
问题:       MS-Windows: startup messages are not converted.
解决方案:   Convert messages when the current codepage differs from
            'encoding'. (Yasuhiro Matsumoto, closes #3914)
文件:       src/message.c, src/os_mswin.c, src/vim.h

Patch 8.1.0919
问题:       Compiler warnings.
解决方案:   Add type casts. (Mike Williams)
文件:       src/message.c, src/regexp_nfa.c

Patch 8.1.0920
问题:       In Terminal-Normal mode job output messes up the window.
解决方案:   Postpone scrolling and updating the buffer when in Terminal-Normal
            mode.
文件:       src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_01.dump,
            src/testdir/dumps/Test_terminal_02.dump,
            src/testdir/dumps/Test_terminal_03.dump

Patch 8.1.0921
问题:       Terminal test sometimes fails; using memory after free.
解决方案:   Fee memory a bit later.  Add test to cover this.  Disable flaky
            screenshot test. (closes #3956)
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0922
问题:       Terminal scrollback test is flaky.
解决方案:   Wait a bit before running the tail command.
文件:       src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_01.dump,
            src/testdir/dumps/Test_terminal_02.dump,
            src/testdir/dumps/Test_terminal_03.dump

Patch 8.1.0923
问题:       Terminal dump diff swap does not update file names.
解决方案:   Also swap the file name.  Add a test.
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.0924
问题:       Terminal scrollback test still flaky.
解决方案:   Wait a bit longer before running the tail command.
文件:       src/testdir/test_terminal.vim

Patch 8.1.0925
问题:       Terminal scrollback test still still flaky.
解决方案:   Explicitly set the shell.  Disable ruler. (Ozaki Kiichi,
            closes #3966)
文件:       src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_01.dump,
            src/testdir/dumps/Test_terminal_02.dump,
            src/testdir/dumps/Test_terminal_03.dump

Patch 8.1.0926
问题:       No test for :wnext, :wNext and :wprevious.
解决方案:   Add a test. (Dominique Pelle, closes #3963)
文件:       src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_wnext.vim

Patch 8.1.0927
问题:       USE_CR is never defined.
解决方案:   Remove usage of USE_CR. (Ken Takata, closes #3958)
文件:       runtime/doc/options.txt, src/diff.c, src/evalfunc.c,
            src/ex_cmds2.c, src/fileio.c, src/message.c, src/ops.c,
            src/option.h, src/proto/ex_cmds2.pro, src/proto/fileio.pro,
            src/tag.c

Patch 8.1.0928 (after 8.1.0927)
问题:       Stray log function call.
解决方案:   Remove the log function call.
文件:       src/ex_cmds2.c

Patch 8.1.0929
问题:       No error when requesting ConPTY but it's not available.
解决方案:   Add an error message. (Hirohito Higashi, closes #3967)
文件:       runtime/doc/terminal.txt, src/terminal.c

Patch 8.1.0930
问题:       Typo in Makefile.
解决方案:   Change ABORT_CLFAGS to ABORT_CFLAGS. (Kuang-che Wu, closes #3977)
文件:       src/Makefile

Patch 8.1.0931
问题:       vtp_working included in GUI build but unused.
解决方案:   Adjust #ifdefs. (Ken Takata, closes #3971)
文件:       src/os_win32.c

Patch 8.1.0932
问题:       Farsi support is outdated and unused.
解决方案:   Delete the Farsi support.
文件:       Filelist, src/farsi.c, src/proto/farsi.pro, src/farsi.h, src/edit.c,
            src/main.c, src/normal.c, src/option.c, src/getchar.c,
            src/ex_cmds.c, src/search.c, src/ex_getln.c, src/charset.c,
            src/evalfunc.c, src/screen.c, src/window.c, src/globals.h,
            src/proto.h, farsi/README.txt, src/structs.h,
            farsi/fonts/DOS/far-a01.com, farsi/fonts/SunOs/far-a01.fb,
            farsi/fonts/UNIXs/far-a01.f16, farsi/fonts/UNIXs/far-a01.pcf.gz,
            farsi/fonts/UNIXs/far-a01.pcf.Z, farsi/fonts/WINDOWS/far-a01.fon,
            src/Makefile, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/configure.ac, src/auto/configure,
            src/config.h.in, src/testdir/test_farsi.vim, src/version.c,
            src/testdir/Make_all.mak, runtime/doc/options.txt,
            runtime/doc/starting.txt, runtime/doc/quickref.txt,
            runtime/doc/farsi.txt

Patch 8.1.0933
问题:       When using VTP scroll region isn't used properly.
解决方案:   Make better use of the scroll region. (Nobuhiro Takasaki,
            closes #3974)
文件:       src/os_win32.c, src/term.c

Patch 8.1.0934
问题:       Invalid memory access in search pattern. (Kuang-che Wu)
解决方案:   Check for incomplete equivalence class. (closes #3970)
文件:       src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0935
问题:       Old regexp engine may use invalid buffer for 'iskeyword' or
            uninitialized buffer pointer. (Kuang-che Wu)
解决方案:   Set rex.reg_buf when compiling the pattern. (closes #3972)
文件:       src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0936
问题:       May leak memory when using 'vartabstop'. (Kuang-che Wu)
解决方案:   Fix handling allocated memory for 'vartabstop'. (closes #3976)
文件:       src/option.c, src/buffer.c

Patch 8.1.0937
问题:       Invalid memory access in search pattern. (Kuang-che Wu)
解决方案:   Check for incomplete collation element. (Dominique Pelle,
            closes #3985)
文件:       src/regexp.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0938
问题:       Background color is wrong in MS-Windows console when not using VTP.
解决方案:   Use g_attrCurrent. (Nobuhiro Takasaki, closes #3987)
文件:       src/os_win32.c

Patch 8.1.0939
问题:       No completion for sign group names.
解决方案:   Add completion for sign group names and buffer names. (Yegappan
            Lakshmanan, closes #3980)
文件:       src/sign.c, src/testdir/test_signs.vim

Patch 8.1.0940
问题:       MS-Windows console resizing not handled properly.
解决方案:   Handle resizing the console better. (Nobuhiro Takasaki, Ken
            Takata, closes #3968, closes #3611)
文件:       src/ex_docmd.c, src/normal.c, src/os_win32.c,
            src/proto/os_win32.pro

Patch 8.1.0941
问题:       Macros for MS-Windows are inconsistent, using "32", "3264" and
            others.
解决方案:   Use MSWIN for all MS-Windows builds.  Use FEAT_GUI_MSWIN for the
            GUI build. (Hirohito Higashi, closes #3932)
文件:       src/GvimExt/gvimext.h, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_ivc.mak, src/Make_mvc.mak, src/beval.h, src/blowfish.c,
            src/channel.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_getln.c,
            src/feature.h, src/fileio.c, src/getchar.c, src/glbl_ime.cpp,
            src/globals.h, src/gui.c, src/gui.h, src/gui_beval.c,
            src/gui_gtk.c, src/gui_gtk_f.c, src/gui_gtk_x11.c,
            src/if_cscope.c, src/if_cscope.h, src/if_lua.c, src/if_mzsch.c,
            src/if_ole.cpp, src/if_perl.xs, src/if_python.c, src/if_python3.c,
            src/if_ruby.c, src/if_tcl.c, src/macros.h, src/main.c,
            src/mbyte.c, src/memfile.c, src/memline.c, src/menu.c,
            src/message.c, src/misc1.c, src/misc2.c, src/nbdebug.c,
            src/netbeans.c, src/normal.c, src/option.c, src/option.h,
            src/os_mswin.c, src/os_unix.c, src/os_w32exe.c, src/os_win32.c,
            src/os_win32.h, src/proto.h, src/screen.c, src/search.c,
            src/structs.h, src/syntax.c, src/term.c, src/terminal.c, src/ui.c,
            src/undo.c, src/version.c, src/vim.h, src/vim.rc, src/winclip.c

Patch 8.1.0942
问题:       Options window still checks for the multi_byte feature.
解决方案:   Remove the unnecessary check. (Dominique Pelle, closes #3990)
文件:       runtime/optwin.vim

Patch 8.1.0943
问题:       Still a trace of Farsi support.
解决方案:   Remove defining macros.
文件:       src/feature.h

Patch 8.1.0944
问题:       Format of nbdbg() arguments is not checked.
解决方案:   Add format attribute.  Fix reported problems. (Dominique Pelle,
            closes #3992)
文件:       src/nbdebug.h, src/netbeans.c

Patch 8.1.0945
问题:       Internal error when using pattern with NL in the range.
解决方案:   Use an actual newline for the range. (closes #3989)  Also fix
            error message.  (Dominique Pelle)
文件:       src/regexp_nfa.c, src/testdir/test_regexp_latin.vim

Patch 8.1.0946
问题:       Coveralls is not very useful.
解决方案:   Remove Coveralls badge, add badge for packages.
文件:       README.md

Patch 8.1.0947
问题:       Using MSWIN before it is defined. (Cesar Romani)
解决方案:   Move the block that uses MSWIN to below including vim.h. (Ken
            Takata)
文件:       src/if_ruby.c

Patch 8.1.0948
问题:       When built without +eval "Vim --clean" produces errors. (James
            McCoy)
解决方案:   Do not enable filetype detection.
文件:       runtime/defaults.vim

Patch 8.1.0949
问题:       MS-Windows defines GUI macros different than other systems.
解决方案:   Swap FEAT_GUI and FEAT_GUI_MSWIN. (Hirohito Higashi, closes #3996)
文件:       src/Make_bc5.mak, src/Make_cyg_ming.mak, src/Make_ivc.mak,
            src/Make_mvc.mak, src/if_ole.cpp, src/vim.h, src/vim.rc

Patch 8.1.0950
问题:       Using :python sets 'pyxversion' even when not executed.
解决方案:   Check the "skip" flag. (Shane Harper, closes #3995)
文件:       src/if_python.c, src/if_python3.c, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim

Patch 8.1.0951
问题:       Using WIN64 even though it is never defined.
解决方案:   Only use _WIN64. (Ken Takata, closes #3997)
文件:       src/evalfunc.c

Patch 8.1.0952
问题:       Compilation warnings when building the MS-Windows installer.
解决方案:   Fix buffer sizes. (Yasuhiro Matsumoto, closes #3999)
文件:       src/dosinst.c, src/dosinst.h, src/uninstal.c

Patch 8.1.0953
问题:       A very long file is truncated at 2^31 lines.
解决方案:   Use LONG_MAX for MAXLNUM. (Dominique Pelle, closes #4011)
文件:       src/vim.h

Patch 8.1.0954
问题:       Arguments of semsg() and siemsg() are not checked.
解决方案:   Add function prototype with __attribute__.
文件:       src/message.c, src/proto/message.pro, src/proto.h

Patch 8.1.0955
问题:       Matchit autoload directory not in installer. (Chris Morgan)
解决方案:   Adjust the NSIS script. (Christian Brabandt, closes #4006)
文件:       nsis/gvim.nsi

Patch 8.1.0956
问题:       Using context:0 in 'diffopt' does not work well.
解决方案:   Make zero context do the same as one line context. (closes #4005)
文件:       src/diff.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_06.0.dump,
            src/testdir/dumps/Test_diff_06.1.dump,
            src/testdir/dumps/Test_diff_06.2.dump

Patch 8.1.0957 (after 8.1.0915)
问题:       Mac: fsync fails on network share.
解决方案:   Check for ENOTSUP. (Yee Cheng Chin, closes #4016)
文件:       src/fileio.c

Patch 8.1.0958
问题:       Compiling weird regexp pattern is very slow.
解决方案:   When reallocating post list increase size by 50%. (Kuang-che Wu,
            closes #4012)  Make assert_inrange() accept float values.
文件:       src/regexp_nfa.c, src/eval.c, src/testdir/test_regexp_latin.vim,
            src/testdir/test_assert.vim

Patch 8.1.0959
问题:       Sorting large numbers is not tested and does not work properly.
解决方案:   Add test.  Fix comparing lines with and without a number.
            (Dominique Pelle, closes #4017)
文件:       src/ex_cmds.c, src/testdir/test_sort.vim

Patch 8.1.0960
问题:       When using ConPTY garbage collection has undefined behavior.
解决方案:   Free the channel in a better way. (Nobuhiro Takasaki, closes #4020)
文件:       src/channel.c

Patch 8.1.0961 (after 8.1.0957)
问题:       Mac: fsync may fail sometimes.
解决方案:   Do not check errno. (Yee Cheng Chin, closes #4025)
文件:       src/fileio.c

Patch 8.1.0962
问题:       Building with MinGW and static libs doesn't work. (Salman Halim)
解决方案:   Add -lgcc. (Ken Takata)
文件:       src/Make_cyg_ming.mak

Patch 8.1.0963
问题:       Illegal memory access when using 'incsearch'.
解决方案:   Reset highlight_match when changing text. (closes #4022)
文件:       src/testdir/test_search.vim, src/misc1.c,
            src/testdir/dumps/Test_incsearch_change_01.dump

Patch 8.1.0964
问题:       Cannot see in CI why a screenshot test failed.
解决方案:   Add info about the failure.
文件:       src/testdir/screendump.vim

Patch 8.1.0965
问题:       Search test fails.
解决方案:   Wait a bit longer for the 'ambiwidth' redraw.
文件:       src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_change_01.dump

Patch 8.1.0966
问题:       One terminal test is flaky.
解决方案:   Add to list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.0967
问题:       Stray dependency in test Makefile.
解决方案:   Remove it. (Masato Nishihata, closes #4018)
文件:       src/testdir/Makefile

Patch 8.1.0968
问题:       Crash when using search pattern \%Ufffffc23.
解决方案:   Limit character to INT_MAX. (closes #4009)
文件:       src/regexp_nfa.c, src/testdir/test_search.vim

Patch 8.1.0969
问题:       Message written during startup is truncated.
解决方案:   Restore message after truncating. (closes #3969)  Add a test.
            (Yasuhiro Matsumoto)
文件:       src/message.c, src/testdir/test_startup.vim

Patch 8.1.0970
问题:       Text properties test fails when 'encoding' is not utf-8.
解决方案:   Compare with original value of 'encoding'. (Christian Brabandt,
            closes #3986)
文件:       src/testdir/runtest.vim, src/testdir/test_textprop.vim

Patch 8.1.0971
问题:       Failure for selecting quoted text object moves cursor.
解决方案:   Restore the Visual selection on failure. (Christian Brabandt,
            closes #4024)
文件:       src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.0972
问题:       Cannot switch from terminal window to next tabpage.
解决方案:   Make CTRL-W gt move to next tabpage.
文件:       src/window.c, src/testdir/test_terminal.vim,
            runtime/doc/terminal.txt

Patch 8.1.0973
问题:       Pattern with syntax error gives three error messages. (Kuang-che
            Wu)
解决方案:   Remove outdated internal error.  Don't fall back to other engine
            after an error.(closes #4035)
文件:       src/regexp_nfa.c, src/testdir/test_search.vim, src/regexp.c

Patch 8.1.0974
问题:       Cannot switch from terminal window to previous tabpage.
解决方案:   Make CTRL-W gT move to previous tabpage.
文件:       src/window.c, src/testdir/test_terminal.vim,
            runtime/doc/terminal.txt

Patch 8.1.0975
问题:       Using STRNCPY() wrongly. Warning for uninitialized variable.
解决方案:   Use mch_memmove(). Initialize variable. (Yasuhiro Matsumoto,
            closes #3979)
文件:       src/screen.c, src/textprop.c

Patch 8.1.0976
问题:       Dosinstall still has buffer overflow problems.
解决方案:   Adjust buffer sizes. (Yasuhiro Matsumoto, closes #4002)
文件:       src/dosinst.c, src/dosinst.h, src/uninstal.c

Patch 8.1.0977
问题:       Blob not tested with Ruby.
解决方案:   Add more test coverage.  Fixes a crash. (Dominique Pelle,
            closes #4036)
文件:       src/if_ruby.c, src/testdir/test_ruby.vim

Patch 8.1.0978
问题:       Blob not tested with Perl.
解决方案:   Add more test coverage.  Fixes a crash. (Dominique Pelle,
            closes #4037)
文件:       src/if_perl.c, src/testdir/test_ruby.vim

Patch 8.1.0979
问题:       Compiler warning for unused functions. (Yasuhiro Matsumoto)
解决方案:   Adjust #ifdef.
文件:       src/screen.c

Patch 8.1.0980
问题:       extend() insufficiently tested.
解决方案:   Add more tests. (Dominique Pelle, closes #4040)
文件:       src/testdir/test_listdict.vim

Patch 8.1.0981
问题:       Pasting in terminal insufficiently tested.
解决方案:   Add more tests. (Dominique Pelle, closes #4040)
文件:       src/testdir/test_terminal.vim

Patch 8.1.0982
问题:       update_cursor() called twice in :shell.
解决方案:   Remove one of the calls. (Yasuhiro Matsumoto, closes #4039)
文件:       src/terminal.c

Patch 8.1.0983
问题:       Checking __CYGWIN32__ unnecessarily.
解决方案:   Remove the checks. (Ken Takata)
文件:       src/evalfunc.c, src/os_unix.c, src/os_win32.c

Patch 8.1.0984
问题:       Unnecessary #ifdefs.
解决方案:   Remove the #ifdefs. (Ken Takata)
文件:       src/winclip.c

Patch 8.1.0985
问题:       Crash with large number in regexp. (Kuang-che Wu)
解决方案:   Check for long becoming negative int. (closes #4042)
文件:       src/regexp.c, src/testdir/test_search.vim

Patch 8.1.0986
问题:       rename() is not properly tested.
解决方案:   Add tests. (Dominique Pelle, closes #4061)
文件:       src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_rename.vim

Patch 8.1.0987
问题:       Unnecessary condition in #ifdef.
解决方案:   Remove using CYGWIN32. (Ken Takata)
文件:       src/os_unix.h, src/xxd/xxd.c

Patch 8.1.0988
问题:       Deleting a location list buffer breaks location list window
            functionality.
解决方案:   (Yegappan Lakshmanan, closes #4056)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.0989
问题:       Various small code ugliness.
解决方案:   Remove pointless NULL checks. Fix function calls. Fix typos.
            (Dominique Pelle, closes #4060)
文件:       src/buffer.c, src/crypt.c, src/evalfunc.c, src/ex_cmds2.c,
            src/globals.h, src/gui_gtk_f.c, src/gui_gtk_x11.c, src/gui_mac.c,
            src/ops.c, src/option.h, src/os_unix.c, src/os_win32.c,
            src/popupmnu.c, src/regexp.c, src/ui.c, src/version.c

Patch 8.1.0990
问题:       Floating point exception with "%= 0" and "/= 0".
解决方案:   Avoid dividing by zero. (Dominique Pelle, closes #4058)
文件:       src/eval.c, src/testdir/test_vimscript.vim

Patch 8.1.0991
问题:       Cannot build with FEAT_EVAL defined and FEAT_SEARCH_EXTRA
            undefined, and with FEAT_DIFF defined and FEAT_EVAL undefined.
解决方案:   Add a couple of #ifdefs. (closes #4067)
文件:       src/diff.c, src/search.c

Patch 8.1.0992
问题:       A :normal command while executing a register resets the
            reg_executing() result.
解决方案:   Save and restore reg_executing. (closes #4066)
文件:       src/ex_docmd.c, src/structs.h, src/testdir/test_functions.vim

Patch 8.1.0993
问题:       ch_read() may return garbage if terminating NL is missing.
解决方案:   Add terminating NUL. (Ozaki Kiichi, closes #4065)
文件:       src/channel.c, src/testdir/test_channel.vim

Patch 8.1.0994
问题:       Relative cursor position is not calculated correctly.
解决方案:   Always set topline, also when window is one line only.
            (Robert Webb) Add more info to getwininfo() for testing.
文件:       src/window.c, src/evalfunc.c, runtime/doc/eval.txt,
            src/testdir/test_window_cmd.vim

Patch 8.1.0995
问题:       A getchar() call while executing a register resets the
            reg_executing() result.
解决方案:   Save and restore reg_executing. (closes #4066)
文件:       src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.0996 (after 8.1.0994)
问题:       A few screendump tests fail because of scrolling.
解决方案:   Update the screendumps.
文件:       src/testdir/dumps/Test_incsearch_substitute_11.dump,
	    src/testdir/dumps/Test_incsearch_substitute_12.dump,
	    src/testdir/dumps/Test_incsearch_substitute_13.dump

Patch 8.1.0997
问题:       Using GUI colors in vim.exe when 'termguicolors' is off.
解决方案:   Add condition for 'termguicolors' set. (Ken Takata, closes #4078)
文件:       src/os_win32.c

Patch 8.1.0998
问题:       getcurpos() unexpectedly changes "curswant".
解决方案:   Save and restore "curswant". (closes #4069)
文件:       src/evalfunc.c, src/testdir/test_visual.vim

Patch 8.1.0999
问题:       Use register one too often and not properly tested.
解决方案:   Do not always use register one when specifying a register.
            (closes #4085)  Add more tests.
文件:       src/ops.c, src/testdir/test_registers.vim

Patch 8.1.1000
问题:       Indenting is off.
解决方案:   Make indenting consistent and update comments. (Ozaki Kiichi,
            closes #4079)
文件:       src/getchar.c, src/ops.c

Patch 8.1.1001
问题:       Visual area not correct when using 'cursorline'.
解决方案:   Update w_last_cursorline also in Visual mode. (Hirohito Higashi,
            closes #4086)
文件:       src/screen.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_cursorline_with_visualmode_01.dump

Patch 8.1.1002
问题:       "gf" does not always work when URL has a port number. (Jakob
            Schöttl)
解决方案:   When a URL is recognized also accept ":". (closes #4082)
文件:       src/findfile.c, src/testdir/test_gf.vim

Patch 8.1.1003
问题:       Playing back recorded key sequence mistakes key code.
解决方案:   Insert a <Nop> after the <Esc>. (closes #4068)
文件:       src/getchar.c, src/testdir/test_registers.vim

Patch 8.1.1004
问题:       Function "luaV_setref()" not covered with tests.
解决方案:   Add a test. (Dominique Pelle, closes #4089)
文件:       src/testdir/test_lua.vim

Patch 8.1.1005 (after 8.1.1003)
问题:       Test fails because t_F2 is not set.
解决方案:   Add try-catch.
文件:       src/testdir/test_registers.vim

Patch 8.1.1006
问题:       Repeated code in quickfix support.
解决方案:   Move code to functions. (Yegappan Lakshmanan, closes #4091)
文件:       src/quickfix.c

Patch 8.1.1007
问题:       Using closure may consume a lot of memory.
解决方案:   unreference items that are no longer needed. Add a test. (Ozaki
            Kiichi, closes #3961)
文件:       src/testdir/Make_all.mak, src/testdir/test_memory_usage.vim,
            src/userfunc.c

Patch 8.1.1008
问题:       MS-Windows: HAVE_STDINT_H only defined for non-debug version.
解决方案:   Move definition of HAVE_STDINT_H up. (Taro Muraoka, closes #4109)
文件:       src/Make_mvc.mak

Patch 8.1.1009
问题:       MS-Windows: some text is not baseline aligned.
解决方案:   Use bottom alignment. (Taro Muraoka, closes #4116, closes #1520)
文件:       src/gui_dwrite.cpp

Patch 8.1.1010
问题:       Lua interface leaks memory.
解决方案:   Clear typeval after copying it.
文件:       src/if_lua.c

Patch 8.1.1011
问题:       Indent from autoindent not removed from blank line. (Daniel Hahler)
解决方案:   Do not reset did_ai when text follows. (closes #4119)
文件:       src/misc1.c, src/testdir/test_edit.vim

Patch 8.1.1012
问题:       Memory leak with E461.
解决方案:   Clear the typeval. (Dominique Pelle, closes #4111)
文件:       src/eval.c

Patch 8.1.1013
问题:       MS-Windows: Scrolling fails when dividing the screen.
解决方案:   Position the cursor before calling ScrollConsoleScreenBuffer().
            (Nobuhiro Takasaki, closes #4115)
文件:       src/os_win32.c

Patch 8.1.1014
问题:       MS-Windows: /analyze only defined for non-debug version.
解决方案:   Move adding of /analyze up. (Ken Takata, closes #4114)
文件:       src/Make_mvc.mak

Patch 8.1.1015
问题:       Quickfix buffer shows up in list, can't get buffer number.
解决方案:   Make the quickfix buffer unlisted when the quickfix window is
            closed.  get the quickfix buffer number with getqflist().
            (Yegappan Lakshmanan, closes #4113)
文件:       runtime/doc/eval.txt, runtime/doc/quickfix.txt, src/quickfix.c,
            src/testdir/test_quickfix.vim, src/window.c

Patch 8.1.1016
问题:       MS-Windows: No color in shell when using "!" in 'guioptions'.
解决方案:   Don't stop termcap when using a terminal window for the shell.
            (Nobuhiro Takasaki, vim-jp, closes #4117)
文件:       src/ex_cmds.c

Patch 8.1.1017
问题:       Off-by-one error in filetype detection.
解决方案:   Also check the last line of the file.
文件:       runtime/autoload/dist/ft.vim

Patch 8.1.1018
问题:       Window cleared when entering Terminal-Normal twice. (Epheien)
解决方案:   Don't cleanup scrollback when there is no postponed scrollback.
            (Christian Brabandt, closes #4126)
文件:       src/terminal.c

Patch 8.1.1019
问题:       Lua: may garbage collect function reference in use.
解决方案:   Keep the function name instead of the typeval. Make luaV_setref()
            handle funcref objects. (Ozaki Kiichi, closes #4127)
文件:       src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.1020
问题:       Compiler warning for Python3 interface.
解决方案:   Add type cast. (Ozaki Kiichi, closes #4128, closes #4103)
文件:       src/if_python3.c

Patch 8.1.1021
问题:       pyeval() and py3eval() leak memory.
解决方案:   Do not increase the reference count twice. (Ozaki Kiichi,
            closes #4129)
文件:       src/if_python.c, src/if_python3.c

Patch 8.1.1022
问题:       May use NULL pointer when out of memory. (Coverity)
解决方案:   Check for blob_alloc() returning NULL.
文件:       src/blob.c

Patch 8.1.1023
问题:       May use NULL pointer when indexing a blob. (Coverity)
解决方案:   Break out of loop after using index on blob
文件:       src/eval.c

Patch 8.1.1024
问题:       Stray log calls in terminal code. (Christian Brabandt)
解决方案:   Remove the calls.
文件:       src/terminal.c

Patch 8.1.1025
问题:       Checking NULL pointer after addition. (Coverity)
解决方案:   First check for NULL, then add the column.
文件:       src/regexp.c

Patch 8.1.1026
问题:       Unused condition. (Coverity)
解决方案:   Remove the condition.  Also remove unused #define.
文件:       src/move.c

Patch 8.1.1027
问题:       Memory usage test sometimes fails.
解决方案:   Use 80% of before.last as the lower limit. (Christian Brabandt)
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1028
问题:       MS-Windows: memory leak when creating terminal fails.
解决方案:   Free the command. (Ken Takata, closes #4138)
文件:       src/os_win32.c

Patch 8.1.1029
问题:       DirectWrite doesn't take 'linespace' into account.
解决方案:   Include 'linespace' in the position. (Ken Takata, closes #4137)
文件:       src/gui_dwrite.cpp, src/gui_w32.c

Patch 8.1.1030
问题:       Quickfix function arguments are inconsistent.
解决方案:   Pass a list pointer instead of info and index. (Yegappan
            Lakshmanan, closes #4135)
文件:       src/quickfix.c

Patch 8.1.1031
问题:       Memory usage test may still fail.
解决方案:   Drop the unused min value. (Christian Brabandt)
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1032
问题:       Warnings from clang static analyzer. (Yegappan Lakshmanan)
解决方案:   Fix relevant warnings.
文件:       src/arabic.c, src/edit.c, src/eval.c, src/fileio.c, src/normal.c,
            src/option.c, src/os_unix.c, src/regexp.c, src/screen.c,
            src/channel.c, src/charset.c, src/message.c

Patch 8.1.1033
问题:       Memory usage test may still fail on some systems. (Elimar
            Riesebieter)
解决方案:   Increase tolerance from 1% to 3%.
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1034
问题:       Too many #ifdefs.
解决方案:   Merge FEAT_MOUSE_SGR into FEAT_MOUSE_XTERM / FEAT_MOUSE_TTY.
文件:       src/evalfunc.c, src/misc2.c, src/os_unix.c, src/term.c,
            src/version.c, src/feature.h

Patch 8.1.1035
问题:       prop_remove() second argument is not optional.
解决方案:   Fix argument count.  Use "buf" instead of "curbuf". (closes #4147)
文件:       src/evalfunc.c, src/testdir/test_textprop.vim, src/textprop.c

Patch 8.1.1036
问题:       Quickfix function arguments are inconsistent.
解决方案:   Pass a list pointer to more functions. (Yegappan Lakshmanan,
            closes #4149)
文件:       src/quickfix.c

Patch 8.1.1037
问题:       Memory usage test may still fail on some systems.
解决方案:   Increase tolerance from 3% to 20%.
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1038
问题:       Arabic support excludes Farsi.
解决方案:   Add Farsi support to the Arabic support. (Ali Gholami Rudi,
            Ameretat Reith)
文件:       Filelist, src/arabic.c, src/arabic.h, src/globals.h, src/macros.h,
            src/mbyte.c, src/proto/arabic.pro, src/proto/mbyte.pro,
            src/Makefile, src/testdir/test_arabic.vim

Patch 8.1.1039
问题:       MS-Windows build fails.
解决方案:   Remove dependency on arabic.h
文件:       src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms

Patch 8.1.1040
问题:       FEAT_TAG_ANYWHITE is not enabled in any build.
解决方案:   Remove the feature.
文件:       src/feature.h, src/tag.c, src/evalfunc.c, src/version.c,
            src/Make_vms.mms

Patch 8.1.1041
问题:       Test for Arabic no longer needed.
解决方案:   Remove the test for something that was intentionally left out.
文件:       src/testdir/test_arabic.vim

Patch 8.1.1042
问题:       The paste test doesn't work properly in the Windows console.
解决方案:   Disable the test.
文件:       src/testdir/test_paste.vim

Patch 8.1.1043
问题:       Lua interface does not support Blob.
解决方案:   Add support to Blob. (Ozaki Kiichi, closes #4151)
文件:       runtime/doc/if_lua.txt, src/if_lua.c, src/testdir/test_lua.vim

Patch 8.1.1044
问题:       No way to check the reference count of objects.
解决方案:   Add test_refcount(). (Ozaki Kiichi, closes #4124)
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_vimscript.vim

Patch 8.1.1045
问题:       E315 ml_get error when using Python and hidden buffer.
解决方案:   Make sure the cursor position is valid. (Ben Jackson,
            closes #4153, closes #4154)
文件:       src/if_py_both.h, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim

Patch 8.1.1046
问题:       the "secure" variable is used inconsistently. (Justin M. Keyes)
解决方案:   Set it to one instead of incrementing.
文件:       src/buffer.c, src/option.c

Patch 8.1.1047
问题:       WINCH signal is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #4158)
文件:       src/testdir/Make_all.mak, src/testdir/test_signals.vim

Patch 8.1.1048
问题:       Minor issues with tests.
解决方案:   Delete unused test OK file.  Add missing entries in list of tests.
            Fix readme file. (Masato Nishihata, closes #4160)
文件:       src/testdir/test85.ok, src/testdir/Make_all.mak,
            src/testdir/README.txt

Patch 8.1.1049
问题:       When user tries to exit with CTRL-C message is confusing.
解决方案:   Only mention ":qa!" when there is a changed buffer. (closes #4163)
文件:       src/undo.c, src/proto/undo.pro, src/normal.c,
            src/testdir/test_normal.vim

Patch 8.1.1050
问题:       Blank screen when DirectWrite failed.
解决方案:   Call redraw_later_clear() after recreating the Direct2D render
            target. (Ken Takata, closes #4172)
文件:       src/gui_dwrite.cpp

Patch 8.1.1051
问题:       Not all ways to switch terminal mode are tested.
解决方案:   Add more test cases.
文件:       src/testdir/test_terminal.vim

Patch 8.1.1052
问题:       test for CTRL-C message sometimes fails
解决方案:   Make sure there are no changed buffers.
文件:       src/testdir/test_normal.vim

Patch 8.1.1053
问题:       Warning for missing return statement. (Dominique Pelle)
解决方案:   Add return statement.
文件:       src/undo.c

Patch 8.1.1054
问题:       Not checking return value of ga_grow(). (Coverity)
解决方案:   Only append when ga_grow() returns OK.
文件:       src/if_lua.c

Patch 8.1.1055
问题:       CTRL-G U in Insert mode doesn't work to avoid splitting the undo
            sequence for shift-left and shift-right.
解决方案:   Also check dont_sync_undo for shifted cursor keys. (Christian
            Brabandt)
文件:       src/edit.c, src/testdir/test_mapping.vim

Patch 8.1.1056
问题:       No eval function for Ruby.
解决方案:   Add rubyeval(). (Ozaki Kiichi, closes #4152)
文件:       runtime/doc/eval.txt, runtime/doc/if_ruby.txt, src/evalfunc.c,
            src/if_ruby.c, src/proto/if_ruby.pro, src/testdir/test_ruby.vim

Patch 8.1.1057
问题:       Nsis config is too complicated.
解决方案:   Use "File /r" for the macros and pack directories. (Ken Takata,
            closes #4169)
文件:       nsis/gvim.nsi

Patch 8.1.1058
问题:       Memory usage test may still fail on some systems.
解决方案:   Use 98% of the lower limit. (Christian Brabandt)
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1059
问题:       MS-Windows: PlatformId() is called unnecessarily.
解决方案:   Remove calls to PlatformId(). (Ken Takata, closes #4170)
文件:       src/os_win32.c

Patch 8.1.1060
问题:       MS-Windows: get_cmd_args() is no longer needed, get_cmd_argsW() is
            always used.
解决方案:   Remove get_cmd_args(). (Ken Takata, closes #4171)
文件:       src/gui_w32.c, src/os_w32exe.c

Patch 8.1.1061
问题:       When substitute string throws error, substitute happens anyway.
解决方案:   Skip substitution when aborting. (closes #4161)
文件:       src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1062
问题:       Quickfix code is repeated.
解决方案:   Define FOR_ALL_QFL_ITEMS(). Move some code to separate functions.
            (Yegappan Lakshmanan, closes #4166)
文件:       src/quickfix.c

Patch 8.1.1063
问题:       Insufficient testing for wildmenu completion.
解决方案:   Extend the test case. (Dominique Pelle, closes #4182)
文件:       src/testdir/test_cmdline.vim

Patch 8.1.1064
问题:       No test for output conversion in the GTK GUI.
解决方案:   Add a simplistic test.
文件:       src/testdir/test_gui.vim

Patch 8.1.1065
问题:       No test for using and deleting menu in the GUI.
解决方案:   Add a test.
文件:       src/testdir/test_gui.vim

Patch 8.1.1066
问题:       VIMDLL isn't actually used.
解决方案:   Remove VIMDLL support.
文件:       src/gui_w32.c, src/main.c, src/os_w32exe.c, src/Make_bc5.mak,
            src/os_w32dll.c

Patch 8.1.1067
问题:       Issues added on github are unstructured.
解决方案:   Add a bug and feature request template. (Ken Takata, closes #4183)
文件:       .github/ISSUE_TEMPLATE/feature_request.md,
            .github/ISSUE_TEMPLATE/bug_report.md

Patch 8.1.1068
问题:       Cannot get all the information about current completion.
解决方案:   Add complete_info(). (Shougo, Hirohito Higashi, closes #4106)
文件:       runtime/doc/eval.txt, runtime/doc/insert.txt,
            runtime/doc/usr_41.txt, src/edit.c, src/evalfunc.c,
            src/proto/edit.pro, src/testdir/test_popup.vim

Patch 8.1.1069
问题:       Source README file doesn't look nice on github.
解决方案:   Turn it into markdown, still readable as plain text.
            (WenxuanHuang, closes #4141)
文件:       src/README.txt, src/README.md, Filelist

Patch 8.1.1070
问题:       Issue templates are not good enough.
解决方案:   Rephrase to anticipate unexperienced users.
文件:       .github/ISSUE_TEMPLATE/feature_request.md,
            .github/ISSUE_TEMPLATE/bug_report.md

Patch 8.1.1071
问题:       Cannot get composing characters from the screen.
解决方案:   Add screenchars() and screenstring(). (partly by Ozaki Kiichi,
            closes #4059)
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_utf8.vim, src/testdir/view_util.vim

Patch 8.1.1072
问题:       Extending sign and foldcolumn below the text is confusing.
解决方案:   Let the sign and foldcolumn stop at the last text line, just like
            the line number column.  Also stop the command line window leader.
            (Christian Brabandt, closes #3964)
文件:       src/screen.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_of_diff_01.dump,
            src/testdir/dumps/Test_diff_01.dump,
            src/testdir/dumps/Test_diff_02.dump,
            src/testdir/dumps/Test_diff_03.dump,
            src/testdir/dumps/Test_diff_04.dump,
            src/testdir/dumps/Test_diff_05.dump,
            src/testdir/dumps/Test_diff_06.dump,
            src/testdir/dumps/Test_diff_06.0.dump,
            src/testdir/dumps/Test_diff_06.1.dump,
            src/testdir/dumps/Test_diff_06.2.dump,
            src/testdir/dumps/Test_diff_10.dump,
            src/testdir/dumps/Test_diff_11.dump,
            src/testdir/dumps/Test_diff_12.dump,
            src/testdir/dumps/Test_diff_13.dump,
            src/testdir/dumps/Test_diff_14.dump,
            src/testdir/dumps/Test_diff_15.dump,
            src/testdir/dumps/Test_diff_16.dump,
            src/testdir/dumps/Test_diff_17.dump,
            src/testdir/dumps/Test_diff_18.dump,
            src/testdir/dumps/Test_diff_19.dump,
            src/testdir/dumps/Test_diff_20.dump,
            src/testdir/dumps/Test_diff_with_cursorline_01.dump,
            src/testdir/dumps/Test_diff_with_cursorline_02.dump,
            src/testdir/dumps/Test_diff_with_cursorline_03.dump,
            src/testdir/dumps/Test_folds_with_rnu_01.dump,
            src/testdir/dumps/Test_folds_with_rnu_02.dump

Patch 8.1.1073
问题:       Space in number column is on wrong side with 'rightleft' set.
解决方案:   Move the space to the text side.  Add a test.
文件:       src/screen.c, src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_of_diff_02.dump

Patch 8.1.1074
问题:       Python test doesn't wipe out hidden buffer.
解决方案:   Wipe out the buffer. (Ben Jackson, closes #4189)
文件:       src/testdir/test_python2.vim, src/testdir/test_python3.vim

Patch 8.1.1075
问题:       Function reference count wrong in Python code.
解决方案:   Use "O" instead of "N" for the arguments. (Ben Jackson,
            closes #4188)
文件:       src/if_py_both.h

Patch 8.1.1076
问题:       File for Insert mode is much too big.
解决方案:   Split off the code for Insert completion. (Yegappan Lakshmanan,
            closes #4044)
文件:       Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/edit.c, src/evalfunc.c,
            src/globals.h, src/insexpand.c, src/misc2.c, src/proto.h,
            src/proto/edit.pro, src/proto/insexpand.pro, src/search.c,
            src/spell.c, src/structs.h, src/tag.c, src/vim.h

Patch 8.1.1077
问题:       reg_executing() is reset by calling input().
解决方案:   Implement a more generic way to save and restore reg_executing.
            (Ozaki Kiichi, closes #4192)
文件:       src/evalfunc.c, src/ex_docmd.c, src/testdir/test_functions.vim

Patch 8.1.1078
问题:       When 'listchars' is set a composing char on a space is wrong.
解决方案:   Separate handling a non-breaking space and a space. (Yasuhiro
            Matsumoto, closes #4046)
文件:       src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1079
问题:       No need for a separate ScreenLinesUtf8() test function.
解决方案:   Get the composing characters with ScreenLines().
文件:       src/testdir/view_util.vim, src/testdir/test_listchars.vim,
            src/testdir/test_utf8.vim

Patch 8.1.1080
问题:       When a screendump test fails, moving the file is a hassle.
解决方案:   Instead of appending ".failed" to the file name, keep the same
            file name but put the screendump in the "failed" directory.
            Then the file name only needs to be typed once when moving a
            screendump.
文件:       src/testdir/screendump.vim

Patch 8.1.1081
问题:       MS-Windows: cannot use fonts whose name cannot be represented in
            the current code page.
解决方案:   Use wide font functions. (Ken Takata, closes #4000)
文件:       src/gui_w32.c, src/os_mswin.c, src/proto/gui_w32.pro,
            src/proto/os_mswin.pro

Patch 8.1.1082
问题:       "Conceal" match is mixed up with 'hlsearch' match.
解决方案:   Check that a match is found, not a 'hlsearch' item. (Andy
            Massimino, closes #4073)
文件:       src/screen.c

Patch 8.1.1083
问题:       MS-Windows: hang when opening a file on network share.
解决方案:   Avoid using FindFirstFile(), use GetLongPathNameW(). (Ken Takata,
            closes #3923)
文件:       src/os_win32.c

Patch 8.1.1084
问题:       Cannot delete a match from another window. (Paul Jolly)
解决方案:   Add window ID argument to matchdelete(), clearmatches(),
            getmatches() and setmatches(). (Andy Massimino, closes #4178)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_match.vim

Patch 8.1.1085
问题:       Compiler warning for possibly uninitialized variable. (Tony
            Mechelynck)
解决方案:   Make conditions more logical.
文件:       src/arabic.c

Patch 8.1.1086
问题:       Too many curly braces.
解决方案:   Remove curly braces where they are not needed. (Hirohito Higashi,
            closes #3982)
文件:       src/autocmd.c, src/buffer.c, src/crypt_zip.c, src/dosinst.c,
            src/edit.c, src/insexpand.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/getchar.c, src/gui.c,
            src/gui_gtk.c, src/gui_mac.c, src/gui_motif.c, src/gui_photon.c,
            src/gui_w32.c, src/gui_x11.c, src/if_mzsch.c, src/if_python3.c,
            src/if_ruby.c, src/if_tcl.c, src/indent.c, src/libvterm/src/pen.c,
            src/macros.h, src/memline.c, src/menu.c, src/misc1.c, src/move.c,
            src/netbeans.c, src/normal.c, src/ops.c, src/option.c,
            src/os_mswin.c, src/os_qnx.c, src/os_unix.c, src/os_win32.c,
            src/regexp_nfa.c, src/screen.c, src/spell.c, src/terminal.c

Patch 8.1.1087
问题:       tag stack is incorrect after CTRL-T and then :tag
解决方案:   Handle DT_TAG differently. (test by Andy Massimino, closes #3944,
            closes #4177)
文件:       src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.1088
问题:       Height of quickfix window not retained with vertical split.
解决方案:   Use frame_fixed_height() and frame_fixed_width(). (Hongbo Liu,
            closes #4013, closes #2998)
文件:       src/testdir/test_winbuf_close.vim, src/window.c

Patch 8.1.1089
问题:       Tutor does not check $LC_MESSAGES.
解决方案:   Let $LC_MESSAGES overrule $LANG. (Miklos Vajna, closes #4112)
文件:       runtime/tutor/tutor.vim

Patch 8.1.1090
问题:       MS-Windows: modify_fname() has problems with some 'encoding'.
解决方案:   Use GetLongPathNameW() instead of GetLongPathName(). (Ken Takata,
            closes #4007)
文件:       src/eval.c

Patch 8.1.1091
问题:       MS-Windows: cannot use multi-byte chars in environment var.
解决方案:   Use the wide API. (Ken Takata, closes #4008)
文件:       src/misc1.c, src/testdir/test_let.vim

Patch 8.1.1092
问题:       Setting 'guifont' when maximized resizes the Vim window. When
            'guioptions' contains "k" gvim may open with a tiny window.
解决方案:   Avoid un-maximizing when setting 'guifont'. (Yee Cheng Chin,
            closes #3808)
文件:       src/gui.c

Patch 8.1.1093
问题:       Support for outdated tags format slows down tag parsing.
解决方案:   Remove FEAT_TAG_OLDSTATIC.
文件:       runtime/doc/tagsrch.txt, src/feature.h, src/tag.c, src/version.c

Patch 8.1.1094
问题:       Long line in tags file causes error.
解决方案:   Check for overlong line earlier. (Andy Massimino, closes #4051,
            closes #4084)
文件:       src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.1095
问题:       MS-Windows: executable() fails on very long filename.
解决方案:   Use much bigger buffer. (Ken Takata, closes #4015)
文件:       src/os_win32.c, src/testdir/test_functions.vim

Patch 8.1.1096
问题:       MS-Windows: cannot distinguish BS and CTRL-H.
解决方案:   Add code for VK_BACK. (Linwei, closes #1833)
文件:       src/term.c, src/os_win32.c

Patch 8.1.1097 (after 8.1.1092)
问题:       Motif build fails. (Paul Jolly)
解决方案:   Only use gui_mch_maximized() for MS-Windows. (closes #4194)
文件:       src/gui.c

Patch 8.1.1098
问题:       Quickfix code duplication.
解决方案:   Refactor the qf_init_ext() function. (Yegappan Lakshmanan,
            closes #4193)
文件:       src/README.md, src/quickfix.c

Patch 8.1.1099
问题:       The do_tag() function is too long.
解决方案:   Factor parts out to separate functions.  Move simplify_filename()
            to a file where it fits better. (Andy Massimino, closes #4195)
文件:       src/tag.c, src/proto/tag.pro, src/findfile.c,
            src/proto/findfile.pro

Patch 8.1.1100
问题:       Tag file without trailing newline no longer works. (Marco Hinz)
解决方案:   Don't expect a newline at the end of the file. (closes #4200)
文件:       src/tag.c, src/testdir/test_taglist.vim

Patch 8.1.1101
问题:       Signals test may fail in the GUI.
解决方案:   Skip the test for the GUI. (Yee Checng Chin, closes #4202)
文件:       src/testdir/test_signals.vim

Patch 8.1.1102
问题:       Win32 exe file contains unused code.
解决方案:   Remove unused #ifdefs and code. (Ken Takata, closes #4198)
文件:       src/os_w32exe.c

Patch 8.1.1103
问题:       MS-Windows: old API calls are no longer needed.
解决方案:   Always use the wide functions. (Ken Takata, closes #4199)
文件:       src/glbl_ime.cpp, src/globals.h, src/gui_w32.c, src/misc1.c,
            src/os_mswin.c, src/os_win32.c, src/vim.h,

Patch 8.1.1104
问题:       MS-Windows: not all environment variables can be used.
解决方案:   Use the wide version of WinMain() and main(). (Ken Takata,
            closes #4206)
文件:       src/Make_cyg.mak, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/main.c, src/os_w32exe.c

Patch 8.1.1105
问题:       Long escape sequences may be split up.
解决方案:   Assume escape sequences can be up to 80 bytes long. (Nobuhiro
            Takasaki, closes #4196)
文件:       src/term.c

Patch 8.1.1106
问题:       No test for 'writedelay'.
解决方案:   Add a test.
文件:       src/testdir/test_options.vim

Patch 8.1.1107
问题:       No test for 'visualbell'.
解决方案:   Add a test.
文件:       src/testdir/test_options.vim

Patch 8.1.1108
问题:       Test for 'visualbell' doesn't work.
解决方案:   Make 'belloff' empty.
文件:       src/testdir/test_options.vim

Patch 8.1.1109
问题:       Deleted file still in list of distributed files.
解决方案:   Remove the src/os_w32dll.c entry.
文件:       Filelist

Patch 8.1.1110
问题:       Composing chars on space wrong when 'listchars' is set.
解决方案:   Do not use "space" and "nbsp" entries of 'listchars' when there is
            a composing character.  (Yee Cheng Chin, closes #4197)
文件:       src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1111
问题:       It is not easy to check for infinity.
解决方案:   Add isinf(). (Ozaki Kiichi, closes #3787)
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_float_func.vim

Patch 8.1.1112
问题:       Duplicate code in quickfix file.
解决方案:   Move code into functions. (Yegappan Lakshmanan, closes #4207)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1113
问题:       Making an autocommand trigger once is not so easy.
解决方案:   Add the ++once argument.  Also add ++nested as an alias for
            "nested". (Justin M. Keyes, closes #4100)
文件:       runtime/doc/autocmd.txt, src/autocmd.c,
            src/testdir/test_autocmd.vim, src/globals.h

Patch 8.1.1114
问题:       Confusing overloaded operator "." for string concatenation.
解决方案:   Add ".." for string concatenation.  Also "let a ..= b".
文件:       src/eval.c, src/testdir/test_eval_stuff.vim, runtime/doc/eval.txt

Patch 8.1.1115
问题:       Cannot build with older C compiler.
解决方案:   Move variable declaration to start of block.
文件:       src/autocmd.c

Patch 8.1.1116
问题:       Cannot enforce a Vim script style.
解决方案:   Add the :scriptversion command. (idea by Yasuhiro Matsumoto,
            closes #3857)
文件:       runtime/doc/repeat.txt, runtime/doc/eval.txt, src/eval.c,
            src/ex_cmds.h, src/evalfunc.c, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro, src/structs.h, src/buffer.c, src/main.c,
            src/option.c, src/ex_cmdidxs.h, src/testdir/test_eval_stuff.vim

Patch 8.1.1117
问题:       Build failure without the +eval feature.
解决方案:   Add #ifdef.
文件:       src/ex_cmds2.c

Patch 8.1.1118
问题:       A couple of conditions are hard to understand.
解决方案:   Split the conditions into pieces. (Ozaki Kiichi, closes #3879)
文件:       src/getchar.c, src/os_unix.c

Patch 8.1.1119
问题:       No support for Windows on ARM64.
解决方案:   Add ARM64 support (Leendert van Doorn)
文件:       src/GvimExt/Makefile, src/Make_mvc.mak, src/dosinst.c,
            src/xpm/arm64/lib-vc14/libXpm.lib, Filelist, src/INSTALLpc.txt

Patch 8.1.1120
问题:       Cannot easily get directory entry matches.
解决方案:   Add the readdir() function. (Yasuhiro Matsumoto, closes #2439)
文件:       runtime/doc/eval.txt, src/eval.c, src/evalfunc.c, src/misc1.c,
            src/proto/eval.pro, src/testdir/test_functions.vim

Patch 8.1.1121
问题:       Test for term_gettitle() was disabled.
解决方案:   Enable the test and bail out only when it doesn't work. (Dominique
            Pelle, closes #3776)
文件:       src/testdir/test_terminal.vim

Patch 8.1.1122
问题:       char2nr() does not handle composing characters.
解决方案:   Add str2list() and list2str(). (Ozaki Kiichi, closes #4190)
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_utf8.vim

Patch 8.1.1123
问题:       No way to avoid filtering for autocomplete function, causing
            flickering of the popup menu.
解决方案:   Add the "equal" field to complete items. (closes #3887)
文件:       runtime/doc/insert.txt, src/insexpand.c,
            src/testdir/test_popup.vim

Patch 8.1.1124
问题:       Insert completion flags are mixed up.
解决方案:   Clean up flags use of ins_compl_add() and cp_flags.
文件:       src/insexpand.c, src/proto/insexpand.pro, src/search.c, src/spell.c

Patch 8.1.1125
问题:       Libvterm does not handle the window position report.
解决方案:   Let libvterm call the fallback CSI handler when not handling CSI
            sequence.  Handle the window position report in Vim.
文件:       src/libvterm/src/state.c, src/terminal.c, src/ui.c,
            src/proto/ui.pro, src/evalfunc.c, src/testdir/test_terminal.vim

Patch 8.1.1126
问题:       Build failure with +terminal but without tgetent.
解决方案:   Adjust #ifdef.
文件:       src/ui.c

Patch 8.1.1127
问题:       getwinpos() doesn't work in terminal on MS-Windows console.
解决方案:   Adjust #ifdefs.  Disable test for MS-Windows console.
文件:       src/ui.c, src/term.c, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.1.1128
问题:       getwinpos() test does not work on MS-Windows.
解决方案:   Skip the test.
文件:       src/testdir/test_terminal.vim

Patch 8.1.1129
问题:       When making a new screendump test have to create the file.
解决方案:   Continue creating the failed screendump, so it can be moved once
            it is correct.
文件:       src/testdir/screendump.vim

Patch 8.1.1130
问题:       MS-Windows: warning for unused variable.
解决方案:   Remove the variable.
文件:       src/evalfunc.c

Patch 8.1.1131
问题:       getwinpos() does not work in the MS-Windows console.
解决方案:   Implement getwinpos().
文件:       src/ui.c, src/evalfunc.c, src/terminal.c,
            src/testdir/test_terminal.vim

Patch 8.1.1132
问题:       getwinpos() test fails on MS-Windows.
解决方案:   Don't try running this test.
文件:       src/testdir/test_terminal.vim

Patch 8.1.1133
问题:       Compiler warning for uninitialized struct member. (Yegappan
            Lakshmanan)
解决方案:   Add initializer field.
文件:       src/globals.h

Patch 8.1.1134
问题:       Buffer for quickfix window is reused for another file.
解决方案:   Don't reuse the quickfix buffer. (Yegappan Lakshmanan)
文件:       src/buffer.c, src/testdir/test_quickfix.vim

Patch 8.1.1135 (after 8.1.1134)
问题:       Build failure for small version. (Tony Mechelynck)
解决方案:   Add #ifdef.
文件:       src/buffer.c

Patch 8.1.1136
问题:       Decoding of mouse click escape sequence is not tested.
解决方案:   Add a test for xterm and SGR using low-level input.  Make
            low-level input execution with feedkeys() work.
文件:       src/testdir/test_termcodes.vim, src/testdir/Make_all.mak,
            src/evalfunc.c, src/ex_docmd.c

Patch 8.1.1137
问题:       Xterm mouse wheel escape sequence is not tested.
解决方案:   Add a test using low-level input. (Dominique Pelle, closes #4221)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1138
问题:       Plugins don't get notified when the popup menu changes.
解决方案:   Add the CompleteChanged event. (Qiming Zhao, Andy Massimino,
            closes #4176)
文件:       runtime/doc/autocmd.txt, src/autocmd.c, src/dict.c,
            src/insexpand.c, src/popupmnu.c, src/proto/autocmd.pro,
            src/proto/dict.pro, src/proto/popupmnu.pro,
            src/testdir/test_popup.vim, src/vim.h

Patch 8.1.1139
问题:       No test for what is fixed in patch 8.1.0716.
解决方案:   Add a test. (Yasuhiro Matsumoto, closes #3797)
文件:       src/testdir/test_ins_complete.vim

Patch 8.1.1140
问题:       Not easy to find out what neighbors a window has.
解决方案:   Add more arguments to winnr(). (Yegappan Lakshmanan, closes #3993)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/proto/window.pro,
            src/testdir/test_window_cmd.vim, src/window.c

Patch 8.1.1141
问题:       Terminal winpos test fails with very large terminal. (Dominique
            Pelle)
解决方案:   Compute the expected size more accurately. (closes #4228)
文件:       src/testdir/test_terminal.vim

Patch 8.1.1142
问题:       No test for dragging the window separators with the mouse.
解决方案:   Add a test. (Dominique Pelle, closes #4226)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1143
问题:       May pass weird strings to file name expansion.
解决方案:   Check for matching characters.  Disallow control characters.
文件:       src/misc1.c, src/testdir/test_spell.vim, src/option.c,
            src/proto/option.pro, src/spell.c,
            src/testdir/test_escaped_glob.vim

Patch 8.1.1144 (after 8.1.1143)
问题:       Too strict checking of the 'spellfile' option.
解决方案:   Allow for a path.
文件:       src/option.c, src/testdir/test_spell.vim

Patch 8.1.1145
问题:       Compiler warning for unused function. (Tony Mechelynck)
解决方案:   Add #ifdef.
文件:       src/option.c

Patch 8.1.1146
问题:       In MS-Windows console colors in a terminal window are wrong.
解决方案:   Use the ansi index also for 16 colors. (Ken Takata)
文件:       src/terminal.c

Patch 8.1.1147
问题:       Desktop file translations are requiring manual updates.
解决方案:   Use the .po files for desktop file translations. (Christian
            Brabandt)
文件:       src/po/Makefile, src/po/gvim.desktop.in, src/po/vim.desktop.in,
            CONTRIBUTING.md, Filelist, runtime/vim.desktop,
            runtime/gvim.desktop

Patch 8.1.1148
问题:       CTRL-L with 'incsearch' does not pick up char under cursor.
            (Smylers)
解决方案:   Do not compare the position with the cursor position. (Hirohito
            Higashi, closes #3620)
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.1149
问题:       Building desktop files fails with older msgfmt.
解决方案:   Add autoconf check.  Avoid always building the desktop files.
文件:       src/configure.ac, src/auto/configure, src/po/Makefile,
            src/po/Make_all.mak, src/config.mk.in

Patch 8.1.1150
问题:       Generating desktop files not tested on Travis.
解决方案:   Install a newer msgfmt package. (Christian Brabandt)
文件:       .travis.yml

Patch 8.1.1151
问题:       Build fails when using shadow directory.
解决方案:   Link the desktop.in files.
文件:       src/Makefile

Patch 8.1.1152
问题:       Compiler warning with VS2019.
解决方案:   Specify different offset for "AMD64". (Ken Takata, closes #4235)
文件:       src/GvimExt/Makefile

Patch 8.1.1153
问题:       Msgfmt complains about missing LINGUAS file. (Tony Mechelynck)
解决方案:   Add command to generate LINGUAS.
文件:       src/po/Makefile

Patch 8.1.1154
问题:       Getting a newer msgfmt on Travis is too complicated.
解决方案:   Use a "sourceline" entry. (Ozaki Kiichi, closes #4236)
文件:       .travis.yml

Patch 8.1.1155
问题:       Termcodes tests can be improved.
解决方案:   Add helper functions to simplify tests.  Dragging statusline for
            xterm and sgr. (Dominique Pelle, closes #4237)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1156
问题:       Unicode emoji and other image characters not recognized.
解决方案:   Add ranges for musical notation, game pieces, etc. (Martin
            Tournoij, closes #4238)
文件:       src/mbyte.c

Patch 8.1.1157
问题:       Unicode tables are out of date.
解决方案:   Update to Unicode 12. (Christian Brabandt, closes #4240)
文件:       src/mbyte.c

Patch 8.1.1158
问题:       Json encoded string is sometimes missing the final NUL.
解决方案:   Add the NUL.  Also for log messages.
文件:       src/json.c, src/channel.c, src/testdir/test_json.vim

Patch 8.1.1159
问题:       MS-Windows: with a silent (un)install $VIM/_vimrc is removed.
解决方案:   Don't delete _vimrc in silent mode. (Ken Takata, closes #4242)
文件:       nsis/gvim.nsi

Patch 8.1.1160
问题:       Termcodes test would fail in a very big terminal.
解决方案:   Bail out when the row is larger than what will work. (Dominique
            Pelle, closes #4246)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1161
问题:       Unreachable code.
解决方案:   Remove condition that will never be true.  Add tests for all ANSI
            colors.
文件:       src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1162
问题:       Incorrect coverage information; typo in color name.
解决方案:   Fix the typo.  Set environment variables to have a nested Vim
            write the coverage info in another directory.
文件:       src/testdir/test_terminal.vim, src/testdir/screendump.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1163
问题:       Codecov does not report all the coverage information.
解决方案:   Make a second run with the nested execution output, expect that
            Codecov will merge the results.
文件:       .travis.yml

Patch 8.1.1164
问题:       Gettitle test is failing when server name differs. (Kenta Sato)
解决方案:   Accept "VIM1" when 'autoservername' is used. (Dominique Pelle,
            closes #4250, closes #4249)
文件:       src/testdir/test_terminal.vim

Patch 8.1.1165
问题:       No test for mouse clicks in the terminal tabpage line.
解决方案:   Add a test. (Dominique Pelle, closes #4247).  Also init
            TabPageIdxs[], in case it's used before a redraw.
文件:       src/screen.c, src/testdir/test_termcodes.vim

Patch 8.1.1166 (after 8.1.1164)
问题:       Gettitle test can still fail when another Vim is running.
解决方案:   Accept any server name number. (Dominique Pelle, closes #4252)
文件:       src/testdir/test_terminal.vim

Patch 8.1.1167
问题:       No test for closing tab by click in tabline.
解决方案:   Add a test.  Also fix that dragging window separator could fail in
            a large terminal. (Dominique Pelle, closes #4253)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1168
问题:       Not all screen update code of the terminal window is executed in
            tests.
解决方案:   Redraw before taking a screenshot.
文件:       src/testdir/screendump.vim

Patch 8.1.1169
问题:       Writing coverage info in a separate dir is not needed.
解决方案:   Revert the changes to use a separate directory.
文件:       .travis.yml, src/testdir/screendump.vim

Patch 8.1.1170
问题:       Terminal ANSI color test does not cover all colors.
解决方案:   Use the color number, the name is not always resulting in an ANSI
            color when t_Co is 256.
文件:       src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1171
问题:       Statusline test could fail in large terminal.
解决方案:   Make the test work on a huge terminal. (Dominique Pelle,
            closes #4255)
文件:       src/testdir/test_statusline.vim

Patch 8.1.1172
问题:       Cursor properties were not fully tested.
解决方案:   Add a test. (Dominique Pelle, closes #4256)
文件:       src/testdir/test_terminal.vim

Patch 8.1.1173
问题:       Suspend test has duplicated lines.
解决方案:   Use a function.
文件:       src/testdir/test_suspend.vim

Patch 8.1.1174
问题:       Cannot build with Ruby 1.8. (Tom G. Christensen)
解决方案:   Include ruby/st.h. (Ozaki Kiichi, closes #4257)
文件:       src/if_ruby.c

Patch 8.1.1175
问题:       No test for dragging a tab with the mouse and for creating a new
            tab by double clicking in the tabline.
解决方案:   Add two tests. (Dominique Pelle, closes #4258)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1176 (after 8.1.1175)
问题:       Test for dragging a tab is flaky.
解决方案:   Add a brief sleep.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1177
问题:       .ts files are recognized as xml, while typescript is more common.
解决方案:   Recognize .ts files as typescript. (closes #4264)
文件:       runtime/filetype.vim src/testdir/test_filetype.vim

Patch 8.1.1178
问题:       When mouse click tests fails value of 'ttymouse' is unknown.
解决方案:   Add a message to the assert.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1179
问题:       No test for mouse clicks in the fold column.
解决方案:   Add a test. (Dominique Pelle, closes #4261)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1180
问题:       Vim script debugger tests are old style.
解决方案:   Turn into new style tests. (Yegappan Lakshmanan, closes #4259)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test108.in, src/testdir/test108.ok,
            src/testdir/test_debugger.vim

Patch 8.1.1181
问题:       Tests for mouse clicks are a bit flaky when run in an interactive
            terminal.
解决方案:   Use "xterm2" instead of "xterm" for 'ttymouse' to avoid spurious
            drag events.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1182
问题:       Some function prototypes are outdated.
解决方案:   Update function prototypes. (Ken Takata, closes #4267)
文件:       src/os_mswin.c, src/proto/ex_getln.pro, src/proto/gui_w32.pro,
            src/terminal.c, src/proto/terminal.pro, src/proto/window.pro,
            src/window.c

Patch 8.1.1183
问题:       Typos in VisVim comments.
解决方案:   Correct the typos. (Christ van Willegen)
文件:       src/VisVim/Commands.cpp, src/VisVim/OleAut.cpp,
            src/VisVim/README_VisVim.txt

Patch 8.1.1184
问题:       Undo file left behind after running test.
解决方案:   Delete the undo file. (Dominique Pelle, closes #4279)
文件:       src/testdir/test_filechanged.vim

Patch 8.1.1185
问题:       Mapping for CTRL-X is inconsistent.
解决方案:   Map CTRL-X to "*d also for the MS-Windows console. (Ken Takata,
            closes #4265)
文件:       src/getchar.c

Patch 8.1.1186
问题:       readdir() allocates list twice.
解决方案:   Remove second allocation.  Also check for zero length.
文件:       src/evalfunc.c

Patch 8.1.1187
问题:       Cannot recognize Pipfile.
解决方案:   Use existing filetypes. (Charles Ross, closes #4280)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1188
问题:       Not all Vim variables require the v: prefix.
解决方案:   When scriptversion is 3 all Vim variables can only be used with
            the v: prefix.  (Ken Takata, closes #4274)
文件:       src/eval.c, src/ex_cmds2.c, src/testdir/test_eval_stuff.vim,
            runtime/doc/eval.txt

Patch 8.1.1189
问题:       Mode is not cleared when leaving Insert mode.
解决方案:   Clear the mode when got_int is set. (Ozaki Kiichi, closes #4270)
文件:       src/edit.c, src/testdir/test_bufline.vim,
            src/testdir/test_messages.vim

Patch 8.1.1190
问题:       has('vimscript-3') does not work.
解决方案:   Add "vimscript-3" to the list of features. (partly by Ken Takata)
文件:       src/evalfunc.c, src/testdir/test_eval_stuff.vim

Patch 8.1.1191
问题:       Not all debug commands are covered by a test.
解决方案:   Add more tests. (Yegappan Lakshmanan, closes #4282)
文件:       src/testdir/test_debugger.vim

Patch 8.1.1192
问题:       Mode is not cleared when leaving Insert mode with mapped Esc.
解决方案:   Clear the mode when redraw_cmdline is set. (closes #4269)
文件:       src/globals.h, src/screen.c, src/testdir/test_messages.vim

Patch 8.1.1193
问题:       Typos and small problems in test files.
解决方案:   Small improvements.
文件:       src/testdir/test_gn.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_registers.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_vartabs.vim

Patch 8.1.1194
问题:       Typos and small problems in source files.
解决方案:   Small fixes.
文件:       src/channel.c, src/crypt.c, src/edit.c, src/regexp.h, src/tag.c,
            src/term.c, src/terminal.c, src/userfunc.c, src/installman.sh

Patch 8.1.1195
问题:       Vim script debugger functionality needs cleanup.
解决方案:   Move debugger code to a separate file.  Add more tests. (Yegappan
            Lakshmanan, closes #4285)
文件:       Filelist, src/Make_bc5.mak, src/Make_cyg_ming.mak,
            src/Make_dice.mak, src/Make_ivc.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/debugger.c, src/ex_cmds2.c,
            src/proto.h, src/proto/debugger.pro, src/proto/ex_cmds2.pro

Patch 8.1.1196
问题:       Parallel build may fail.
解决方案:   Update dependencies.
文件:       src/Makefile

Patch 8.1.1197
问题:       When starting with multiple tabs file messages is confusing.
解决方案:   Set 'shortmess' when loading the other tabs. (Christian Brabandt)
文件:       src/main.c, src/testdir/test_startup.vim,
            src/testdir/dumps/Test_start_with_tabs.dump

Patch 8.1.1198
问题:       Bracketed paste may remain active after Vim exists, because the
            terminal emulator restores the setting.
解决方案:   Set/reset bracketed paste mode before setting the terminal mode.
            (closes #3579)
文件:       src/term.c


Patch 8.1.1199
问题:       No test for :abclear.
解决方案:   Add a test. (Dominique Pelle, closes #4292)
文件:       src/testdir/test_mapping.vim

Patch 8.1.1200
问题:       Old style comments in debugger source.
解决方案:   Use new style comments. (Yegappan Lakshmanan, closes #4286)
文件:       src/README.md, src/debugger.c

Patch 8.1.1201
问题:       Output of :command is hard to read.
解决方案:   Make some columns wider, some narrower.  Truncate the command when
            listing all.
文件:       src/ex_docmd.c, src/message.c, src/proto/message.pro,
            src/getchar.c, src/menu.c

Patch 8.1.1202
问题:       Always get regexp debugging logs when building with -DDEBUG.
解决方案:   By default do not create regexp debugging logs. (Ken Takata)
文件:       src/regexp.c

Patch 8.1.1203
问题:       Some autocmd tests are old style.
解决方案:   Turn the tests into new style. (Yegappan Lakshmanan, closes #4295)
文件:       src/Makefile, src/testdir/Make_all.mak,
            src/testdir/Make_amiga.mak, src/testdir/Make_vms.mms,
            src/testdir/test11.in, src/testdir/test11.ok,
            src/testdir/test_autocmd.vim

Patch 8.1.1204
问题:       Output of :command with address completion is not nice.
解决方案:   Shorten the address completion names.
文件:       src/ex_docmd.c, runtime/doc/map.txt

Patch 8.1.1205
问题:       A BufReadPre autocommand may cause the cursor to move.
解决方案:   Restore the cursor position after executing the autocommand,
            unless the autocommand moved it. (Christian Brabandt,
            closes #4302, closes #4294)
文件:       src/autocmd.c, src/proto/window.pro, src/structs.h,
            src/testdir/test_autocmd.vim, src/window.c

Patch 8.1.1206
问题:       User command parsing and listing not properly tested.
解决方案:   Add more tests. (Dominique Pelle, closes #4296)
文件:       src/testdir/test_usercommands.vim

Patch 8.1.1207
问题:       Some compilers give warning messages.
解决方案:   Initialize variables, change printf() argument. (Christian
            Brabandt, closes #4305)
文件:       src/eval.c, src/screen.c, src/undo.c, src/window.c

Patch 8.1.1208
问题:       Links to repository use wrong file name.
解决方案:   Swap the file names. (Nahuel Ourthe, closes #4304)
文件:       src/README.md

Patch 8.1.1209
问题:       Clever compiler warns for buffer being too small.
解决方案:   Make the buffer bigger (even though it's not really needed).
文件:       src/evalfunc.c, src/syntax.c

Patch 8.1.1210
问题:       Support for user commands is spread out. No good reason to make
            user commands optional.
解决方案:   Move user command support to usercmd.c.  Always enable the
            user_commands feature.
文件:       src/usercmd.c, src/proto/usercmd.pro, Filelist, src/Make_bc5.mak,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_ivc.mak,
            src/Make_manx.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_sas.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/eval.c, src/evalfunc.c, src/ex_cmds.h,
            src/ex_docmd.c, src/proto/ex_docmd.pro, src/ex_getln.c,
            src/feature.h, src/macros.h, src/misc2.c, src/proto.h,
            src/structs.h, src/version.c, runtime/doc/eval.txt,
            runtime/doc/various.txt

Patch 8.1.1211
问题:       Not all user command code is tested.
解决方案:   Add more tests.
文件:       src/testdir/test_usercommands.vim

Patch 8.1.1212
问题:       Signal PWR is not tested.
解决方案:   Test that PWR updates the swap file. (Dominique Pelle,
            closes #4312)
文件:       src/testdir/test_signals.vim

Patch 8.1.1213
问题:       "make clean" in top dir does not cleanup indent test output.
解决方案:   Clean the indent test output.  Do not rely on the vim executable
            for that. (closes #4307)
文件:       Makefile, runtime/indent/Makefile,
            runtime/indent/testdir/cleantest.vim

Patch 8.1.1214
问题:       Old style tests.
解决方案:   Move tests from test14 to new style test files. (Yegappan
            Lakshmanan, closes #4308)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test14.in, src/testdir/test14.ok,
            src/testdir/test_edit.vim, src/testdir/test_normal.vim,
            src/testdir/test_search.vim, src/testdir/test_substitute.vim,
            src/testdir/test_visual.vim

Patch 8.1.1215
问题:       "make clean" does not remove generated src/po files.
解决方案:   Remove the files for "make clean". (Christian Brabandt)
文件:       src/po/Makefile

Patch 8.1.1216
问题:       Mouse middle click is not tested.
解决方案:   Add a test. (Dominique Pelle, closes #4310)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1217
问题:       MS-Windows: no space reserved for font quality name.
解决方案:   Add quality_name length if present. (Ken Takata, closes #4311)
文件:       src/gui_w32.c

Patch 8.1.1218
问题:       Cannot set a directory for a tab page.
解决方案:   Add the tab-local directory. (Yegappan Lakshmanan, closes #4212)
文件:       runtime/doc/autocmd.txt, runtime/doc/editing.txt,
            runtime/doc/eval.txt, runtime/doc/index.txt,
            runtime/doc/options.txt, runtime/doc/usr_22.txt,
            runtime/doc/usr_41.txt, src/eval.c, src/evalfunc.c,
            src/ex_cmdidxs.h, src/ex_cmds.h, src/ex_docmd.c, src/if_py_both.h,
            src/proto/eval.pro, src/proto/ex_docmd.pro, src/structs.h,
            src/testdir/test_getcwd.vim, src/testdir/test_mksession.vim,
            src/window.c

Patch 8.1.1219
问题:       Not checking for NULL return from alloc().
解决方案:   Add checks. (Martin Kunev, closes #4303, closes #4174)
文件:       src/beval.c, src/blowfish.c, src/crypt.c, src/crypt_zip.c,
            src/ops.c, src/option.c, src/popupmnu.c, src/proto/blowfish.pro,
            src/proto/crypt_zip.pro, src/gui_gtk_f.c, src/gui_gtk_x11.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c

Patch 8.1.1220 (after 8.1.1219)
问题:       Build fails on MS-Windows.
解决方案:   Move declaration to start of block.
文件:       src/libvterm/src/state.c

Patch 8.1.1221
问题:       Filtering does not work when listing marks.
解决方案:   Implement filtering marks. (Marcin Szamotulski, closes #3895)
文件:       runtime/doc/various.txt, src/mark.c,
            src/testdir/test_filter_cmd.vim

Patch 8.1.1222 (after 8.1.1219)
问题:       Build still fails on MS-Windows.
解决方案:   Move another declaration to start of block.
文件:       src/libvterm/src/state.c

Patch 8.1.1223
问题:       Middle mouse click test fails without a clipboard.
解决方案:   Check if the clipboard can be used. (Dominique Pelle, Christian
            Brabandt)  Also use WorkingClipboard() instead of checking for the
            "clipboard" feature.
文件:       src/testdir/test_termcodes.vim, src/testdir/test_quotestar.vim

Patch 8.1.1224
问题:       MS-Windows: cannot specify font weight.
解决方案:   Add the "W" option to 'guifont'. (closes #4309)  Move GUI font
            explanation out of options.txt.
文件:       runtime/doc/options.txt, runtime/doc/gui.txt,
            runtime/doc/mbyte.txt, src/gui_w32.c, src/os_mswin.c

Patch 8.1.1225
问题:       Cannot create a pty to use with :terminal on FreeBSD.
解决方案:   Add support for posix_openpt(). (Ozaki Kiichi, closes #4306,
            closes #4289)
文件:       src/configure.ac, src/config.h.in, src/auto/configure, src/pty.c

Patch 8.1.1226
问题:       {not in Vi} remarks get in the way of useful help text.
解决方案:   Make a list of all Vi options, instead of mentioning what Vi does
            not have.  Update the help text for options.
文件:       runtime/doc/vi_diff.txt, runtime/doc/options.txt

Patch 8.1.1227
问题:       Duplicate entries in the generated .desktop files. (Ralf Schandl)
解决方案:   Remove translated entries from the .in files. (closes #4313)
文件:       src/po/gvim.desktop.in, src/po/vim.desktop.in

Patch 8.1.1228
问题:       Not possible to process tags with a function.
解决方案:   Add tagfunc() (Christian Brabandt, Andy Massimino, closes #4010)
文件:       runtime/doc/options.txt, runtime/doc/tagsrch.txt,
            runtime/optwin.vim, src/buffer.c, src/dict.c, src/ex_cmds.c,
            src/globals.h, src/insexpand.c, src/normal.c, src/option.c,
            src/option.h, src/proto/dict.pro, src/structs.h, src/tag.c,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_tagfunc.vim, src/vim.h, src/window.c

Patch 8.1.1229
问题:       Warning for posix_openpt() not declared. (Tony Mechelynck)
解决方案:   Add declaration.
文件:       src/pty.c

Patch 8.1.1230
问题:       A lot of code is shared between vim.exe and gvim.exe.
解决方案:   Optionally put the shared code in vim.dll. (Ken Takata,
            closes #4287)
文件:       Filelist, nsis/gvim.nsi, runtime/doc/gui_w32.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/channel.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_docmd.c, src/feature.h,
            src/fileio.c, src/getchar.c, src/globals.h, src/gui.c, src/gui.h,
            src/gui_gtk_x11.c, src/gui_w32.c, src/if_mzsch.c, src/main.c,
            src/mbyte.c, src/memline.c, src/message.c, src/misc2.c,
            src/normal.c, src/option.c, src/os_mswin.c, src/os_w32dll.c,
            src/os_w32exe.c, src/os_win32.c, src/os_win32.h,
            src/proto/gui.pro, src/proto/gui_w32.pro, src/proto/misc2.pro,
            src/proto/os_mswin.pro, src/proto/os_win32.pro, src/syntax.c,
            src/term.c, src/terminal.c, src/ui.c, src/version.c, src/vim.rc

Patch 8.1.1231
问题:       Asking about existing swap file unnecessarily.
解决方案:   When it is safe, delete the swap file.  Remove
            HAS_SWAP_EXISTS_ACTION, it is always defined. (closes #1237)
文件:       src/memline.c, src/globals.h, src/buffer.c, src/ex_cmds.c,
            src/fileio.c, src/main.c, src/testdir/test_swap.vim,
            runtime/doc/usr_11.txt, src/os_win32.c, src/proto/os_win32.pro,
            src/os_unix.c, src/proto/os_unix.pro

Patch 8.1.1232
问题:       Can't build on MS-Windows.
解决方案:   Define process_still_running.
文件:       src/memline.c, src/os_win32.c, src/proto/os_win32.pro,
            src/os_unix.c, src/proto/os_unix.pro

Patch 8.1.1233
问题:       Cannot build tiny version.
解决方案:   Remove #ifdef for verb_msg().
文件:       src/message.c

Patch 8.1.1234
问题:       Swap file test fails on MS-Windows.
解决方案:   Only compare the tail of the file names.
文件:       src/testdir/test_swap.vim

Patch 8.1.1235
问题:       Compiler warnings for using STRLEN() value.
解决方案:   Cast to int. (Christian Brabandt, Mike Williams)
文件:       src/tag.c

Patch 8.1.1236
问题:       sjiscorr.c not found in shadow directory. (Tony Mechelynck)
解决方案:   Link po/*.c files with "make shadow".
文件:       src/Makefile

Patch 8.1.1237
问题:       Error for using "compl", reserved word in C++.
解决方案:   Rename to "complp". (suggestion by Ken Takata)
文件:       src/usercmd.c, src/proto/usercmd.pro

Patch 8.1.1238
问题:       MS-Windows: compiler warning for sprintf() format.
解决方案:   Change %d to %ld. (Ken Takata)
文件:       src/gui_w32.c

Patch 8.1.1239
问题:       Key with byte sequence containing CSI does not work.
解决方案:   Do not recognize CSI as special unless the GUI is active. (Ken
            Takata, closes #4318)
文件:       src/getchar.c

Patch 8.1.1240
问题:       Runtime desktop files are overwritten by build. (Tony Mechelynck)
解决方案:   Instead of copying the files find them with "make install".
文件:       src/Makefile, src/po/Makefile

Patch 8.1.1241
问题:       Ex command info contains confusing information.
解决方案:   When using the NOTADR flag use ADDR_OTHER for the address type.
            Cleanup code using NOTADR.  Check for errors in
            create_cmdidxs.vim.  Adjust Makefile to see the errors.
文件:       src/ex_cmds.h, src/ex_docmd.c, src/Makefile,
            src/create_cmdidxs.vim, src/usercmd.c, src/ex_cmds.c,
            src/window.c, src/testdir/test_usercommands.vim

Patch 8.1.1242
问题:       No cmdline redraw when tabpages have different 'cmdheight'.
解决方案:   redraw the command line when 'cmdheight' changes when switching
            tabpages. (closes #4321)
文件:       src/testdir/test_tabpage.vim, src/window.c,
            src/testdir/dumps/Test_tabpage_cmdheight.dump,
            src/testdir/screendump.vim

Patch 8.1.1243 (after 8.1.1241)
问题:       Compiler warnings for incomplete switch statement. (Tony
            Mechelynck)
解决方案:   Add ADDR_QUICKFIX to the list.
文件:       src/ex_docmd.c

Patch 8.1.1244
问题:       No tests for CTRL-mouse-click.
解决方案:   Add a few tests. (Dominique Pelle, closes #4323)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1245
问题:       ":copen 10" sets height in full-height window. (Daniel Hahler)
解决方案:   Don't set the height if the quickfix window is full height.
            (closes #4325)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1246
问题:       Cannot handle negative mouse coordinate from urxvt.
解决方案:   Accept '-' where a digit is expected. (Vincent Vinel,
            closes #4326)
文件:       src/term.c

Patch 8.1.1247
问题:       Urxvt mouse codes are not tested.
解决方案:   Also set 'ttymouse' to "urxvt" in the termcodes test.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1248
问题:       No test for dec mouse.
解决方案:   Add some tests for dec mouse.  Add "no_query_mouse".
文件:       src/evalfunc.c, src/globals.h, src/os_unix.c,
            src/testdir/test_termcodes.vim, runtime/doc/eval.txt

Patch 8.1.1249
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize it. (Christian Brabandt)
文件:       src/regexp_nfa.c

Patch 8.1.1250
问题:       No test for netterm mouse.
解决方案:   Add some tests for netterm mouse.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1251
问题:       No test for completion of mapping keys.
解决方案:   Add a test.  Also clean up the code.
文件:       src/getchar.c, src/term.c, src/proto/term.pro,
            src/testdir/test_cmdline.vim

Patch 8.1.1252
问题:       Not all mapping completion is tested.
解决方案:   Add a few more mapping completion tests.
文件:       src/testdir/test_cmdline.vim

Patch 8.1.1253 (after 8.1.1252)
问题:       Mapping completion test fails.
解决方案:   Fix expected output.
文件:       src/testdir/test_cmdline.vim

Patch 8.1.1254
问题:       Mapping completion contains dead code.
解决方案:   Remove the code.
文件:       src/term.c, src/testdir/test_cmdline.vim

Patch 8.1.1255
问题:       Building desktop files fails on FreeBSD. (Adam Weinberger)
解决方案:   Avoid using non-portable construct in Makefile. (closes #4332)
文件:       src/po/Makefile

Patch 8.1.1256
问题:       Cannot navigate through errors relative to the cursor.
解决方案:   Add :cabove, :cbelow, :labove and :lbelow. (Yegappan Lakshmanan,
            closes #4316)
文件:       runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/ex_docmd.c, src/proto/quickfix.pro,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1257
问题:       MSVC: name of object directory not always right.
解决方案:   Adjust comment.  Don't use different directory for DIRECTX.  Do
            use different directory for USE_MSVCRT. (Ken Takata, closes #4333)
文件:       src/Make_mvc.mak

Patch 8.1.1258
问题:       The "N files to edit" message can not be suppressed.
解决方案:   Suppress the message with --not-a-term. (closes #4320)
文件:       src/main.c

Patch 8.1.1259
问题:       Crash when exiting early. (Ralf Schandl)
解决方案:   Only pop/push the title when it was set. (closes #4334)
文件:       src/os_unix.c, src/misc2.c, src/usercmd.c, src/tag.c

Patch 8.1.1260
问题:       Comparing with pointer instead of value.
解决方案:   Add a "*". (Ken Takata, closes #4336)
文件:       src/usercmd.c

Patch 8.1.1261
问题:       No error for quickfix commands with negative range.
解决方案:   Add ADDR_UNSIGNED and use it for quickfix commands.  Make
            assert_fails() show the command if the error doesn't match.
文件:       src/ex_cmds.h, src/ex_docmd.c, src/testdir/test_quickfix.vim,
            runtime/doc/quickfix.txt, src/eval.c, src/quickfix.c,
            src/proto/quickfix.pro, src/ex_cmds2.c

Patch 8.1.1262
问题:       Cannot simulate a mouse click in a test.
解决方案:   Add test_setmouse().
文件:       src/evalfunc.c, runtime/doc/eval.txt, runtime/doc/usr_41.txt

Patch 8.1.1263
问题:       Mouse clicks in WinBar not tested.
解决方案:   Add a test for clicking on the WinBar entries.
文件:       src/testdir/test_winbar.vim

Patch 8.1.1264
问题:       Crash when closing window from WinBar click. (Ben Jackson)
解决方案:   Check that window pointer is still valid. (closes #4337)
文件:       src/menu.c

Patch 8.1.1265
问题:       When GPM mouse support is enabled double clicks in xterm do not
            work.
解决方案:   Use KS_GPM_MOUSE for GPM mouse events.
文件:       src/term.c, src/os_unix.c, src/keymap.h

Patch 8.1.1266
问题:       Winbar test doesn't test enough.
解决方案:   Check that the WinBar actually shows up.  Correct check for clicks
            with no effect. (Ben Jackson, closes #4338)
文件:       src/testdir/test_winbar.vim

Patch 8.1.1267
问题:       Cannot check if GPM mouse support is working.
解决方案:   Add the "mouse_gpm_enable" feature.
文件:       src/evalfunc.c, src/os_unix.c, src/proto/os_unix.pro,
            runtime/doc/eval.txt

Patch 8.1.1268
问题:       Map completion test fails in GUI.
解决方案:   Skip the test that fails.
文件:       src/testdir/test_cmdline.vim

Patch 8.1.1269
问题:       MS-Windows GUI: multibyte chars with a 0x80 byte do not work when
            compiled with VIMDLL.
解决方案:   Adjust the condition for fixing the input buffer. (Ken Takata,
            closes #4330)
文件:       src/getchar.c

Patch 8.1.1270
问题:       Cannot see current match position.
解决方案:   Show "3/44" when using the "n" command and "S" is not in
            'shortmess'. (Christian Brabandt, closes #4317)
文件:       runtime/doc/options.txt, runtime/doc/pattern.txt, src/option.c,
            src/option.h, src/search.c, src/testdir/Make_all.mak,
            src/testdir/test_search_stat.vim

Patch 8.1.1271 (after 8.1.1270)
问题:       Compiler warnings for use of STRNCPY(). (John Marriott)
解决方案:   Use mch_memmove() instead of STRNCPY().
文件:       src/search.c

Patch 8.1.1272
问题:       Click on WinBar of other window not tested.
解决方案:   Add a test case.
文件:       src/testdir/test_winbar.vim

Patch 8.1.1273
问题:       Compiler warning in direct write code.
解决方案:   Add a type cast.
文件:       src/gui_dwrite.cpp

Patch 8.1.1274
问题:       After :unmenu can still execute the menu with :emenu.
解决方案:   Do not execute a menu that was disabled for the specified mode.
文件:       src/menu.c, src/testdir/test_menu.vim

Patch 8.1.1275
问题:       Cannot navigate to errors before/after the cursor.
解决方案:   Add the :cbefore and :cafter commands. (Yegappan Lakshmanan,
            closes #4340)
文件:       runtime/doc/index.txt, runtime/doc/quickfix.txt, src/ex_cmdidxs.h,
            src/ex_cmds.h, src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.1276
问题:       Cannot combine text properties with syntax highlighting.
解决方案:   Add the "combine" field to prop_type_add(). (closes #4343)
文件:       runtime/doc/eval.txt, runtime/doc/textprop.txt, src/screen.c,
            src/structs.h, src/testdir/test_textprop.vim

Patch 8.1.1277 (after 8.1.1276)
问题:       Missing screenshot update.
解决方案:   Update the screenshot.
文件:       src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1278 (after 8.1.1276)
问题:       Missing change for "combine" field.
解决方案:   Also change the textprop implementation.
文件:       src/textprop.c

Patch 8.1.1279
问题:       Cannot set 'spellang' to "sr@latin". (Bojan Stipic)
解决方案:   Allow using '@' in 'spellang'. (closes #4342)
文件:       src/option.c, src/testdir/gen_opt_test.vim

Patch 8.1.1280
问题:       Remarks about functionality not in Vi clutters the help.
解决方案:   Move all info about what is new in Vim or already existed in Vi to
            vi_diff.txt.  Remove {not in Vi} remarks. (closes #4268) Add
            "noet" to the help files modeline.  Also include many other help
            file improvements.
文件:       runtime/doc/vi_diff.txt, runtime/doc/arabic.txt,
            runtime/doc/autocmd.txt, runtime/doc/change.txt,
            runtime/doc/channel.txt, runtime/doc/cmdline.txt,
            runtime/doc/debugger.txt, runtime/doc/debug.txt,
            runtime/doc/develop.txt, runtime/doc/diff.txt,
            runtime/doc/digraph.txt, runtime/doc/editing.txt,
            runtime/doc/eval.txt, runtime/doc/farsi.txt,
            runtime/doc/filetype.txt, runtime/doc/fold.txt,
            runtime/doc/ft_ada.txt, runtime/doc/ft_rust.txt,
            runtime/doc/ft_sql.txt, runtime/doc/gui.txt,
            runtime/doc/gui_w32.txt, runtime/doc/gui_x11.txt,
            runtime/doc/hangulin.txt, runtime/doc/hebrew.txt,
            runtime/doc/helphelp.txt, runtime/doc/help.txt,
            runtime/doc/howto.txt, runtime/doc/if_cscop.txt,
            runtime/doc/if_lua.txt, runtime/doc/if_mzsch.txt,
            runtime/doc/if_ole.txt, runtime/doc/if_perl.txt,
            runtime/doc/if_pyth.txt, runtime/doc/if_ruby.txt,
            runtime/doc/if_sniff.txt, runtime/doc/if_tcl.txt,
            runtime/doc/indent.txt, runtime/doc/index.txt,
            runtime/doc/insert.txt, runtime/doc/intro.txt,
            runtime/doc/map.txt, runtime/doc/mbyte.txt,
            runtime/doc/message.txt, runtime/doc/mlang.txt,
            runtime/doc/motion.txt, runtime/doc/netbeans.txt,
            runtime/doc/options.txt, runtime/doc/os_390.txt,
            runtime/doc/os_amiga.txt, runtime/doc/os_beos.txt,
            runtime/doc/os_dos.txt, runtime/doc/os_mac.txt,
            runtime/doc/os_mint.txt, runtime/doc/os_msdos.txt,
            runtime/doc/os_os2.txt, runtime/doc/os_qnx.txt,
            runtime/doc/os_risc.txt, runtime/doc/os_unix.txt,
            runtime/doc/os_vms.txt, runtime/doc/os_win32.txt,
            runtime/doc/pattern.txt, runtime/doc/pi_getscript.txt,
            runtime/doc/pi_gzip.txt, runtime/doc/pi_logipat.txt,
            runtime/doc/pi_netrw.txt, runtime/doc/pi_paren.txt,
            runtime/doc/pi_spec.txt, runtime/doc/pi_tar.txt,
            runtime/doc/pi_vimball.txt, runtime/doc/pi_zip.txt,
            runtime/doc/print.txt, runtime/doc/quickfix.txt,
            runtime/doc/quickref.txt, runtime/doc/quotes.txt,
            runtime/doc/recover.txt, runtime/doc/remote.txt,
            runtime/doc/repeat.txt, runtime/doc/rileft.txt,
            runtime/doc/russian.txt, runtime/doc/scroll.txt,
            runtime/doc/sign.txt, runtime/doc/spell.txt,
            runtime/doc/sponsor.txt, runtime/doc/starting.txt,
            runtime/doc/syntax.txt, runtime/doc/tabpage.txt,
            runtime/doc/tagsrch.txt, runtime/doc/terminal.txt,
            runtime/doc/term.txt, runtime/doc/textprop.txt,
            runtime/doc/tips.txt, runtime/doc/todo.txt,
            runtime/doc/uganda.txt, runtime/doc/undo.txt,
            runtime/doc/usr_01.txt, runtime/doc/usr_02.txt,
            runtime/doc/usr_03.txt, runtime/doc/usr_04.txt,
            runtime/doc/usr_05.txt, runtime/doc/usr_06.txt,
            runtime/doc/usr_07.txt, runtime/doc/usr_08.txt,
            runtime/doc/usr_09.txt, runtime/doc/usr_10.txt,
            runtime/doc/usr_11.txt, runtime/doc/usr_12.txt,
            runtime/doc/usr_20.txt, runtime/doc/usr_21.txt,
            runtime/doc/usr_22.txt, runtime/doc/usr_23.txt,
            runtime/doc/usr_24.txt, runtime/doc/usr_25.txt,
            runtime/doc/usr_26.txt, runtime/doc/usr_27.txt,
            runtime/doc/usr_28.txt, runtime/doc/usr_29.txt,
            runtime/doc/usr_30.txt, runtime/doc/usr_31.txt,
            runtime/doc/usr_32.txt, runtime/doc/usr_40.txt,
            runtime/doc/usr_41.txt, runtime/doc/usr_43.txt,
            runtime/doc/usr_44.txt, runtime/doc/usr_45.txt,
            runtime/doc/usr_90.txt, runtime/doc/usr_toc.txt,
            runtime/doc/various.txt, runtime/doc/version4.txt,
            runtime/doc/version5.txt, runtime/doc/version6.txt,
            runtime/doc/version7.txt, runtime/doc/version8.txt,
            runtime/doc/visual.txt, runtime/doc/windows.txt, runtime/doc/tags

Patch 8.1.1281
问题:       Cannot specify a count with :chistory.
解决方案:   Add a count to :chistory and :lhistory. (Yegappan Lakshmanan,
            closes #4344)
文件:       runtime/doc/quickfix.txt,  src/ex_cmds.h,  src/quickfix.c,
            src/testdir/test_quickfix.vim

Patch 8.1.1282
问题:       Running make in src/po leaves LINGUAS file behind. (Ken Takata)
解决方案:   Delete LINGUAS after running msgfmt.
文件:       src/po/Makefile

Patch 8.1.1283
问题:       Delaying half a second after the top-bot message.
解决方案:   Instead of the delay add "W" to the search count.
文件:       src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1284
问题:       Detecting *.tmpl as htmlcheetah is outdated.
解决方案:   Use the generic name "template". (closes #4348)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1285
问题:       Test17 is old style.
解决方案:   Turn into new style test. (Yegappan Lakshmanan, closes #4347)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test17.in, src/testdir/test17.ok,
            src/testdir/test17a.in, src/testdir/test_checkpath.vim,
            src/testdir/test_gf.vim

Patch 8.1.1286
问题:       Running tests leaves XTest_tabpage_cmdheight file behind.
解决方案:   Delete the right file. (closes #4350)
文件:       src/testdir/test_tabpage.vim

Patch 8.1.1287
问题:       Cannot build with +eval but without +mouse.
解决方案:   Add #ifdefs around f_test_setmouse(). (John Marriott)
文件:       src/evalfunc.c

Patch 8.1.1288
问题:       Search stats don't show for mapped command.
解决方案:   Remove SEARCH_PEEK from searchit flags.  Add a test. (Christian
            Brabandt)
文件:       src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1289
问题:       May not have enough space to add "W" to search stats.
解决方案:   Reserve a bit more space. (Christian Brabandt)
文件:       src/search.c

Patch 8.1.1290
问题:       .hgignore and .gitignore are either distributed or in git, not
            both.
解决方案:   Add .gitignore to the distribution and .hgignore to git.  Update
            the entries. (Christian Brabandt, Ken Takata)
文件:       .gitignore, .hgignore, Filelist

Patch 8.1.1291
问题:       Not easy to change directory and restore.
解决方案:   Add the chdir() function. (Yegappan Lakshmanan, closes #4358)
文件:       runtime/doc/eval.txt, runtime/doc/todo.txt,
            runtime/doc/usr_41.txt, src/evalfunc.c, src/ex_docmd.c,
            src/if_py_both.h, src/proto/ex_docmd.pro, src/structs.h,
            src/testdir/test_cd.vim

Patch 8.1.1292
问题:       Invalid command line arguments not tested.
解决方案:   Add a test. (Dominique Pelle, closes #4346)
文件:       src/testdir/test_startup.vim

Patch 8.1.1293
问题:       MSVC files are no longer useful for debugging.  Newer Visual
            Studio versions cannot read them.
解决方案:   Delete the files. (Ken Takata, closes #4357)
文件:       Filelist, src/Make_dvc.mak, src/Make_ivc.mak,
            runtime/doc/debug.txt, src/INSTALLpc.txt, src/Make_mvc.mak

Patch 8.1.1294
问题:       MS-Windows: Some fonts return wrong average char width.
解决方案:   Compute the average ourselves. (Ken Takata, closes #4356)
文件:       src/gui_w32.c

Patch 8.1.1295
问题:       When vimrun.exe does not exist external command may fail.
解决方案:   Use "cmd /c" twice to get the same behavior. (Ken Takata,
            closes #4355)
文件:       src/os_win32.c

Patch 8.1.1296
问题:       Crash when using invalid command line argument.
解决方案:   Check for options not being initialized.
文件:       src/term.c, src/testdir/test_startup.vim

Patch 8.1.1297
问题:       Invalid argument test fails without GTK.
解决方案:   Test -display and --display separately.
文件:       src/testdir/test_startup.vim

Patch 8.1.1298
问题:       Invalid argument test fails without X clipboard.
解决方案:   Test -display only with the +xterm_clipboard feature.
文件:       src/testdir/test_startup.vim

Patch 8.1.1299
问题:       "extends" from 'listchars' is used when 'list' is off. (Hiroyuki
            Yoshinaga)
解决方案:   Only use the "extends" character when 'list' is on. (Hirohito
            Higashi, closes #4360)
文件:       src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1300
问题:       In a terminal 'ballooneval' does not work right away.
解决方案:   Flush output after drawing the balloon.  Add the <Ignore> key
            code.  Add a test.
文件:       src/ex_cmds2.c, src/testdir/test_balloon.vim, src/misc2.c,
            src/testdir/Make_all.mak,
            src/testdir/dumps/Test_balloon_eval_term_01.dump

Patch 8.1.1301
问题:       When compiled with VIMDLL some messages are not shown.
解决方案:   Set/reset gui.in_use and gui.starting as needed. (Ken Takata,
            closes #4361)
文件:       src/gui_w32.c, src/main.c, src/message.c

Patch 8.1.1302
问题:       v:beval_text is not tested in Visual mode.
解决方案:   Add a screenshot of the balloon in Visual mode.
文件:       src/testdir/test_balloon.vim, src/normal.c,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_02.dump

Patch 8.1.1303
问题:       Not possible to hide a balloon.
解决方案:   Hide the balloon when balloon_show() is called with an empty
            string or list.  Add balloon_gettext().
文件:       src/evalfunc.c, src/popupmnu.c, src/gui_beval.c, src/gui_w32.c,
            src/beval.h, src/testdir/test_balloon.vim, runtime/doc/eval.txt

Patch 8.1.1304
问题:       MS-Windows: compiler warning for unused value.
解决方案:   Adjust #ifdefs. (Ken Takata, closes #4363)
文件:       src/gui.c

Patch 8.1.1305
问题:       There is no easy way to manipulate environment variables.
解决方案:   Add environ(), getenv() and setenv(). (Yasuhiro Matsumoto,
            closes #2875)
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/Make_all.mak, src/testdir/test_environ.vim

Patch 8.1.1306
问题:       Borland support is outdated and doesn't work.
解决方案:   Remove Borland support, there are other (free) compilers
            available. (Thomas Dziedzic, Ken Takata, closes #4364)
文件:       .gitignore, .hgignore, Filelist, runtime/doc/debug.txt,
            runtime/doc/develop.txt, runtime/doc/usr_90.txt,
            src/GvimExt/Make_bc5.mak, src/GvimExt/gvimext.cpp,
            src/GvimExt/gvimext.rc, src/INSTALLpc.txt, src/Make_bc5.mak,
            src/dosinst.c, src/dosinst.h, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/gui_w32.c, src/if_ole.cpp, src/if_py_both.h,
            src/main.c, src/mark.c, src/message.c, src/misc1.c, src/misc2.c,
            src/normal.c, src/option.c, src/os_mswin.c, src/os_w32exe.c,
            src/os_win32.c, src/os_win32.h, src/proto.h, src/screen.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/userfunc.c,
            src/vim.h, src/vim.rc, src/vimrun.c, src/xxd/Make_bc5.mak,
            src/xxd/xxd.c

Patch 8.1.1307
问题:       Cannot reconnect to the X server after it restarted.
解决方案:   Add the :xrestore command. (Adrian Kocis, closes #844)
文件:       runtime/doc/index.txt, runtime/doc/various.txt, src/os_unix.c,
            src/proto/os_unix.pro, src/globals.h, src/ex_cmds.h,
            src/ex_cmdidxs.h, src/ex_docmd.c, src/testdir/test_paste.vim

Patch 8.1.1308
问题:       The Normal highlight is not defined when compiled with GUI.
解决方案:   Always define Normal. (Christian Brabandt, closes #4072)
文件:       runtime/doc/syntax.txt, src/syntax.c,
            src/testdir/test_highlight.vim

Patch 8.1.1309 (after 8.1.1308)
问题:       Test for Normal highlight fails on MS-Windows GUI.
解决方案:   Skip the test for MS-Windows GUI.
文件:       src/testdir/test_highlight.vim

Patch 8.1.1310
问题:       Named function arguments are never optional.
解决方案:   Support optional function arguments with a default value. (Andy
            Massimino, closes #3952)
文件:       runtime/doc/eval.txt, src/structs.h,
            src/testdir/test_user_func.vim, src/userfunc.c

Patch 8.1.1311
问题:       Aborting an autocmd with an exception is not tested.
解决方案:   Add a test.  Also shows how to abort a command by throwing an
            exception.
文件:       src/testdir/test_autocmd.vim

Patch 8.1.1312
问题:       Coverity warning for using uninitialized variable.
解决方案:   Clear exarg_T.
文件:       src/quickfix.c, src/channel.c, src/ex_cmds2.c

Patch 8.1.1313
问题:       Warnings for using localtime() and ctime().
解决方案:   Use localtime_r() if available.  Avoid using ctime().
文件:       src/configure.ac, src/auto/configure, src/config.h.in,
            src/evalfunc.c, src/nbdebug.c, src/undo.c, src/memline.c,
            src/proto/memline.pro, src/hardcopy.c

Patch 8.1.1314
问题:       MSVC makefile is not nicely indented.
解决方案:   Adjust spaces in preprocessor directives. (Ken Takata)
文件:       src/Make_mvc.mak

Patch 8.1.1315
问题:       There is always a delay if a termrequest is never answered.
解决方案:   When the response is not received within two seconds consider the
            request to have failed.
文件:       src/term.c

Patch 8.1.1316
问题:       Duplicated localtime() call.
解决方案:   Delete one.
文件:       src/undo.c

Patch 8.1.1317
问题:       Output from Travis can be improved.
解决方案:   Add section headers.  Handle errors better. (Ozaki Kiichi,
            closes #4098)
文件:       .travis.yml, configure

Patch 8.1.1318
问题:       Code for text changes is in a "misc" file.
解决方案:   Move the code to change.c.
文件:       src/misc1.c, src/proto/misc1.pro, src/change.c,
            src/proto/change.pro, src/proto.h, src/memline.c, Filelist,
            src/Make_cyg_ming.mak, src/Make_dice.mak, src/Make_manx.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_sas.mak,
            src/Make_vms.mms, src/Makefile, src/README.md

Patch 8.1.1319
问题:       Computing function length name in many places.
解决方案:   compute name length in call_func().
文件:       src/eval.c, src/userfunc.c, src/channel.c, src/evalfunc.c,
            src/ex_cmds2.c, src/regexp.c, src/terminal.c

Patch 8.1.1320
问题:       It is not possible to track changes to a buffer.
解决方案:   Add listener_add() and listener_remove(). No docs or tests yet.
文件:       src/structs.h, src/change.c, src/proto/change.pro

Patch 8.1.1321
问题:       No docs or tests for listener functions.
解决方案:   Add help and tests for listener_add() and listener_remove().
            Invoke the callbacks before redrawing.
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt,
            src/testdir/test_listener.vim, src/testdir/Make_all.mak,
            src/change.c, src/screen.c, src/evalfunc.c, src/proto/evalfunc.pro

Patch 8.1.1322
问题:       Cygwin makefile is not nicely indented.
解决方案:   Adjust spaces in preprocessor directives. (Ken Takata)
文件:       src/Make_cyg_ming.mak

Patch 8.1.1323
问题:       'mouse' option is reset when using GPM mouse.
解决方案:   Add flag for GPM mouse.
文件:       src/term.c

Patch 8.1.1324
问题:       Stray comma in VMS makefile.
解决方案:   Remove the comma. (Naruhiko Nishino, closes #4368)
文件:       src/Make_vms.mms

Patch 8.1.1325
问题:       Cannot build with +eval but without +channel and +timers. (John
            Marriott)
解决方案:   Adjust #ifdef for get_callback().
文件:       src/evalfunc.c, src/testdir/test_autocmd.vim

Patch 8.1.1326
问题:       No test for listener with partial.
解决方案:   Add a test.  Add example to help.
文件:       src/testdir/test_listener.vim, runtime/doc/eval.txt

Patch 8.1.1327
问题:       Unnecessary scroll after horizontal split.
解决方案:   Don't adjust to fraction if all the text fits in the window.
            (Martin Kunev, closes #4367)
文件:       src/testdir/test_window_cmd.vim, src/window.c

Patch 8.1.1328
问题:       No test for listener with undo operation.
解决方案:   Add a test.
文件:       src/testdir/test_listener.vim

Patch 8.1.1329
问题:       Plans for popup window support are spread out.
解决方案:   Add a first version of the popup window help.
文件:       runtime/doc/popup.txt, runtime/doc/Makefile, runtime/doc/help.txt

Patch 8.1.1330
问题:       Using bold attribute in terminal changes the color. (Jason
            Franklin)
解决方案:   Don't set the "bold-highbright" flag in vterm unless the terminal
            supports less than 16 colors.
文件:       src/terminal.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_all_ansi_colors.dump

Patch 8.1.1331
问题:       Test 29 is old style.
解决方案:   Turn it into a new style test. (Yegappan Lakshmanan, closes #4370)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test29.in, src/testdir/test29.ok,
            src/testdir/test_backspace_opt.vim, src/testdir/test_join.vim

Patch 8.1.1332
问题:       Cannot flush change listeners without also redrawing.  The line
            numbers in the list of changes may become invalid.
解决方案:   Add listener_flush().  Invoke listeners before adding a change
            that makes line numbers invalid.
文件:       src/evalfunc.c, src/change.c, src/proto/change.pro,
            src/screen.c, runtime/doc/eval.txt, src/testdir/test_listener.vim

Patch 8.1.1333
问题:       Text properties don't always move after changes.
解决方案:   Update properties before reporting changes to listeners. Move text
            property when splitting a line.
文件:       src/change.c, src/ex_cmds.c, src/textprop.c,
            src/proto/textprop.pro, src/testdir/test_textprop.vim

Patch 8.1.1334
问题:       When buffer is hidden "F" in 'shortmess' is not used.
解决方案:   Check the "F" flag in 'shortmess' when the buffer is already
            loaded. (Jason Franklin)  Add test_getvalue() to be able to test
            this.
文件:       src/buffer.c, src/evalfunc.c, src/testdir/test_options.vim,
            runtime/doc/eval.txt

Patch 8.1.1335
问题:       Listener callback is called after inserting text.
解决方案:   Flush the changes before inserting or deleting a line.  Store
            changes per buffer.
文件:       src/change.c, src/proto/change.pro, src/memline.c,
            src/structs.h, src/testdir/test_listener.vim

Patch 8.1.1336
问题:       Some eval functionality is not covered by tests.
解决方案:   Add a few more test cases. (Masato Nishihata, closes #4374)
文件:       src/testdir/test_bufline.vim, src/testdir/test_cindent.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_delete.vim,
            src/testdir/test_expand_func.vim, src/testdir/test_float_func.vim,
            src/testdir/test_fnamemodify.vim, src/testdir/test_functions.vim

Patch 8.1.1337
问题:       Get empty text prop when splitting line just after text prop.
解决方案:   Do not create an empty text prop at the start of the line.
文件:       src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1338
问题:       Hang when concealing the '>' shown for a wide char that doesn't
            fit in the last cell.
解决方案:   Put back the pointer when the '>' is not going to be displayed.
            (closes #4377)
文件:       src/screen.c

Patch 8.1.1339
问题:       Installer needs to product name et al.
解决方案:   Add a few lines to the NSIS installer script. (Ken Takata)
文件:       nsis/gvim.nsi

Patch 8.1.1340
问题:       Attributes from 'cursorline' overwrite textprop.
解决方案:   Combine the attributes. (closes #3912)
文件:       src/screen.c, src/textprop.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1341
问题:       Text properties are lost when joining lines.
解决方案:   Move the text properties to the joined line.
文件:       src/ops.c, src/textprop.c, src/proto/textprop.pro,
            src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.1342
问题:       Using freed memory when joining line with text property.
解决方案:   Use already computed length.
文件:       src/ops.c

Patch 8.1.1343
问题:       Text properties not adjusted for Visual block mode delete.
解决方案:   Call adjust_prop_columns(). (closes #4384)
文件:       src/ops.c, src/textprop.c, src/testdir/test_textprop.vim,
            src/misc1.c, src/testdir/dumps/Test_textprop_vis_01.dump,
            src/testdir/dumps/Test_textprop_vis_02.dump

Patch 8.1.1344
问题:       Coverity complains about possibly using a NULL pointer and copying
            a string into a fixed size buffer.
解决方案:   Check for NULL, even though it should not happen.  Use
            vim_strncpy() instead of strcpy().
文件:       src/change.c, src/memline.c

Patch 8.1.1345
问题:       Stuck in sandbox with ":s/../\=Function/gn".
解决方案:   Don't skip over code to restore sandbox. (Christian Brabandt)
文件:       src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1346
问题:       Error for Python exception does not show useful info.
解决方案:   Show the last line instead of the first one. (Ben Jackson,
            closes #4381)
文件:       src/if_py_both.h, src/testdir/test86.ok, src/testdir/test87.ok,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim

Patch 8.1.1347 (after 8.1.1327)
问题:       Fractional scroll position not restored after closing window.
解决方案:   Do restore fraction if topline is not one.
文件:       src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.1348
问题:       Running tests may cause the window to move.
解决方案:   Correct the reported window position for the offset with the
            position after ":winpos".  Works around an xterm bug.
文件:       src/testdir/test_edit.vim

Patch 8.1.1349
问题:       If writing runs into a conversion error the backup file is
            deleted. (Arseny Nasokin)
解决方案:   Don't delete the backup file is the file was overwritten and a
            conversion error occurred. (Christian Brabandt, closes #4387)
文件:       src/fileio.c, src/testdir/test_writefile.vim

Patch 8.1.1350
问题:       "W" for wrapping not shown when more than 99 matches.
解决方案:   Adjust check for length. (Masato Nishihata, closes #4388)
文件:       src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1351
问题:       Text property wrong after :substitute.
解决方案:   Save for undo before changing any text properties.
文件:       src/testdir/test_textprop.vim, src/ex_cmds.c, src/textprop.c,
            src/proto/textprop.pro, src/change.c, src/edit.c, src/misc1.c,
            src/ops.c

Patch 8.1.1352
问题:       Undofile() reports wrong name. (Francisco Giordano)
解决方案:   Clean up the name before changing path separators. (closes #4392,
            closes #4394)
文件:       src/evalfunc.c, src/testdir/test_undo.vim

Patch 8.1.1353 (after 8.1.1352)
问题:       Undo test fails on Mac.
解决方案:   Expect "private" on the Mac.
文件:       src/testdir/test_undo.vim

Patch 8.1.1354
问题:       Getting a list of text lines is clumsy.
解决方案:   Add the =<< assignment. (Yegappan Lakshmanan, closes #4386)
文件:       runtime/doc/eval.txt, src/eval.c, src/testdir/test_let.vim

Patch 8.1.1355
问题:       Obvious mistakes are accepted as valid expressions.
解决方案:   Be more strict about parsing numbers. (Yasuhiro Matsumoto,
            closes #3981)
文件:       src/charset.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/json.c, src/misc2.c, src/ops.c, src/option.c,
            src/proto/charset.pro, src/testdir/test_expr.vim,
            src/testdir/test_json.vim

Patch 8.1.1356
问题:       Some text in heredoc assignment ends the text. (Ozaki Kiichi)
解决方案:   Recognize "let v =<<" and skip until the end.
文件:       src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.1357
问题:       Test 37 is old style.
解决方案:   Turn it into a new style test. (Yegappan Lakshmanan, closes #4398)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test37.in, src/testdir/test37.ok,
            src/testdir/test_scrollbind.vim

Patch 8.1.1358
问题:       Cannot enter character with a CSI byte.
解决方案:   Only check "gui.in_use" when VIMDLL is defined. (Ken Takata,
            closes #4396)
文件:       src/getchar.c

Patch 8.1.1359
问题:       Text property wrong after :substitute with backslash.
解决方案:   Adjust text property columns when removing backslashes.
            (closes #4397)
文件:       src/ex_cmds.c, src/testdir/test_textprop.vim, src/vim.h,
            src/textprop.c, src/proto/textprop.pro, src/change.c, src/edit.c,
            src/misc1.c, src/ops.c

Patch 8.1.1360 (after Patch 8.1.1345)
问题:       Buffer left 'nomodifiable' after :substitute. (Ingo Karkat)
解决方案:   Save the value of 'modifiable' earlier. (Christian Brabandt,
            closes #4403)
文件:       src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.1361
问题:       Python setuptools don't work with Python 3.
解决方案:   Add dummy implementation for find_module. (Joel Frederico,
            closes #4402, closes #3984)
文件:       src/if_py_both.h

Patch 8.1.1362
问题:       Code and data in tests can be hard to read.
解决方案:   Use the new heredoc style. (Yegappan Lakshmanan, closes #4400)
文件:       src/testdir/test_autocmd.vim, src/testdir/test_balloon.vim,
            src/testdir/test_bufline.vim, src/testdir/test_cindent.vim,
            src/testdir/test_conceal.vim, src/testdir/test_exit.vim,
            src/testdir/test_fold.vim, src/testdir/test_goto.vim,
            src/testdir/test_join.vim, src/testdir/test_mksession_utf8.vim,
            src/testdir/test_normal.vim, src/testdir/test_profile.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_startup.vim,
            src/testdir/test_terminal.vim, src/testdir/test_xxd.vim

Patch 8.1.1363
问题:       ":vert options" does not make a vertical split.
解决方案:   Pass the right modifiers in $OPTWIN_CMD. (Ken Takata,
            closes #4401)
文件:       src/ex_cmds2.c, src/testdir/test_options.vim

Patch 8.1.1364
问题:       Design for popup window support needs more details.
解决方案:   Add details about using a window and buffer.  Rename popup_show()
            to popup_create() and add popup_show() and popup_hide().
文件:       runtime/doc/popup.txt

Patch 8.1.1365
问题:       Source command doesn't check for the sandbox. (Armin Razmjou)
解决方案:   Check for the sandbox when sourcing a file.
文件:       src/getchar.c, src/testdir/test_source.vim

Patch 8.1.1366
问题:       Using expressions in a modeline is unsafe.
解决方案:   Disallow using expressions in a modeline, unless the
            'modelineexpr' option is set.  Update help, add more tests.
文件:       runtime/doc/options.txt, src/option.c, src/option.h,
            src/testdir/test_modeline.vim, src/testdir/test49.in

Patch 8.1.1367 (after 8.1.1366)
问题:       can set 'modelineexpr' in modeline.
解决方案:   Add P_SECURE flag.
文件:       src/option.c, src/testdir/test_modeline.vim

Patch 8.1.1368 (after 8.1.1366)
问题:       Modeline test fails with python but without pythonhome.
解决方案:   Correct test argument.
文件:       src/testdir/test_modeline.vim

Patch 8.1.1369
问题:       Get E484 when using system() during GUI startup.
解决方案:   Check "gui.starting". (Ken Takata)
文件:       src/os_win32.c

Patch 8.1.1370
问题:       Not using the new github feature for donations.
解决方案:   Add a Sponsor button. (closes #4417)
文件:       .github/FUNDING.yml

Patch 8.1.1371
问题:       Cannot recover from a swap file.
解决方案:   Do not expand environment variables in the swap file name.
            Do not check the extension when we already know a file is a swap
            file.  (Ken Takata, closes #4415, closes #4369)
文件:       src/buffer.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/gui.c, src/if_cscope.c, src/main.c, src/memline.c,
            src/misc1.c, src/proto/memline.pro, src/proto/misc1.pro,
            src/search.c, src/spell.c, src/spellfile.c, src/tag.c,
            src/testdir/test_swap.vim, src/vim.h

Patch 8.1.1372
问题:       When evaluating 'statusline' the current window is unknown.
            (Daniel Hahler)
解决方案:   Set "g:actual_curwin" for %{} items.  Set "g:statusline_winid"
            when evaluating %!. (closes #4406, closes #3299)
文件:       src/buffer.c, runtime/doc/options.txt,
            src/testdir/test_statusline.vim

Patch 8.1.1373
问题:       "[p" in Visual mode puts in wrong line.
解决方案:   Call nv_put() instead of duplicating the functionality.
            (closes #4408)
文件:       src/normal.c, src/testdir/test_put.vim

Patch 8.1.1374
问题:       Check for file changed triggers too often.
解决方案:   Don't use "b_p_ar" when it is negative.
文件:       src/fileio.c

Patch 8.1.1375
问题:       Without "TS" in 'shortmess' get a hit-enter prompt often.
解决方案:   Always truncate the search message.  Also avoid putting it in the
            message history. (closes #4413)
文件:       src/search.c, src/main.c, src/testdir/test_search_stat.vim

Patch 8.1.1376
问题:       Warnings for size_t/int mixups.
解决方案:   Change types, add type casts. (Mike Williams)
文件:       src/search.c, src/textprop.c

Patch 8.1.1377
问题:       MS-Windows GUI uses wrong shell command for bash. (Robert Bogomip)
解决方案:   Check that 'shellcmdflag' is "/c". (Ken Takata, closes #4418)
文件:       src/os_win32.c

Patch 8.1.1378
问题:       Delete() can not handle a file name that looks like a pattern.
解决方案:   Use readdir() instead of appending "/*" and expanding wildcards.
            (Ken Takata, closes #4424, closes #696)
文件:       src/testdir/test_functions.vim, src/evalfunc.c, src/fileio.c,
            src/proto/fileio.pro

Patch 8.1.1379 (after 8.1.1374)
问题:       Filechanged test hangs.
解决方案:   Do not check 'autoread'.
文件:       src/fileio.c, src/testdir/test_filechanged.vim

Patch 8.1.1380
问题:       MS-Windows building VIMDLL with MSVC: SUBSYSTEM is not set.
解决方案:   Invert condition. (Ken Takata, closes #4422)
文件:       src/Make_mvc.mak

Patch 8.1.1381
问题:       MS-Windows: missing build dependency.
解决方案:   Make gui_dwrite.cpp depend on gui_dwrite.h. (Ken Takata,
            closes #4423)
文件:       src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.1382
问题:       Error when editing test file.
解决方案:   Remove part of modeline.
文件:       src/testdir/test_vimscript.vim, src/testdir/test49.vim,
            src/testdir/test49.in

Patch 8.1.1383
问题:       Warning for size_t/int mixup.
解决方案:   Change type. (Mike Williams)
文件:       src/search.c

Patch 8.1.1384
问题:       Using "int" for alloc() often results in compiler warnings.
解决方案:   Use "size_t" and remove type casts.  Remove alloc_check(), Vim
            only works with 32 bit ints anyway.
文件:       src/misc2.c, src/proto/misc2.pro, src/change.c, src/ex_cmds.c,
            src/netbeans.c, src/autocmd.c, src/buffer.c, src/change.c,
            src/channel.c, src/charset.c, src/debugger.c, src/dict.c,
            src/diff.c, src/digraph.c, src/edit.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/fileio.c, src/findfile.c, src/fold.c,
            src/getchar.c, src/gui.c, src/gui_at_fs.c, src/gui_gtk.c,
            src/gui_gtk_x11.c, src/gui_motif.c, src/gui_w32.c, src/hashtab.c,
            src/if_cscope.c, src/if_perlsfio.c, src/if_python3.c,
            src/if_xcmdsrv.c, src/indent.c, src/insexpand.c, src/main.c,
            src/mbyte.c, src/memfile.c, src/memline.c, src/menu.c,
            src/message.c, src/misc1.c, src/misc2.c, src/netbeans.c,
            src/ops.c, src/option.c, src/os_amiga.c, src/os_mswin.c,
            src/os_unix.c, src/os_vms.c, src/os_win32.c, src/quickfix.c,
            src/regexp.c, src/screen.c, src/spell.c, src/spellfile.c,
            src/syntax.c, src/term.c, src/undo.c, src/usercmd.c,
            src/userfunc.c, src/version.c, src/winclip.c

Patch 8.1.1385
问题:       Signed/unsigned compiler warning.
解决方案:   Use STRLEN() instead of strlen().
文件:       src/fileio.c

Patch 8.1.1386
问题:       Unnecessary type casts for lalloc().
解决方案:   Remove type casts.  Change lalloc(size, TRUE) to alloc(size).
文件:       src/buffer.c, src/change.c, src/channel.c, src/diff.c, src/edit.c,
            src/eval.c, src/ex_cmds.c, src/ex_getln.c, src/fileio.c,
            src/getchar.c, src/gui_mac.c, src/insexpand.c, src/gui_w32.c,
            src/gui_x11.c, src/menu.c, src/netbeans.c, src/ops.c,
            src/os_mswin.c, src/os_amiga.c, src/os_qnx.c, src/os_unix.c,
            src/os_win32.c, src/popupmnu.c, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sign.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c,
            src/terminal.c, src/textprop.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/winclip.c, src/window.c

Patch 8.1.1387
问题:       Calling prop_add() in an empty buffer doesn't work. (Dominique
            Pelle)
解决方案:   Open the memline before adding a text property. (closes #4412)
文件:       src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1388
问题:       Errors when calling prop_remove() for an unloaded buffer.
解决方案:   Bail out when the buffer is not loaded.  Add a few more tests for
            failing when the buffer number is invalid.
文件:       src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.1389
问题:       Changes are not flushed when end and start overlap. (Paul Jolly)
解决方案:   When end of a previous changes overlaps with start of a new
            change, first flush listeners.
文件:       src/change.c, src/testdir/test_listener.vim

Patch 8.1.1390
问题:       Search stats are off when using count or offset.
解决方案:   Recompute the stats when needed. (Masato Nishihata, closes #4410)
文件:       src/testdir/test_search_stat.vim, src/search.c

Patch 8.1.1391
问题:       No popup window support.
解决方案:   Add initial code for popup windows.  Add the 'wincolor' option.
文件:       Filelist, runtime/doc/popup.txt, runtime/doc/options.txt,
            src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/autocmd.c, src/buffer.c, src/ex_cmds.h,
            src/ex_cmdidxs.h, src/proto/buffer.pro, src/eval.c src/evalfunc.c
            src/feature.h, src/globals.h, src/option.c, src/option.h,
            src/popupwin.c, src/proto.h, src/proto/popupwin.pro,
            src/proto/window.pro, src/screen.c, src/structs.h, src/terminal.c,
            src/testdir/Make_all.mak, src/testdir/dumps/Test_popupwin_01.dump,
            src/testdir/test_popupwin.vim, src/vim.h, src/window.c

Patch 8.1.1392 (after 8.1.1391)
问题:       Build failure in tiny version.
解决方案:   Define ex_popupclear to ex_ni if not implemented.  Add UNUSED.
文件:       src/ex_docmd.c, src/window.c

Patch 8.1.1393
问题:       Unnecessary type casts.
解决方案:   Remove type casts from alloc() and lalloc() calls. (Mike Williams)
文件:       src/channel.c, src/crypt.c, src/dict.c, src/dosinst.c,
            src/evalfunc.c, src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/fileio.c, src/findfile.c, src/if_ole.cpp,
            src/if_py_both.h, src/list.c, src/message.c, src/misc1.c,
            src/misc2.c, src/ops.c, src/os_vms.c, src/os_win32.c,
            src/quickfix.c, src/regexp_nfa.c, src/screen.c, src/search.c,
            src/sign.c, src/syntax.c, src/tag.c, src/term.c, src/terminal.c,
            src/textprop.c

Patch 8.1.1394
问题:       Not restoring t_F2 in registers test.
解决方案:   Assign to &t_F2 instead of t_F2. (Andy Massimino, closes #4434)
文件:       src/testdir/test_registers.vim

Patch 8.1.1395
问题:       Saving for undo may access invalid memory. (Dominique Pelle)
解决方案:   Set ml_line_len also when returning a constant string.
文件:       src/memline.c, src/testdir/test_textprop.vim

Patch 8.1.1396
问题:       'wincolor' does not apply to lines below the buffer.
解决方案:   Also apply 'wincolor' to the "~" lines and the number column.
文件:       src/screen.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_01.dump

Patch 8.1.1397
问题:       Build fails in tiny version.
解决方案:   Always define hl_combine_attr().
文件:       src/syntax.c

Patch 8.1.1398
问题:       Duplicate line in MSVC build file.
解决方案:   Remove the line. (Ken Takata, closes #4436)
文件:       src/Make_mvc.mak

Patch 8.1.1399
问题:       Popup windows not adjusted when switching tabs.
解决方案:   Save and restore first_tab_popupwin. Fix closing a tabpage.
文件:       src/window.c, src/popupwin.c, src/proto/popupwin.pro,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_03.dump,
            src/testdir/dumps/Test_popupwin_04.dump

Patch 8.1.1400
问题:       Using global pointer for tab-local popups is clumsy.
解决方案:   Use the pointer in tabpage_T.
文件:       src/popupwin.c, src/globals.h, src/eval.c, src/screen.c,
            src/window.c

Patch 8.1.1401
问题:       Misspelled mkspellmem as makespellmem.
解决方案:   Drop duplicate help entry, fix test. (Naruhiko Nishino, Yasuhiro
            Matsumoto, closes #4437)
文件:       runtime/doc/options.txt, src/testdir/test_modeline.vim

Patch 8.1.1402
问题:       "timer" option of popup windows not supported.
解决方案:   Implement the "timer" option. (Yasuhiro Matsumoto, closes #4439)
文件:       src/structs.h, src/testdir/test_popupwin.vim, src/popupwin.c,
            src/window.c, runtime/doc/popup.txt

Patch 8.1.1403
问题:       Cannot build without the timer feature.
解决方案:   Add #ifdef.
文件:       src/structs.h, src/window.c, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1404
问题:       Cannot change the patch level when building with NSIS.
解决方案:   Use $PATCHLEVEL if defined. (Christian Brabandt)
文件:       nsis/gvim.nsi

Patch 8.1.1405
问题:       "highlight" option of popup windows not supported.
解决方案:   Implement the "highlight" option.
文件:       src/option.c, src/proto/option.pro, src/diff.c src/popupwin.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_01.dump,
            src/testdir/dumps/Test_popupwin_03.dump

Patch 8.1.1406
问题:       popup_hide() and popup_show() not implemented yet.
解决方案:   Implement the functions.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, runtime/doc/popup.txt, src/screen.c, src/vim.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1407
问题:       Popup_create() does not support text properties.
解决方案:   Support the third form of the text argument.
文件:       src/textprop.c, src/proto/textprop.pro, src/popupwin.c,
            src/testdir/test_popupwin.vim, src/screen.c,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_03.dump,
            src/testdir/dumps/Test_popupwin_04.dump,
            runtime/doc/popup.txt

Patch 8.1.1408
问题:       PFL_HIDDEN conflicts with system header file. (Ken Takata)
解决方案:   Rename to POPF_HIDDEN.
文件:       src/popupwin.c, src/screen.c, src/vim.h

Patch 8.1.1409
问题:       Coverity warns for using uninitialized memory.
解决方案:   Add a condition to clearing the growarray.
文件:       src/json.c

Patch 8.1.1410
问题:       Popup_move() is not implemented yet.
解决方案:   Implement it. (Yasuhiro Matsumoto, closes #4441)  Improve the
            positioning and resizing.
文件:       runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/screen.c, src/structs.h, src/proto/popupwin.pro,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_05.dump

Patch 8.1.1411
问题:       Coverity warns for divide by zero.
解决方案:   Make sure width is larger than zero.
文件:       src/charset.c

Patch 8.1.1412
问题:       Test 30 is old style.
解决方案:   Turn it into a new style test. (Yegappan Lakshmanan, closes #4440)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test30.in, src/testdir/test30.ok,
            src/testdir/test_fileformat.vim

Patch 8.1.1413
问题:       Error when the drive of the swap file was disconnected.
解决方案:   Try closing and re-opening the swap file. (partly by Joe Orost,
            closes #4378)
文件:       src/memfile.c, src/structs.h, src/testdir/test_startup.vim

Patch 8.1.1414
问题:       Alloc() returning "char_u *" causes a lot of type casts.
解决方案:   Have it return "void *". (Mike Williams)  Define ALLOC_ONE() to
            check the simple allocations.
文件:       src/autocmd.c, src/blob.c, src/blowfish.c, src/buffer.c,
            src/change.c, src/channel.c, src/crypt.c, src/crypt_zip.c,
            src/dict.c, src/diff.c, src/eval.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c, src/ex_getln.c,
            src/fileio.c, src/findfile.c, src/getchar.c, src/gui_gtk.c,
            src/gui_gtk_x11.c, src/gui_mac.c, src/gui_motif.c,
            src/gui_photon.c, src/gui_w32.c, src/gui_x11.c, src/hardcopy.c,
            src/hashtab.c, src/if_cscope.c, src/if_mzsch.c, src/if_perlsfio.c,
            src/if_py_both.h, src/if_python3.c, src/if_xcmdsrv.c,
            src/insexpand.c, src/list.c, src/mark.c, src/mbyte.c,
            src/memfile.c, src/memfile_test.c, src/memline.c, src/message.c,
            src/misc2.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c, src/os_amiga.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_unix.c, src/os_vms.c, src/os_win32.c, src/popupmnu.c,
            src/proto/misc2.pro, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sign.c,
            src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/textprop.c, src/ui.c, src/undo.c,
            src/userfunc.c, src/version.c, src/winclip.c, src/window.c,
            src/vim.h, src/testdir/test_cscope.vim

Patch 8.1.1415 (after 8.1.1414)
问题:       Build error in MS-Windows GUI.
解决方案:   Fix the LALLOC_MULT() argument.
文件:       src/gui_w32.c

Patch 8.1.1416
问题:       Popup_getposition() not implemented yet.
解决方案:   Implement it. (Yasuhiro Matsumoto, closes #4449)
文件:       runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1417
问题:       MS-Windows: resolve() does not resolve all components of the path.
            (David Briscoe)
解决方案:   Do not bail out for a reparse point. (Yasuhiro Matsumoto,
            closes #4211, closes #4447)
文件:       src/os_mswin.c, src/testdir/test_functions.vim

Patch 8.1.1418
问题:       Win_execute() is not implemented yet.
解决方案:   Implement it.
文件:       src/evalfunc.c, src/popupwin.c, src/testdir/test_execute_func.vim,
            runtime/doc/popup.txt, runtime/doc/eval.txt

Patch 8.1.1419
问题:       Listener callbacks may be called recursively.
解决方案:   Set "updating_screen" while listener callbacks are invoked.
文件:       src/change.c, src/screen.c, src/proto/screen.pro, src/ui.c

Patch 8.1.1420
问题:       Popup window size only uses first line length.
解决方案:   Use the longest line. (Ben Jackson, closes #4451)  Also deal with
            wrapping lines.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1421
问题:       Drawing "~" line in popup window.
解决方案:   Just draw text in the last line of the popup window.
文件:       src/screen.c, src/structs.h, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_05.dump,
            src/testdir/dumps/Test_popupwin_06.dump

Patch 8.1.1422
问题:       Popup_getoptions() not implemented yet.
解决方案:   Implement it. (closes #4452)
文件:       runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1423
问题:       Popup windows use options from current window and buffer.
解决方案:   Clear all local options when creating a popup window.
文件:       src/popupwin.c, src/option.c, src/proto/option.pro,
            src/testdir/test_popupwin.vim

Patch 8.1.1424
问题:       Crash when popup menu is deleted while waiting for char.
解决方案:   Bail out when pum_array was cleared.
文件:       src/popupmnu.c

Patch 8.1.1425
问题:       Win_execute() does not set window pointers properly.
解决方案:   Use switch_win_noblock().  Also execute autocommands in a popup
            window.
文件:       src/window.c, src/proto/window.pro, src/evalfunc.c, src/autocmd.c

Patch 8.1.1426
问题:       No test for syntax highlight in popup window.
解决方案:   Add a screenshot test.  Update associated documentation. Avoid
            'buftype' being reset by setbufvar().
文件:       runtime/doc/eval.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_10.dump,
            src/testdir/dumps/Test_popupwin_11.dump

Patch 8.1.1427 (after 8.1.1426)
问题:       Popup window screenshot test fails.
解决方案:   Add missing change to popup window code.
文件:       src/popupwin.c

Patch 8.1.1428
问题:       Popup_atcursor() not implemented yet.
解决方案:   Implement it. (Yasuhiro Matsumoto, closes #4456)
文件:       runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1429
问题:       "pos" option of popup window not supported yet.
解决方案:   Implement the option. Rename popup_getposition() to
            popup_getpos().
文件:       src/structs.h, src/popupwin.c, src/proto/popupwin.pro,
            runtime/doc/popup.txt

Patch 8.1.1430
问题:       Popup window option "wrap" not supported.
解决方案:   Implement it.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_wrap.dump,
            src/testdir/dumps/Test_popupwin_nowrap.dump

Patch 8.1.1431
问题:       Popup window listed as "Scratch".
解决方案:   List them as "Popup".
文件:       src/buffer.c, src/popupwin.c, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt, runtime/doc/windows.txt

Patch 8.1.1432 (after 8.1.1429)
问题:       Can't build with eval feature.
解决方案:   Add missing rename.
文件:       src/evalfunc.c

Patch 8.1.1433
问题:       Win_execute() may leave popup window focused, eventually leading
            to a crash. (Bjorn Linse)
解决方案:   When previous window was closed, go to the first window.
文件:       src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1434
问题:       Test 3 is old style.
解决方案:   Turn into a new style test. (Yegappan Lakshmanan, closes #4460)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test3.in, src/testdir/test3.ok,
            src/testdir/test_cindent.vim

Patch 8.1.1435
问题:       Memory usage test is a bit too flaky.
解决方案:   Adjust the tolerances a bit. (Christian Brabandt)
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1436
问题:       Writefile test fails when run under /tmp.
解决方案:   Adjust 'backupskip'. (Kenta Sato, closes #4462)
文件:       src/testdir/test_writefile.vim

Patch 8.1.1437
问题:       Code to handle callbacks is duplicated.
解决方案:   Add callback_T and functions to deal with it.
文件:       src/structs.h, src/evalfunc.c, src/proto/evalfunc.pro,
            src/change.c, src/channel.c, src/proto/channel.pro, src/buffer.c,
            src/userfunc.c, src/proto/userfunc.pro, src/eval.c,
            src/ex_cmds2.c, src/popupwin.c

Patch 8.1.1438
问题:       Some commands cause trouble in a popup window.
解决方案:   Add NOT_IN_POPUP_WINDOW.
文件:       src/macros.h, src/popupwin.c, src/proto/popupwin.pro,
            src/ex_docmd.c, src/ex_cmds2.c, src/window.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1439
问题:       Json_encode() is very slow for large results.
解决方案:   In the growarray use a growth of at least 50%. (Ken Takata,
            closes #4461)
文件:       src/misc2.c

Patch 8.1.1440
问题:       Win_execute() test fails.
解决方案:   Adjust the expected error number.  Move to popup test.
文件:       src/testdir/test_execute_func.vim, src/testdir/test_popupwin.vim

Patch 8.1.1441
问题:       Popup window filter not yet implemented.
解决方案:   Implement the popup filter.
文件:       src/structs.h, runtime/doc/popup.txt, src/popupwin.c,
            src/proto/popupwin.pro, src/window.c, src/getchar.c, src/screen.c,
            src/misc2.c, src/proto/misc2.pro, src/vim.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1442
问题:       Popup windows not considered when the Vim window is resized.
            (Ben Jackson)
解决方案:   Reallocate the w_lines structure. (closes #4467)
文件:       src/screen.c

Patch 8.1.1443
问题:       Popup window padding and border not implemented yet.
解决方案:   Implement padding and border.  Add core position and size to
            popup_getpos().
文件:       src/structs.h, src/popupwin.c, src/screen.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump, runtime/doc/popup.txt

Patch 8.1.1444
问题:       Not using double line characters for popup border.
解决方案:   Use double line characters if using utf-8.
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1445
问题:       Popup window border highlight not implemented yet.
解决方案:   Implement the "borderhighlight" option.
文件:       src/structs.h, src/popupwin.c, src/window.c, src/screen.c,
            src/testdir/test_popupwin.vim, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_22.dump

Patch 8.1.1446
问题:       Popup window callback not implemented yet.
解决方案:   Implement the callback.
文件:       runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/evalfunc.c, src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1447
问题:       Not allowed to create an empty popup.
解决方案:   Remove restriction that there is some text. (closes #4470)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1448
问题:       Statusline is sometimes drawn on top of popup.
解决方案:   Redraw popups after the statusline. (Naruhiko Nishino,
            closes #4468)
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_behind.dump

Patch 8.1.1449
问题:       Popup text truncated at end of screen.
解决方案:   Move popup left if needed.  Add the "fixed" property to disable
            that. (Ben Jackson, closes #4466)
文件:       runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1450
问题:       Popup window positioning wrong when using padding or borders.
解决方案:   Fix computing the position.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_corners.dump

Patch 8.1.1451
问题:       CTRL-L does not clear screen with a popup window.
解决方案:   Do not change the type to NOT_VALID.  Redraw all windows.
            (closes #4471)
文件:       src/screen.c

Patch 8.1.1452
问题:       Line and col property of popup windows not properly checked.
解决方案:   Check for "+" or "-" sign.
文件:       src/popupwin.c, src/dict.c, src/proto/dict.pro,
            src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1453
问题:       Popup window "moved" property not implemented yet.
解决方案:   Implement it.
文件:       src/main.c, src/edit.c, src/gui.c, src/globals.h, src/structs.h,
            src/screen.c, src/popupwin.c, src/proto/popupwin.pro,
            src/testdir/test_popupwin.vim, runtime/doc/popup.txt

Patch 8.1.1454
问题:       Build failure without the conceal feature.
解决方案:   Remove #ifdef.
文件:       src/autocmd.c

Patch 8.1.1455
问题:       Popup_atcursor() not completely implemented.
解决方案:   Add the default for the "moved" property.
文件:       src/popupwin.c, src/normal.c, src/vim.h,
            src/testdir/test_popupwin.vim

Patch 8.1.1456
问题:       WinBar not redrawn after scrolling one line.
解决方案:   Exclude the winbar height when deciding what to redraw.
            (closes #4473)
文件:       src/screen.c, src/testdir/test_winbar.vim

Patch 8.1.1457
问题:       Cannot reuse a buffer when loading a screen dump.
解决方案:   Add the "bufnr" option.
文件:       runtime/doc/eval.txt, src/structs.h, src/channel.c,
            src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.1458
问题:       Crash when using gtags. (issue #4102)
解决方案:   Check for negative row or col in screen_puts_len(). (Christian
            Brabandt)
文件:       src/screen.c

Patch 8.1.1459
问题:       Popup window border looks bad when 'ambiwidth' is "double".
            (Yasuhiro Matsumoto)
解决方案:   Only use line drawing characters when 'ambiwidth' is "single".
            (Ken Takata, closes #4477)
文件:       src/screen.c

Patch 8.1.1460
问题:       Popup window border characters may be wrong.
解决方案:   Reset the border characters for each popup.  Correct use of
            'ambiwidth'.
文件:       src/screen.c

Patch 8.1.1461
问题:       Tests do not run or are not reliable on some systems.
解决方案:   Use "findstr" instead of "grep" on MS-Windows. Clear
            PROMPT_COMMAND in the terminal test. Delete temp file. Wait for
            output after executing a debug command. (Yegappan Lakshmanan,
            closes #4479)
文件:       src/testdir/test_debugger.vim, src/testdir/test_environ.vim,
            src/testdir/test_filetype.vim, src/testdir/test_source.vim,
            src/testdir/test_terminal.vim

Patch 8.1.1462
问题:       MS-Windows: using special character requires quoting.
解决方案:   Add quotes. (Ken Takata)
文件:       src/testdir/test_environ.vim

Patch 8.1.1463
问题:       Gcc warns for uninitialized variable.
解决方案:   Put usage inside "if".  (Ken Takata)
文件:       src/textprop.c

Patch 8.1.1464
问题:       Only 4-digit rgb termresponse is recognized.
解决方案:   Also recognize 2-digit rgb response. (closes #4486)
文件:       src/term.c, src/test_termcodes.vim

Patch 8.1.1465
问题:       Allocating wrong amount of memory. (Yegappan Lakshmanan)
解决方案:   Use sizeof() for right type of struct.
文件:       src/memfile_test.c

Patch 8.1.1466
问题:       Not updating priority on existing sign.
解决方案:   Set the sign priority.  Add a test. (Yegappan Lakshmanan)
文件:       src/sign.c, src/testdir/test_signs.vim, runtime/doc/eval.txt,
            runtime/doc/sign.txt

Patch 8.1.1467 (after 8.1.1465)
问题:       Cscope test fails.
解决方案:   Update expected text.
文件:       src/testdir/test_cscope.vim

Patch 8.1.1468
问题:       The generated desktop files may be invalid.
解决方案:   Check validity with desktop-file-validate. (Christian Brabandt,
            Will Thompson, closes #4480)
文件:       src/po/Makefile

Patch 8.1.1469
问题:       No test for checking the cursor style response.
解决方案:   Add a simple test.  Also include the missing part of 8.1.1464.
文件:       src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.1470
问题:       New Unicode character U+32FF missing from double-width table.
解决方案:   Add the character.
文件:       src/mbyte.c

Patch 8.1.1471
问题:       'background' not correctly set for 2-digit rgb termresponse.
解决方案:   Adjust what digit to use. (closes #4495)
文件:       src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.1472
问题:       Add_termcap_entry() is not tested.
解决方案:   Add a simple test.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1473
问题:       New resolve() implementation causes problem for plugins.
解决方案:   Only resolve a reparse point after checking it is needed. (Ken
            Takata, closes #4492)
文件:       src/os_mswin.c, src/testdir/test_functions.vim

Patch 8.1.1474
问题:       'ttybuiltin' is not tested.
解决方案:   At least test that it doesn't break things.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.1475
问题:       Search string not displayed when 'rightleft' is set.
解决方案:   Clear the right part of the old text. (closes #4488, closes #4489)
文件:       src/search.c, src/testdir/test_search.vim

Patch 8.1.1476
问题:       No statistics displayed after running tests.
解决方案:   Summarize the test results. (Christian Brabandt, closes #4391)
            Also make it possible to report a skipped file.
文件:       src/Makefile, src/testdir/Makefile, src/testdir/summarize.vim,
            src/testdir/runtest.vim, src/testdir/test_arabic.vim,
            src/testdir/test_autochdir.vim, src/testdir/test_balloon.vim

Patch 8.1.1477
问题:       Test summary fails in the tiny version.
解决方案:   set 'nocompatible'.
文件:       Filelist, src/testdir/summarize.vim

Patch 8.1.1478
问题:       Still an error when running tests with the tiny version.
解决方案:   Do not try reading test.log
文件:       src/testdir/Makefile, src/testdir/summarize.vim

Patch 8.1.1479
问题:       Change included for debugging only.
解决方案:   Restore the REDIR_TEST_TO_NULL line.
文件:       src/testdir/Makefile

Patch 8.1.1480
问题:       Desktop file check doesn't run on CI.
解决方案:   Install the desktop-file-utils packages. (Christian Brabandt,
            closes #4498)
文件:       .travis.yml

Patch 8.1.1481
问题:       Length for two-digit rgb termresponse is off by one.
解决方案:   Adjust the length. (closes #4494)
文件:       src/term.c

Patch 8.1.1482
问题:       No test for wincol() depending on the 'number' option.
解决方案:   Add a couple of tests. (Christian Brabandt, closes #4500)
文件:       src/testdir/test_gui.vim

Patch 8.1.1483
问题:       Skipped tests are not properly listed.
解决方案:   Throw a "Skipped" exception instead of using ":finish" or ":return".
文件:       src/testdir/test_breakindent.vim, src/testdir/test_cdo.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_balloon.vim, src/testdir/test_conceal.vim,
            src/testdir/test_debugger.vim, src/testdir/test_diffmode.vim,
            src/testdir/test_fold.vim, src/testdir/test_highlight.vim,
            src/testdir/test_popup.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_search.vim, src/testdir/test_startup.vim,
            src/testdir/test_startup_utf8.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_termencoding.vim,
            src/testdir/test_terminal.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim

Patch 8.1.1484
问题:       Some tests are slow.
解决方案:   Add timing to the test messages.  Fix double free when quitting in
            VimLeavePre autocmd.
文件:       src/testdir/runtest.vim, src/eval.c

Patch 8.1.1485
问题:       Double free when garbage_collect() is used in autocommand.
解决方案:   Have garbage collection also set the copyID in funccal_stack.
文件:       src/eval.c, src/userfunc.c

Patch 8.1.1486
问题:       A listener change is merged even when it adds a line. (Paul Jolly)
解决方案:   Do not merge a change that adds or removes a line. (closes #4490)
文件:       src/change.c, src/testdir/test_listener.vim

Patch 8.1.1487
问题:       Older msgfmt cannot generate proper .desktop file.
解决方案:   Add a configure check to not use this msgfmt version. (Ken Takata)
文件:       src/configure.ac, src/auto/configure

Patch 8.1.1488
问题:       Summary of tests has incorrect failed count.
解决方案:   Add to the failed count instead of setting it. (Christian Brabandt)
文件:       src/testdir/summarize.vim

Patch 8.1.1489
问题:       Sign order wrong when priority was changed.
解决方案:   Reorder signs when priority is changed. (Yegappan Lakshmanan,
            closes #4502)
文件:       src/quickfix.c, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1490
问题:       When a single test fails the exit code is not set. (Daniel Hahler)
解决方案:   Add an exit command. (closes #4506)
文件:       src/testdir/Makefile

Patch 8.1.1491
问题:       When skipping over code after an exception was thrown expression
            evaluation is aborted after a function call. (Ingo Karkat)
解决方案:   Do not fail if not executing the expression. (closes #4507)
文件:       src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.1492
问题:       MS-Windows: when "!" is in 'guioptions' ":!start" fails.
解决方案:   Do not use a terminal window when the shell command begins with
            "!start". (Yasuhiro Matsumoto, closes #4504)
文件:       src/misc2.c, src/os_win32.c

Patch 8.1.1493
问题:       Redrawing with popups is slow and causes flicker.
解决方案:   Avoid clearing and redrawing using a zindex mask.
文件:       src/globals.h, src/screen.c, src/proto/screen.pro, src/popupwin.c,
            src/popupmnu.c

Patch 8.1.1494 (after 8.1.1493)
问题:       Build failure.
解决方案:   Add missing changes.
文件:       src/structs.h

Patch 8.1.1495 (after 8.1.1494)
问题:       Memory access error.
解决方案:   Use the correct size for clearing the popup mask.
文件:       src/screen.c

Patch 8.1.1496
问题:       Popup window height is not recomputed.
解决方案:   Recompute the height when needed.
文件:       src/popupwin.c, src/testdir/dumps/Test_popupwin_06.dump

Patch 8.1.1497
问题:       Accessing memory beyond allocated space.
解决方案:   Check column before accessing popup mask.
文件:       src/screen.c

Patch 8.1.1498
问题:       ":write" increments b:changedtick even though nothing changed.
            (Daniel Hahler)
解决方案:   Only increment b:changedtick if the modified flag is reset.
文件:       src/change.c, src/proto/change.pro, runtime/doc/eval.txt,
            src/buffer.c, src/ex_cmds2.c, src/fileio.c, src/memline.c,
            src/undo.c

Patch 8.1.1499
问题:       Ruler not updated after popup window was removed.
解决方案:   use popup_mask in screen_puts().
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_08.dump

Patch 8.1.1500
问题:       Wrong shell command when building with VIMDLL and "!" in
            'guioptions'.
解决方案:   Add check for GUI in use. (Ken Takata)
文件:       src/misc2.c

Patch 8.1.1501
问题:       New behavior of b:changedtick not tested.
解决方案:   Add a few test cases. (Daniel Hahler)
文件:       src/testdir/test_changedtick.vim

Patch 8.1.1502
问题:       Cannot play any sound.
解决方案:   Use libcanberra if available.  Add sound functions.
文件:       src/configure.ac, src/auto/configure, src/config.h.in,
            src/Makefile, src/sound.c, src/proto/sound.pro, src/proto.h,
            src/evalfunc.c, src/feature.h, runtime/doc/eval.txt, Filelist,
            src/version.c, src/testdir/test_sound.vim, src/testdir/silent.wav,
            src/testdir/Make_all.mak, .travis.yml

Patch 8.1.1503
问题:       Sound test fails on Travis.
解决方案:   Set AUDIODEV to "null".
文件:       .travis.yml

Patch 8.1.1504
问题:       Sound test still fails on Travis.
解决方案:   Add more lines to the install section.
文件:       .travis.yml

Patch 8.1.1505
问题:       Running "make clean" twice gives errors.
解决方案:   Add "-f" to "rm". (closes #4516)
文件:       src/testdir/Makefile

Patch 8.1.1506
问题:       Syntax error in Travis config.
解决方案:   Set AUDIODEV in another section.
文件:       .travis.yml

Patch 8.1.1507
问题:       Sound test still fails on Travis.
解决方案:   Try another dummy sound approach.
文件:       .travis.yml

Patch 8.1.1508
问题:       Sound keeps failing on Travis.
解决方案:   Throw a skipped exception in the test.
文件:       src/testdir/test_sound.vim

Patch 8.1.1509
问题:       Cmdline_row can become negative, causing a crash.
解决方案:   Make sure cmdline_row does not become negative. (closes #4102)
文件:       src/misc1.c

Patch 8.1.1510
问题:       A plugin cannot easily expand a command like done internally.
解决方案:   Add the expandcmd() function. (Yegappan Lakshmanan, closes #4514)
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/testdir/test_expand.vim

Patch 8.1.1511
问题:       Matches in a popup window are not displayed properly.
解决方案:   Do display matches in a popup window. (closes #4517)
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_matches.dump

Patch 8.1.1512
问题:       ch_evalexpr() hangs when used recursively. (Paul Jolly)
解决方案:   Change ch_block_id from a single number to a list of IDs to wait
            on.
文件:       src/channel.c, src/structs.h

Patch 8.1.1513
问题:       All popup functionality is in functions, except :popupclear.
解决方案:   Add popup_clear() for consistency.  Also rename sound_stopall() to
            sound_clear().
文件:       src/ex_cmds.h, src/ex_cmdidxs.h, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/sound.c, src/proto/sound.pro,
            src/testdir/test_popupwin.vim src/testdir/test_sound.vim,
            runtime/doc/eval.txt runtime/doc/popup.txt

Patch 8.1.1514 (after 8.1.1492)
问题:       MS-Windows: wrong shell command with ! in 'guioptions'.
解决方案:   Do not check for ! in 'guioptions' when applying 'shellxquote'.
            (Yasuhiro Matsumoto, closes #4519)
文件:       src/misc2.c

Patch 8.1.1515
问题:       Memory leak reported for sound when build with EXITFREE.
解决方案:   Free sound stuff when exiting.
文件:       src/misc2.c

Patch 8.1.1516
问题:       Time reported for a test measured wrong.
解决方案:   Move the computation to the end of RunTheTest(). (Ozaki Kiichi,
            closes #4520)
文件:       src/testdir/runtest.vim

Patch 8.1.1517
问题:       When a popup changes all windows are redrawn.
解决方案:   Only update the lines that were affected.  Add a file for
            profiling popup windows efficiency.
文件:       src/screen.c, src/proto/screen.pro, src/ui.c, src/popupwin.c,
            src/globals.h, src/testdir/popupbounce.vim, Filelist

Patch 8.1.1518
问题:       Crash when setting 'columns' while a popup is visible.
解决方案:   Recompute all positions when clearing the screen. (closes #4467)
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_04a.dump

Patch 8.1.1519
问题:       'backupskip' may contain duplicates.
解决方案:   Add the P_NODUP flag. (Tom Ryder)
文件:       src/option.c, src/testdir/test_options.vim

Patch 8.1.1520
问题:       Popup windows are ignored when dealing with mouse position
解决方案:   Find the mouse position inside a popup window.  Allow for modeless
            selection.
文件:       src/ui.c, src/proto/ui.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/screen.c, src/beval.c, src/edit.c,
            src/evalfunc.c, src/gui.c, src/normal.c, src/structs.h

Patch 8.1.1521
问题:       When a popup window is closed the buffer remains.
解决方案:   Wipe out the buffer.
文件:       src/window.c, src/testdir/test_popupwin.vim

Patch 8.1.1522
问题:       Popup_notification() not implemented yet.
解决方案:   Implement it.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt
            src/testdir/dumps/Test_popupwin_notify_01.dump,
            src/testdir/dumps/Test_popupwin_notify_02.dump

Patch 8.1.1523
问题:       Cannot show range of buffer lines in popup window.
解决方案:   Add the "firstline" property. (closes #4523)
文件:       src/popupwin.c, src/structs.h, runtime/doc/popup.txt,
            src/testdir/test_popupwin.vim,
            testdir/dumps/Test_popupwin_firstline.dump

Patch 8.1.1524
问题:       Tests are silently skipped.
解决方案:   Throw an exception for skipped tests in more places.
文件:       src/testdir/test_assert.vim, src/testdir/test_paste.vim,
            src/testdir/shared.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cscope.vim, src/testdir/test_digraph.vim,
            src/testdir/test_float_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_gui_init.vim, src/testdir/test_history.vim,
            src/testdir/test_langmap.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim, src/testdir/test_lua.vim,
            src/testdir/test_makeencoding.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_paste.vim,
            src/testdir/test_perl.vim, src/testdir/test_profile.vim,
            src/testdir/test_prompt_buffer.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim,
            src/testdir/test_pyx3.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_reltime.vim,
            src/testdir/test_ruby.vim, src/testdir/test_sha256.vim,
            src/testdir/test_shortpathname.vim, src/testdir/test_signals.vim,
            src/testdir/test_signs.vim, src/testdir/test_spell.vim,
            src/testdir/test_syntax.vim, src/testdir/test_tcl.vim,
            src/testdir/test_termcodes.vim, src/testdir/test_terminal.vim,
            src/testdir/test_terminal_fail.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_winbar.vim, src/testdir/test_windows_home.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1525
问题:       Cannot move a popup window with the mouse.
解决方案:   Add the "drag" property and make it possible to drag a popup
            window by its border.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/ui.c,
            src/window.c, src/proto/window.pro, runtime/doc/popup.txt

Patch 8.1.1526
问题:       No numerical value for the patchlevel.
解决方案:   Add v:versionlong.
文件:       src/version.c, src/eval.c, src/vim.h, runtime/doc/eval.txt,
            src/testdir/test_eval_stuff.vim

Patch 8.1.1527
问题:       When moving a popup window over the command line it is not
            redrawn.
解决方案:   Redraw the command line. Move popup redrawing code to the popupwin
            file.
文件:       src/screen.c, src/proto/screen.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump

Patch 8.1.1528
问题:       Popup_any_visible() is unused.
解决方案:   Remove it.
文件:       src/popupwin.c, src/proto/popupwin.pro

Patch 8.1.1529
问题:       Libcanberra is linked with even when not used.
解决方案:   Have configure check for libcanberra only when wanted.
            (suggestions by Libor Bukata)
文件:       src/feature.h, src/configure.ac, src/auto/configure, src/Makefile

Patch 8.1.1530
问题:       Travis config is not optimal.
解决方案:   Remove system conditions.  Do not use excluding matrix. Cache OSX
            results. (Ozaki Kiichi, closes #4521)
文件:       .travis.yml

Patch 8.1.1531
问题:       Clipboard type name is inconsistent.
解决方案:   Rename VimClipboard to Clipboard_T.
文件:       src/gui_gtk_x11.c, src/proto/gui_gtk_x11.pro, src/gui_mac.c,
            src/proto/gui_mac.pro, src/gui_x11.c, src/proto/gui_x11.pro,
            src/ops.c, src/proto/ops.pro, src/os_qnx.c, src/proto/os_qnx.pro,
            src/os_unix.c, src/proto/os_unix.pro, src/ui.c, src/proto/ui.pro,
            src/winclip.c, src/proto/winclip.pro, src/globals.h, src/proto.h

Patch 8.1.1532 (after 8.1.1531)
问题:       Build fails.
解决方案:   Add missing changes.
文件:       src/vim.h

Patch 8.1.1533
问题:       GUI build fails on Mac.
解决方案:   Change VimClipboard type in non-C file.
文件:       src/os_macosx.m

Patch 8.1.1534
问题:       Modeless selection in popup window selects too much.
解决方案:   Restrict the selection to inside of the popup window.
文件:       src/vim.h, src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_select_01.dump,
            src/testdir/dumps/Test_popupwin_select_02.dump

Patch 8.1.1535 (after 8.1.1534)
问题:       Popup select test fails on Mac.
解决方案:   Skip test if clipboard feature not available.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1536 (after 8.1.1534)
问题:       Popup select test still fails on Mac.
解决方案:   Set 'clipboard' to "autoselect"
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1537
问题:       Using "tab" for popup window can be confusing.
解决方案:   Use "tabpage". (Hirohito Higashi, closes #4532)
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1538
问题:       Cannot specify highlighting for notifications.
解决方案:   Use the PopupNotification group if it exists. Add a minimal width
            to notifications.
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_notify_01.dump,
            src/testdir/dumps/Test_popupwin_notify_02.dump

Patch 8.1.1539
问题:       Not easy to define a variable and lock it.
解决方案:   Add ":const". (Ryuichi Hayashida, closes #4541)
文件:       runtime/doc/eval.txt, src/eval.c, src/ex_cmdidxs.h, src/ex_cmds.h,
            src/proto/eval.pro, src/testdir/Make_all.mak,
            src/testdir/test_const.vim

Patch 8.1.1540 (after 8.1.1539)
问题:       Cannot build without the +eval feature.
解决方案:   Define ex_const if needed.
文件:       src/ex_docmd.c

Patch 8.1.1541
问题:       Check for ASAN is not reliable.
解决方案:   Check the version output. (Dominique Pelle, closes #4543)
文件:       src/testdir/test_memory_usage.vim

Patch 8.1.1542
问题:       An OptionSet autocommand does not get enough info.
解决方案:   Add v:option_command, v:option_oldlocal and v:option_oldglobal.
            (Latrice Wilgus, closes #4118)
文件:       runtime/doc/autocmd.txt, runtime/doc/eval.txt,
            runtime/doc/version8.txt, src/eval.c, src/option.c, src/structs.h,
            src/testdir/test_autocmd.vim, src/vim.h

Patch 8.1.1543
问题:       Const test fails with small features.
解决方案:   Don't unlet non-existing variables.
文件:       src/testdir/test_const.vim

Patch 8.1.1544
问题:       Some balloon tests don't run when they can.
解决方案:   Split GUI balloon tests off into a separate file. (Ozaki Kiichi,
            closes #4538)  Change the feature check into a command for
            consistency.
文件:       Filelist, src/testdir/Make_all.mak, src/testdir/check.vim,
            src/testdir/test_arabic.vim, src/testdir/test_balloon.vim,
            src/testdir/test_balloon_gui.vim, src/testdir/test_crypt.vim,
            src/testdir/test_cscope.vim, src/testdir/test_digraph.vim,
            src/testdir/test_float_func.vim, src/testdir/test_gui.vim,
            src/testdir/test_gui_init.vim, src/testdir/test_history.vim,
            src/testdir/test_langmap.vim, src/testdir/test_listlbr.vim,
            src/testdir/test_listlbr_utf8.vim, src/testdir/test_lua.vim,
            src/testdir/test_makeencoding.vim,
            src/testdir/test_matchadd_conceal.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_memory_usage.vim, src/testdir/test_menu.vim,
            src/testdir/test_mksession.vim,
            src/testdir/test_mksession_utf8.vim,
            src/testdir/test_netbeans.vim, src/testdir/test_paste.vim,
            src/testdir/test_perl.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_profile.vim, src/testdir/test_prompt_buffer.vim,
            src/testdir/test_python2.vim, src/testdir/test_python3.vim,
            src/testdir/test_pyx2.vim, src/testdir/test_pyx3.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_quotestar.vim,
            src/testdir/test_reltime.vim, src/testdir/test_ruby.vim,
            src/testdir/test_sha256.vim, src/testdir/test_shortpathname.vim,
            src/testdir/test_signals.vim, src/testdir/test_signs.vim,
            src/testdir/test_spell.vim, src/testdir/test_syntax.vim,
            src/testdir/test_tcl.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_terminal_fail.vim,
            src/testdir/test_textobjects.vim, src/testdir/test_textprop.vim,
            src/testdir/test_timers.vim, src/testdir/test_vartabs.vim,
            src/testdir/test_winbar.vim, src/testdir/test_windows_home.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1545
问题:       When the screen is to small there is no message about that.
            (Daniel Hahler)
解决方案:   Do not use :cquit. (closes #4534)
文件:       src/testdir/runtest.vim

Patch 8.1.1546
问题:       In some tests 'tags' is set but not restored. (Daniel Hahler)
解决方案:   Restore 'tags'. (closes #4535)
文件:       src/testdir/test_autocmd.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_options.vim, src/testdir/test_tagcase.vim,
            src/testdir/test_tagjump.vim, src/testdir/test_taglist.vim

Patch 8.1.1547
问题:       Functionality of bt_nofile() is confusing.
解决方案:   Split into bt_nofile() and bt_nofilename().
文件:       src/buffer.c, src/proto/buffer.pro, src/evalfunc.c, src/ex_cmds.c,
            src/ex_docmd.c, src/fileio.c, src/popupmnu.c, src/quickfix.c

Patch 8.1.1548
问题:       Popup_dialog() is not implemented.
解决方案:   Implement popup_dialog() and popup_filter_yesno().
文件:       src/popupwin.c, src/proto/popupwin.pro, src/evalfunc.c,
            src/structs.h, src/globals.h, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt

Patch 8.1.1549 (after 8.1.1547)
问题:       Quickfix test fails.
解决方案:   Negate result of bt_quickfix().
文件:       src/quickfix.c

Patch 8.1.1550
问题:       When a popup has left padding text may be cut off.
解决方案:   Add the border and padding when computing the size.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1551
问题:       Warning for shadowing popup_dragwin. (Dominique Pelle)
解决方案:   Add missing change.
文件:       src/ui.c

Patch 8.1.1552
问题:       Cursor position is wrong after sign column appears or disappears.
            (Yegappan Lakshmanan)
解决方案:   Call changed_line_abv_curs() instead of changed_cline_bef_curs().
文件:       src/sign.c, src/testdir/test_signs.vim,
            src/testdir/dumps/Test_sign_cursor_01.dump,
            src/testdir/dumps/Test_sign_cursor_02.dump

Patch 8.1.1553
问题:       Not easy to change the text in a popup window.
解决方案:   Add popup_settext(). (Ben Jackson, closes #4549)
            Also display a space for an empty popup.
文件:       runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro,
            src/testdir/dumps/Test_popup_settext_01.dump,
            src/testdir/dumps/Test_popup_settext_02.dump,
            src/testdir/dumps/Test_popup_settext_03.dump,
            src/testdir/dumps/Test_popup_settext_04.dump,
            src/testdir/dumps/Test_popup_settext_05.dump,
            src/testdir/dumps/Test_popup_settext_06.dump,
            src/testdir/test_popupwin.vim

Patch 8.1.1554 (after 8.1.1539)
问题:       Docs and tests for :const can be improved.
解决方案:   Improve documentation, add a few more tests. (Ryuichi Hayashida,
            closes #4551)
文件:       runtime/doc/eval.txt, src/testdir/test_const.vim

Patch 8.1.1555
问题:       NOT_IN_POPUP_WINDOW is confusing. (Andy Massimino)
解决方案:   Rename to ERROR_IF_POPUP_WINDOW().
文件:       src/popupwin.c, src/proto/popupwin.pro, src/macros.h,
            src/ex_cmds2.c, src/ex_docmd.c, src/window.c

Patch 8.1.1556
问题:       The command displayed to show a failing screenshot does not include
            the "testdir" directory.
解决方案:   Prefix the directory name so that it can be copy-pasted.
文件:       src/testdir/screendump.vim

Patch 8.1.1557
问题:       Compiler warning for unused variables in tiny version. (Tony
            Mechelynck)
解决方案:   Add #ifdef.
文件:       src/option.c

Patch 8.1.1558
问题:       Popup_menu() and popup_filter_menu() are not implemented yet.
解决方案:   Implement the functions. Fix that centering didn't take the border
            and padding into account.
文件:       runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/evalfunc.c, src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_03.dump,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump

Patch 8.1.1559
问题:       Popup window title property not implemented yet.
解决方案:   Implement the title property.
文件:       runtime/doc/popup.txt, src/popupwin.c, src/structs.h
            src/window.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_title.dump

Patch 8.1.1560
问题:       Popup window hidden option not implemented yet.
解决方案:   Implement the hidden option.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1561
问题:       Popup_setoptions() is not implemented yet.
解决方案:   Implement popup_setoptions().  Also add more fields to
            popup_getoptions().
文件:       runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/dict.c, src/proto/dict.pro, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/runtest.vim

Patch 8.1.1562
问题:       Popup window not always redrawn after popup_setoptions().
解决方案:   Force a redraw.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_23.dump

Patch 8.1.1563
问题:       Crash when using closures.
解决方案:   Set reference in varlist of funccal when running the garbage
            collector. (Ozaki Kiichi, closes #4554, closes #4547)
文件:       src/testdir/test_vimscript.vim, src/userfunc.c

Patch 8.1.1564
问题:       Sign column takes up space.  (Adam Stankiewicz)
解决方案:   Optionally put signs in the number column. (Yegappan Lakshmanan,
            closes #4555, closes #4515)
文件:       runtime/doc/options.txt, src/option.c, src/screen.c,
            src/testdir/test_signs.vim

Patch 8.1.1565
问题:       MS-Windows: no sound support.
解决方案:   Add sound support for MS-Windows. (Yasuhiro Matsumoto, Ken Takata,
            closes #4522)
文件:       runtime/doc/eval.txt, src/Make_cyg_ming.mak, src/Make_mvc.mak,
            src/sound.c, src/testdir/test_sound.vim

Patch 8.1.1566
问题:       Error message when terminal closes while it is not in the current
            tab.
解决方案:   Also set "do_set_w_closing" when using the special autocommand
            window. (closes #4552)
文件:       src/terminal.c

Patch 8.1.1567
问题:       Localtime_r() does not respond to $TZ changes.
解决方案:   If $TZ changes then call tzset(). (Tom Ryder)
文件:       src/auto/configure, src/config.h.in, src/configure.ac,
            src/evalfunc.c, src/memline.c, src/proto/memline.pro,
            src/testdir/test_functions.vim, src/undo.c

Patch 8.1.1568 (after 8.1.1567)
问题:       Strftime() test fails on MS-Windows.
解决方案:   Skip the check for using the $TZ environment variable.
文件:       src/testdir/test_functions.vim

Patch 8.1.1569
问题:       Cannot build with signs but without diff feature.
解决方案:   Move #ifdef. (Tom Ryder)
文件:       src/screen.c

Patch 8.1.1570
问题:       Icon signs not displayed properly in the number column.
解决方案:   Display them properly. (Yegappan Lakshmanan, closes #4559)
文件:       src/gui.c, src/screen.c, src/testdir/test_signs.vim

Patch 8.1.1571
问题:       textprop highlight starts too early if just after a tab.
解决方案:   Check if still drawing a previous character. (closes #4558)
文件:       src/screen.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_tab.dump

Patch 8.1.1572 (after 8.1.1569)
问题:       Compiler warnings with tiny build. (Tony Mechelynck)
解决方案:   Add #ifdef.
文件:       src/screen.c

Patch 8.1.1573 (after 8.1.1571)
问题:       Textprop test fails if screenshots do not work.
解决方案:   Add check for screenshots working.
文件:       src/testdir/test_textprop.vim

Patch 8.1.1574
问题:       Tabpage option not yet implemented for popup window.
解决方案:   Implement tabpage option, also for popup_getoptions().
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1575
问题:       Callbacks may be garbage collected.
解决方案:   Set reference in callbacks. (Ozaki Kiichi, closes #4564)
文件:       src/buffer.c, src/channel.c, src/eval.c, src/ex_cmds2.c,
            src/popupwin.c, src/proto/buffer.pro, src/proto/popupwin.pro,
            src/terminal.c, src/testdir/test_listener.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_prompt_buffer.vim,
            src/userfunc.c

Patch 8.1.1576
问题:       Compiler warning for unused argument.
解决方案:   Add "UNUSED" annotation. (Dominique Pelle, closes #4570)
文件:       src/ui.c

Patch 8.1.1577
问题:       Command line redrawn for +arabic without Arabic characters.
            (Dominique Pelle)
解决方案:   Check if there actually are any Arabic characters.  Do redraw
            after displaying incsearch. (closes #4569)
文件:       src/ex_getln.c

Patch 8.1.1578
问题:       MS-Windows: pathdef.c should depend on build options.
解决方案:   Generate pathdef.c in the object directory.  Fix dependencies.
            (Ken Takata, closes #4565)
文件:       .gitignore, .hgignore, src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.1579
问题:       Dict and list could be GC'ed while displaying error in a timer.
            (Yasuhiro Matsumoto)
解决方案:   Block garbage collection when executing a timer.  Add
            test_garbagecollect_soon(). Add "no_wait_return" to
            test_override(). (closes #4571)
文件:       src/dict.c, src/testdir/test_timers.vim, src/evalfunc.c,
            runtime/doc/eval.txt

Patch 8.1.1580
问题:       Cannot make part of a popup transparent.
解决方案:   Add the "mask" option.
文件:       runtime/doc/popup.txt, src/popupwin.c, src/screen.c,
            src/structs.h, src/window.c, src/ui.c, src/vim.h, src/globals.h,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump

Patch 8.1.1581
问题:       Shared functions for testing are disorganised.
解决方案:   Group functions in script files. (Ozaki Kiichi, closes #4573)
文件:       Filelist, src/testdir/screendump.vim, src/testdir/shared.vim,
            src/testdir/term_util.vim, src/testdir/test_mksession.vim,
            src/testdir/test_suspend.vim, src/testdir/test_terminal.vim,
            src/testdir/test_timers.vim, src/testdir/view_util.vim

Patch 8.1.1582
问题:       Cannot build with +textprop but without +timers.
解决方案:   Add #ifdef. (Ola Söder, closes #4574)
文件:       src/popupwin.c

Patch 8.1.1583
问题:       Set_ref_in_list() only sets ref in items.
解决方案:   Rename to set_ref_in_list_items() to avoid confusion.
文件:       src/eval.c, src/proto/eval.pro, src/if_lua.c, src/popupwin.c,
            src/userfunc.c, src/if_py_both.h

Patch 8.1.1584
问题:       The evalfunc.c file is getting too big.
解决方案:   Move channel and job related functions to channel.c.
文件:       src/channel.c, src/evalfunc.c, src/proto/channel.pro

Patch 8.1.1585
问题:       :let-heredoc does not trim enough.
解决方案:   Trim indent from the contents based on the indent of the first
            line.  Use let-heredoc in more tests.
文件:       runtime/doc/eval.txt, src/eval.c, src/testdir/test_balloon.vim,
            src/testdir/test_cindent.vim, src/testdir/test_const.vim,
            src/testdir/test_debugger.vim, src/testdir/test_functions.vim,
            src/testdir/test_goto.vim, src/testdir/test_gui.vim,
            src/testdir/test_highlight.vim, src/testdir/test_join.vim,
            src/testdir/test_let.vim, src/testdir/test_memory_usage.vim,
            src/testdir/test_messages.vim,
            src/testdir/test_mksession_utf8.vim, src/testdir/test_normal.vim,
            src/testdir/test_popup.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_profile.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_xxd.vim

Patch 8.1.1586
问题:       Error number used in two places.
解决方案:   Renumber one. (Ken Takata)
文件:       runtime/doc/popup.txt, src/popupwin.c

Patch 8.1.1587
问题:       Redraw problem when sign icons in the number column.
解决方案:   Clear and redraw when changing related options.  Right align the
            sign icon in the GUI. (Yegappan Lakshmanan, closes #4578)
文件:       src/gui.c, src/option.c

Patch 8.1.1588
问题:       In :let-heredoc line continuation is recognized.
解决方案:   Do not consume line continuation. (Ozaki Kiichi, closes #4580)
文件:       src/autocmd.c, src/digraph.c, src/eval.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_cmds.h, src/ex_cmds2.c, src/ex_docmd.c,
            src/ex_getln.c, src/normal.c, src/ops.c, src/proto/autocmd.pro,
            src/proto/ex_cmds2.pro, src/proto/ex_docmd.pro,
            src/proto/ex_getln.pro, src/proto/userfunc.pro,
            src/testdir/test_let.vim, src/testdir/test_startup.vim,
            src/userfunc.c

Patch 8.1.1589
问题:       Popup window does not indicate scroll position.
解决方案:   Add a scrollbar.
文件:       runtime/doc/popup.txt, src/popupwin.c, src/structs.h,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1590
问题:       Popup window test fails.
解决方案:   Add "scrollbar" to expected result.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1591
问题:       On error garbage collection may free memory in use.
解决方案:   Reset may_garbage_collect when evaluating expression mapping.
            Add tests. (Ozaki Kiichi, closes #4579)
文件:       src/ex_cmds2.c, src/getchar.c, src/testdir/test_mapping.vim,
            src/testdir/test_timers.vim, src/testdir/test_vimscript.vim

Patch 8.1.1592
问题:       May start file dialog while exiting.
解决方案:   Ignore the "browse" modifier when exiting. (Ozaki Kiichi,
            closes #4582
文件:       src/ex_cmds.c, src/terminal.c

Patch 8.1.1593
问题:       Filetype not detected for C++ header files without extension.
解决方案:   Recognize the file by the Emacs file mode. (Dmitry Ilyin,
            closes #4593)
文件:       runtime/scripts.vim, src/testdir/test_filetype.vim

Patch 8.1.1594
问题:       May still start file dialog while exiting.
解决方案:   Ignore the "browse" modifier in another place when exiting.
            (Ozaki Kiichi, closes #4582)
文件:       src/ex_cmds.c

Patch 8.1.1595
问题:       MS-Windows with VIMDLL: colors wrong in the GUI.
解决方案:   Do not set the terminal colors when not using the GUI. (Ken
            Takata, closes #4588)
文件:       src/syntax.c

Patch 8.1.1596
问题:       When resizing the screen may draw popup in wrong position. (Masato
            Nishihata)
解决方案:   Check the popup is not outside of the screen. (fixes #4592)
文件:       src/popupwin.c

Patch 8.1.1597
问题:       Cannot scroll a popup window with the mouse.
解决方案:   If the popup window has a scrollbar let the mouse scroll wheel
            scroll the window.
文件:       runtime/doc/popup.txt, src/normal.c, src/popupwin.c, src/screen.c,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_scroll_7.dump

Patch 8.1.1598
问题:       Update to test file missing.
解决方案:   Update the popup window test file.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1599
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Add a dummy assignment.
文件:       src/popupwin.c, src/normal.c

Patch 8.1.1600
问题:       Cannot specify highlighting for popup window scrollbar.
解决方案:   Add "scrollbarhighlight" and "thumbhighlight" options.
文件:       src/popupwin.c, src/structs.h, src/window.c,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_scroll_7.dump

Patch 8.1.1601
问题:       Missing changes to popup window test file.
解决方案:   Add those changes.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1602
问题:       Popup window cannot overflow on the left or right.
解决方案:   Only set the "fixed" option when it is in the dict. Set w_leftcol
            to allow for the popup overflowing on the left and use it when
            applying the mask.
文件:       src/popupwin.c

Patch 8.1.1603
问题:       Crash when using unknown highlighting in text property.
解决方案:   Check for zero highlight ID.
文件:       src/screen.c, src/testdir/test_textprop.vim

Patch 8.1.1604
问题:       Popup window scroll test is flaky.
解决方案:   Add a delay between scroll events.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1605
问题:       Vim may delay processing messages on a json channel. (Pontus
            Leitzler)
解决方案:   Try parsing json when checking if there is readahead.
文件:       src/channel.c

Patch 8.1.1606
问题:       On a narrow screen ":hi" output is confusing.
解决方案:   Insert a space between highlight group name and "xxx". (Masato
            Nishihaga, closes #4599)
文件:       src/syntax.c, src/testdir/test_highlight.vim

Patch 8.1.1607
问题:       Popup window scrollbar does not respond to click.
解决方案:   Mouse click in scrollbar scrolls by one line.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/ui.c,
            src/normal.c, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_scroll_8.dump,
            src/testdir/dumps/Test_popupwin_scroll_9.dump

Patch 8.1.1608
问题:       The evalfunc.c file is too big.
解决方案:   Move sign functionality to sign.c.
文件:       src/evalfunc.c, src/proto/evalfunc.pro, src/sign.c,
            src/proto/sign.pro

Patch 8.1.1609
问题:       The user cannot easily close a popup window.
解决方案:   Add the "close" property. (mostly by Masato Nishihata,
            closes #4601)
文件:       runtime/doc/popup.txt, src/popupwin.c, src/proto/popupwin.pro,
            src/structs.h, src/testdir/dumps/Test_popupwin_close_01.dump,
            src/testdir/dumps/Test_popupwin_close_02.dump,
            src/testdir/dumps/Test_popupwin_close_03.dump,
            src/testdir/test_popupwin.vim, src/ui.c

Patch 8.1.1610
问题:       There is no way to add or load a buffer without side effects.
解决方案:   Add the bufadd() and bufload() functions.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim

Patch 8.1.1611
问题:       Bufadd() reuses existing buffer without a name.
解决方案:   When the name is empty always create a new buffer.
文件:       src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.1612
问题:       Cannot show an existing buffer in a popup window.
解决方案:   Support buffer number argument in popup_create().
文件:       src/buffer.c, src/proto/buffer.pro, src/evalfunc.c,
            src/popupwin.c, src/vim.h, src/normal.c, src/screen.c, src/ui.c,
            src/window.c, src/testdir/test_popupwin.vim, runtime/doc/popup.txt

Patch 8.1.1613
问题:       Popup window test fails with Athena and Motif.
解决方案:   Compute the highlight attribute when the GUI is not active.
文件:       src/syntax.c

Patch 8.1.1614
问题:       'numberwidth' can only go up to 10.
解决方案:   Allow up to 20. (Charlie Stanton, closes #4584)
文件:       runtime/doc/options.txt, src/option.c, src/screen.c,
            src/testdir/gen_opt_test.vim, src/testdir/test_options.vim

Patch 8.1.1615
问题:       Crash when passing buffer number to popup_create(). (Yasuhiro
            Matsumoto)
解决方案:   Initialize the window properly.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1616
问题:       Build failure with gcc on Amiga.
解决方案:   Add missing header includes. (Ola Söder, closes #4603)
文件:       src/os_amiga.h

Patch 8.1.1617
问题:       No test for popup window with mask and position fixed.
解决方案:   Add a couple of screenshots.  Fix detected problems.
文件:       src/popupwin.c, src/structs.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump

Patch 8.1.1618
问题:       Amiga-like systems quickly run out of stack.
解决方案:   Reserve a Megabyte stack. (Ola Söder, closes #4608)
文件:       src/os_amiga.c

Patch 8.1.1619
问题:       Tests are not run with GUI on Travis.
解决方案:   Add a testgui job. (Ozaki Kiichi, closes #4609)
文件:       .travis.yml, src/testdir/test_highlight.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.1620
问题:       No test for popup window with border and mask.
解决方案:   Add this popup window, fix problems.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_1.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump

Patch 8.1.1621
问题:       Amiga: time.h included twice.
解决方案:   Remove include from evalfunc.c, move outside of #ifdef in
            os_amiga.h. (Ola Söder, closes #4607)
文件:       src/evalfunc.c, src/os_amiga.h

Patch 8.1.1622
问题:       Wrong width if displaying a lot of lines in a popup window.
解决方案:   Accurately compute the line overflow.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_firstline.dump

Patch 8.1.1623
问题:       Display wrong with signs in narrow number column.
解决方案:   Increase the numbercolumn width if needed. (Yegappan Lakshmanan,
            closes #4606)
文件:       src/option.c, src/screen.c, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1624
问题:       When testing in the GUI may try to run gvim in a terminal.
解决方案:   Add the -v argument. (Yee Cheng Chin, closes #4605)  Don't skip
            tests that work now.
文件:       src/testdir/shared.vim, src/testdir/term_util.vim,
            src/testdir/test_mapping.vim, src/testdir/test_timers.vim

Patch 8.1.1625
问题:       Script line numbers are not exactly right.
解决方案:   Handle heredoc and continuation lines better. (Ozaki Kiichi,
            closes #4611, closes #4511)
文件:       src/ex_cmds2.c, src/proto/ex_cmds2.pro,
            src/testdir/test_vimscript.vim, src/userfunc.c

Patch 8.1.1626
问题:       No test for closing a popup window with a modified buffer.
解决方案:   Add a test.  Add "popups" to getbufinfo().
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1627
问题:       Header file contains mixed comment style.
解决方案:   Use // style comments.
文件:       src/structs.h

Patch 8.1.1628
问题:       Popup window functions not in list of functions.
解决方案:   Add popup window functions to the list of functions.  Reorganise
            the popup window help.
文件:       runtime/doc/eval.txt, runtime/doc/popup.txt,
            runtime/doc/usr_41.txt

Patch 8.1.1629
问题:       Terminal function help is in the wrong file.
解决方案:   Move the function details to terminal.txt.
文件:       runtime/doc/eval.txt, runtime/doc/terminal.txt

Patch 8.1.1630
问题:       Various small problems.
解决方案:   Various small improvements.
文件:       src/gui_beval.c, src/list.c, src/menu.c, src/message.c,
            src/misc2.c, src/testdir/test_terminal.vim, src/os_vms_conf.h,
            src/testdir/Make_vms.mms

Patch 8.1.1631
问题:       Displaying signs is inefficient.
解决方案:   Avoid making multiple calls to get information about a placed
            sign. (Yegappan Lakshmanan, closes #4586)
文件:       src/proto/sign.pro, src/screen.c, src/sign.c, src/structs.h

Patch 8.1.1632
问题:       Build with EXITFREE but without +arabic fails.
解决方案:   Rename the function and adjust #ifdefs. (closes #4613)
文件:       src/ex_getln.c, src/proto/ex_getln.pro, src/misc2.c

Patch 8.1.1633
问题:       Cannot generate prototypes with X11 but without GUI.
解决方案:   Include X11/Intrinsic.h.
文件:       src/gui.h

Patch 8.1.1634
问题:       Terminal test fails when term_getansicolors() is missing.
            Diff test fails without +rightleft.  (Dominique Pelle)
解决方案:   Check if term_getansicolors() is supported. (closes #4597)
文件:       src/testdir/test_terminal.vim, src/testdir/test_diffmode.vim

Patch 8.1.1635
问题:       Warnings for unused variables in small version. (John Marriott)
解决方案:   Adjust #ifdefs.
文件:       src/screen.c

Patch 8.1.1636
问题:       Crash when popup has fitting scrollbar. (Trygve Aaberge)
解决方案:   Don't divide by zero if the scrollbar just fits. (closes #4615)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1637
问题:       After running tests and clean the XfakeHOME directory remains.
解决方案:   Use "rm -rf". (Hirohito Higashi)
文件:       src/testdir/Makefile, src/testdir/Make_amiga.mak

Patch 8.1.1638
问题:       Running tests leaves some files behind.
解决方案:   Delete the files. (Ozaki Kiichi, closes #4617)
文件:       src/testdir/test_functions.vim, src/testdir/test_popupwin.vim

Patch 8.1.1639
问题:       Changing an autoload name into a script file name is inefficient.
解决方案:   Remember the last replaced #. (Ozaki Kiichi, closes #4618)
文件:       src/eval.c

Patch 8.1.1640
问题:       The CursorHold autocommand takes down a balloon. (Paul Jolly)
解决方案:   Ignore the CursorHold pseudo-key.
文件:       src/getchar.c, src/testdir/test_balloon.vim,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_01a.dump

Patch 8.1.1641
问题:       Garbage collection may run at a wrong moment. (Trygve Aaberge)
解决方案:   Postpone garbage collection while parsing messages. (closes #4620)
文件:       src/misc2.c

Patch 8.1.1642 (after 8.1.0374)
问题:       May use uninitialized variable. (Patrick Palka)
解决方案:   Initialize variables earlier. (closes #4623)
文件:       src/screen.c, src/testdir/test_number.vim

Patch 8.1.1643
问题:       Sign placement is wrong when 'foldcolumn' is set.
解决方案:   Adjust the column computation. (Yee Cheng Chin, closes #4627)
文件:       src/gui.c

Patch 8.1.1644
问题:       Sound test does not work on Travis.
解决方案:   Use "sg" command to enable audio. (Ozaki Kiichi, closes #4624)
文件:       .travis.yml

Patch 8.1.1645
问题:       Cannot use a popup window for a balloon.
解决方案:   Add popup_beval().  Add the "mousemoved" property.  Add the
            screenpos() function.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/move.c,
            src/proto/move.pro, src/beval.c, src/proto/beval.pro,
            src/evalfunc.c, src/popupmnu.c, src/normal.c,
            src/testdir/test_popupwin.vim, src/testdir/test_cursor_func.vim,
            runtime/doc/popup.txt, runtime/doc/eval.txt,
            runtime/doc/usr_41.txt,
            src/testdir/dumps/Test_popupwin_beval_1.dump,
            src/testdir/dumps/Test_popupwin_beval_2.dump,
            src/testdir/dumps/Test_popupwin_beval_3.dump

Patch 8.1.1646 (after 8.1.1645)
问题:       build failure
解决方案:   Add changes to structure.
文件:       src/structs.h

Patch 8.1.1647
问题:       Build error with GTK and hangulinput feature, im_get_status()
            defined twice. (Dominique Pelle)
解决方案:   Adjust im_get_status(). (closes #4628)
文件:       src/hangulin.c, src/mbyte.c

Patch 8.1.1648
问题:       MS-Windows: build error with normal features.
解决方案:   Adjust #ifdef for find_word_under_cursor().
文件:       src/beval.c, src/proto/beval.pro

Patch 8.1.1649
问题:       Illegal memory access when closing popup window.
解决方案:   Get w_next before closing the window.
文件:       src/popupwin.c

Patch 8.1.1650
问题:       Warning for using uninitialized variable. (Tony Mechelynck)
解决方案:   Simplify the code by always using the mouse coordinates.
文件:       src/beval.c

Patch 8.1.1651
问题:       Suspend test is flaky on some systems.
解决方案:   Wait for the shell prompt to show. (Yee Cheng Chin, closes #4632)
文件:       src/testdir/test_suspend.vim

Patch 8.1.1652
问题:       GUI: popup window doesn't close on mouse movement. (Paul Jolly)
解决方案:   Generate mouse-move events when a popup window is visible.
文件:       src/gui.c, src/globals.h

Patch 8.1.1653
问题:       Ubsan warns for possibly passing NULL pointer.
解决方案:   Skip code when length is zero. (Dominique Pelle, closes #4631)
文件:       src/channel.c

Patch 8.1.1654
问题:       GUI: screen updates from 'balloonexpr' are not displayed.
解决方案:   Update the screen if needed.  Also avoid the cursor being
            displayed in the wrong position.
文件:       src/beval.c

Patch 8.1.1655
问题:       Popup window border drawn wrong with multi-byte char. (Marcin
            Szamotulski)
解决方案:   Correct check in mb_fix_col(). (closes #4635)
文件:       src/mbyte.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_24.dump

Patch 8.1.1656
问题:       Popup window width is wrong when using Tabs. (Paul Jolly)
解决方案:   Count tabs correctly. (closes #4637)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_11.dump

Patch 8.1.1657
问题:       Terminal: screen updates from 'balloonexpr' are not displayed.
解决方案:   Update the screen if needed.  Fix the word position for
            "mousemoved".
文件:       src/beval.c, src/proto/beval.pro, src/popupwin.c, src/normal.c,
            src/proto/normal.pro

Patch 8.1.1658
问题:       Debug statements included in patch.
解决方案:   Remove the debug statements.
文件:       src/normal.c, src/popupwin.c

Patch 8.1.1659
问题:       Popup window "mousemoved" values not correct.
解决方案:   Convert text column to mouse column.
文件:       src/popupwin.c, runtime/doc/popup.txt

Patch 8.1.1660
问题:       Assert_fails() does not fail inside try/catch.
解决方案:   Set trylevel to zero. (Ozaki Kiichi, closes #4639)
文件:       src/eval.c, src/testdir/test_assert.vim

Patch 8.1.1661
问题:       Cannot build with +textprop but without +balloon_eval.
解决方案:   Adjust #ifdefs. (closes #4645)
文件:       src/proto.h

Patch 8.1.1662
问题:       Cannot build uninstal.exe with some version of MinGW.
解决方案:   Add -lole32. (Rene Nyffenegger, closes #4646)
文件:       src/Make_cyg_ming.mak

Patch 8.1.1663
问题:       Compiler warning for using size_t.
解决方案:   Add type cast. (Mike Williams)
文件:       src/popupwin.c

Patch 8.1.1664
问题:       GUI resize may cause changing Rows at a bad time. (Dominique
            Pelle)
解决方案:   Postpone resizing while updating the screen.
文件:       src/term.c

Patch 8.1.1665
问题:       Crash when popup window with mask is below the screen.
解决方案:   Correct boundary check.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_mask_5.dump

Patch 8.1.1666
问题:       Click in popup window scrollbar with border doesn't scroll.
解决方案:   Correct column for the border. (Naruhiko Nishino, closes #4650)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_9.dump

Patch 8.1.1667
问题:       Flags for Ex commands may clash with other symbols.
解决方案:   Prepend with EX_.
文件:       src/ex_cmds.h, src/evalfunc.c, src/ex_docmd.c, src/ex_getln.c,
            src/usercmd.c, src/syntax.c

Patch 8.1.1668
问题:       Popup window test is a bit flaky on some systems.
解决方案:   Clear the command line. (Naruhiko Nishino, closes #4656)
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1669
问题:       Travis: test results section is closed even when some tests
            failed.
解决方案:   Only close the section on success. (Daniel Hahler, closes #4659)
文件:       .travis.yml

Patch 8.1.1670
问题:       Sign column not always properly aligned.
解决方案:   Use "col" only after it was calculated. (Yee Cheng Chin,
            closes #4649)
文件:       src/gui.c

Patch 8.1.1671
问题:       Copying a blob may result in it being locked.
解决方案:   Reset v_lock. (Ken Takata, closes #4648)
文件:       src/blob.c, src/testdir/test_blob.vim

Patch 8.1.1672 (after  8.1.1667)
问题:       "make cmdidxs" doesn't work.
解决方案:   Update macro names. (Naruhiko Nishino, closes #4660)
文件:       src/create_cmdidxs.vim

Patch 8.1.1673
问题:       Cannot easily find the popup window at a certain position.
解决方案:   Add popup_locate().
文件:       runtime/doc/popup.txt, src/evalfunc.c, src/popupwin.c,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1674
问题:       Script to check a colorscheme can be improved.
解决方案:   Match the whole group name. Don't warn for what is usually omitted.
文件:       runtime/colors/tools/check_colors.vim

Patch 8.1.1675
问题:       Listener list not correctly updated on listener_remove().
解决方案:   Only set "prev" when not removing a listener.  Return one if the
            listener was found and removed.
文件:       src/change.c

Patch 8.1.1676
问题:       "maxwidth" of popup window does not always work properly.
解决方案:   Adjust the computation. (Naruhiko Nishino, closes #4653)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_maxwidth_1.dump

Patch 8.1.1677
问题:       Tests get stuck when running into an existing swapfile.
解决方案:   Set v:swapchoice to "q" and report an error. (Daniel Hahler,
            closes #4644)
文件:       src/testdir/runtest.vim

Patch 8.1.1678
问题:       When using popup_menu() does not scroll to show the selected line.
解决方案:   Scroll the text. (Naruhiko Nishino, closes #4651)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_4.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_6.dump

Patch 8.1.1679
问题:       Test using SwapExists autocommand file may fail.
解决方案:   Remove the SwapExists autocommand.
文件:       src/testdir/test_window_cmd.vim

Patch 8.1.1680
问题:       The command table is not well aligned.
解决方案:   Adjust indent.
文件:       src/ex_cmds.h

Patch 8.1.1681
问题:       Insert stray "{" when listener gets buffer line. (Paul Jolly)
解决方案:   Flush the cached line after invoking listeners. (closes #4455)
文件:       src/memline.c, src/testdir/test_listener.vim

Patch 8.1.1682
问题:       Placing a larger number of signs is slow.
解决方案:   Add functions for dealing with a list of signs. (Yegappan
            Lakshmanan, closes #4636)
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/evalfunc.c,
            src/proto/sign.pro, src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1683
问题:       Dictionary with string keys is longer than needed.
解决方案:   Use *{key: val} for literal keys.
文件:       runtime/doc/eval.txt, src/eval.c, src/dict.c, src/proto/dict.pro,
            src/testdir/test_listdict.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump,
            src/testdir/dumps/Test_popupwin_mask_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1684
问题:       Profiling functionality is spread out.
解决方案:   Put profiling functionality in profiler.c. (Yegappan Lakshmanan,
            closes #4666)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_dice.mak,
            src/Make_manx.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_sas.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/ex_cmds2.c, src/globals.h, src/profiler.c, src/proto.h,
            src/proto/ex_cmds2.pro, src/proto/profiler.pro,
            src/proto/userfunc.pro, src/structs.h, src/userfunc.c

Patch 8.1.1685
问题:       Missing file in distributed file list.
解决方案:   Add profiler.pro
文件:       Filelist

Patch 8.1.1686
问题:       "*" of "*{" is recognized as multiply operator. (Yasuhiro
            Matsumoto)
解决方案:   Check for the "{".
文件:       src/eval.c, src/testdir/test_listdict.vim

Patch 8.1.1687
问题:       The evalfunc.c file is too big.
解决方案:   Move testing support to a separate file.
文件:       Filelist, src/evalfunc.c, src/eval.c, src/proto/eval.pro,
            src/testing.c, src/proto/testing.pro, src/Make_cyg_ming.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/README.md, src/proto.h

Patch 8.1.1688
问题:       Old makefiles are no longer useful.
解决方案:   Delete the makefiles, they most likely don't work anyway.
文件:       Filelist, src/Make_dice.mak, src/Make_manx.mak, src/Make_sas.mak

Patch 8.1.1689
问题:       Profiling code is spread out.
解决方案:   Move more profiling code to profiler.c. (Yegappan Lakshmanan,
            closes #4668)
文件:       src/ex_cmds2.c, src/profiler.c, src/proto/ex_cmds2.pro,
            src/proto/profiler.pro, src/proto/userfunc.pro, src/structs.h,
            src/userfunc.c

Patch 8.1.1690
问题:       Default padding for popup window menu is too much.
解决方案:   Only add padding left and right.
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_maxwidth_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_4.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_6.dump

Patch 8.1.1691
问题:       Diff test fails on some systems. (Elimar Riesebieter)
解决方案:   Add a term_wait() call.
文件:       src/testdir/test_diffmode.vim

Patch 8.1.1692
问题:       Using *{} for literal dict is not backwards compatible. (Yasuhiro
            Matsumoto)
解决方案:   Use ~{} instead.
文件:       runtime/doc/eval.txt runtime/doc/popup.txt, src/eval.c,
            src/testdir/test_listdict.vim src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_mask_2.dump,
            src/testdir/dumps/Test_popupwin_mask_3.dump,
            src/testdir/dumps/Test_popupwin_mask_4.dump,
            src/testdir/dumps/Test_popupwin_mask_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_scroll_4.dump

Patch 8.1.1693
问题:       Syntax coloring and highlighting is in one big file.
解决方案:   Move the highlighting to a separate file. (Yegappan Lakshmanan,
            closes #4674)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/globals.h, src/highlight.c, src/proto.h,
            src/proto/highlight.pro, src/proto/syntax.pro, src/structs.h,
            src/syntax.c

Patch 8.1.1694
问题:       The RUN_VIM variable is longer than needed.
解决方案:   Shorten RUN_VIM. (Daniel Hahler, closes #4643)
文件:       src/testdir/Makefile, src/testdir/shared.vim

Patch 8.1.1695
问题:       Windows 10: crash when cursor is at bottom of terminal.
解决方案:   Position the cursor before resizing. (Yasuhiro Matsumoto,
            closes #4679)
文件:       src/os_win32.c

Patch 8.1.1696
问题:       MSVC: link command line is too long.
解决方案:   Use the @<< mechanism to pass the arguments via a file. (Christian
            Brabandt)
文件:       src/Make_mvc.mak

Patch 8.1.1697
问题:       Cannot build with MSVC.
解决方案:   Remove the backslashes after the @<< mechanism.
文件:       src/Make_mvc.mak

Patch 8.1.1698
问题:       Appveyor build with MSVC fails.
解决方案:   Remove the sed command
文件:       ci/appveyor.bat

Patch 8.1.1699
问题:       Highlight_ga can be local instead of global.
解决方案:   Move highlight_ga into highlight.c. (Yegappan Lakshmanan,
            closes #4675)
文件:       src/globals.h, src/highlight.c, src/proto/highlight.pro,
            src/structs.h, src/syntax.c

Patch 8.1.1700
问题:       Listener callback called for the wrong buffer.
解决方案:   Invoke listeners before calling ml_append_int().
文件:       src/memline.c

Patch 8.1.1701
问题:       Appveyor build with MSVC fails puts progress bar in log.
解决方案:   Adjust the sed command. (Ken Takata)
文件:       ci/appveyor.bat

Patch 8.1.1702
问题:       Compiler warning for uninitialized variable.
解决方案:   Initialize it. (Christian Brabandt)
文件:       src/gui.c

Patch 8.1.1703
问题:       Breaking out of loop by checking window pointer is insufficient.
解决方案:   Check the window ID and the buffer number. (closes #4683)
文件:       src/misc2.c

Patch 8.1.1704
问题:       C-R C-W does not work after C-G when using 'incsearch'.
解决方案:   Put cursor at end of the match. (Yasuhiro Matsumoto, closes #4664)
文件:       src/ex_getln.c, src/testdir/test_search.vim

Patch 8.1.1705
问题:       Using ~{} for a literal dict is not nice.
解决方案:   Use #{} instead.
文件:       runtime/doc/eval.txt runtime/doc/popup.txt, src/eval.c,
            src/testdir/test_listdict.vim src/testdir/test_popupwin.vim

Patch 8.1.1706
问题:       Typo in #ifdef.
解决方案:   Change PROT to PROTO.
文件:       src/beval.c

Patch 8.1.1707
问题:       Coverity warns for possibly using a NULL pointer.
解决方案:   Change the logic to make sure no NULL pointer is used.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1708
问题:       Coverity warns for using uninitialized variable.
解决方案:   Set the start col when col is set.
文件:       src/beval.c

Patch 8.1.1709
问题:       Coverity warns for possibly using a NULL pointer.
解决方案:   Make sure no NULL pointer is used.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1710
问题:       Coverity found dead code.
解决方案:   Remove merging of listener changes.
文件:       src/change.c

Patch 8.1.1711
问题:       Listener callback called at the wrong moment
解决方案:   Invoke listeners before calling ml_delete_int(). (closes #4657)
文件:       src/memline.c

Patch 8.1.1712
问题:       Signs in number column cause text to be misaligned.
解决方案:   Improve alignment. (Yasuhiro Matsumoto, closes #4694)
文件:       src/screen.c, src/testdir/test_signs.vim

Patch 8.1.1713
问题:       Highlighting cursor line only works with popup_menu().
解决方案:   Add the "cursorline" property. (Naruhiko Nishino, closes #4671)
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/dumps/Test_popupwin_cursorline_1.dump,
            src/testdir/dumps/Test_popupwin_cursorline_2.dump,
            src/testdir/dumps/Test_popupwin_cursorline_3.dump,
            src/testdir/dumps/Test_popupwin_cursorline_4.dump,
            src/testdir/dumps/Test_popupwin_cursorline_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_6.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_1.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_2.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_3.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_4.dump,
            src/testdir/test_popupwin.vim, src/vim.h

Patch 8.1.1714
问题:       Cannot preview a file in a popup window.
解决方案:   Add the 'previewpopup' option.
文件:       runtime/doc/windows.txt, runtime/doc/options.txt, src/popupwin.c,
            src/proto/popupwin.pro, src/option.c, src/option.h, src/ex_cmds.c,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/ex_docmd.c, src/testdir/gen_opt_test.vim

Patch 8.1.1715
问题:       Emoji characters are seen as word characters for spelling. (Gautam
            Iyer)
解决方案:   Exclude class 3 from word characters.
文件:       src/spell.c

Patch 8.1.1716
问题:       Old style comments are wasting space
解决方案:   Use new style comments in option header file. (closes #4702)
文件:       src/option.h

Patch 8.1.1717
问题:       Last char in menu popup window highlighted.
解决方案:   Do not highlight an extra character twice.
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_menu_04.dump

Patch 8.1.1718
问题:       Popup menu highlighting does not look good.
解决方案:   Highlight the whole window line.  Fix that sign line HL is not
            displayed in a window with a background color.
文件:       src/popupwin.c, src/sign.c, src/proto/sign.pro, src/screen.c,
            src/testdir/dumps/Test_popupwin_menu_scroll_1.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_2.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_3.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_4.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_menu_scroll_6.dump,
            src/testdir/dumps/Test_popupwin_menu_01.dump,
            src/testdir/dumps/Test_popupwin_menu_02.dump,
            src/testdir/dumps/Test_popupwin_menu_04.dump

Patch 8.1.1719
问题:       Popup too wide when 'showbreak' is set.
解决方案:   Set window width when computing line length. (closes #4701)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_showbreak.dump

Patch 8.1.1720
问题:       Crash with very long %[] pattern. (Reza Mirzazade farkhani)
解决方案:   Check for reg_toolong. (closes #4703)
文件:       src/regexp.c, src/testdir/test_regexp_utf8.vim

Patch 8.1.1721
问题:       Build failure with normal features without netbeans interface.
解决方案:   Enable signs when using the text properties feature.
文件:       src/feature.h

Patch 8.1.1722
问题:       Error when scriptversion is 2 a making a dictionary access.
解决方案:   Parse the subscript even when not evaluating the sub-expression.
            (closes #4704)
文件:       src/eval.c, src/testdir/test_eval_stuff.vim

Patch 8.1.1723
问题:       Heredoc assignment has no room for new features. (FUJIWARA Takuya)
解决方案:   Require the marker does not start with a lower case character.
            (closes #4705)
文件:       runtime/doc/eval.txt, src/eval.c, src/testdir/test_let.vim

Patch 8.1.1724
问题:       Too much overhead checking for CTRL-C while processing text.
解决方案:   Increase BREAKCHECK_SKIP.  Remove the difference for when built
            with the GUI. (suggested by Andy Massimino, closes #4708)
文件:       src/misc1.c, src/screen.c, src/feature.h

Patch 8.1.1725
问题:       MS-Windows: E325 message may use incorrect date format.
解决方案:   Convert strftime() result to 'encoding'.  Also make the message
            translatable. (Ken Takata, closes #4685, closes #4681)
文件:       src/memline.c

Patch 8.1.1726
问题:       The eval.txt help file is too big.
解决方案:   Split off testing support to testing.txt.  Move function details
            to where the functionality is explained.
文件:       runtime/doc/Makefile, runtime/doc/eval.txt,
            runtime/doc/testing.txt, runtime/doc/sign.txt,
            runtime/doc/textprop.txt, runtime/doc/help.txt,
            runtime/doc/channel.txt, runtime/doc/tags

Patch 8.1.1727
问题:       Code for viminfo support is spread out.
解决方案:   Move to code to viminfo.c. (Yegappan Lakshmanan, closes #4686)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/buffer.c,
            src/eval.c, src/ex_cmds.c, src/ex_docmd.c, src/globals.h,
            src/proto.h, src/proto/buffer.pro, src/proto/eval.pro,
            src/proto/ex_cmds.pro, src/proto/viminfo.pro, src/structs.h,
            src/viminfo.c

Patch 8.1.1728
问题:       Wrong place for command line history viminfo support.
解决方案:   Move it to viminfo.c.
文件:       src/ex_getln.c, src/proto/ex_getln.pro, src/viminfo.c,
            src/structs.h

Patch 8.1.1729
问题:       Heredoc with trim not properly handled in function.
解决方案:   Allow for missing indent. (FUJIWARA Takuya, closes #4713)
文件:       src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.1730
问题:       Wrong place for mark viminfo support.
解决方案:   Move it to viminfo.c. (Yegappan Lakshmanan, closes #4716)
文件:       src/README.md, src/mark.c, src/proto/mark.pro,
            src/proto/viminfo.pro, src/structs.h, src/viminfo.c

Patch 8.1.1731
问题:       Command line history not read from viminfo on startup.
解决方案:   Get history length after initializing it.
文件:       src/viminfo.c, src/testdir/test_viminfo.vim

Patch 8.1.1732
问题:       Completion in cmdwin does not work for buffer-local commands.
解决方案:   Use the right buffer. (closes #4711)
文件:       src/usercmd.c, src/testdir/test_ins_complete.vim

Patch 8.1.1733
问题:       The man ftplugin leaves an empty buffer behind.
解决方案:   Don't make new window and edit, use split. (Jason Franklin)
文件:       runtime/ftplugin/man.vim, src/testdir/test_man.vim

Patch 8.1.1734
问题:       The evalfunc.c file is too big.
解决方案:   Move some functions to other files.
文件:       src/evalfunc.c, src/proto/evalfunc.pro, src/json.c,
            src/proto/json.pro src/window.c, src/proto/window.pro,
            src/highlight.c, src/proto/highlight.pro, src/globals.h

Patch 8.1.1735 (after 8.1.1734)
问题:       Can't build with tiny features.
解决方案:   Add missing #ifdefs.
文件:       src/json.c, src/highlight.c

Patch 8.1.1736
问题:       Viminfo support is spread out.
解决方案:   Move more viminfo code to viminfo.c. (Yegappan Lakshmanan,
            closes #4717)  Reorder code to make most functions static.
文件:       src/fileio.c, src/ops.c, src/option.c, src/proto/ops.pro,
            src/proto/option.pro, src/proto/search.pro, src/proto/viminfo.pro,
            src/search.c, src/structs.h, src/viminfo.c, src/ex_cmds.c,
            src/proto/ex_cmds.pro

Patch 8.1.1737
问题:       :args command that outputs one line gives more prompt.
解决方案:   Only output line break if needed. (Daniel Hahler, closes #4715)
文件:       src/version.c, src/testdir/test_arglist.vim

Patch 8.1.1738
问题:       Testing lambda with timer is slow.
解决方案:   Do not test timer accuracy, only that it works. (Daniel Hahler,
            closes #4723)
文件:       src/testdir/test_lambda.vim

Patch 8.1.1739
问题:       Deleted match highlighting not updated in other window.
解决方案:   Mark the window for refresh. (closes #4720)  Also fix that
            ambi-width check clears with wrong attributes.
文件:       src/term.c, src/highlight.c, src/testdir/test_match.vim,
            src/testdir/dumps/Test_matchdelete_1.dump

Patch 8.1.1740
问题:       Exepath() doesn't work for "bin/cat".
解决方案:   Check for any path separator. (Daniel Hahler, closes #4724,
            closes #4710)
文件:       src/evalfunc.c, src/os_unix.c, src/testdir/test_functions.vim

Patch 8.1.1741
问题:       Cleared/added match highlighting not updated in other window.
            (Andy Massimino)
解决方案:   Mark the right window for refresh.
文件:       src/highlight.c, src/testdir/test_match.vim,
            src/testdir/dumps/Test_matchclear_1.dump,
            src/testdir/dumps/Test_matchadd_1.dump

Patch 8.1.1742
问题:       Still some match functions in evalfunc.c.
解决方案:   Move them to highlight.c.
文件:       src/evalfunc.c, src/highlight.c, src/proto/highlight.pro,
            src/ex_docmd.c

Patch 8.1.1743
问题:       'hlsearch' and match highlighting in the wrong place.
解决方案:   Move highlighting from inside screen functions to highlight.c.
文件:       src/screen.c, src/highlight.c, src/proto/highlight.pro

Patch 8.1.1744
问题:       Build error without the conceal feature.
解决方案:   Define variables also without the conceal feature.
文件:       src/screen.c

Patch 8.1.1745
问题:       Compiler warning for unused argument.
解决方案:   Add UNUSED.  Change comments to new style.
文件:       src/highlight.c

Patch 8.1.1746
问题:       ":dl" is seen as ":dlist" instead of ":delete".
解决方案:   Do not use cmdidxs2[] if the length is 1. (closes #4721)
文件:       src/ex_docmd.c, src/testdir/test_excmd.vim,
            src/testdir/Make_all.mak

Patch 8.1.1747
问题:       Compiler warning for unused variables. (Tony Mechelynck)
解决方案:   Add #ifdef.
文件:       src/screen.c

Patch 8.1.1748 (after 8.1.1737)
问题:       :args output is not aligned.
解决方案:   Output a line break after the last item in a row.
文件:       src/version.c

Patch 8.1.1749
问题:       Coverity warns for using negative index.
解决方案:   Move using index inside "if".
文件:       src/viminfo.c

Patch 8.1.1750
问题:       Depending on the terminal width :version may miss a line break.
解决方案:   Add a line break when needed.
文件:       src/version.c

Patch 8.1.1751
问题:       When redrawing popups plines_win() may be called often.
解决方案:   Pass a cache to mouse_comp_pos().
文件:       src/ui.c, src/proto/ui.pro, src/beval.c, src/evalfunc.c,
            src/popupwin.c

Patch 8.1.1752
问题:       Resizing hashtable is inefficient.
解决方案:   Avoid resizing when the final size is predictable.
文件:       src/hashtab.c, src/proto/hashtab.pro, src/popupwin.c

Patch 8.1.1753
问题:       Use of popup window mask is inefficient.
解决方案:   Precompute and cache the mask.
文件:       src/popupwin.c

Patch 8.1.1754 (after 8.1.1753)
问题:       Build failure.
解决方案:   Add missing change to window struct.
文件:       src/structs.h

Patch 8.1.1755
问题:       Leaking memory when using a popup window mask.
解决方案:   Free the cached mask.
文件:       src/window.c

Patch 8.1.1756
问题:       Autocommand that splits window messes up window layout.
解决方案:   Disallow splitting a window while closing one.  In ":all" give an
            error when moving a window will not work.
文件:       src/buffer.c, src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.1757
问题:       Text added with appendbufline() to another buffer isn't displayed.
解决方案:   Update topline. (partly by Christian Brabandt, closes #4718)
文件:       src/evalfunc.c, src/testdir/test_bufline.vim,
            src/testdir/dumps/Test_appendbufline_1.dump

Patch 8.1.1758
问题:       Count of g$ not used correctly when text is not wrapped.
解决方案:   Do use the count. (Christian Brabandt, closes #4729, closes #4566)
文件:       src/normal.c, src/testdir/test_normal.vim

Patch 8.1.1759
问题:       No mode char for terminal mapping from maparg().
解决方案:   Check for TERMINAL mode. (closes #4735)
文件:       src/getchar.c, src/testdir/test_maparg.vim

Patch 8.1.1760
问题:       Extra line break for wrapping output of :args.
解决方案:   Avoid the extra line break. (Daniel Hahler, closes #4737)
文件:       src/version.c, src/testdir/test_arglist.vim

Patch 8.1.1761
问题:       Filetype "vuejs" causes problems for some users.
解决方案:   Rename to "vue".
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1762
问题:       Some filetype rules are in the wrong place.
解决方案:   Move to the right place.  Add a few more tests.
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.1763
问题:       Evalfunc.c is still too big.
解决方案:   Move dict and list functions to a better place.
文件:       src/evalfunc.c, src/dict.c, src/proto/dict.pro, src/list.c,
            src/proto/list.pro, src/blob.c, src/proto/blob.pro

Patch 8.1.1764
问题:       ":browse oldfiles" is not tested.
解决方案:   Add a test.
文件:       src/testdir/test_viminfo.vim

Patch 8.1.1765
问题:       get(func, dict, def) does not work properly.
解决方案:   Handle NULL dict better. (Takuya Fujiwara, closes #4734)
文件:       src/evalfunc.c, src/testdir/test_getvar.vim,
            src/testdir/test_partial.vim

Patch 8.1.1766
问题:       Code for writing session file is spread out.
解决方案:   Put it in one file. (Yegappan Lakshmanan, closes #4728)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/eval.c, src/ex_docmd.c, src/misc2.c, src/proto.h,
            src/proto/eval.pro, src/proto/misc2.pro, src/proto/session.pro,
            src/session.c

Patch 8.1.1767
问题:       FEAT_SESSION defined separately.
解决方案:   Make FEAT_SESSION depend on FEAT_EVAL.
文件:       src/feature.h, src/session.c, src/evalfunc.c, src/ex_docmd.c,
            src/gui_gtk_x11.c, src/proto.h

Patch 8.1.1768
问题:       Man plugin changes setting in current window.
解决方案:   Set options later. (Jason Franklin)
文件:       runtime/ftplugin/man.vim, src/testdir/test_man.vim

Patch 8.1.1769
问题:       'shellslash' is also used for completion.
解决方案:   Add the 'completeslash' option. (Yasuhiro Matsumoto, closes #3612)
文件:       runtime/doc/options.txt, src/ex_getln.c, src/insexpand.c,
            src/option.c, src/option.h, src/structs.h,
            src/testdir/test_ins_complete.vim

Patch 8.1.1770
问题:       Cannot get the window ID of the popup preview window.
解决方案:   Add popup_getpreview().
文件:       src/evalfunc.c, src/popupwin.c, src/proto/popupwin.pro,
            runtime/doc/eval.txt, runtime/doc/popup.txt,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump

Patch 8.1.1771
问题:       Options test fails on MS-Windows.
解决方案:   Add correct and incorrect values for 'completeslash'.
文件:       src/testdir/gen_opt_test.vim

Patch 8.1.1772
问题:       Options test still fails on MS-Windows.
解决方案:   Check buffer-local value of 'completeslash'.
文件:       src/option.c

Patch 8.1.1773
问题:       The preview popup window may be too far to the right.
解决方案:   Keep it inside the screen.  Also keep the close button and
            scrollbar visible if possible.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/ex_cmds.c,
            src/screen.c, src/vim.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump

Patch 8.1.1774
问题:       Test is silently skipped.
解决方案:   Throw "Skipped".
文件:       src/testdir/test_ins_complete.vim

Patch 8.1.1775
问题:       Error message may be empty in filetype test.
解决方案:   Use v:exception instead. (Daniel Hahler, closes #4744)
文件:       src/testdir/test_filetype.vim

Patch 8.1.1776
问题:       Text added with a job to another buffer isn't displayed.
解决方案:   Update topline after adding a line. (closes #4745)
文件:       src/channel.c, src/testdir/test_channel.vim, src/testdir/check.vim,
            src/testdir/dumps/Test_job_buffer_scroll_1.dump

Patch 8.1.1777
问题:       Useless checks for job feature in channel test.
解决方案:   Remove the checks.  Remove ch_log() calls.
文件:       src/testdir/test_channel.vim

Patch 8.1.1778
问题:       Not showing the popup window right border is confusing.
解决方案:   Also show the border when there is no close button. (closes #4747)
文件:       src/popupwin.c, src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1779
问题:       Not showing the popup window right border is confusing.
解决方案:   Also show the border when 'wrap' is off. (closes #4747)
文件:       src/popupwin.c, src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1780
问题:       Warning for file no longer available is repeated every time Vim is
            focused. (Brian Armstrong)
解决方案:   Only give the message once. (closes #4748)
文件:       src/fileio.c

Patch 8.1.1781
问题:       Amiga: no builtin OS readable version info.
解决方案:   Add a "version" variable. (Ola Söder, closes #4753)
文件:       src/os_amiga.c

Patch 8.1.1782
问题:       MS-Windows: system() has temp file error with 'noshelltemp'.
解决方案:   Check s_dont_use_vimrun. (Ken Takata, closes #4754)
文件:       src/os_win32.c

Patch 8.1.1783
问题:       MS-Windows: compiler test may fail when using %:S.
解决方案:   Reset 'shellslash'.
文件:       src/testdir/test_compiler.vim

Patch 8.1.1784
问题:       MS-Windows: resolve() does not work if serial nr duplicated.
解决方案:   Use another method to get the full path. (Ken Takata, closes #4661)
文件:       src/os_mswin.c

Patch 8.1.1785
问题:       Map functionality mixed with character input.
解决方案:   Move the map functionality to a separate file. (Yegappan
            Lakshmanan, closes #4740)  Graduate the +localmap feature.
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/feature.h, src/evalfunc.c, src/ex_docmd.c,
            src/getchar.c, src/map.c, src/proto.h, src/proto/getchar.pro,
            src/proto/map.pro, src/version.c, src/structs.h

Patch 8.1.1786
问题:       Double click in popup scrollbar starts selection.
解决方案:   Ignore the double click.
文件:       src/ui.c, src/popupwin.c, src/proto/popupwin.pro

Patch 8.1.1787
问题:       Cannot resize a popup window.
解决方案:   Allow for resizing by dragging the lower right corner.
文件:       runtime/doc/popup.txt, src/popupwin.c, src/structs.h, src/vim.h,
            src/ui.c src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump,
            src/testdir/dumps/Test_popupwin_drag_03.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump

Patch 8.1.1788 (after 8.1.1787)
问题:       missing changes in proto file
解决方案:   Update proto file.
文件:       src/proto/popupwin.pro

Patch 8.1.1789
问题:       Cannot see file name of preview popup window.
解决方案:   Add the file name as the title.
文件:       src/ex_cmds.c, src/popupwin.c, src/proto/popupwin.pro,
            src/fileio.c,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump

Patch 8.1.1790
问题:       :mkvimrc is not tested.
解决方案:   Add a test.
文件:       src/testdir/test_mksession.vim

Patch 8.1.1791
问题:       'completeslash' also applies to globpath().
解决方案:   Add the WILD_IGNORE_COMPLETESLASH flag. (test by Yasuhiro
            Matsumoto, closes #4760)
文件:       src/testdir/test_ins_complete.vim, src/ex_getln.c, src/evalfunc.c,
            src/vim.h

Patch 8.1.1792
问题:       The vgetorpeek() function is too long.
解决方案:   Split off the part that handles mappings.
文件:       src/getchar.c

Patch 8.1.1793
问题:       Mixed comment style in globals.
解决方案:   Use // comments where appropriate.
文件:       src/globals.h

Patch 8.1.1794 (after 8.1.1792)
问题:       Tests are flaky.
解决方案:   Undo the change to vgetorpeek().
文件:       src/getchar.c

Patch 8.1.1795
问题:       No syntax HL after splitting windows with :bufdo. (Yasuhiro
            Matsumoto)
解决方案:   Trigger Syntax autocommands in buffers that are active.
            (closes #4761)
文件:       src/vim.h, src/option.c, src/ex_cmds2.c,
            src/testdir/test_syntax.vim

Patch 8.1.1796
问题:       :argdo is not tested
解决方案:   Add a test.
文件:       src/testdir/test_arglist.vim

Patch 8.1.1797 (after 8.1.1794)
问题:       The vgetorpeek() function is too long.
解决方案:   Split off the part that handles mappings, with fix.
文件:       src/getchar.c

Patch 8.1.1798
问题:       Warning for unused variable in tiny version. (Tony Mechelynck)
解决方案:   Move inside #ifdef.  Reformat code.
文件:       src/getchar.c

Patch 8.1.1799
问题:       Cannot avoid mapping for a popup window.
解决方案:   Add the "mapping" property, default TRUE.
文件:       runtime/doc/popup.txt, src/getchar.c, src/popupwin.c, src/vim.h,
            src/proto/popupwin.pro, src/testdir/test_popupwin.vim

Patch 8.1.1800
问题:       Function call functions have too many arguments.
解决方案:   Pass values in a funcexe_T struct.
文件:       src/eval.c, src/structs.h, src/userfunc.c, src/proto/userfunc.pro,
            src/list.c, src/regexp.c, src/terminal.c, src/change.c,
            src/ex_cmds2.c, src/popupwin.c, src/channel.c

Patch 8.1.1801
问题:       Cannot build without the +eval feature.
解决方案:   Always define funcexe_T.
文件:       src/structs.h

Patch 8.1.1802
问题:       Missing change to call_callback().
解决方案:   Add missing change.
文件:       src/sound.c

Patch 8.1.1803
问题:       All builtin functions are global.
解决方案:   Add the method call operator ->.  Implemented for a limited number
            of functions.
文件:       runtime/doc/eval.txt, src/eval.c, src/structs.h, src/userfunc.c,
            src/globals.h, src/evalfunc.c, src/proto/evalfunc.pro,
            src/testdir/test_method.vim, src/testdir/Make_all.mak

Patch 8.1.1804
问题:       No test for display updating without a scroll region.
解决方案:   Add a test.
文件:       src/testdir/test_display.vim, src/testdir/check.vim,
            src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_scroll_no_region_1.dump,
            src/testdir/dumps/Test_scroll_no_region_2.dump,
            src/testdir/dumps/Test_scroll_no_region_3.dump

Patch 8.1.1805
问题:       Au_did_filetype is declared twice.
解决方案:   Remove it from autocmd.c. (closes #4767)
文件:       src/globals.h, src/autocmd.c

Patch 8.1.1806
问题:       Test for display updating doesn't check without statusline.
解决方案:   Add screenshots without a status line.
文件:       src/testdir/test_display.vim,
            src/testdir/dumps/Test_scroll_no_region_4.dump,
            src/testdir/dumps/Test_scroll_no_region_5.dump,
            src/testdir/dumps/Test_scroll_no_region_6.dump

Patch 8.1.1807
问题:       More functions can be used as a method.
解决方案:   Add append(), appendbufline(), assert_equal(), etc.
            Also add the :eval command.
文件:       runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_method.vim, src/ex_cmds.h, src/ex_eval.c,
            src/proto/ex_eval.pro, src/ex_cmdidxs.h

Patch 8.1.1808
问题:       Build failure for tiny version.
解决方案:   Define ex_eval to ex_ni.  Clean up the ordering a bit.
文件:       src/ex_docmd.c

Patch 8.1.1809
问题:       More functions can be used as a method.
解决方案:   Add has_key(), split(), str2list(), etc.
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_method.vim,
            src/testdir/test_diffmode.vim, src/testdir/test_syntax.vim,
            src/testdir/test_system.vim

Patch 8.1.1810
问题:       Popup_getoptions() is missing an entry for "mapping".
解决方案:   Add the entry.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1811
问题:       Popup window color cannot be set to "Normal".
解决方案:   Check for non-empty 'wincolor' instead of zero attribute.
            (closes #4772)
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_20.dump,
            src/testdir/dumps/Test_popupwin_21.dump

Patch 8.1.1812
问题:       Reading a truncated undo file hangs Vim.
解决方案:   Check for reading EOF. (closes #4769)
文件:       src/undo.c, src/testdir/test_undo.vim

Patch 8.1.1813
问题:       ATTENTION prompt for a preview popup window.
解决方案:   Close the popup window if aborting the buffer load.  Avoid getting
            the ATTENTION dialog.
文件:       src/tag.c, src/ex_cmds.c, src/memline.c, src/vim.h,
            runtime/doc/windows.txt

Patch 8.1.1814
问题:       A long title in a popup window overflows.
解决方案:   Truncate the title. (closes #4770)
文件:       src/testdir/test_popupwin.vim, src/popupwin.c,
            src/testdir/dumps/Test_popupwin_longtitle_1.dump,
            src/testdir/dumps/Test_popupwin_longtitle_2.dump

Patch 8.1.1815
问题:       Duplicating info for internal functions.
解决方案:   Use one table to list internal functions.
文件:       src/evalfunc.c

Patch 8.1.1816
问题:       Cannot use a user defined function as a method.
解决方案:   Pass the base as the first argument to the user defined function
            after "->". (partly by FUJIWARA Takuya)
文件:       src/eval.c, src/userfunc.c, src/testdir/test_user_func.vim,
            src/testdir/test_autoload.vim,
            src/testdir/sautest/autoload/foo.vim

Patch 8.1.1817
问题:       Github contribution text is incomplete.
解决方案:   Update the text.
文件:       CONTRIBUTING.md

Patch 8.1.1818
问题:       Unused variable.
解决方案:   Remove the variable. (Mike Williams)
文件:       src/sound.c

Patch 8.1.1819
问题:       :pedit does not work with a popup preview window.
解决方案:   Avoid aborting with an error. (fixes #4777)  Also double check
            that after prepare_tagpreview() the current window is not a
            popup window.
文件:       src/ex_docmd.c, src/popupmenu.c, src/search.c, src/tag.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_6.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_7.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_8.dump

Patch 8.1.1820
问题:       Using expr->FuncRef() does not work.
解决方案:   Make FuncRef work as a method.
文件:       src/eval.c, src/userfunc.c, src/testdir/test_method.vim

Patch 8.1.1821
问题:       No test for wrong number of method arguments.
解决方案:   Add a test.
文件:       src/testdir/test_method.vim

Patch 8.1.1822
问题:       Confusing error message when range is not allowed.
解决方案:   With ADDR_NONE give e_norange.  Change e_invaddr to e_invrange for
            consistency.
文件:       src/ex_docmd.c, src/globals.h, src/testdir/test_excmd.vim

Patch 8.1.1823
问题:       Command line history code is spread out.
解决方案:   Put the code in a new file. (Yegappan Lakshmanan, closes #4779)
            Also graduate the +cmdline_hist feature.
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdhist.c, src/ex_getln.c, src/proto.h, src/proto/cmdhist.pro,
            src/proto/ex_getln.pro, src/version.c, src/evalfunc.c,
            src/ex_cmds.c, src/ex_docmd.c, src/misc2.c, src/normal.c,
            src/ops.c, src/option.c, src/search.c, src/tag.c, src/usercmd.c,
            src/viminfo.c, src/feature.h, src/globals.h

Patch 8.1.1824
问题:       Crash when correctly spelled word is very long. (Ben Kraft)
解决方案:   Check word length before copying. (closes #4778)
文件:       src/spell.c, src/testdir/test_spell.vim

Patch 8.1.1825
问题:       Allocating more memory than needed for extended structs.
解决方案:   Use offsetof() instead of sizeof(). (Dominique Pelle,
            closes #4785)
文件:       src/dict.c

Patch 8.1.1826
问题:       Tests use hand coded feature and option checks.
解决方案:   Use the commands from check.vim in more tests.
文件:       src/testdir/check.vim, src/testdir/shared.vim,
            src/testdir/test_autochdir.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_balloon.vim, src/testdir/test_breakindent.vim,
            src/testdir/test_bufline.vim, src/testdir/test_cdo.vim,
            src/testdir/test_channel.vim, src/testdir/test_clientserver.vim,
            src/testdir/test_conceal.vim, src/testdir/test_cscope.vim,
            src/testdir/test_debugger.vim, src/testdir/test_filechanged.vim,
            src/testdir/test_fold.vim, src/testdir/test_functions.vim,
            src/testdir/test_gui.vim, src/testdir/test_gui_init.vim,
            src/testdir/test_highlight.vim, src/testdir/test_mapping.vim,
            src/testdir/test_match.vim, src/testdir/test_memory_usage.vim,
            src/testdir/test_options.vim, src/testdir/test_paste.vim,
            src/testdir/test_popup.vim, src/testdir/test_search.vim,
            src/testdir/test_signals.vim, src/testdir/test_startup.vim,
            src/testdir/test_syntax.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_terminal.vim, src/testdir/test_timers.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1827
问题:       Allocating more memory than needed for extended structs.
解决方案:   Use offsetof() instead of sizeof(). (Dominique Pelle,
            closes #4786)
文件:       src/getchar.c, src/regexp.c, src/sign.c, src/structs.h,
            src/syntax.c, src/textprop.c, src/userfunc.c

Patch 8.1.1828
问题:       Not strict enough checking syntax of method invocation.
解决方案:   Check there is no white space inside ->method(.
文件:       runtime/doc/eval.txt, src/eval.c, src/testdir/test_method.vim

Patch 8.1.1829
问题:       Difference in screenshots.
解决方案:   Update screenshots.  Change checks in a few more tests.
            (closes #4789)
文件:       src/testdir/test_balloon_gui.vim,
            src/testdir/test_shortpathname.vim,
            src/testdir/test_windows_home.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_1.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_2.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_3.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump

Patch 8.1.1830
问题:       Travis does not report error when tests fail.
解决方案:   Explicitly do "exit 1".
文件:       .travis.yml

Patch 8.1.1831
问题:       Confusing skipped message.
解决方案:   Drop "run" from "run start the GUI".
文件:       src/testdir/check.vim

Patch 8.1.1832
问题:       Win_execute() does not work in other tab. (Rick Howe)
解决方案:   Take care of the tab. (closes #4792)
文件:       src/testdir/test_execute_func.vim, src/evalfunc.c, src/window.c,
            src/proto/window.pro

Patch 8.1.1833
问题:       Allocating a bit too much when spellbadword() does not find a bad
            word.
解决方案:   Reset "len" when going to the next word. (Daniel Hahler,
            closes #4788)
文件:       src/evalfunc.c

Patch 8.1.1834
问题:       Cannot use a lambda as a method.
解决方案:   Implement ->{lambda}(). (closes #4768)
文件:       runtime/doc/eval.txt, src/eval.c, src/testdir/test_method.vim

Patch 8.1.1835
问题:       Cannot use printf() as a method.
解决方案:   Pass the base as the second argument to printf().
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_method.vim

Patch 8.1.1836
问题:       Inaccurate memory estimate for Amiga-like OS.
解决方案:   Adjust #ifdef for AvailMem(). (Ola Söder, closes #4797)
文件:       src/os_amiga.c

Patch 8.1.1837
问题:       Popup test fails if clipboard is supported but not working.
解决方案:   Add the "clipboard_working" feature. Also use Check commands
            instead of "if" and "throw".  And remove stray ch_logfile().
文件:       src/testdir/test_popupwin.vim, src/evalfunc.c,
            runtime/doc/eval.txt

Patch 8.1.1838
问题:       There is :spellwrong and :spellgood but not :spellrare.
解决方案:   Add :spellrare. (Martin Tournoij, closes #4291)
文件:       runtime/doc/spell.txt, src/ex_cmdidxs.h, src/ex_cmds.h,
            src/normal.c, src/proto/spellfile.pro, src/spellfile.c,
            src/spell.h, src/testdir/Make_all.mak,
            src/testdir/test_normal.vim, src/testdir/test_spellfile.vim

Patch 8.1.1839
问题:       Insufficient info when test fails because of screen size.
解决方案:   Report the detected screen size.
文件:       src/testdir/runtest.vim

Patch 8.1.1840
问题:       Testing: WorkingClipboard() is not accurate.
解决方案:   Check feature clipboard_working instead.
文件:       src/testdir/shared.vim, src/testdir/test_paste.vim,
            src/testdir/test_quotestar.vim, src/testdir/test_termcodes.vim

Patch 8.1.1841
问题:       No test for Ex shift commands.
解决方案:   Add a test. (Dominique Pelle, closes #4801)
文件:       src/testdir/Make_all.mak, src/testdir/test_alot.vim,
            src/testdir/test_shift.vim

Patch 8.1.1842
问题:       Test listed as flaky should no longer be flaky.
解决方案:   Remove Test_popup_and_window_resize from the list of flaky tests.
            (Daniel Hahler, close #4807)
文件:       src/testdir/runtest.vim

Patch 8.1.1843
问题:       Might be freeing memory that was not allocated.
解决方案:   Have next_fenc() set the fenc_alloced flag. (closes #4804)
文件:       src/fileio.c

Patch 8.1.1844
问题:       Buffer no longer unloaded when adding text properties to it.
解决方案:   Do not create the memfile. (closes #4808)
文件:       runtime/doc/textprop.txt, src/testdir/test_textprop.vim,
            src/textprop.c

Patch 8.1.1845
问题:       May use NULL pointer when running out of memory.
解决方案:   Do not clear popup buffers when NULL. (closes #4802)
文件:       src/screen.c

Patch 8.1.1846
问题:       Inconsistently using GetVimCommand() and v:progpath. (Daniel
            Hahler)
解决方案:   Use GetVimCommand(). (closes #4806)
文件:       src/testdir/test_autocmd.vim, src/testdir/test_gui.vim,
            src/testdir/test_normal.vim, src/testdir/test_profile.vim,
            src/testdir/test_suspend.vim, src/testdir/test_system.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1847
问题:       Suspend test is failing.
解决方案:   Do not use GetVimCommandClean().
文件:       src/testdir/test_suspend.vim

Patch 8.1.1848
问题:       'langmap' is not used for CTRL-W command in terminal.
解决方案:   Push the command in the typeahead buffer instead of the stuff
            buffer. (closes #4814)
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.1849
problem:    Some insert complete functions in the wrong file.
解决方案:   Move complete functions to insexpand.c. (Yegappan Lakshmanan,
            closes #4815)
文件:       src/evalfunc.c, src/insexpand.c, src/proto/insexpand.pro

Patch 8.1.1850
问题:       Focus may remain in popup window.
解决方案:   Change focus if needed.
文件:       src/popupmnu.c

Patch 8.1.1851
问题:       Crash when sound_playfile() callback plays sound.
解决方案:   Invoke callback later from event loop.
文件:       src/testdir/test_sound.vim, src/ui.c, src/sound.c,
            src/proto/sound.pro, src/feature.h, src/os_unix.c, src/ex_docmd.c,
            src/misc2.c

Patch 8.1.1852
问题:       Timers test is flaky.
解决方案:   Accept a larger count.  Add test to list of flaky tests.
文件:       src/testdir/test_timers.vim, src/testdir/runtest.vim

Patch 8.1.1853
问题:       Timers test is still flaky.
解决方案:   Compute the time to sleep more accurately.
文件:       src/ex_docmd.c

Patch 8.1.1854
问题:       Now another timer test is flaky.
解决方案:   Add test to list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.1855
问题:       Another failing timer test.
解决方案:   Assert that timers are finished by the end of the test.  Rename
            test functions to make them easier to find.
文件:       src/testdir/test_timers.vim, src/testdir/runtest.vim

Patch 8.1.1856
问题:       popup preview test fails sometimes. (Christian Brabandt)
解决方案:   Clear the command line.
文件:       src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_previewpopup_6.dump

Patch 8.1.1857
问题:       Cannot use modifier with multi-byte character.
解决方案:   Allow using a multi-byte character, although it doesn't work
            everywhere.
文件:       src/misc2.c, src/testdir/test_mapping.vim

Patch 8.1.1858
问题:       Test for multi-byte mapping fails on some systems.
解决方案:   Test in another way.
文件:       src/testdir/test_mapping.vim

Patch 8.1.1859
问题:       Timer test sometimes fails on Mac.
解决方案:   Show more info when it fails.
文件:       src/testdir/test_timers.vim

Patch 8.1.1860
问题:       Map timeout test is flaky.
解决方案:   Add test to list of flaky tests.  Increase timeout.
文件:       src/testdir/runtest.vim, src/testdir/test_mapping.vim

Patch 8.1.1861
问题:       Only some assert functions can be used as a method.
解决方案:   Allow using most assert functions as a method.
文件:       runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_assert.vim

Patch 8.1.1862
问题:       Coverity warns for not using return value.
解决方案:   Add "(void)" to avoid the warning.
文件:       src/normal.c

Patch 8.1.1863
问题:       Confusing error when using a builtin function as method while it
            does not support that.
解决方案:   Add a specific error message.
文件:       src/vim.h, src/evalfunc.c, src/userfunc.c,
            src/testdir/test_method.vim

Patch 8.1.1864
问题:       Still a timer test that is flaky on Mac.
解决方案:   Adjust the sleep times.
文件:       src/testdir/test_timers.vim

Patch 8.1.1865
问题:       Spellrare and spellrepall in the wrong order.
解决方案:   Put spellrare below spellrepall. (closes #4820)
文件:       runtime/doc/spell.txt, src/ex_cmds.h

Patch 8.1.1866
问题:       Modeless selection in GUI does not work properly.
解决方案:   Avoid going beyond the end of the line. (closes #4783)
文件:       src/ui.c

Patch 8.1.1867
问题:       Still a timer test that is flaky on Mac.
解决方案:   Loop with a sleep instead of one fixed sleep.
文件:       src/testdir/test_timers.vim

Patch 8.1.1868
问题:       Multibyte characters in 'listchars' don't work correctly if
            'linebreak' is also enabled. (Martin Tournoij)
解决方案:   Make it work correctly. (Christian Brabandt, closes #4822,
            closes #4812)
文件:       src/screen.c, src/testdir/test_listchars.vim

Patch 8.1.1869
问题:       Code for the argument list is spread out.
解决方案:   Put argument list code in arglist.c. (Yegappan Lakshmanan,
            closes #4819)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/arglist.c, src/buffer.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/proto.h, src/proto/arglist.pro,
            src/proto/buffer.pro, src/proto/ex_cmds2.pro,
            src/proto/ex_docmd.pro

Patch 8.1.1870
问题:       Using :pedit from a help file sets the preview window to help
            filetype. (Wang Shidong)
解决方案:   Do not set "keep_help_flag". (closes #3536)
文件:       src/ex_docmd.c, src/testdir/test_window_cmd.vim

Patch 8.1.1871 (after 8.1.1866)
问题:       Modeless selection in GUI still not correct.
解决方案:   Fix max_col.
文件:       src/ui.c

Patch 8.1.1872
问题:       When Vim exits because of a signal, VimLeave is not triggered.
            (Daniel Hahler)
解决方案:   Unblock autocommands when triggering VimLeave. (closes #4818)
文件:       src/main.c

Patch 8.1.1873 (after 8.1.1872)
问题:       Cannot build tiny version.
解决方案:   Remove #ifdef for is_autocmd_blocked().
文件:       src/autocmd.c

Patch 8.1.1874
问题:       Modeless selection in popup window overlaps scrollbar.
解决方案:   Subtract scrollbar from max_col. (closes #4773)
文件:       src/ui.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_select_01.dump

Patch 8.1.1875
问题:       Cannot get size and position of the popup menu.
解决方案:   Add pum_getpos(). (Ben Jackson, closes #4827)
文件:       runtime/doc/autocmd.txt, runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_popup.vim

Patch 8.1.1876
问题:       proto file missing from distribution
解决方案:   Add the file.
文件:       Filelist

Patch 8.1.1877
问题:       Graduated features scattered.
解决方案:   Put graduated and obsolete features together.
文件:       src/feature.h

Patch 8.1.1878
问题:       Negative float before method not parsed correctly.
解决方案:   Apply "!" and "-" in front of expression before using ->.
文件:       src/eval.c, src/proto/eval.pro, src/userfunc.c,
            src/testdir/test_method.vim

Patch 8.1.1879
问题:       More functions can be used as methods.
解决方案:   Make float functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_float_func.vim

Patch 8.1.1880
问题:       Cannot show extra info for completion in a popup window.
解决方案:   Add the "popup" entry in 'completeopt'.
文件:       runtime/doc/options.txt, src/popupmnu.c, src/ex_cmds.c,
            src/proto/ex_cmds.pro, src/ex_docmd.c, src/search.c, src/tag.c,
            src/popupwin.c, src/proto/popupwin.pro, src/option.c, src/vim.h,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_3.dump,
            src/testdir/dumps/Test_popupwin_infopopup_4.dump

Patch 8.1.1881
问题:       Popup window test fails in some configurations.
解决方案:   Check that screendumps can be made.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.1882
问题:       Cannot specify properties of the info popup window.
解决方案:   Add the 'completepopup' option.  Default to PmenuSel highlight.
文件:       runtime/doc/options.txt, runtime/doc/insert.txt, src/option.c,
            src/popupwin.c, src/proto/popupwin.pro, src/option.h,
            src/testdir/test_popupwin.vim, src/screen.c,
            src/testdir/dumps/Test_popupwin_infopopup_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_3.dump

Patch 8.1.1883
问题:       Options test fails.
解决方案:   Add entry for 'completepopup'.
文件:       src/testdir/gen_opt_test.vim

Patch 8.1.1884
问题:       Cannot use mouse scroll wheel in popup in Insert mode.  Mouse
            clicks in popup close the popup menu.
解决方案:   Check if the mouse is in a popup window. Do not let mouse events
            close the popup menu.  (closes #4544)
文件:       src/edit.c, src/popupmnu.c, src/insexpand.c

Patch 8.1.1885
问题:       Comments in libvterm are inconsistent.
解决方案:   Use // comments.  Also update the table of combining characters.
文件:       src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/vterm-dump.c, src/libvterm/include/vterm.h,
            src/libvterm/include/vterm_keycodes.h,
            src/libvterm/src/encoding.c, src/libvterm/src/keyboard.c,
            src/libvterm/src/mouse.c, src/libvterm/src/parser.c,
            src/libvterm/src/pen.c, src/libvterm/src/rect.h,
            src/libvterm/src/state.c, src/libvterm/src/unicode.c,
            src/libvterm/src/utf8.h, src/libvterm/src/vterm.c,
            src/libvterm/src/vterm_internal.h, src/libvterm/src/termscreen.c

Patch 8.1.1886
问题:       Command line expansion code is spread out.
解决方案:   Move the code to cmdexpand.c. (Yegappan Lakshmanan, closes #4831)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdexpand.c, src/evalfunc.c, src/ex_getln.c, src/proto.h,
            src/proto/cmdexpand.pro, src/proto/ex_getln.pro, src/structs.h

Patch 8.1.1887
问题:       The +cmdline_compl feature is not in the tiny version.
解决方案:   Graduate the +cmdline_compl feature.
文件:       src/cmdexpand.c, src/arglist.c, src/autocmd.c, src/buffer.c,
            src/cmdhist.c, src/eval.c, src/evalfunc.c, src/ex_cmds2.c,
            src/ex_docmd.c, src/ex_getln.c, src/feature.h, src/highlight.c,
            src/if_cscope.c, src/map.c, src/menu.c, src/misc1.c, src/misc2.c,
            src/option.c, src/sign.c, src/syntax.c, src/tag.c, src/term.c,
            src/usercmd.c, src/userfunc.c, src/version.c, src/globals.h,
            src/option.h, src/structs.h, runtime/doc/cmdline.txt

Patch 8.1.1888
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_vimscript.vim, src/testdir/test_balloon_gui.vim,
            src/testdir/test_popup.vim, src/testdir/test_functions.vim,
            src/testdir/test_hide.vim, src/testdir/test_arglist.vim

Patch 8.1.1889
问题:       Coverity warns for using a NULL pointer.
解决方案:   Use zero for column if pos is NULL.
文件:       src/netbeans.c

Patch 8.1.1890
问题:       Ml_get error when deleting fold marker.
解决方案:   Check that the line number is not below the last line.  Adjust the
            fold when deleting the empty line.  (Christian Brabandt,
            closes #4834)
文件:       src/fold.c, src/normal.c, src/testdir/test_fold.vim

Patch 8.1.1891
问题:       Functions used in one file are global.
解决方案:   Add "static". (Yegappan Lakshmanan, closes #4840)
文件:       src/autocmd.c, src/buffer.c, src/change.c, src/channel.c,
            src/charset.c, src/dict.c, src/digraph.c, src/eval.c,
            src/ex_cmds.c, src/ex_eval.c, src/fileio.c, src/findfile.c,
            src/getchar.c, src/gui.c, src/indent.c, src/json.c, src/list.c,
            src/mark.c, src/menu.c, src/message.c, src/misc1.c, src/misc2.c,
            src/ops.c, src/option.c, src/popupwin.c, src/profiler.c,
            src/proto/autocmd.pro, src/proto/buffer.pro, src/proto/change.pro,
            src/proto/channel.pro, src/proto/charset.pro, src/proto/dict.pro,
            src/proto/eval.pro, src/proto/ex_cmds.pro, src/proto/ex_eval.pro,
            src/proto/fileio.pro, src/proto/findfile.pro,
            src/proto/getchar.pro, src/proto/gui.pro, src/proto/indent.pro,
            src/proto/json.pro, src/proto/list.pro, src/proto/mark.pro,
            src/proto/menu.pro, src/proto/message.pro, src/proto/misc1.pro,
            src/proto/misc2.pro, src/proto/ops.pro, src/proto/option.pro,
            src/proto/popupwin.pro, src/proto/profiler.pro,
            src/proto/quickfix.pro, src/proto/spell.pro, src/proto/term.pro,
            src/proto/textprop.pro, src/proto/ui.pro, src/proto/undo.pro,
            src/proto/window.pro, src/quickfix.c, src/regexp.c, src/spell.c,
            src/term.c, src/textprop.c, src/ui.c, src/undo.c, src/window.c

Patch 8.1.1892
问题:       Missing index entry and option menu for 'completepopup'.
解决方案:   Add the entries.  Adjust #ifdefs to avoid dead code.
文件:       runtime/doc/quickref.txt, runtime/optwin.vim, src/option.c,
            src/option.h, src/popupwin.c

Patch 8.1.1893
问题:       Script to summarize test results can be improved.
解决方案:   Use "silent" for substitute to avoid reporting number of matches.
            Remove duplicate "set nocp". (Daniel Hahler, closes #4845)
文件:       src/testdir/summarize.vim

Patch 8.1.1894
问题:       Not checking for out-of-memory of autoload_name().
解决方案:   Check for NULL. (Dominique Pelle, closes #4846)
文件:       src/eval.c

Patch 8.1.1895
问题:       Using NULL pointer when out of memory.
解决方案:   Bail out or skip the code using the pointer. (Zu-Ming Jiang,
            closes #4805, closes #4843, closes #4939, closes #4844)
文件:       src/message.c, src/highlight.c, src/buffer.c, src/ops.c

Patch 8.1.1896
问题:       Compiler warning for unused variable.
解决方案:   Add #ifdef. (John Marriott)  Missing part of 8.1.1892.
文件:       src/popupmnu.c

Patch 8.1.1897
问题:       May free memory twice when out of memory.
解决方案:   Check that backslash_halve_save() returns a different pointer.
            (Dominique Pelle, closes #4847)
文件:       src/cmdexpand.c, src/misc1.c

Patch 8.1.1898
问题:       Crash when out of memory during startup.
解决方案:   When out of memory message given during initialisation bail out.
            (closes #4842)
文件:       src/misc2.c

Patch 8.1.1899
问题:       sign_place() does not work as documented.
解决方案:   Make it accept line numbers like line(). (Yegappan Lakshmanan,
            closes #4848)
文件:       src/sign.c, src/testdir/test_signs.vim

Patch 8.1.1900
问题:       Sign test fails in the GUI.
解决方案:   Catch and ignore the exception.
文件:       src/testdir/test_signs.vim

Patch 8.1.1901
问题:       The +insert_expand feature is not always available.
解决方案:   Graduate the +insert_expand feature.
文件:       src/feature.h, src/autocmd.c, src/buffer.c, src/change.c,
            src/charset.c, src/edit.c, src/evalfunc.c, src/ex_cmds.c,
            src/ex_getln.c, src/getchar.c, src/gui.c, src/highlight.c,
            src/indent.c, src/insexpand.c, src/misc2.c, src/move.c,
            src/option.c, src/popupmnu.c, src/screen.c, src/search.c,
            src/spell.c, src/tag.c, src/term.c, src/userfunc.c, src/version.c,
            src/globals.h, src/option.h, src/proto.h, src/structs.h,
            src/vim.h, runtime/doc/change.txt, runtime/doc/index.txt,
            runtime/doc/insert.txt, runtime/doc/options.txt

Patch 8.1.1902
问题:       Cannot have an info popup without a border.
解决方案:   Add the "border" item to 'completepopup'.
文件:       src/popupwin.c, src/proto/popupwin.pro, src/popupmnu.c,
            src/testdir/test_popupwin.vim, src/testdir/gen_opt_test.vim,
            src/testdir/dumps/Test_popupwin_infopopup_nb_1.dump

Patch 8.1.1903
问题:       Cannot build without the +eval feature.
解决方案:   Add missing #ifdefs
文件:       src/insexpand.c, src/popupmnu.c

Patch 8.1.1904
问题:       Cannot have an info popup align with the popup menu.
解决方案:   Add the "align" item to 'completepopup'.
文件:       src/popupwin.c, src/popupmnu.c, src/vim.h,
            runtime/doc/insert.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_align_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_align_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_align_3.dump

Patch 8.1.1905
问题:       Cannot set all properties of the info popup.
解决方案:   Add popup_findinfo().  Rename popup_getpreview() to
            popup_findpreview().
文件:       src/popupwin.c, src/proto/popupwin.pro, src/ex_cmds.c,
            src/ex_docmd.c, src/popupmnu.c, src/evalfunc.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_align_3.dump

Patch 8.1.1906
问题:       Info popup size is sometimes incorrect.
解决方案:   Compute the position and size after setting the content.
文件:       src/popupmnu.c

Patch 8.1.1907
问题:       Wrong position for info popup with scrollbar on the left.
解决方案:   Take the scrollbar into account.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_3.dump,
            src/testdir/dumps/Test_popupwin_cursorline_4.dump,
            src/testdir/dumps/Test_popupwin_cursorline_5.dump,
            src/testdir/dumps/Test_popupwin_cursorline_6.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_1.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_2.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_3.dump,
            src/testdir/dumps/Test_popupwin_menu_filter_4.dump

Patch 8.1.1908
问题:       Every popup window consumes a buffer number.
解决方案:   Recycle buffers only used for popup windows.  Do not list popup
            window buffers.
文件:       src/popupwin.c, src/window.c, src/vim.h, src/buffer.c,
            src/proto/buffer.pro, src/ex_docmd.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1909
问题:       More functions can be used as methods.
解决方案:   Make a few more functions usable as a method.
文件:       runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_bufline.vim, src/testdir/test_assert.vim

Patch 8.1.1910
问题:       Redrawing too much when toggling 'relativenumber'.
解决方案:   Only clear when 'signcolumn' is set to "number". (Yegappan
            Lakshmanan, closes #4852)
文件:       src/option.c

Patch 8.1.1911
问题:       More functions can be used as methods.
解决方案:   Make a few more functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test69.in,
            src/testdir/test69.ok, src/testdir/test_functions.vim

Patch 8.1.1912
问题:       More functions can be used as methods.
解决方案:   Make channel and job functions usable as a method.
文件:       runtime/doc/channel.txt, src/evalfunc.c,
            src/testdir/test_channel.vim

Patch 8.1.1913
问题:       Not easy to compute the space on the command line.
解决方案:   Add v:echospace. (Daniel Hahler, closes #4732)
文件:       src/vim.h, src/eval.c, src/option.c, runtime/doc/eval.txt,
            src/testdir/test_messages.vim

Patch 8.1.1914
问题:       Command line expansion code is spread out.
解决方案:   Move set_one_cmd_context(). (Yegappan Lakshmanan, closes #4855)
文件:       src/cmdexpand.c, src/ex_docmd.c, src/proto/ex_docmd.pro

Patch 8.1.1915
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_cd.vim,
            src/testdir/test_cindent.vim, src/testdir/test_match.vim,
            src/testdir/test_popup.vim, src/testdir/test_cursor_func.vim,
            src/testdir/test_method.vim, src/testdir/test_bufline.vim,
            src/testdir/test_diffmode.vim

Patch 8.1.1916
问题:       Trying to allocate negative amount of memory when closing a popup.
解决方案:   Check the rows are not out of bounds.  Don't finish a selection if
            it was never started.
文件:       src/ui.c

Patch 8.1.1917
问题:       Non-current window is not redrawn when moving popup. (Ben Jackson)
解决方案:   Redraw all windows under a popup. (closes #4860)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_drag_01.dump,
            src/testdir/dumps/Test_popupwin_drag_02.dump,
            src/testdir/dumps/Test_popupwin_drag_03.dump

Patch 8.1.1918
问题:       Redrawing popups is inefficient.
解决方案:   Fix the logic to compute what window lines to redraw.  Make it
            work below the last line.  Remove redrawing all windows.
文件:       src/popupwin.c

Patch 8.1.1919
问题:       Using current window option values when passing a buffer to
            popup_create().
解决方案:   Clear the window-local options. (closes #4857)
文件:       src/option.c, src/proto/option.pro, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1920
问题:       Cannot close a popup by the X when a filter consumes all events.
解决方案:   Check for a click on the close button before invoking filters.
            (closes #4858)
文件:       src/popupwin.c, src/proto/popupwin.pro, src/ui.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_close_04.dump,
            src/testdir/dumps/Test_popupwin_close_05.dump

Patch 8.1.1921
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_expand.vim,
            src/testdir/test_expand_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_findfile.vim, src/testdir/test_fnameescape.vim,
            src/testdir/test_fnamemodify.vim, src/testdir/test_fold.vim,
            src/testdir/test_functions.vim, src/testdir/test_search.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.1922
问题:       In diff mode global operations can be very slow.
解决方案:   Do not call diff_redraw() many times, call it once when redrawing.
            And also don't update folds multiple times.
文件:       src/globals.h, src/diff.c, src/proto/diff.pro, src/screen.c,
            src/fold.c

Patch 8.1.1923
问题:       Some source files are not in a normal encoding.
解决方案:   Convert hangulin.c from euc-kr to utf-8 and digraph.c from latin1
            to utf-8. (Daniel Hahler, closes #4731)
文件:       src/hangulin.c, src/digraph.c, .travis.yml

Patch 8.1.1924
问题:       Using empty string for current buffer is unexpected.
解决方案:   Make the argument optional for bufname() and bufnr().
文件:       src/evalfunc.c, src/testdir/test_arglist.vim, runtime/doc/eval.txt

Patch 8.1.1925
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cd.vim, src/testdir/test_changelist.vim,
            src/testdir/test_cmdline.vim, src/testdir/test_edit.vim,
            src/testdir/test_environ.vim, src/testdir/test_file_perm.vim,
            src/testdir/test_getvar.vim, src/testdir/test_jumplist.vim,
            src/testdir/test_put.vim, src/testdir/test_stat.vim

Patch 8.1.1926
问题:       Cursorline not redrawn when putting a line above the cursor.
解决方案:   Redraw when the cursor line is below a change. (closes #4862)
文件:       src/change.c

Patch 8.1.1927
问题:       Code for dealing with script files is spread out.
解决方案:   Move the code to scriptfile.c. (Yegappan Lakshmanan, closes #4861)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/cmdexpand.c, src/ex_cmds2.c, src/proto.h,
            src/proto/ex_cmds2.pro, src/proto/scriptfile.pro, src/scriptfile.c

Patch 8.1.1928
问题:       Popup windows don't move with the text when making changes.
解决方案:   Add the 'textprop' property to the popup window options, position
            the popup relative to a text property. (closes #4560)
            No tests yet.
文件:       runtime/doc/popup.txt, src/textprop.c, src/proto/textprop.pro,
            src/structs.h, src/popupwin.c, src/proto/popupwin.pro, src/move.c,
            src/proto/move.pro, src/window.c

Patch 8.1.1929
问题:       No tests for text property popup window.
解决方案:   Add a few tests.
文件:       src/testdir/Make_all.mak, src/textprop.c,
            src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_01.dump,
            src/testdir/dumps/Test_popup_textprop_02.dump,
            src/testdir/dumps/Test_popup_textprop_03.dump,
            src/testdir/dumps/Test_popup_textprop_04.dump,
            src/testdir/dumps/Test_popup_textprop_05.dump,
            src/testdir/dumps/Test_popup_textprop_06.dump

Patch 8.1.1930
问题:       Cannot recognize .jsx and .tsx files.
解决方案:   Recognize them as javascriptreact and typescriptreact.
            (closes #4830)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim,
            runtime/syntax/javascriptreact.vim,
            runtime/indent/javascriptreact.vim,
            runtime/ftplugin/javascriptreact.vim

Patch 8.1.1931 (after 8.1.1930)
问题:       Syntax test fails.
解决方案:   Add new javascriptreact type to completions.
文件:       src/testdir/test_syntax.vim

Patch 8.1.1932
问题:       Ml_get errors after using append(). (Alex Genco)
解决方案:   Do not update the cursor twice. (closes #1737)
文件:       src/evalfunc.c, src/testdir/test_functions.vim

Patch 8.1.1933
问题:       The eval.c file is too big.
解决方案:   Move code related to variables to evalvars.c. (Yegappan
            Lakshmanan, closes #4868)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/eval.c, src/evalfunc.c, src/evalvars.c, src/globals.h,
            src/proto.h, src/proto/eval.pro, src/proto/evalvars.pro, src/vim.h

Patch 8.1.1934
问题:       Not enough tests for text property popup window.
解决方案:   Add a few more tests.
文件:       src/popupwin.c, src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_corn_1.dump,
            src/testdir/dumps/Test_popup_textprop_corn_2.dump,
            src/testdir/dumps/Test_popup_textprop_corn_3.dump,
            src/testdir/dumps/Test_popup_textprop_corn_4.dump

Patch 8.1.1935 (after 8.1.1934)
问题:       Test for text property popup window is flaky.
解决方案:   Remove the undo message
文件:       src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_corn_4.dump

Patch 8.1.1936
问题:       Not enough tests for text property popup window.
解决方案:   Add a few more tests.  Make negative offset work.  Close all
            popups when window closes.
文件:       src/popupwin.c, src/testdir/test_popupwin_textprop.vim,
            src/testdir/dumps/Test_popup_textprop_07.dump,
            src/testdir/dumps/Test_popup_textprop_off_1.dump,
            src/testdir/dumps/Test_popup_textprop_off_2.dump,
            src/testdir/dumps/Test_popup_textprop_corn_5.dump,
            src/testdir/dumps/Test_popup_textprop_corn_6.dump

Patch 8.1.1937 (after 8.1.1930)
问题:       Errors when using javascriptreact.
解决方案:   Use ":runtime" instead of ":source". (closes #4875)
文件:       runtime/syntax/javascriptreact.vim,
            runtime/indent/javascriptreact.vim,
            runtime/ftplugin/javascriptreact.vim

Patch 8.1.1938
问题:       May crash when out of memory.
解决方案:   Initialize v_type to VAR_UNKNOWN. (Dominique Pelle, closes #4871)
文件:       src/userfunc.c

Patch 8.1.1939
问题:       Code for handling v: variables in generic eval file.
解决方案:   Move v: variables to evalvars.c. (Yegappan Lakshmanan,
            closes #4872)
文件:       src/eval.c, src/evalvars.c, src/proto/eval.pro,
            src/proto/evalvars.pro

Patch 8.1.1940 (after 8.1.1939)
问题:       Script tests fail.
解决方案:   Don't set vimvars type in set_vim_var_nr().
文件:       src/eval.c, src/evalvars.c, src/proto/evalvars.pro

Patch 8.1.1941
问题:       getftype() test fails on Mac.
解决方案:   Skip /dev/fd/.
文件:       src/testdir/test_stat.vim

Patch 8.1.1942
问题:       Shadow directory gets outdated when files are added.
解决方案:   Add the "shadowupdate" target and add a few comments.
文件:       src/Makefile

Patch 8.1.1943
问题:       More code can be moved to evalvars.c.
解决方案:   Move it, clean up comments.  Also move some window related
            functions to window.c. (Yegappan Lakshmanan, closes #4874)
文件:       src/eval.c, src/evalfunc.c, src/evalvars.c, src/proto/eval.pro,
            src/proto/evalvars.pro, src/proto/window.pro, src/window.c

Patch 8.1.1944
问题:       Leaking memory when using sound callback.
解决方案:   Free the callback queue item.
文件:       src/sound.c

Patch 8.1.1945
问题:       Popup window "firstline" cannot be reset.
解决方案:   Allow for setting "firstline" to zero.  Fix that the text jumps to
            the top when using win_execute(). (closes #4876)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump

Patch 8.1.1946
问题:       Memory error when profiling a function without a script ID.
解决方案:   Check for missing script ID.  (closes #4877)
文件:       src/testdir/test_profile.vim, src/profiler.c

Patch 8.1.1947
问题:       When executing one test the report doesn't show it.
解决方案:   Adjust the regexp. (Daniel Hahler, closes #4879)
文件:       src/testdir/summarize.vim

Patch 8.1.1948
问题:       Mouse doesn't work in Linux console and causes 100% CPU. (James P.
            Harvey)
解决方案:   Loop in WaitForCharOrMouse() when gpm_process_wanted is set.
            (closes #4828)
文件:       src/os_unix.c

Patch 8.1.1949
问题:       Cannot scroll a popup window to the very bottom.
解决方案:   Scroll to the bottom when the "firstline" property was set to -1.
            (closes #4577)  Allow resetting min/max width/height.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/dict.c, src/proto/dict.pro,
            src/testdir/dumps/Test_popupwin_firstline.dump,
            src/testdir/dumps/Test_popupwin_firstline_1.dump,
            src/testdir/dumps/Test_popupwin_firstline_2.dump,
            src/testdir/dumps/Test_popupwin_scroll_10.dump

Patch 8.1.1950
问题:       Using NULL pointer after an out-of-memory.
解决方案:   Check for NULL pointer. (Dominique Pelle, closes #4881)
文件:       src/syntax.c

Patch 8.1.1951
问题:       Mouse double click test is a bit flaky.
解决方案:   Add to list of flaky tests.  Update a couple of comments.
文件:       src/testdir/runtest.vim, src/testdir/shared.vim,
            src/testdir/test_substitute.vim

Patch 8.1.1952
问题:       More functions can be used as a method.
解决方案:   Allow more functions to be used as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_tagjump.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_terminal.vim, src/testdir/test_getvar.vim,
            src/testdir/test_escaped_glob.vim,
            src/testdir/test_glob2regpat.vim

Patch 8.1.1953
问题:       More functions can be used as a method.
解决方案:   Allow more functions to be used as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_blob.vim,
            src/testdir/test_breakindent.vim, src/testdir/test_delete.vim,
            src/testdir/test_functions.vim, src/testdir/test_getcwd.vim,
            src/testdir/test_history.vim, src/testdir/test_listdict.vim,
            src/testdir/test_syn_attr.vim, src/testdir/test_termcodes.vim,
            src/testdir/test_true_false.vim

Patch 8.1.1954
问题:       More functions can be used as a method.
解决方案:   Allow more functions to be used as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_arglist.vim, src/testdir/test_functions.vim,
            src/testdir/test_json.vim, src/testdir/test_lispwords.vim,
            src/testdir/test_listener.vim, src/testdir/test_lua.vim,
            src/testdir/test_utf8.vim

Patch 8.1.1955
问题:       Tests contain typos.
解决方案:   Correct the typos. (Dominique Pelle)
文件:       src/testdir/popupbounce.vim, src/testdir/runtest.vim,
            src/testdir/screendump.vim, src/testdir/test49.vim,
            src/testdir/test_autocmd.vim, src/testdir/test_cindent.vim,
            src/testdir/test_const.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_search.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_tcl.vim

Patch 8.1.1956
问题:       Screenshot tests may use a different encoding. (Dominique Pelle)
解决方案:   Always set 'encoding' to "utf-8" when running Vim in a terminal.
            (closes #4884)
文件:       src/testdir/shared.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_behind.dump

Patch 8.1.1957
问题:       More code can be moved to evalvars.c.
解决方案:   Move code to where it fits better. (Yegappan Lakshmanan,
            closes #4883)
文件:       src/eval.c, src/evalvars.c, src/ex_getln.c, src/globals.h,
            src/if_py_both.h, src/proto/eval.pro, src/proto/evalvars.pro,
            src/proto/ex_getln.pro, src/proto/scriptfile.pro,
            src/scriptfile.c, src/session.c, src/viminfo.c

Patch 8.1.1958
问题:       Old style comments taking up space.
解决方案:   Change to new style comments.
文件:       src/vim.h

Patch 8.1.1959
问题:       When using "firstline" in popup window text may jump when
            redrawing it. (Nick Jensen)
解决方案:   Set 'scrolloff' to zero in a popup window. (closes #4882)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_5.dump,
            src/testdir/dumps/Test_popupwin_scroll_6.dump

Patch 8.1.1960
问题:       Fold code is spread out.
解决方案:   Move fold functions to fold.c.
文件:       src/evalfunc.c, src/fold.c, src/proto/fold.pro

Patch 8.1.1961
问题:       More functions can be used as a method.
解决方案:   Allow more functions to be used as a method.  Add a test for
            mapcheck().
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test70.in,
            src/testdir/test_functions.vim, src/testdir/test_getcwd.vim,
            src/testdir/test_maparg.vim, src/testdir/test_match.vim

Patch 8.1.1962
问题:       Leaking memory when using tagfunc().
解决方案:   Free the user_data. (Dominique Pelle, closes #4886)
文件:       src/window.c

Patch 8.1.1963
问题:       Popup window filter may be called recursively when using a Normal
            mode command. (Nick Jensen)
解决方案:   Prevent recursiveness. (closes #4887)  Also restore KeyTyped.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.1964
问题:       Crash when using nested map() and filter().
解决方案:   Do not set the v:key type to string without clearing the pointer.
            (closes #4888)
文件:       src/eval.c, src/testdir/test_filter_map.vim

Patch 8.1.1965
问题:       The search count message is not displayed when using a mapping.
            (Gary Johnson)
解决方案:   Ignore cmd_silent for showing the search count. (Christian
            Brabandt)
文件:       src/search.c

Patch 8.1.1966
问题:       Some code in options.c fits better elsewhere.
解决方案:   Move functions from options.c to other files. (Yegappan
            Lakshmanan, closes #4889)
文件:       src/evalfunc.c, src/globals.h, src/indent.c, src/map.c,
            src/option.c, src/proto/map.pro, src/proto/option.pro,
            src/proto/quickfix.pro, src/proto/screen.pro, src/proto/spell.pro,
            src/proto/window.pro, src/quickfix.c, src/screen.c, src/spell.c,
            src/window.c

Patch 8.1.1967
问题:       Line() only works for the current window.
解决方案:   Add an optional argument for the window to use.
文件:       runtime/eval.txt, src/evalfunc.c, src/testdir/test_popupwin.vim

Patch 8.1.1968
问题:       Crash when using nested map().
解决方案:   Clear the pointer in prepare_vimvar(). (Ozaki Kiichi,
            closes #4890, closes #4891)
文件:       src/evalvars.c, src/testdir/test_filter_map.vim,
            src/testdir/test_functions.vim

Patch 8.1.1969
问题:       Popup window filter is used in all modes.
解决方案:   Add the "filtermode" property.
文件:       src/popupwin.c, src/vim.h, src/map.c, src/proto/map.pro,
            src/structs.h, runtime/doc/popup.txt,
            src/testdir/test_popupwin.vim

Patch 8.1.1970
问题:       Search stat space wrong, no test for 8.1.1965.
解决方案:   Fix check for cmd_silent.  Add a test. (Christian Brabandt)
文件:       src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1971
问题:       Manually enabling features causes build errors. (John Marriott)
解决方案:   Adjust #ifdefs.
文件:       src/proto.h, src/popupmnu.c, src/buffer.c, src/quickfix.c,
            src/ui.c

Patch 8.1.1972
问题:       No proper test for getchar().
解决方案:   Add a test with special characters.
文件:       src/testdir/test_functions.vim

Patch 8.1.1973
问题:       Cannot build without the quickfix feature.
解决方案:   Remove #ifdef for qf_info_T.
文件:       src/structs.h

Patch 8.1.1974
问题:       Coverity warns for using pointer as array.
解决方案:   Call var2fpos() directly instead of using f_line().
文件:       src/evalfunc.c

Patch 8.1.1975
问题:       MS-Windows GUI responds slowly to timer.
解决方案:   Break out of wait loop when timer was added or input is available.
            (closes #4893)
文件:       src/gui_w32.c

Patch 8.1.1976
问题:       Travis log always shows test output.
解决方案:   Change script to avoid if/else. (Ozaki Kiichi, closes #4892)
文件:       .travis.yml

Patch 8.1.1977
问题:       Terminal debugger plugin may hang.
解决方案:   Wait longer when still reading symbols.
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.1978
问题:       The eval.c file is too big.
解决方案:   Move filter() and map() to list.c.
文件:       src/eval.c, src/proto/eval.pro, src/list.c, src/proto/list.pro,
            src/evalfunc.c

Patch 8.1.1979
问题:       Code for handling file names is spread out.
解决方案:   Move code to new filepath.c file.  Graduate FEAT_MODIFY_FNAME.
文件:       src/filepath.c, Filelist, src/Make_cyg_ming.mak,
            src/Make_morph.mak, src/Make_mvc.mak, src/Make_vms.mms,
            src/Makefile, src/README.md, src/eval.c, src/evalfunc.c,
            src/ex_docmd.c, src/feature.h, src/findfile.c, src/if_cscope.c,
            src/message.c, src/misc1.c, src/proto.h, src/proto/eval.pro,
            src/proto/evalvars.pro src/proto/filepath.pro,
            src/proto/findfile.pro, src/proto/message.pro, src/regexp.c,
            src/version.c

Patch 8.1.1980
问题:       Fix for search stat not tested.
解决方案:   Add a screenshot test. (Christian Brabandt)
文件:       src/testdir/test_search_stat.vim,
            src/testdir/dumps/Test_searchstat_1.dump,
            src/testdir/dumps/Test_searchstat_2.dump

Patch 8.1.1981
问题:       The evalfunc.c file is too big.
解决方案:   Move undo functions to undo.c.  Move cmdline functions to
            ex_getln.c.  Move some container functions to list.c.
文件:       src/evalfunc.c, src/undo.c, src/proto/undo.pro, src/ex_getln.c,
            src/proto/ex_getln.pro, src/list.c, src/proto/list.pro

Patch 8.1.1982
问题:       More functions can be used as methods.
解决方案:   Make popup functions usable as a method.
文件:       runtime/doc/popup.txt, src/evalfunc.c,
            src/testdir/test_popupwin.vim

Patch 8.1.1983
问题:       Compiler nags for uninitialized variable and unused function.
解决方案:   Add unnecessary initialization.  Move function inside #ifdef.
文件:       src/memline.c, src/channel.c

Patch 8.1.1984
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_functions.vim, src/testdir/test_perl.vim,
            src/testdir/test_prompt_buffer.vim, src/testdir/test_python2.vim,
            src/testdir/test_python3.vim, src/testdir/test_pyx2.vim

Patch 8.1.1985
问题:       Code for dealing with paths is spread out.
解决方案:   Move path related functions from misc1.c to filepath.c.
            Remove NO_EXPANDPATH.
文件:       src/misc1.c, src/proto/misc1.pro, src/filepath.c,
            src/evalfunc.c, src/globals.h, src/misc2.c, src/os_unix.c,
            src/os_unix.h, src/proto/filepath.pro, src/scriptfile.c,
            src/proto/misc2.pro, src/proto/scriptfile.pro, src/vim.h

Patch 8.1.1986
问题:       More functions can be used as methods.
解决方案:   Make textprop functions usable as a method.
文件:       runtime/doc/textprop.txt, src/evalfunc.c,
            src/testdir/test_textprop.vim

Patch 8.1.1987
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_clientserver.vim,
            src/testdir/test_eval_stuff.vim, src/testdir/test_functions.vim,
            src/testdir/test_reltime.vim, src/testdir/test_rename.vim

Patch 8.1.1988
问题:       :startinsert! does not work the same way as "A".
解决方案:   Use the same code to move the cursor. (closes #4896)
文件:       src/ex_docmd.c, src/normal.c, src/proto/normal.pro,
            src/testdir/test_edit.vim

Patch 8.1.1989
问题:       The evalfunc.c file is still too big.
解决方案:   Move f_pathshorten() to filepath.c.  Move f_cscope_connection() to
            if_cscope.c.  Move diff_ functions to diff.c.  Move timer_
            functions to ex_cmds2.c.  move callback functions to evalvars.c.
文件:       src/evalfunc.c, src/proto/evalfunc.pro, src/filepath.c,
            src/proto/filepath.pro, src/if_cscope.c, src/proto/if_cscope.pro,
            src/diff.c, src/proto/diff.pro, src/ex_cmds2.c,
            src/proto/ex_cmds2.pro, src/evalvars.c, src/proto/evalvars.pro

Patch 8.1.1990
问题:       Cannot build with eval but without cscope.
解决方案:   Always include if_cscope.pro.
文件:       src/proto.h

Patch 8.1.1991
问题:       Still cannot build with eval but without cscope.
解决方案:   Move f_cscope_connection() outside of #ifdef.
文件:       src/if_cscope.c

Patch 8.1.1992
问题:       The search stat moves when wrapping at the end of the buffer.
解决方案:   Put the "W" in front instead of at the end.
文件:       src/search.c, src/testdir/test_search_stat.vim

Patch 8.1.1993
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufline.vim, src/testdir/test_charsearch.vim,
            src/testdir/test_clientserver.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_diffmode.vim,
            src/testdir/test_environ.vim, src/testdir/test_functions.vim,
            src/testdir/test_matchadd_conceal_utf8.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_search.vim,
            src/testdir/test_searchpos.vim, src/testdir/test_utf8.vim

Patch 8.1.1994
问题:       MS-Windows: cannot build with eval but without cscope
解决方案:   Adjust the makefiles to always build if_cscope.obj.
文件:       src/Make_mvc.mak, src/Make_cyg_ming.mak

Patch 8.1.1995
问题:       More functions can be used as methods.
解决方案:   Make sign functions usable as a method.
文件:       runtime/doc/sign.txt, src/evalfunc.c, src/testdir/test_signs.vim

Patch 8.1.1996
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_cursor_func.vim, src/testdir/test_expr.vim,
            src/testdir/test_functions.vim, src/testdir/test_put.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_sha256.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_tagjump.vim,
            src/testdir/test_vartabs.vim

Patch 8.1.1997
问题:       No redraw after a popup window filter is invoked.
解决方案:   Redraw if needed.
文件:       src/popupwin.c, src/testdir/test_popupwin.vim
            src/testdir/dumps/Test_popupwin_menu_filter_5.dump

Patch 8.1.1998
问题:       Redraw even when no popup window filter was invoked.
解决方案:   Only redraw when must_redraw was set to a larger value.
文件:       src/popupwin.c

Patch 8.1.1999
问题:       Calling both PlaySoundW() and PlaySoundA().
解决方案:   Only use PlaySoundW(). (Dan Thompson, closes #4903)
文件:       src/sound.c

Patch 8.1.2000
问题:       Plugin cannot get the current IME status.
解决方案:   Add the getimstatus() function. (closes #4904)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/mbyte.c,
            src/proto/mbyte.pro, src/testdir/test_iminsert.vim

Patch 8.1.2001
问题:       Some source files are too big.
解决方案:   Move buffer and window related functions to evalbuffer.c and
            evalwindow.c. (Yegappan Lakshmanan, closes #4898)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/buffer.c, src/channel.c, src/evalbuffer.c, src/evalfunc.c,
            src/evalwindow.c, src/proto.h, src/proto/buffer.pro,
            src/proto/evalbuffer.pro, src/proto/evalfunc.pro,
            src/proto/evalwindow.pro, src/proto/window.pro, src/window.c

Patch 8.1.2002
问题:       Version number 2000 missing.
解决方案:   Add the number in the list of patches.
文件:       src/version.c

Patch 8.1.2003
问题:       MS-Windows: code page 65001 is not recognized.
解决方案:   Use utf-8 for code page 65001. (Dan Thompson, closes #4902)
文件:       src/mbyte.c

Patch 8.1.2004
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_breakindent.vim, src/testdir/test_expr.vim,
            src/testdir/test_functions.vim, src/testdir/test_sound.vim,
            src/testdir/test_spell.vim, src/testdir/test_substitute.vim,
            src/testdir/test_swap.vim, src/testdir/test_utf8.vim

Patch 8.1.2005
问题:       The regexp.c file is too big.
解决方案:   Move the backtracking engine to a separate file. (Yegappan
            Lakshmanan, closes #4905)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Makefile,
            src/regexp.c, src/regexp_bt.c

Patch 8.1.2006
问题:       Build failure with huge features but without channel feature.
解决方案:   Add #ifdef. (Dominique Pelle, closes #4906)
文件:       src/ui.c

Patch 8.1.2007
问题:       No test for what 8.1.1926 fixes.
解决方案:   Add a test case.
文件:       src/testdir/test_highlight.vim

Patch 8.1.2008
问题:       Error for invalid range when using listener and undo. (Paul Jolly)
解决方案:   Do not change the cursor before the lines are restored.
            (closes #4908)
文件:       src/undo.c, src/testdir/test_listener.vim

Patch 8.1.2009
问题:       Cursorline highlighting not updated in popup window. (Marko
            Mahnič)
解决方案:   Check if the cursor position changed. (closes #4912)
文件:       src/popupwin.c, src/structs.h, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_cursorline_7.dump

Patch 8.1.2010
问题:       New file uses old style comments.
解决方案:   Change to new style comments. (Yegappan Lakshmanan, closes #4910)
文件:       src/regexp_bt.c

Patch 8.1.2011
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.  Make the window
            command test faster.
文件:       runtime/doc/eval.txt, runtime/doc/testing.txt, src/evalfunc.c,
            src/testdir/test_assert.vim, src/testdir/test_gui.vim,
            src/testdir/test_messages.vim, src/testdir/test_options.vim,
            src/testdir/test_quickfix.vim, src/testdir/test_taglist.vim,
            src/testdir/test_termcodes.vim, src/testdir/test_timers.vim,
            src/testdir/test_vimscript.vim, src/testdir/test_viminfo.vim,
            src/testdir/test_window_cmd.vim

Patch 8.1.2012
问题:       More functions can be used as methods.
解决方案:   Make terminal functions usable as a method.  Fix term_getattr().
文件:       runtime/doc/terminal.txt, src/evalfunc.c, src/terminal.c
            src/testdir/test_mksession.vim, src/testdir/test_terminal.vim

Patch 8.1.2013
问题:       More functions can be used as methods.
解决方案:   Make various functions usable as a method.
文件:       runtime/doc/eval.txt, src/evalfunc.c,
            src/testdir/test_cursor_func.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_functions.vim,
            src/testdir/test_listchars.vim, src/testdir/test_timers.vim,
            src/testdir/test_undo.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_window_id.vim

Patch 8.1.2014
问题:       Terminal altscreen test fails sometimes.
解决方案:   Use WaitFor().
文件:       src/testdir/test_terminal.vim

Patch 8.1.2015
问题:       Terminal altscreen test still fails sometimes.
解决方案:   Write the escape sequence in a file.
文件:       src/testdir/test_terminal.vim

Patch 8.1.2016
问题:       Terminal altscreen test now fails on MS-Windows.
解决方案:   Skip the test on MS-Windows
文件:       src/testdir/test_terminal.vim

Patch 8.1.2017
问题:       Cannot execute commands after closing the cmdline window.
解决方案:   Also trigger BufEnter and WinEnter. (closes #4762)
文件:       runtime/doc/autocmd.txt, runtime/doc/cmdline.txt, src/ex_getln.c,
            src/testdir/test_cmdline.vim

Patch 8.1.2018
问题:       Using freed memory when out of memory and displaying message.
解决方案:   Make a copy of the message first.
文件:       src/main.c, src/message.c, src/normal.c

Patch 8.1.2019
问题:       'cursorline' always highlights the whole line.
解决方案:   Add 'cursorlineopt' to specify what is highlighted.
            (Ozaki Kiichi, closes #4693)
文件:       runtime/doc/options.txt, runtime/doc/quickref.txt,
            runtime/doc/syntax.txt, runtime/optwin.vim, src/option.c,
            src/option.h, src/screen.c, src/structs.h,
            src/testdir/Make_all.mak, src/testdir/gen_opt_test.vim,
            src/testdir/test_alot.vim, src/testdir/test_cursorline.vim

Patch 8.1.2020
问题:       It is not easy to change the window layout.
解决方案:   Add win_splitmove(). (Andy Massimino, closes #4561)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/evalwindow.c,
            src/proto/evalwindow.pro, src/testdir/test_window_cmd.vim

Patch 8.1.2021
问题:       Some global functions can be local to the file.
解决方案:   Add "static". (Yegappan Lakshmanan, closes #4917)
文件:       src/ex_cmds2.c, src/filepath.c, src/hangulin.c, src/mbyte.c,
            src/misc1.c, src/os_unix.c, src/proto/ex_cmds2.pro,
            src/proto/filepath.pro, src/proto/hangulin.pro,
            src/proto/mbyte.pro, src/proto/misc1.pro, src/proto/os_unix.pro,
            src/proto/terminal.pro, src/proto/undo.pro, src/pty.c,
            src/terminal.c, src/undo.c

Patch 8.1.2022
问题:       The option.c file is too big.
解决方案:   Move option definitions to a separate file. (Yegappan Lakshmanan,
            closes #4918)
文件:       Filelist, src/Make_mvc.mak, src/Make_vms.mms, src/Makefile,
            src/option.c, src/optiondefs.h

Patch 8.1.2023
问题:       No test for synIDattr() returning "strikethrough".
解决方案:   Extend the synIDattr() test. (Jaskaran Singh, closes #4929)
文件:       src/testdir/test_syn_attr.vim

Patch 8.1.2024
问题:       Delete call commented out for debugging.
解决方案:   Restore the delete call. (Christian Brabandt)
文件:       src/testdir/test_undo.vim

Patch 8.1.2025
问题:       MS-Windows: Including shlguid.h causes problems for msys2.
解决方案:   Do not include shlguid.h. (closes #4913)
文件:       src/GvimExt/gvimext.h

Patch 8.1.2026
问题:       Possibly using uninitialized memory.
解决方案:   Check if "dict" is NULL. (closes #4925)
文件:       src/ops.c

Patch 8.1.2027
问题:       MS-Windows: problem with ambiwidth characters.
解决方案:   handle ambiguous width characters in ConPTY on Windows 10 (1903).
            (Nobuhiro Takasaki, closes #4411)
文件:       src/Make_mvc.mak, src/Make_cyg_ming.mak, src/libvterm/src/parser.c,
            src/libvterm/src/state.c, src/libvterm/src/termscreen.c,
            src/libvterm/src/unicode.c, src/libvterm/src/vterm_internal.h,
            src/misc2.c, src/os_win32.c, src/proto/misc2.pro,
            src/proto/os_win32.pro

Patch 8.1.2028
问题:       Options test script does not work.
解决方案:   Use optiondefs.h for input.
文件:       src/testdir/Makefile, src/testdir/Make_dos.mak,
            src/testdir/Make_ming.mak

Patch 8.1.2029
问题:       Cannot control 'cursorline' highlighting well.
解决方案:   Add "screenline". (Christian Brabandt, closes #4933)
文件:       runtime/doc/options.txt, src/change.c, src/main.c, src/option.c,
            src/option.h, src/optiondefs.h, src/screen.c, src/structs.h,
            src/highlight.c, src/testdir/dumps/Test_Xcursorline_1.dump,
            src/testdir/dumps/Test_Xcursorline_2.dump,
            src/testdir/dumps/Test_Xcursorline_3.dump,
            src/testdir/dumps/Test_Xcursorline_4.dump,
            src/testdir/dumps/Test_Xcursorline_5.dump,
            src/testdir/dumps/Test_Xcursorline_6.dump,
            src/testdir/dumps/Test_Xcursorline_7.dump,
            src/testdir/dumps/Test_Xcursorline_8.dump,
            src/testdir/dumps/Test_Xcursorline_9.dump,
            src/testdir/dumps/Test_Xcursorline_10.dump,
            src/testdir/dumps/Test_Xcursorline_11.dump,
            src/testdir/dumps/Test_Xcursorline_12.dump,
            src/testdir/dumps/Test_Xcursorline_13.dump,
            src/testdir/dumps/Test_Xcursorline_14.dump,
            src/testdir/dumps/Test_Xcursorline_15.dump,
            src/testdir/dumps/Test_Xcursorline_16.dump,
            src/testdir/dumps/Test_Xcursorline_17.dump,
            src/testdir/dumps/Test_Xcursorline_18.dump,
            src/testdir/gen_opt_test.vim, src/testdir/test_cursorline.vim,
            src/testdir/dumps/Test_cursorline_yank_01.dump,
            src/testdir/dumps/Test_wincolor_01.dump,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.2030
问题:       Tests fail when build with normal features and terminal.
            (Dominique Pelle)
解决方案:   Disable tests that won't work. (closes #4932)
文件:       src/testdir/test_popupwin.vim, src/testdir/test_terminal.vim

Patch 8.1.2031
问题:       Cursor position wrong when resizing and using conceal.
解决方案:   Set the flags that the cursor position is valid when setting the
            row and column during redrawing. (closes #4931)
文件:       src/screen.c, src/testdir/test_conceal.vim,
            src/testdir/dumps/Test_conceal_resize_01.dump,
            src/testdir/dumps/Test_conceal_resize_02.dump

Patch 8.1.2032
问题:       Scrollbar thumb wrong in popup window.
解决方案:   Adjust thumb size and position when scrolled.
文件:       src/popupwin.c, src/testdir/dumps/Test_popupwin_scroll_2.dump

Patch 8.1.2033
问题:       Cannot build with tiny features.
解决方案:   Add #ifdef.
文件:       src/screen.c

Patch 8.1.2034
问题:       Dark theme of GTK 3 not supported.
解决方案:   Add the "d" flag in 'guioptions'. (Jonathan Conder, closes #4934)
文件:       runtime/doc/options.txt, src/feature.h, src/gui.c,
            src/gui_gtk_x11.c, src/option.h, src/proto/gui_gtk_x11.pro,
            src/testdir/test_gui.vim

Patch 8.1.2035
问题:       Recognizing octal numbers is confusing.
解决方案:   Introduce scriptversion 4: do not use octal and allow for single
            quote inside numbers.
文件:       runtime/doc/eval.txt, src/vim.h, src/eval.c, src/scriptfile.c,
            src/evalfunc.c, src/testdir/test_eval_stuff.vim,
            src/testdir/test_functions.vim

Patch 8.1.2036 (after 8.1.2035)
问题:       The str2nr() tests fail.
解决方案:   Add missing part of patch.
文件:       src/charset.c

Patch 8.1.2037
问题:       Can call win_gotoid() in cmdline window.
解决方案:   Disallow switching windows. (Yasuhiro Matsumoto, closes #4940)
文件:       src/evalwindow.c, src/testdir/test_cmdline.vim

Patch 8.1.2038
问题:       has('vimscript-4') is always 0.
解决方案:   Add "vimscript-4" to the feature table. (Naruhiko Nishino,
            closes #4941)
文件:       src/evalfunc.c, src/testdir/test_eval_stuff.vim

Patch 8.1.2039
问题:       Character from 'showbreak' does not use 'wincolor'. (Nick Jensen)
解决方案:   Mix with 'wincolor'. (closes #4938)
文件:       src/screen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_showbreak.dump

Patch 8.1.2040
问题:       No highlighting of current line in quickfix window.
解决方案:   Combine with line_attr.
文件:       src/screen.c, src/testdir/test_quickfix.vim,
            src/testdir/dumps/Test_quickfix_cwindow_1.dump,
            src/testdir/dumps/Test_quickfix_cwindow_2.dump

Patch 8.1.2041 (after 8.1.2040)
问题:       No test for diff mode with syntax highlighting.
解决方案:   Add a test case.
文件:       src/testdir/test_diffmode.vim,
            src/testdir/dumps/Test_diff_syntax_1.dump

Patch 8.1.2042
问题:       The evalfunc.c file is too big.
解决方案:   Move getchar() and parse_queued_messages() to getchar.c.
文件:       src/getchar.c, src/proto/getchar.pro, src/evalfunc.c, src/misc2.c,
            src/proto/misc2.pro

Patch 8.1.2043
问题:       Not sufficient testing for quoted numbers.
解决方案:   Add a few more test cases.
文件:       src/testdir/test_functions.vim, src/testdir/test_eval_stuff.vim

Patch 8.1.2044
问题:       No easy way to process postponed work. (Paul Jolly)
解决方案:   Add the SafeState autocommand event.
文件:       runtime/doc/autocmd.txt, src/main.c, src/proto/main.pro,
            src/vim.h, src/autocmd.c, src/channel.c, src/edit.c,
            src/ex_getln.c

Patch 8.1.2045
问题:       The option.c file is too big.
解决方案:   Split off the code dealing with strings. (Yegappan Lakshmanan,
            closes #4937)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/option.c, src/option.h, src/optiondefs.h, src/optionstr.c,
            src/ops.c, src/os_unix.c, src/proto.h, src/proto/option.pro,
            src/proto/optionstr.pro

Patch 8.1.2046
问题:       SafeState may be triggered at the wrong moment.
解决方案:   Move it up higher to after where messages are processed.  Add a
            SafeStateAgain event to trigger there.
文件:       runtime/doc/autocmd.txt, src/main.c, src/proto/main.pro,
            src/getchar.c, src/channel.c, src/autocmd.c, src/vim.h

Patch 8.1.2047
问题:       Cannot check the current state.
解决方案:   Add the state() function.
文件:       runtime/doc/eval.txt, src/misc1.c, src/proto/misc1.pro,
            src/evalfunc.c, src/proto/evalfunc.pro, src/main.c,
            src/proto/main.pro, src/channel.c, src/proto/channel.pro,
            src/userfunc.c, src/proto/userfunc.pro

Patch 8.1.2048
问题:       Not clear why SafeState and SafeStateAgain are not triggered.
解决方案:   Add log statements.
文件:       src/getchar.c, src/main.c, src/proto/main.pro

Patch 8.1.2049 (after 8.1.2048)
问题:       Cannot build tiny version.
解决方案:   Add #ifdefs.
文件:       src/main.c

Patch 8.1.2050
问题:       Popup window test fails in some configurations. (James McCoy)
解决方案:   Clear the command line.
文件:       src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_10.dump

Patch 8.1.2051
问题:       Double-click test is a bit flaky.
解决方案:   Correct entry in list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.2052
问题:       Using "x" before a closed fold may delete that fold.
解决方案:   Do not translate 'x' do "dl". (Christian Brabandt, closes #4927)
文件:       src/normal.c, src/testdir/test_fold.vim

Patch 8.1.2053
问题:       SafeStateAgain not triggered if callback uses feedkeys().
解决方案:   Check for safe state in the input loop.  Make log messages easier
            to find. Add 'S' flag to state().
文件:       src/main.c, src/proto/main.pro, src/getchar.c,
            runtime/doc/eval.txt

Patch 8.1.2054
问题:       Compiler test for Perl may fail.
解决方案:   Accept any error line number. (James McCoy, closes #4944)
文件:       src/testdir/test_compiler.vim

Patch 8.1.2055
问题:       Not easy to jump to function line from profile.
解决方案:   Use "file:99" instead of "file line 99" so that "gf" works.
            (Daniel Hahler, closes #4951)
文件:       src/profiler.c, src/testdir/test_profile.vim

Patch 8.1.2056
问题:       "make test" for indent files doesn't cause make to fail.
解决方案:   Exit the script with ":cquit". (Daniel Hahler, closes #4949)
文件:       runtime/indent/testdir/runtest.vim, .gitignore

Patch 8.1.2057
问题:       The screen.c file is much too big.
解决方案:   Split it in three parts. (Yegappan Lakshmanan, closes #4943)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/drawline.c, src/drawscreen.c, src/globals.h, src/proto.h,
            src/proto/drawline.pro, src/proto/drawscreen.pro,
            src/proto/screen.pro, src/screen.c, src/vim.h

Patch 8.1.2058
问题:       Function for ex command is named inconsistently.
解决方案:   Rename do_marks() to ex_marks().
文件:       src/mark.c, src/proto/mark.pro, src/ex_cmds.h

Patch 8.1.2059
问题:       Fix for "x" deleting a fold has side effects.
解决方案:   Fix it where the fold is included.
文件:       src/normal.c

Patch 8.1.2060
问题:       "precedes" in 'listchars' not used properly.
解决方案:   Correctly handle the "precedes" char in list mode for long lines.
            (Zach Wegner, Christian Brabandt, closes #4953)
文件:       runtime/doc/options.txt, src/drawline.c,
            src/testdir/test_display.vim, src/testdir/view_util.vim

Patch 8.1.2061
问题:       MS-Windows GUI: ":sh" crashes when trying to use a terminal.
解决方案:   Check for a NULL command. (Yasuhiro Matsumoto, closes #4958)
文件:       src/os_win32.c

Patch 8.1.2062
问题:       The mouse code is spread out.
解决方案:   Move all the mouse code to mouse.c. (Yegappan Lakshmanan,
            closes #4959)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/auto/configure, src/configure.ac, src/edit.c, src/ex_cmds.c,
            src/ex_docmd.c, src/ex_getln.c, src/insexpand.c,
            src/libvterm/src/termmouse.c, src/libvterm/src/mouse.c,
            src/main.c, src/message.c, src/misc1.c, src/misc2.c, src/mouse.c,
            src/normal.c, src/proto.h, src/proto/edit.pro,
            src/proto/misc1.pro, src/proto/misc2.pro, src/proto/mouse.pro,
            src/proto/normal.pro, src/proto/term.pro, src/proto/ui.pro,
            src/search.c, src/term.c, src/ui.c, src/vim.h, src/window.c

Patch 8.1.2063
问题:       Some tests fail when +balloon_eval_term is missing but
            _balloon_eval is present. (Dominique Pelle)
解决方案:   Check the right feature in the test. (closes #4962)
文件:       src/testdir/test_popupwin.vim, src/testdir/test_terminal.vim

Patch 8.1.2064
问题:       MS-Windows: compiler warnings for unused arguments.
解决方案:   Add UNUSED. (Yegappan Lakshmanan, closes #4963)
文件:       src/channel.c, src/ex_docmd.c, src/ex_getln.c, src/fileio.c,
            src/gui_w32.c, src/main.c, src/memline.c, src/os_mswin.c,
            src/os_win32.c, src/terminal.c, src/ui.c, src/undo.c

Patch 8.1.2065
问题:       Compiler warning building non-GUI with MinGW.
解决方案:   Adjust #ifdefs. (Yegappan Lakshmanan, closes #4964)
文件:       sre/mouse.c

Patch 8.1.2066
问题:       No tests for state().
解决方案:   Add tests.  Clean up some feature checks.  Make "a" flag work.
文件:       src/testdir/test_functions.vim, src/testdir/test_terminal.vim,
            src/misc1.c

Patch 8.1.2067
问题:       No tests for SafeState and SafeStateAgain.
解决方案:   Add tests.
文件:       src/testdir/test_autocmd.vim

Patch 8.1.2068 (after 8.1.2067)
问题:       Test for SafeState and SafeStateAgain may fail.
解决方案:   Accept more possible responses
文件:       src/testdir/test_autocmd.vim

Patch 8.1.2069 (after 8.1.2068)
问题:       Test for SafeStateAgain may still fail.
解决方案:   Send another message to trigger SafeStateAgain.
文件:       src/testdir/test_autocmd.vim

Patch 8.1.2070
问题:       Mouse code is spread out.
解决方案:   Move mouse terminal code parsing to mouse.c. (Yegappan Lakshmanan,
            closes #4966)
文件:       src/mouse.c, src/proto/mouse.pro, src/proto/term.pro, src/term.c

Patch 8.1.2071
问题:       When 'wincolor' is set text property changes highlighting. (Andy
            Stewart)
解决方案:   Fix combining colors. (closes #4968)
文件:       src/drawline.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_01.dump

Patch 8.1.2072
问题:       "gk" moves to start of line instead of upwards.
解决方案:   Fix off-by-one error. (Christian Brabandt, closes #4969)
文件:       src/normal.c, src/testdir/test_normal.vim

Patch 8.1.2073
问题:       When editing a buffer 'colorcolumn' may not work.
解决方案:   Set the buffer before copying option values. Call
            check_colorcolumn() after copying window options.
文件:       src/buffer.c, src/option.c, src/proto/option.pro,
            src/proto/indent.pro, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_colorcolumn_1.dump

Patch 8.1.2074
问题:       Test for SafeState autocommand is a bit flaky.
解决方案:   Add to list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.2075
问题:       Get many log messages when waiting for a typed character.
解决方案:   Do not repeat the repeated messages when nothing happens.
文件:       src/globals.h, src/channel.c, src/main.c

Patch 8.1.2076
问题:       Crash when trying to put a terminal buffer in a popup window.
解决方案:   Check for NULL buffer.  Do not allow putting a terminal in a popup
            window.
文件:       src/libvterm/src/termscreen.c, src/terminal.c, src/popupwin.c,
            runtime/doc/popup.txt, src/testdir/test_popupwin.vim

Patch 8.1.2077
问题:       The ops.c file is too big.
解决方案:   Move code for dealing with registers to a new file. (Yegappan
            Lakshmanan, closes #4982)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms src/Makefile, src/README.md,
            src/ops.c, src/proto.h, src/proto/ops.pro, src/proto/register.pro,
            src/register.c, src/structs.h

Patch 8.1.2078
问题:       Build error with +textprop but without +terminal. (Tony Mechelynck)
解决方案:   Add #ifdef.
文件:       src/popupwin.c

Patch 8.1.2079
问题:       Popup window test fails without +terminal.
解决方案:   Check for the +terminal feature.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.2080
问题:       The terminal API is limited and can't be disabled.
解决方案:   Add term_setapi() to set the function prefix. (Ozaki Kiichi,
            closes #2907)
文件:       runtime/doc/eval.txt, runtime/doc/terminal.txt, src/channel.c,
            src/evalfunc.c, src/proto/terminal.pro, src/structs.h,
            src/terminal.c, src/testdir/term_util.vim,
            src/testdir/test_terminal.vim

Patch 8.1.2081
问题:       The spell.c file is too big.
解决方案:   Move the code for spell suggestions to a separate file. (Yegappan
            Lakshmanan, closes #4988)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/proto.h, src/proto/spell.pro, src/proto/spellsuggest.pro,
            src/spell.c, src/spell.h, src/spellsuggest.c

Patch 8.1.2082
问题:       Some files have a weird name to fit in 8.3 characters.
解决方案:   Use a nicer names.
文件:       Filelist, Makefile, src/popupmnu.c, src/popupmenu.c,
            src/proto/popupmnu.pro, src/proto/popupmenu.pro,
            src/Make_cyg_ming.mak, src/Make_morph.mak, src/Make_mvc.mak,
            src/Make_vms.mms, src/Makefile, src/proto.h, src/README.md,
            src/uninstal.c, src/uninstall.c, uninstal.txt, uninstall.txt,
            nsis/gvim.nsi, src/INSTALLpc.txt, src/dosinst.c, src/dosinst.h

Patch 8.1.2083
问题:       Multi-byte chars do not work properly with "%.*S" in printf().
解决方案:   Use mb_ptr2cells(). Daniel Hahler, closes #4989)
文件:       src/testdir/test_expr.vim, src/message.c

Patch 8.1.2084
问题:       Amiga: cannot get the user name.
解决方案:   Use getpwuid() if available. (Ola Söder, closes #4985)
文件:       src/os_amiga.c, src/os_amiga.h

Patch 8.1.2085
问题:       MS-Windows: draw error moving cursor over double-cell character.
解决方案:   Move the cursor to the left edge if needed. (Nobuhiro Takasaki,
            closes #4986)
文件:       src/os_win32.c

Patch 8.1.2086 (after 8.1.2082)
问题:       Missing a few changes for the renamed files.
解决方案:   Rename in a few more places. (Ken Takata)
文件:       nsis/README.txt, runtime/doc/gui_w32.txt, runtime/doc/usr_90.txt,
            src/GvimExt/GvimExt.reg, src/GvimExt/README.txt,
            src/proto/popupmenu.pro, src/proto/popupmnu.pro

Patch 8.1.2087
问题:       Cannot easily select one test function to execute.
解决方案:   Support the $TEST_FILTER environment variable. (Ozaki Kiichi,
            closes #2695)
文件:       src/Makefile, src/testdir/runtest.vim, src/testdir/summarize.vim

Patch 8.1.2088
问题:       Renamed libvterm mouse.c file not in distributed file list.
解决方案:   Rename the file in the file list.
文件:       Filelist

Patch 8.1.2089 (after 8.1.2087)
问题:       Do not get a hint that $TEST_FILTER was active.
解决方案:   Mention $TEST_FILTER if no functions were executed.
文件:       src/testdir/runtest.vim

Patch 8.1.2090
问题:       Not clear why channel log file ends.
解决方案:   Add a "closing" line.
文件:       src/channel.c

Patch 8.1.2091
问题:       Double free when memory allocation fails. (Zu-Ming Jiang)
解决方案:   Use VIM_CLEAR() instead of vim_free(). (closes #4991)
文件:       src/getchar.c

Patch 8.1.2092
问题:       MS-Windows: redirect in system() does not work.
解决方案:   Handle 'shellxescape' and 'shellxquote' better. (Yasuhiro
            Matsumoto, closes #2054)
文件:       src/ex_cmds.c, src/misc2.c, src/testdir/test_system.vim

Patch 8.1.2093
问题:       MS-Windows: system() test fails.
解决方案:   Expect CR when using systemlist().
文件:       src/testdir/test_system.vim

Patch 8.1.2094
问题:       The fileio.c file is too big.
解决方案:   Move buf_write() to bufwrite.c. (Yegappan Lakshmanan,
            closes #4990)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/bufwrite.c, src/fileio.c, src/option.c, src/proto.h,
            src/proto/bufwrite.pro, src/proto/fileio.pro, src/structs.h

Patch 8.1.2095
问题:       Leaking memory when getting item from dict.
解决方案:   Also free the key when not evaluating.
文件:       src/dict.c

Patch 8.1.2096
问题:       Too many #ifdefs.
解决方案:   Graduate FEAT_COMMENTS.
文件:       src/feature.h, src/buffer.c, src/change.c, src/edit.c,
            src/evalfunc.c, src/fold.c, src/insexpand.c, src/misc1.c,
            src/normal.c, src/ops.c, src/option.c, src/optionstr.c,
            src/search.c, src/version.c, src/globals.h, src/option.h,
            src/optiondefs.h, src/structs.h, runtime/doc/change.txt,
            runtime/doc/options.txt, runtime/doc/various.txt

Patch 8.1.2097
问题:       :mksession is not sufficiently tested.
解决方案:   Add more test cases. (Yegappan Lakshmanan, closes #4992)
文件:       src/testdir/test_mksession.vim

Patch 8.1.2098 (after 8.1.2097)
问题:       mksession test fails on MS-Windows.
解决方案:   Skip testing with backslashes on MS-Windows.
文件:       src/testdir/test_mksession.vim

Patch 8.1.2099
问题:       state() test fails on some Mac systems.
解决方案:   Increase the wait time. (closes #4983)
文件:       src/testdir/test_functions.vim

Patch 8.1.2100
问题:       :mksession is not sufficiently tested.
解决方案:   Add more test cases. (Yegappan Lakshmanan, closes #4993)
文件:       src/testdir/test_mksession.vim

Patch 8.1.2101
问题:       write_session_file() often defined but not used.
解决方案:   Adjust the #ifdef. (Yegappan Lakshmanan, closes #4998)
文件:       src/session.c

Patch 8.1.2102
问题:       Can't build with GTK and FEAT_GUI_GNOME. (Tony Mechelynck)
解决方案:   Adjust the #ifdef. (Yegappan Lakshmanan)
文件:       src/session.c

Patch 8.1.2103
问题:       wrong error message if "termdebugger" is not executable.
解决方案:   Check if "termdebugger" is executable and give a clear error
            message. (Ozaki Kiichi, closes #5000)  Fix indents.
文件:       runtime/pack/dist/opt/termdebug/plugin/termdebug.vim

Patch 8.1.2104
问题:       The normal.c file is too big.
解决方案:   Move do_pending_operator() to ops.c. (Yegappan Lakshmanan,
            closes #4999).
文件:       src/normal.c, src/ops.c, src/proto/normal.pro, src/proto/ops.pro,
            src/globals.h

Patch 8.1.2105
问题:       MS-Windows: system() may crash.
解决方案:   Do not use "itmp" when it is NULL. (Yasuhiro Matsumoto,
            closes #5005)
文件:       src/ex_cmds.c

Patch 8.1.2106
问题:       No tests for dragging the mouse beyond the window.
解决方案:   Add a test. (Dominique Pelle, closes #5004)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2107
问题:       Various memory leaks reported by asan.
解决方案:   Free the memory. (Ozaki Kiichi, closes #5003)
文件:       src/buffer.c, src/change.c, src/eval.c, src/evalfunc.c,
            src/option.c, src/popupwin.c, src/proto/change.pro,
            src/scriptfile.c, src/terminal.c, src/testdir/test_method.vim

Patch 8.1.2108
问题:       Cannot close the cmdline window from CmdWinEnter. (George Brown)
解决方案:   Reset cmdwin_result earlier. (Christian Brabandt, closes #4980)
文件:       src/ex_getln.c, src/testdir/test_autocmd.vim

Patch 8.1.2109
问题:       popup_getoptions() hangs with tab-local popup.
解决方案:   Correct pointer name. (Marko Mahnič, closes #5006)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2110
问题:       CTRL-C closes two popups instead of one.
解决方案:   Reset got_int when the filter consumed the key.
文件:       src/getchar.c, src/testdir/test_popupwin.vim

Patch 8.1.2111
问题:       Viminfo file not sufficiently tested.
解决方案:   Add more tests. (Yegappan Lakshmanan, closes #5009)
文件:       src/testdir/test_viminfo.vim

Patch 8.1.2112
问题:       Build number for ConPTY is outdated.
解决方案:   Update to new build number. (Nobuhiro Takasaki, closes #5014)
文件:       src/os_win32.c

Patch 8.1.2113
问题:       ":help expr-!~?" only works after searching.
解决方案:   Escape "~" after "expr-". (closes #5015)
文件:       src/ex_cmds.c, src/testdir/test_help.vim

Patch 8.1.2114
问题:       When a popup is closed with CTRL-C the callback aborts.
解决方案:   Reset got_int when invoking the callback. (closes #5008)
文件:       src/popupwin.c

Patch 8.1.2115
问题:       MS-Windows: shell commands fail if &shell contains a space.
解决方案:   Use quotes instead of escaping. (closes #4920)
文件:       src/option.c, src/os_win32.c, src/testdir/test_startup.vim,
            src/testdir/test_system.vim, src/vimrun.c,

Patch 8.1.2116
问题:       No check for out of memory.
解决方案:   Check for NULL pointer.
文件:       src/option.c

Patch 8.1.2117
问题:       CursorLine highlight used while 'cursorline' is off.
解决方案:   Check 'cursorline' is set. (cloes #5017)
文件:       src/drawline.c, src/testdir/test_cursorline.vim

Patch 8.1.2118
问题:       Termcodes test fails when $TERM is "dumb".
解决方案:   Skip the test. (James McCoy, closes #5019)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2119
问题:       memory access error for empty string when 'encoding' is a single
            byte encoding.
解决方案:   Check for empty string when getting the length. (Dominique Pelle,
            closes #5021, closes #5007)
文件:       src/macros.h

Patch 8.1.2120
问题:       Some MB_ macros are more complicated than necessary. (Dominique
            Pelle)
解决方案:   Simplify the macros.  Expand inline.
文件:       src/macros.h, src/beval.c, src/diff.c src/eval.c src/evalfunc.c
            src/ex_getln.c, src/filepath.c, src/findfile.c, src/getchar.c,
            src/highlight.c, src/ops.c, src/os_mswin.c, src/popupmenu.c,
            src/search.c, src/spell.c, src/spellsuggest.c, src/terminal.c

Patch 8.1.2121
问题:       Mode is not updated when switching to terminal in Insert mode.
解决方案:   Redraw the mode when entering a terminal window. (Jason Franklin)
文件:       src/window.c, src/testdir/test_window_cmd.vim

Patch 8.1.2122 (after 8.1.2121)
问题:       Cannot build without terminal feature.
解决方案:   Add #ifdef.
文件:       src/window.c

Patch 8.1.2123
问题:       Parsing CSI sequence is messy.
解决方案:   Generalize parsing a CSI sequence.
文件:       src/term.c

Patch 8.1.2124
问题:       Ruler is not updated if win_execute() moves cursor.
解决方案:   Update the status line. (closes #5022)
文件:       src/evalwindow.c, src/testdir/test_execute_func.vim

Patch 8.1.2125
问题:       Fnamemodify() fails when repeating :e.
解决方案:   Do not go before the tail. (Rob Pilling, closes #5024)
文件:       src/filepath.c, src/testdir/test_fnamemodify.vim

Patch 8.1.2126
问题:       Viminfo not sufficiently tested.
解决方案:   Add more test cases.  Clean up comments. (Yegappan Lakshmanan,
            closes #5032)
文件:       src/search.c, src/structs.h, src/testdir/test_viminfo.vim,
            src/viminfo.c

Patch 8.1.2127
问题:       The indent.c file is a bit big.
解决方案:   Move C-indent code to a new cindent.c file.  Move other
            indent-related code to indent.c. (Yegappan Lakshmanan,
            closes #5031)
文件:       Filelist, src/Make_cyg_ming.mak, src/Make_morph.mak,
            src/Make_mvc.mak, src/Make_vms.mms, src/Makefile, src/README.md,
            src/change.c, src/cindent.c, src/edit.c, src/evalfunc.c,
            src/ex_cmds.c, src/globals.h, src/indent.c, src/misc1.c,
            src/ops.c, src/proto.h, src/proto/cindent.pro, src/proto/edit.pro,
            src/proto/ex_cmds.pro, src/proto/indent.pro, src/proto/misc1.pro,
            src/proto/ops.pro, src/userfunc.c

Patch 8.1.2128
问题:       Renamed libvterm sources makes merging difficult.
解决方案:   Rename back to the original name and only rename the .o files.
            Also clean the libvterm build artifacts. (James McCoy,
            closes #5027)
文件:       src/libvterm/src/termmouse.c, src/libvterm/src/mouse.c,
	    src/libvterm/src/termscreen.c, src/libvterm/src/screen.c,
            src/Makefile, src/configure.ac, src/auto/configure,
            src/Make_cyg_ming.mak, src/Make_mvc.mak

Patch 8.1.2129
问题:       Using hard coded executable path in test.
解决方案:   Use v:progpath. Use $VIMRUNTIME instead of "runtime". (James
            McCoy, closes #5025)
文件:       src/testdir/test49.vim, src/testdir/test_compiler.vim,
            src/testdir/test_spell.vim

Patch 8.1.2130 (after 8.1.2128)
问题:       MSVC build fails.
解决方案:   Add the source file name explicitly.
文件:       src/Make_mvc.mak

Patch 8.1.2131 (after 8.1.2129)
问题:       MSVC tests fail.
解决方案:   Replace backslashes with slashes.
文件:       src/testdir/test_compiler.vim, src/testdir/test_spell.vim

Patch 8.1.2132
问题:       MS-Windows: screen mess when not recognizing insider build.
解决方案:   Always move the cursor to the first column first. (Nobuhiro
            Takasaki, closes #5036)
文件:       src/os_win32.c

Patch 8.1.2133
问题:       Some tests fail when run as root.
解决方案:   Add CheckNotRoot and use it. (James McCoy, closes #5020)
文件:       src/testdir/check.vim, src/testdir/shared.vim,
            src/testdir/test_rename.vim, src/testdir/test_swap.vim,
            src/testdir/test_terminal.vim, src/testdir/test_viminfo.vim

Patch 8.1.2134
问题:       Modifier keys are not always recognized.
解决方案:   Handle key codes generated by xterm with modifyOtherKeys set.
            Add this to libvterm so we can debug it.
文件:       src/term.c, src/getchar.c, src/libvterm/src/vterm_internal.h,
            src/libvterm/src/state.c, src/libvterm/src/keyboard.c,
            src/libvterm/include/vterm.h, src/globals.h, src/terminal.c

Patch 8.1.2135
问题:       With modifyOtherKeys Alt-a does not work properly.
解决方案:   Remove the ALT modifier.  Get multi-byte after applying ALT.
文件:       src/getchar.c

Patch 8.1.2136
问题:       using freed memory with autocmd from fuzzer. (Dhiraj Mishra,
            Dominique Pelle)
解决方案:   Avoid using "wp" after autocommands. (closes #5041)
文件:       src/window.c, src/testdir/test_autocmd.vim

Patch 8.1.2137
问题:       Parsing the termresponse is not tested.
解决方案:   Add a first test. (related to #5042)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2138
问题:       Including the build number in the Win32 binary is confusing.
解决方案:   Only use the patchlevel.
文件:       src/vim.rc

Patch 8.1.2139
问题:       The modifyOtherKeys codes are not tested.
解决方案:   Add a test case.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2140
问题:       "gk" and "gj" do not work correctly in number column.
解决方案:   Allow for a negative "curswant". (Zach Wegner, closes #4969)
文件:       src/testdir/test_normal.vim, src/misc2.c, src/normal.c

Patch 8.1.2141
问题:       :tselect has an extra hit-enter prompt.
解决方案:   Do not set need_wait_return when only moving the cursor.
            (closes #5040)
文件:       src/message.c, src/testdir/test_tagjump.vim,
            src/testdir/dumps/Test_tselect_1.dump

Patch 8.1.2142
问题:       Some key mappings do not work with modifyOtherKeys.
解决方案:   Remove the Shift modifier if it is already included in the key.
文件:       src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.2143
问题:       Cannot see each command even when 'verbose' is set.
解决方案:   List each command when 'verbose' is at least 16.
文件:       src/ex_docmd.c src/testdir/test_tagjump.vim,
            src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_verbose_option_1.dump

Patch 8.1.2144
问题:       Side effects when using t_ti to enable modifyOtherKeys.
解决方案:   Add t_TI and t_TE.
文件:       runtime/doc/term.txt, src/term.c, src/optiondefs.h, src/term.h,

Patch 8.1.2145
问题:       Cannot map <C-H> when modifyOtherKeys is enabled.
解决方案:   Add the <C-H> mapping twice, both with modifier and as 0x08.  Use
            only the first one when modifyOtherKeys has been detected.
文件:       src/term.c, src/eval.c, src/getchar.c, src/globals.h,
            src/gui_mac.c, src/gui_w32.c, src/highlight.c, src/if_ole.cpp,
            src/main.c, src/map.c, src/menu.c, src/misc2.c, src/option.c,
            src/proto/misc2.pro, src/proto/term.pro,
            src/testdir/test_termcodes.vim, src/structs.h, src/terminal.c,
            src/usercmd.c, src/vim.h

Patch 8.1.2146 (after 8.1.2145)
问题:       Build failure.
解决方案:   Include omitted changed file.
文件:       src/optionstr.c

Patch 8.1.2147
问题:       Crash when allocating memory fails. (Zu-Ming Jiang)
解决方案:   Check that 'spellcapcheck' is not NULL. (closes #5048)
文件:       src/spell.c

Patch 8.1.2148
问题:       No test for right click extending Visual area.
解决方案:   Add a test. (Dominique Pelle, closes #5018)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2149
问题:       Crash when running out of memory very early.
解决方案:   Do not use IObuff when it's NULL. (closes #5052)
文件:       src/message.c

Patch 8.1.2150
问题:       No test for 'ttymouse' set from xterm version response.
解决方案:   Test the three possible values.
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2151
问题:       State test is a bit flaky.
解决方案:   Add to the list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.2152
问题:       Problems navigating tags file on MacOS Catalina.
解决方案:   Use fseek instead of lseek. (John Lamb, fixes #5061)
文件:       src/tag.c

Patch 8.1.2153
问题:       Combining text property and syntax highlight is wrong. (Nick
            Jensen)
解决方案:   Compute the syntax highlight attribute much earlier.
            (closes #5057)
文件:       src/drawline.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_syn_1.dump

Patch 8.1.2154
问题:       Quickfix window height wrong when there is a tabline. (Daniel
            Hahler)
解决方案:   Take the tabline height into account. (closes #5058)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2155
问题:       In a terminal window 'cursorlineopt' does not work properly.
解决方案:   Check the 'cursorlineopt' value. (closes #5055)
文件:       src/drawline.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_normal_1.dump,
            src/testdir/dumps/Test_terminal_normal_2.dump,
            src/testdir/dumps/Test_terminal_normal_3.dump

Patch 8.1.2156
问题:       First character after Tab is not highlighted.
解决方案:   Remember the syntax attribute for a column.
文件:       src/drawline.c, src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2157
问题:       Libvterm source files missing from distribution.
解决方案:   Rename source files. (closes #5065)
文件:       Filelist

Patch 8.1.2158
问题:       Terminal attributes missing in Terminal-normal mode.
解决方案:   Use "syntax_attr".
文件:       src/drawline.c, src/testdir/test_terminal.vim,
            src/testdir/dumps/Test_terminal_dumpload.dump

Patch 8.1.2159
问题:       Some mappings are listed twice.
解决方案:   Skip mappings duplicated for modifyOtherKeys. (closes #5064)
文件:       src/map.c, src/testdir/test_mapping.vim

Patch 8.1.2160
问题:       Cannot build with +syntax but without +terminal.
解决方案:   Add #ifdef.
文件:       src/drawline.c

Patch 8.1.2161
问题:       Mapping test fails.
解决方案:   Run the test separately.
文件:       src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 8.1.2162
问题:       Popup resize test is flaky. (Christian Brabandt)
解决方案:   Add the function to the list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.2163
问题:       Cannot build with +spell but without +syntax.
解决方案:   Add #ifdef. (John Marriott)
文件:       src/drawline.c

Patch 8.1.2164
问题:       Stuck when using "j" in a popupwin with popup_filter_menu if a
            line wraps.
解决方案:   Check the cursor line is visible. (closes #4577)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_wrap_1.dump,
            src/testdir/dumps/Test_popupwin_wrap_2.dump

Patch 8.1.2165
问题:       Mapping test fails on Mac.
解决方案:   Remove the default Mac mapping.
文件:       src/testdir/test_mapping.vim

Patch 8.1.2166
问题:       Rubyeval() not tested as a method.
解决方案:   Change a test case.
文件:       src/testdir/test_ruby.vim

Patch 8.1.2167
问题:       Mapping test fails on MS-Windows.
解决方案:   Remove all the existing Insert-mode mappings.
文件:       src/testdir/test_mapping.vim

Patch 8.1.2168
问题:       Heredoc assignment not skipped in if block.
解决方案:   Check if "skip" is set. (closes #5063)
文件:       src/evalvars.c, src/testdir/test_let.vim

Patch 8.1.2169
问题:       Terminal flags are never reset.
解决方案:   Reset the flags when setting 'term'.
文件:       src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.2170 (after 8.1.2169)
问题:       Cannot build without the +termresponse feature.
解决方案:   Add #ifdef.
文件:       src/term.c

Patch 8.1.2171
问题:       Mouse support not always available.
解决方案:   Enable mouse support also in tiny version.  Do not define
            FEAT_MOUSE_XTERM on MS-Windows (didn't really work).
文件:       src/feature.h, src/edit.c, src/evalfunc.c, src/ex_getln.c,
            src/getchar.c, src/message.c, src/misc1.c, src/mouse.c,
            src/move.c, src/normal.c, src/ops.c, src/option.c,
            src/optionstr.c, src/os_unix.c, src/os_win32.c, src/register.c,
            src/term.c, src/testing.c, src/window.c, src/globals.h,
            src/option.h, src/optiondefs.h, src/os_win32.h, src/vim.h,
            src/version.c

Patch 8.1.2172
问题:       Spell highlight is wrong at start of the line.
解决方案:   Fix setting the "v" variable. (closes #5078)
文件:       src/drawline.c, src/testdir/test_spell.vim,
            src/testdir/dumps/Test_spell_1.dump

Patch 8.1.2173
问题:       Searchit() has too many arguments.
解决方案:   Move optional arguments to a struct.  Add the "wrapped" argument.
文件:       src/search.c, src/proto/search.pro, src/structs.h, src/evalfunc.c,
            src/ex_docmd.c, src/gui.c, src/quickfix.c, src/spell.c, src/tag.c,
            src/ex_getln.c, src/insexpand.c, src/normal.c

Patch 8.1.2174
问题:       Screen not recognized as supporting "sgr" mouse codes.
解决方案:   Recognize screen 4.7. (Jordan Christiansen, closes #5042)
文件:       src/term.c, src/testdir/test_termcodes.vim

Patch 8.1.2175
问题:       Meson files are not recognized.
解决方案:   Add the meson filetype. (Liam Beguin, Nirbheek Chauhan,
            closes #5056)  Also recognize hollywood.
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2176
问题:       Syntax attributes not combined with Visual highlighting. (Arseny
            Nasokin)
解决方案:   Combine the attributes. (closes #5083)
文件:       src/drawline.c, src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2177
问题:       Dart files are not recognized.
解决方案:   Add a filetype rule. (Eugene Ciurana, closes #5087)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2178
问题:       Accessing uninitialized memory in test.
解决方案:   Check if there was a match before using the match position.
            (Dominique Pelle, closes #5088)
文件:       src/search.c

Patch 8.1.2179
问题:       Pressing "q" at the more prompt doesn't stop Python output. (Daniel
            Hahler)
解决方案:   Check for got_int in writer(). (closes #5053)
            Also do this for Lua.
文件:       src/if_py_both.h, src/if_lua.c

Patch 8.1.2180
问题:       Error E303 is not useful when 'directory' is empty.
解决方案:   Skip the error message. (Daniel Hahler, #5067)
文件:       src/memline.c, src/testdir/test_recover.vim,
            runtime/doc/options.txt, runtime/doc/message.txt

Patch 8.1.2181
问题:       Highlighting wrong when item follows tab.
解决方案:   Don't use syntax attribute when n_extra is non-zero.
            (Christian Brabandt, closes #5076)
文件:       src/drawline.c, src/feature.h,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2182
问题:       Test42 seen as binary by git diff.
解决方案:   Add .gitattributes file.  Make explicit that 'cpo' does not
            contain 'S'. (Daniel Hahler, closes #5072)
文件:       .gitattributes, Filelist, src/testdir/test42.in

Patch 8.1.2183
问题:       Running a test is a bit verbose.
解决方案:   Silence some messages. (Daniel Hahler, closes #5070)
文件:       src/testdir/Makefile

Patch 8.1.2184
问题:       Option context is not copied when splitting a window. (Daniel
            Hahler)
解决方案:   Copy the option context, so that ":verbose set" works.
            (closes #5066)
文件:       src/option.c, src/testdir/test_options.vim

Patch 8.1.2185 (after 8.1.2181)
问题:       Syntax test fails.
解决方案:   Add missing file patch.
文件:       src/testdir/test_syntax.vim

Patch 8.1.2186 (after 8.1.2184)
问题:       Cannot build without the +eval feature.
解决方案:   Move line inside #ifdef.
文件:       src/option.c

Patch 8.1.2187
问题:       Error for bad regexp even though regexp is not used when writing
            a file. (Arseny Nasokin)
解决方案:   Ignore regexp errors. (closes #5059)
文件:       src/cmdexpand.c, src/ex_docmd.c, src/testdir/test_writefile.vim

Patch 8.1.2188 (after 8.1.2187)
问题:       Build error for missing define.
解决方案:   Add missing change.
文件:       src/vim.h

Patch 8.1.2189
问题:       Syntax highlighting wrong for tab.
解决方案:   Don't clear syntax attribute n_extra is non-zero.
文件:       src/drawline.c, src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2190
问题:       Syntax test fails on Mac.
解决方案:   Limit the window size to 20 rows.
文件:       src/testdir/test_syntax.vim,
            src/testdir/dumps/Test_syntax_c_01.dump

Patch 8.1.2191
问题:       When using modifyOtherKeys CTRL-X mode may not work.
解决方案:   Recognize a control character also in the form with a modifier.
文件:       src/getchar.c

Patch 8.1.2192
问题:       Cannot easily fill the info popup asynchronously.
解决方案:   Add the "popuphidden" value to 'completeopt'. (closes #4924)
文件:       src/popupmenu.c, src/proto/popupmenu.pro, src/popupwin.c,
            src/proto/popupwin.pro, src/vim.h, runtime/doc/options.txt,
            runtime/doc/insert.txt, src/ex_cmds.c, src/proto/ex_cmds.pro,
            src/optionstr.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_hidden_1.dump,
            src/testdir/dumps/Test_popupwin_infopopup_hidden_2.dump,
            src/testdir/dumps/Test_popupwin_infopopup_hidden_3.dump

Patch 8.1.2193
问题:       Popup_setoptions(popup_getoptions()) does not work.
解决方案:   Also accept a list with three entries for "moved" and
            "mousemoved". (closes #5081)
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.2194
问题:       ModifyOtherKeys is not enabled by default.
解决方案:   Add t_TI and t_TE to the builtin xterm termcap.
文件:       runtime/doc/map.txt, src/term.c

Patch 8.1.2195
问题:       Vim does not exit when closing a terminal window and it is the
            last window.
解决方案:   Exit Vim if the closed terminal window is the last one.
            (closes #4539)
文件:       runtime/doc/terminal.txt, src/terminal.c, src/ex_docmd.c,
            src/proto/ex_docmd.pro, src/testdir/test_terminal.vim

Patch 8.1.2196
问题:       MS-Windows: running tests with MSVC lacks updates.
解决方案:   Improve running individual tests on MS-Windows. (closes #4922)
文件:       src/Make_mvc.mak, src/testdir/Make_dos.mak

Patch 8.1.2197
问题:       ExitPre autocommand may cause accessing freed memory.
解决方案:   Check the window pointer is still valid. (closes #5093)
文件:       src/testdir/test_exit.vim, src/ex_docmd.c

Patch 8.1.2198
问题:       Crash when using :center in autocommand.
解决方案:   Bail out early for an empty line. (Dominique Pelle, closes #5095)
文件:       src/ex_cmds.c, src/testdir/test_textformat.vim

Patch 8.1.2199
问题:       Build failure when using normal features without GUI and EXITFREE
            defined.
解决方案:   Add #ifdef. (Dominique Pelle, closes #5106)
文件:       src/scriptfile.c

Patch 8.1.2200
问题:       Crash when memory allocation fails.
解决方案:   Check for NULL curwin and curbuf. (Christian Brabandt,
            closes #4839)
文件:       src/getchar.c

Patch 8.1.2201
问题:       Cannot build with dynamically linked Python 3.8.
解决方案:   Implement py3__Py_DECREF() and py3__Py_XDECREF(). (Ken Takata,
            closes #4080)
文件:       src/if_python3.c

Patch 8.1.2202
问题:       MS-Windows: build failure with GUI and small features.
解决方案:   Add #ifdef. (Michael Soyka, closes #5097)
文件:       src/gui_w32.c

Patch 8.1.2203
问题:       Running libvterm tests without the +terminal feature.
解决方案:   Only add the libvterm test target when building libvterm.
文件:       src/configure.ac, src/auto/configure, src/config.mk.in,
            src/Makefile

Patch 8.1.2204
问题:       Crash on exit when closing terminals. (Corey Hickey)
解决方案:   Actually wait for the job to stop. (closes #5100)
文件:       src/terminal.c

Patch 8.1.2205
问题:       Sign entry structure has confusing name.
解决方案:   Rename signlist_T to sign_entry_T and prefix se_ to the fields.
文件:       src/structs.h, src/netbeans.c, src/sign.c, src/globals.h,
            src/drawline.c

Patch 8.1.2206
问题:       No test for fixed issue #3893.
解决方案:   Add a test. (Christian Brabandt, #3893)
文件:       src/testdir/test_display.vim,
            src/testdir/dumps/Test_winline_rnu.dump

Patch 8.1.2207
问题:       "gn" doesn't work quite right. (Jaehwang Jerry Jung)
解决方案:   Improve and simplify the search logic. (Christian Brabandt,
            closes #5103, closes #5075)
文件:       src/search.c, src/testdir/test_gn.vim

Patch 8.1.2208
问题:       Unix: Tabs in output might be expanded to spaces.
解决方案:   Reset the XTABS flag. (closes #5108)
文件:       src/os_unix.c

Patch 8.1.2209
问题:       LF in escape codes may be expanded to CR-LF.
解决方案:   Do not expand LF in escape codes to CR-LF. (closes #5107)
文件:       src/term.c

Patch 8.1.2210
问题:       Using negative offset for popup_create() does not work.
解决方案:   Use -1 instead of zero. (closes #5111)
文件:       src/popupwin.c, src/popupwin.vim, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_corners.dump

Patch 8.1.2211
问题:       Listener callback "added" argument is not the total. (Andy
            Massimino)
解决方案:   Compute the total. (closes #5105)
文件:       src/change.c, src/testdir/test_listener.vim

Patch 8.1.2212
问题:       Cannot see the selection type in :reg output. (Ayberk Aydın)
解决方案:   Add c/l/b. (Christian Brabandt, closes #5110, closes #4546)
文件:       runtime/doc/change.txt, src/register.c,
            src/testdir/test_registers.vim

Patch 8.1.2213
问题:       Popup_textprop tests fail.
解决方案:   Adjust the column and line positioning.
文件:       src/popupwin.c

Patch 8.1.2214
问题:       Too much is redrawn when 'cursorline' is set.
解决方案:   Don't do a complete redraw. (closes #5079)
文件:       src/main.c, src/change.c, src/drawscreen.c,
            src/testdir/dumps/Test_Xcursorline_13.dump,
            src/testdir/dumps/Test_Xcursorline_14.dump,
            src/testdir/dumps/Test_Xcursorline_15.dump,
            src/testdir/dumps/Test_Xcursorline_16.dump,
            src/testdir/dumps/Test_Xcursorline_17.dump,
            src/testdir/dumps/Test_Xcursorline_18.dump

Patch 8.1.2215
问题:       Unreachable code in adjusting text prop columns.
解决方案:   Remove the code. (Christian Brabandt)
文件:       src/textprop.c

Patch 8.1.2216
问题:       Text property in wrong place after :substitute.
解决方案:   Pass the new column instead of the old one. (Christian Brabandt,
            closes #4427)
文件:       src/ex_cmds.c, src/testdir/test_textprop.vim

Patch 8.1.2217
问题:       Compiler warning for unused variable.
解决方案:   Move variable inside #ifdef. (John Marriott)
文件:       src/ex_cmds.c

Patch 8.1.2218
问题:       "gN" is off by one in Visual mode.
解决方案:   Check moving forward. (Christian Brabandt, #5075)
文件:       src/search.c, src/testdir/test_gn.vim

Patch 8.1.2219
问题:       No autocommand for open window with terminal.
解决方案:   Add TerminalWinOpen. (Christian Brabandt)
文件:       runtime/doc/autocmd.txt, src/autocmd.c, src/terminal.c,
            src/testdir/test_terminal.vim, src/vim.h

Patch 8.1.2220
问题:       :cfile does not abort like other quickfix commands.
解决方案:   Abort when desired. Add tests for aborting. (Yegappan Lakshmanan,
            closes #5121)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2221
问题:       Cannot filter :disp output.
解决方案:   Support filtering :disp output. (Andy Massimino, closes #5117)
文件:       runtime/doc/various.txt, src/register.c,
            src/testdir/test_filter_cmd.vim

Patch 8.1.2222
问题:       Accessing invalid memory. (Dominique Pelle)
解决方案:   Reset highlight_match every time.  (closes #5125)
文件:       src/ex_getln.c

Patch 8.1.2223
问题:       Cannot see what buffer an ml_get error is for.
解决方案:   Add the buffer number and name in the message
文件:       src/memline.c

Patch 8.1.2224
问题:       Cannot build Amiga version.
解决方案:   Add dummy mch_setmouse(). (Ola Söder, closes #5126)
文件:       src/os_amiga.c, src/proto/os_amiga.pro

Patch 8.1.2225
问题:       The "last used" info of a buffer is under used.
解决方案:   Add "lastused" to getbufinfo(). List buffers sorted by last-used
            field. (Andy Massimino, closes #4722)
文件:       runtime/doc/eval.txt, runtime/doc/options.txt,
            runtime/doc/windows.txt, src/buffer.c, src/evalbuffer.c,
            src/ex_getln.c, src/misc1.c, src/option.c, src/option.h,
            src/proto/misc1.pro, src/proto/viminfo.pro,
            src/testdir/test_bufwintabinfo.vim, src/testdir/test_cmdline.vim,
            src/testdir/test_excmd.vim, src/undo.c, src/vim.h, src/viminfo.c

Patch 8.1.2226
问题:       Cannot use system copy/paste in non-xterm terminals.
解决方案:   Instead of setting 'mouse' to "a" set it to "nvi" in defaults.vim.
文件:       runtime/defaults.vim, runtime/doc/term.txt,
            runtime/doc/options.txt

Patch 8.1.2227
问题:       Layout wrong if 'lines' changes while cmdline window is open.
解决方案:   Do not restore the window layout if 'lines' changed.
            (closes #5130)
文件:       src/window.c, src/testdir/test_cmdline.vim,
            src/testdir/dumps/Test_cmdwin_restore_1.dump,
            src/testdir/dumps/Test_cmdwin_restore_2.dump,
            src/testdir/dumps/Test_cmdwin_restore_3.dump

Patch 8.1.2228
问题:       screenpos() returns wrong values when 'number' is set. (Ben
            Jackson)
解决方案:   Compare the column with the window width. (closes #5133)
文件:       src/move.c, src/testdir/test_cursor_func.vim

Patch 8.1.2229
问题:       Cannot color number column above/below cursor differently.
解决方案:   Add LineNrAbove and LineNrBelow. (Shaun Brady, closes #624)
文件:       runtime/doc/syntax.txt, runtime/doc/options.txt, src/optiondefs.h,
            src/drawline.c, src/vim.h, src/testdir/test_number.vim,
            src/testdir/dumps/Test_relnr_colors_1.dump,
            src/testdir/dumps/Test_relnr_colors_2.dump,
            src/testdir/dumps/Test_relnr_colors_3.dump,
            src/testdir/dumps/Test_relnr_colors_4.dump

Patch 8.1.2230
问题:       MS-Windows: testing external commands can be improved.
解决方案:   Adjust tests, remove duplicate test. (closes #4928)
文件:       src/testdir/test_normal.vim, src/testdir/test_system.vim,
            src/testdir/test_terminal.vim, src/testdir/test_undo.vim

Patch 8.1.2231
问题:       Not easy to move to the middle of a text line.
解决方案:   Add the gM command. (Yasuhiro Matsumoto, closes #2070)
文件:       runtime/doc/index.txt, runtime/doc/motion.txt,
            runtime/doc/quickref.txt, runtime/doc/usr_25.txt, src/normal.c,
            src/testdir/test_normal.vim

Patch 8.1.2232
问题:       MS-Windows: compiler warning for int size.
解决方案:   Add type cast. (Mike Williams)
文件:       src/normal.c

Patch 8.1.2233
问题:       Cannot get the Vim command line arguments.
解决方案:   Add v:argv. (Dmitri Vereshchagin, closes #1322)
文件:       runtime/doc/eval.txt, src/evalvars.c, src/vim.h,
            src/proto/evalvars.pro, src/main.c, src/testdir/test_startup.vim

Patch 8.1.2234
问题:       get_short_pathname() fails depending on encoding.
解决方案:   Use the wide version of the library function. (closes #5129)
文件:       src/filepath.c, src/testdir/test_shortpathname.vim

Patch 8.1.2235
问题:       "C" with 'virtualedit' set does not include multi-byte char.
解决方案:   Include the whole multi-byte char. (Nobuhiro Takasaki,
            closes #5152)
文件:       src/ops.c, src/testdir/test_virtualedit.vim

Patch 8.1.2236
问题:       Ml_get error if pattern matches beyond last line.
解决方案:   Adjust position if needed. (Christian Brabandt, closes #5139)
文件:       src/ex_cmds.c, src/testdir/test_substitute.vim

Patch 8.1.2237
问题:       Mode() result after using "r" depends on whether CURSOR_SHAPE is
            defined. (Christian Brabandt)
解决方案:   Move the #ifdef to only skip ui_cursor_shape().
文件:       src/normal.c

Patch 8.1.2238
问题:       Error in docs tags goes unnoticed.
解决方案:   Adjust tags build command. (Ken Takata, closes #5158)
文件:       Filelist, .travis.yml, runtime/doc/Makefile,
            runtime/doc/doctags.vim

Patch 8.1.2239
问题:       CI fails when running tests without building Vim.
解决方案:   Skip creating doc tags if the execute does not exist.
文件:       runtime/doc/Makefile

Patch 8.1.2240
问题:       Popup window width changes when scrolling.
解决方案:   Also adjust maxwidth when applying minwidth and there is a
            scrollbar.  Fix off-by-one error. (closes #5162)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_scroll_11.dump,
            src/testdir/dumps/Test_popupwin_scroll_12.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_4.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_5.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_7.dump,
            src/testdir/dumps/Test_popupwin_previewpopup_8.dump,

Patch 8.1.2241
问题:       Match highlight does not combine with 'wincolor'.
解决方案:   Apply 'wincolor' last on top of any other attribute. (closes #5159)
文件:       src/drawline.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_matches.dump
            src/testdir/dumps/Test_popupwin_menu_01.dump
            src/testdir/dumps/Test_popupwin_menu_02.dump
            src/testdir/dumps/Test_popupwin_menu_04.dump

Patch 8.1.2242
问题:       Creating docs tags uses user preferences. (Tony Mechelynck)
解决方案:   Add "--clean".
文件:       runtime/doc/Makefile

Patch 8.1.2243
问题:       Typos in comments.
解决方案:   Fix the typos. (Dominique Pelle, closes #5160)  Also adjust
            formatting a bit.
文件:       src/autocmd.c, src/buffer.c, src/cindent.c, src/crypt.c,
            src/diff.c, src/getchar.c, src/globals.h, src/gui_gtk_x11.c,
            src/highlight.c, src/insexpand.c, src/macros.h, src/map.c,
            src/memline.c, src/message.c, src/option.c, src/os_unix.c,
            src/pty.c, src/quickfix.c, src/regexp_nfa.c, src/register.c,
            src/spellsuggest.c, src/structs.h, src/textprop.c, src/ui.c,
            src/undo.c, src/vim.h, src/viminfo.c

Patch 8.1.2244
问题:       'wrapscan' is not used for "gn".
解决方案:   Only reset 'wrapscan' for the first search round. (closes #5164)
文件:       src/search.c, src/testdir/test_gn.vim

Patch 8.1.2245
问题:       Third character of 'listchars' tab shows in wrong place when
            'breakindent' is set.
解决方案:   Set c_final to NUL. (Naruhiko Nishino, closes #5165)
文件:       src/drawline.c, src/testdir/test_breakindent.vim

Patch 8.1.2246
问题:       Some tests are still in old style.
解决方案:   Change a few tests to new style. (Yegappan Lakshmanan)
文件:       src/testdir/Make_all.mak, src/testdir/test49.ok,
            src/testdir/test49.vim, src/testdir/test_trycatch.vim,
            src/testdir/test_vimscript.vim

Patch 8.1.2247
问题:       "make vimtags" does not work in runtime/doc.
解决方案:   Test existence with "which" instead of "test -x". (Ken Takata)
文件:       runtime/doc/Makefile

Patch 8.1.2248
问题:       CTRL-W dot does not work in a terminal when modifyOtherKeys is
            enabled.
解决方案:   Use the modifier when needed.  Pass the modifier along with the
            key to avoid mistakes.
文件:       src/terminal.c, src/proto/terminal.pro, src/mouse.c

Patch 8.1.2249
问题:       "make vimtags" does not print any message.
解决方案:   Add a message that the tags have been updated.
文件:       runtime/doc/Makefile

Patch 8.1.2250
问题:       CTRL-U and CTRL-D don't work in popup window.
解决方案:   Initialize 'scroll'.  Add "lastline" in popup_getpos().
            (closes #5170)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            runtime/doc/popup.txt

Patch 8.1.2251
问题:       ":term command" may not work without a shell.
解决方案:   Add the ++shell option to :term. (closes #3340)
文件:       runtime/doc/terminal.txt, src/terminal.c,
            src/os_unix.c, src/proto/os_unix.pro,
            src/testdir/test_terminal.vim

Patch 8.1.2252
问题:       Compiler warning for int size.
解决方案:   Add type cast. (Mike Williams)
文件:       src/filepath.c

Patch 8.1.2253
问题:       Using "which" to check for an executable is not reliable.
解决方案:   Use "command -v" instead.  Also exit with error code when
            generating tags has an error. (closes #5174)
文件:       runtime/doc/Makefile

Patch 8.1.2254
问题:       MS-Windows: mouse scroll wheel doesn't work in popup.
解决方案:   Handle mouse wheel events separately. (closes #5138)
文件:       src/gui_w32.c, src/gui.c, src/proto/gui.pro

Patch 8.1.2255
问题:       ":term ++shell" does not work on MS-Windows.
解决方案:   Add MS-Windows support.
文件:       src/terminal.c, src/testdir/test_terminal.vim

Patch 8.1.2256 (after 8.1.2255)
问题:       Test for ":term ++shell" fails on MS-Windows.
解决方案:   Accept failure of "dir" executable.
文件:       src/testdir/test_terminal.vim

Patch 8.1.2257
问题:       MS-Windows GUI: scroll wheel always uses current window.
解决方案:   Add the 'scrollfocus' option for MS-Windows.
文件:       runtime/doc/options.txt, src/gui_w32.c, src/optiondefs.h,
            src/option.h

Patch 8.1.2258
问题:       May get hit-enter prompt after entering a number. (Malcolm Rowe)
解决方案:   Put back accidentally deleted lines. (closes #5176)
文件:       src/misc1.c

Patch 8.1.2259
问题:       Running tests may leave XfakeHOME behind.
解决方案:   Source summarize.vim without using setup.vim. (closes #5177)
            Also fix that on MS-Windows the test log isn't echoed.
文件:       src/testdir/Makefile, src/testdir/Make_dos.mak

Patch 8.1.2260
问题:       Terminal test may fail on MS-Windows.
解决方案:   Catch the situation that "term dir" fails with a CreateProcess
            error.
文件:       src/testdir/test_terminal.vim

Patch 8.1.2261
问题:       With modifyOtherKeys set 'noesckeys' doesn't work. (James McCoy)
解决方案:   Disable modifyOtherKeys while in Insert mode when 'noesckeys' is
            set. (closes #5180)
文件:       src/edit.c, src/testdir/test_edit.vim

Patch 8.1.2262
问题:       Unpack assignment in function not recognized.
解决方案:   Skip over "[a, b]". (closes #5051)
文件:       src/userfunc.c, src/testdir/test_let.vim

Patch 8.1.2263
问题:       'noesckeys' test fails in GUI.
解决方案:   Skip the test in the GUI.
文件:       src/testdir/test_edit.vim

Patch 8.1.2264
问题:       There are two test files for :let.
解决方案:   Merge the two files.
文件:       src/testdir/test_assign.vim, src/testdir/test_let.vim,
            src/testdir/Make_all.mak, src/testdir/test_alot.vim

Patch 8.1.2265
问题:       When popup with "botleft" does not fit it flips incorrectly.
解决方案:   Only flip when there is more space on the other side.  Add the
            "posinvert" option to disable flipping and do it in both
            directions if enabled.  (closes #5151)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim, src/vim.h,
            src/testdir/dumps/Test_popupwin_nospace.dump

Patch 8.1.2266
问题:       Position unknown for a mouse click in a popup window.
解决方案:   Set v:mouse_col and v:mouse_lnum. (closes #5171)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2267
问题:       Compiler warning for uninitialized variable. (Tony Mechelynck)
解决方案:   Rearrange the code.
文件:       src/buffer.c

Patch 8.1.2268
问题:       Spell file flag zero is not recognized.
解决方案:   Use -1 as an error value, so that zero can be used as a valid flag
            number.
文件:       src/spellfile.c, src/testdir/test_spell.vim

Patch 8.1.2269
问题:       Tags file with very long line stops using binary search.
解决方案:   Reallocate the buffer if needed.
文件:       src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.2270
问题:       "gf" is not tested in Visual mode.
解决方案:   Add Visual mode test and test errors. (Dominique Pelle,
            closes #5197)
文件:       src/testdir/test_gf.vim

Patch 8.1.2271
问题:       Build error if FEAT_TAG_BINS is not defined. (John Marriott)
解决方案:   Add #ifdef.
文件:       src/tag.c

Patch 8.1.2272
问题:       Test may hang at more prompt.
解决方案:   Reset 'more' after resetting 'compatible'. (Michael Soyka)
文件:       src/testdir/test_vimscript.vim

Patch 8.1.2273
问题:       Wrong default when "pos" is changed with popup_atcursor().
解决方案:   Adjust the default line and col when "pos" is not the default
            value. (#5151)
文件:       runtime/doc/popup.txt, src/structs.h, src/popupwin.c,
            src/proto/popupwin.pro, src/ex_cmds.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_atcursor_pos.dump

Patch 8.1.2274
问题:       Newlines in 'balloonexpr' result only work in the GUI.
解决方案:   Also recognize newlines in the terminal. (closes #5193)
文件:       src/popupmenu.c, src/testdir/test_balloon.vim,
            src/testdir/dumps/Test_balloon_eval_term_01.dump,
            src/testdir/dumps/Test_balloon_eval_term_01a.dump,
            src/testdir/dumps/Test_balloon_eval_term_02.dump

Patch 8.1.2275
问题:       Using "seesion" looks like a mistake.
解决方案:   Use an underscore to make the function sort first.
文件:       src/testdir/test_mksession.vim

Patch 8.1.2276
问题:       MS-Windows: session test leaves files behind.
解决方案:   Wipe out buffers before deleting the directory. (closes #5187)
文件:       src/testdir/test_mksession.vim

Patch 8.1.2277
问题:       Terminal window is not updated when info popup changes.
解决方案:   Redraw windows when re-using an info popup. (closes #5192)
文件:       src/ex_cmds.c

Patch 8.1.2278
问题:       Using "cd" with "exe" may fail.
解决方案:   Use chdir() instead.
文件:       src/testdir/test_autochdir.vim, src/testdir/test_autocmd.vim,
            src/testdir/test_cd.vim, src/testdir/test_expand.vim,
            src/testdir/test_find_complete.vim, src/testdir/test_findfile.vim,
            src/testdir/test_getcwd.vim, src/testdir/test_shortpathname.vim

Patch 8.1.2279
问题:       Computation of highlight attributes is too complicated.
解决方案:   Simplify the attribute computation and make it more consistent.
            (closes #5190)  Fix that 'combine' set to zero doesn't work.
文件:       src/drawline.c, src/testdir/test_textprop.vim,
            src/testdir/dumps/Test_textprop_01.dump

Patch 8.1.2280
问题:       Crash when passing partial to substitute().
解决方案:   Take extra arguments into account. (closes #5186)
文件:       src/userfunc.c, src/structs.h, src/regexp.c, src/proto/regexp.pro,
            src/testdir/test_substitute.vim

Patch 8.1.2281
问题:       'showbreak' cannot be set for one window.
解决方案:   Make 'showbreak' global-local.
文件:       src/optiondefs.h, src/option.c, src/option.h,
            src/proto/option.pro, src/structs.h, src/charset.c,
            src/drawline.c, src/edit.c, src/move.c, src/normal.c, src/ops.c,
            src/optionstr.c, src/testdir/test_highlight.vim,
            src/testdir/test_breakindent.vim, runtime/doc/options.txt

Patch 8.1.2282
问题:       Crash when passing many arguments through a partial. (Andy
            Massimino)
解决方案:   Check the number of arguments. (closes #5186)
文件:       src/userfunc.c, src/proto/userfunc.pro, src/evalfunc.c,
            src/regexp.c, src/testdir/test_expr.vim,
            src/testdir/test_substitute.vim

Patch 8.1.2283
问题:       Missed one use of p_sbr.
解决方案:   Add missing p_sbr change.
文件:       src/indent.c

Patch 8.1.2284
问题:       Compiler warning for unused variable. (Tony Mechelynck)
解决方案:   Add #ifdef.
文件:       src/move.c

Patch 8.1.2285
问题:       Padding in structures wastes memory.
解决方案:   Move fields to avoid padding. (Dominique Pelle, closes #5202)
文件:       src/structs.h

Patch 8.1.2286
问题:       Using border highlight in popup window leaks memory.
解决方案:   Free memory before overwriting. (Dominique Pelle, closes #5203)
文件:       src/popupwin.c

Patch 8.1.2287
问题:       Using EndOfBuffer highlight in popup does not look good.
解决方案:   Do not EndOfBuffer highlight. (closes #5204)
文件:       src/drawscreen.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_02.dump,
            src/testdir/dumps/Test_popupwin_04.dump,
            src/testdir/dumps/Test_popupwin_04a.dump,
            src/testdir/dumps/Test_popupwin_05.dump,
            src/testdir/dumps/Test_popupwin_06.dump,
            src/testdir/dumps/Test_popupwin_07.dump,
            src/testdir/dumps/Test_popupwin_08.dump

Patch 8.1.2288
问题:       Not using all space when popup with "topleft" flips to above.
解决方案:   Recompute the height when a popup flips from below to above.
            (closes #5151)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_nospace.dump

Patch 8.1.2289
问题:       After :diffsplit closing the window does not disable diff.
解决方案:   Add "closeoff" to 'diffopt' and add it to the default.
文件:       runtime/doc/options.txt, src/optiondefs.h, src/diff.c,
            src/proto/diff.pro, src/window.c, src/testdir/test_diffmode.vim

Patch 8.1.2290
问题:       Autocommand test fails.
解决方案:   Remove 'closeoff' from 'diffopt'.
文件:       src/testdir/test_autocmd.vim

Patch 8.1.2291
问题:       Memory leak when executing command in a terminal.
解决方案:   Free "argv". (Dominique Pelle, closes #5208)
文件:       src/terminal.c

Patch 8.1.2292
问题:       v:mouse_winid not set on click in popup window.
解决方案:   Set v:mouse_winid. (closes #5171)
文件:       runtime/doc/popup.txt, src/popupwin.c,
            src/testdir/test_popupwin.vim

Patch 8.1.2293
问题:       Join adds trailing space when second line is empty. (Brennan
            Vincent)
解决方案:   Do not add a trailing space.
文件:       src/ops.c, src/testdir/test_join.vim

Patch 8.1.2294
问题:       Cursor position wrong when characters are concealed and a search
            causes a scroll.
解决方案:   Fix the cursor column in a concealed line after window scroll.
            (closes #5215, closes #5012)
文件:       src/drawscreen.c, src/testdir/test_matchadd_conceal.vim

Patch 8.1.2295
问题:       If buffer of popup is in another window cursorline sign shows.
解决方案:   Check the group of the sign.
文件:       src/option.c, src/proto/option.pro, src/sign.c,
            src/proto/sign.pro, src/screen.c, src/drawline.c,
            src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_cursorline_8.dump

Patch 8.1.2296
问题:       Text properties are not combined with syntax by default.
解决方案:   Make it work as documented. (closes #5190)
文件:       src/testprop.c, src/testdir/test_textprop.vim

Patch 8.1.2297
问题:       The ex_vimgrep() function is too long.
解决方案:   Split it in three parts. (Yegappan Lakshmanan, closes #5211)
文件:       src/quickfix.c

Patch 8.1.2298 (after 8.1.2296)
问题:       Missing part of 8.1.2296.
解决方案:   s/test/text/
文件:       src/textprop.c

Patch 8.1.2299
问题:       ConPTY in MS-Windows 1909 is still wrong.
解决方案:   Use same solution as for 1903. (Nobuhiro Takasaki, closes #5217)
文件:       src/misc2.c, src/os_win32.c

Patch 8.1.2300
问题:       Redraw breaks going through list of popup windows.
解决方案:   Use different flags for popup_reset_handled(). (closes #5216)
文件:       src/popupwin.c, src/proto/popupwin.pro, src/structs.h, src/vim.h,
            src/mouse.c, src/testdir/test_popupwin.vim

Patch 8.1.2301
问题:       MS-Windows GUI: drawing error when background color changes.
解决方案:   Implement gui_mch_new_colors(). (Simon Sadler)
文件:       src/gui_w32.c

Patch 8.1.2302
问题:       :lockmarks does not work for '[ and '].
解决方案:   save and restore '[ and '] marks. (James McCoy, closes #5222)
文件:       runtime/doc/motion.txt, src/bufwrite.c, src/diff.c, src/ex_cmds.c,
            src/fileio.c, src/indent.c, src/ops.c, src/register.c,
            src/testdir/test_autocmd.vim, src/testdir/test_diffmode.vim

Patch 8.1.2303
问题:       Cursor in wrong position after horizontal scroll.
解决方案:   Set w_valid_leftcol.  (closes #5214, closes #5224)
文件:       src/move.c, src/testdir/test_matchadd_conceal.vim

Patch 8.1.2304
问题:       Cannot get the mouse position when getting a mouse click.
解决方案:   Add getmousepos().
文件:       runtime/doc/eval.txt, runtime/doc/popup.txt, src/mouse.c
            src/proto/mouse.pro, src/evalfunc.c, src/popupwin.c,
            src/popupwin.pro, src/testdir/test_popupwin.vim,
            src/testdir/test_functions.vim

Patch 8.1.2305
问题:       No warning for wrong entry in translations.
解决方案:   Check semicolons in keywords entry of desktop file.
文件:       src/po/check.vim

Patch 8.1.2306
问题:       Double and triple clicks are not tested.
解决方案:   Test mouse clicks to select text. (closes #5226)
文件:       src/testdir/test_termcodes.vim

Patch 8.1.2307
问题:       Positioning popup doesn't work for buffer-local textprop.
解决方案:   Make it work. (closes #5225)
文件:       src/popupwin.c, src/testdir/test_popupwin_textprop.vim

Patch 8.1.2308
问题:       Deleting text before zero-width textprop removes it.
解决方案:   Keep zero-width textprop when deleting text.
文件:       src/textprop.c, src/testdir/test_textprop.vim

Patch 8.1.2309
问题:       Compiler warning for argument type.
解决方案:   Use linenr_T and cast to varnumber_T. (John Marriott)
文件:       src/mouse.c

Patch 8.1.2310
问题:       No proper test for directory changes in quickfix.
解决方案:   Add a test that uses multiple directories. (Yegappan Lakshmanan,
            closes #5230)
文件:       src/testdir/test_quickfix.vim

Patch 8.1.2311
问题:       Warning for missing function prototype.
解决方案:   Add the proto. (Dominique Pelle, closes #5233)
文件:       src/proto/popupwin.pro

Patch 8.1.2312
问题:       "line:" field in tags file not used.
解决方案:   Recognize the field and use the value. (Andy Massimino, Daniel
            Hahler, closes #5232, closes #2546, closes #1057)
文件:       src/tag.c, src/testdir/test_tagjump.vim

Patch 8.1.2313
问题:       Debugging where a delay comes from is not easy.
解决方案:   Use different values when calling ui_delay().
文件:       src/buffer.c, src/change.c, src/fileio.c, src/gui.c,
            src/if_xcmdsrv.c, src/insexpand.c, src/main.c, src/normal.c,
            src/screen.c, src/search.c, src/tag.c, src/term.c, src/ui.c

Patch 8.1.2314
问题:       vi' sometimes does not select anything.
解决方案:   Recognize an empty selection. (Christian Brabandt, closes #5183)
文件:       src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.2315
问题:       Not always using the right window when jumping to an error.
解决方案:   Add the "uselast" flag in 'switchbuf'. (closes #1652)
文件:       runtime/doc/options.txt, src/option.h, src/optionstr.c,
            src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2316
问题:       FORTIFY_SOURCE can also be present in CPPFLAGS.
解决方案:   Remove it in configure. (Benedikt Morbach, closes #2786)
文件:       src/configure.ac, src/auto/configure

Patch 8.1.2317
问题:       No test for spell affix file with flag on suffix.
解决方案:   Add a test case.
文件:       src/testdir/test_spell.vim

Patch 8.1.2318 (after 8.1.2301)
问题:       MS-Windows GUI: main background shows in toolbar.
解决方案:   Remove transparency from the toolbar. (Simon Sadler)
文件:       src/gui_w32.c

Patch 8.1.2319
问题:       Compiler warning for int size.
解决方案:   Add typecast. (Mike Williams)
文件:       src/mouse.c

Patch 8.1.2320
问题:       Insufficient test coverage for quickfix.
解决方案:   Add more tests.  Fix uncovered problem. (Yegappan Lakshmanan,
            closes #5238)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2321
问题:       Cannot select all text with the mouse. (John Marriott)
解决方案:   Move limiting the mouse column to f_getmousepos(). (closes #5242)
文件:       src/mouse.c

Patch 8.1.2322 (after 8.1.2320)
问题:       Quickfix test fails in very big terminal.
解决方案:   Adjust the expected result for the width. (Masato Nishihata,
            closes #5244)
文件:       src/testdir/test_quickfix.vim

Patch 8.1.2323
问题:       Old MSVC version no longer tested.
解决方案:   Drop support for MSVC 2008 and older. (Ken Takata, closes #5248)
文件:       src/INSTALLpc.txt, src/Make_mvc.mak, src/gui_w32.c, src/os_win32.c

Patch 8.1.2324
问题:       Width of scrollbar in popup menu not taken into account.
解决方案:   Add the width of the scrollbar.
文件:       src/popupmenu.c, src/testdir/dumps/Test_popupwin_infopopup_6.dump,
            src/testdir/test_popupwin.vim

Patch 8.1.2325
问题:       Crash when using balloon with empty line.
解决方案:   Handle empty lines. (Markus Braun)
文件:       src/popupmenu.c, src/testdir/test_popup.vim

Patch 8.1.2326
问题:       Cannot parse a date/time string.
解决方案:   Add strptime(). (Stephen Wall, closes #5250)
文件:       runtime/doc/eval.txt, runtime/doc/usr_41.txt, src/auto/configure,
            src/config.h.in, src/configure.ac, src/evalfunc.c, src/os_unix.h,
            src/testdir/test_functions.vim

Patch 8.1.2327
问题:       Cannot build with Hangul input.
解决方案:   Remove Hangul input support.
文件:       Filelist, src/Makefile, runtime/doc/hangulin.txt, src/feature.h,
            src/gui_gtk_x11.c, src/gui_x11.c, src/gui.c, src/edit.c,
            src/mbyte.c, src/screen.c, src/ui.c, src/hangulin.c,
            src/globals.h, src/proto/hangulin.pro, src/proto.h,
            src/evalfunc.c, src/version.c, src/configure.ac,
            src/auto/configure, src/config.h.in, src/config.mk.in

Patch 8.1.2328
问题:       A few hangul input pieces remain.
解决方案:   Update VMS makefile.
文件:       src/Make_vms.mms

Patch 8.1.2329
问题:       Mouse multiple click test is a bit flaky.
解决方案:   Add it to the list of flaky tests.
文件:       src/testdir/runtest.vim

Patch 8.1.2330 (after 8.1.2314)
问题:       vi' does not always work when 'selection' is exclusive.
解决方案:   Adjust start position.
文件:       src/search.c, src/testdir/test_textobjects.vim

Patch 8.1.2331
问题:       The option.c file is still very big.
解决方案:   Move a few functions to where they fit better. (Yegappan
            Lakshmanan, closes #4895)
文件:       src/option.c, src/proto/option.pro, src/change.c,
            src/proto/change.pro, src/ex_getln.c, src/proto/ex_getln.pro,
            src/globals.h, src/gui.c, src/proto/gui.pro, src/ui.c,
            src/proto/ui.pro, src/term.c, src/proto/term.pro, src/indent.c,
            src/proto/indent.pro

Patch 8.1.2332 (after 8.1.2331)
问题:       Missing file in refactoring.
解决方案:   Update missing file.
文件:       src/search.c

Patch 8.1.2333
问题:       With modifyOtherKeys CTRL-^ doesn't work.
解决方案:   Handle the exception.
文件:       src/getchar.c, src/testdir/test_termcodes.vim

Patch 8.1.2334
问题:       Possible NULL pointer dereference in popup_locate(). (Coverity)
解决方案:   Check for NULL pointer.
文件:       src/popupwin.c

Patch 8.1.2335
问题:       Error message for function arguments may use NULL pointer.
            (Coverity)
解决方案:   Use the original function name.
文件:       src/evalfunc.c

Patch 8.1.2336
问题:       When an expr mapping moves the cursor it is not restored.
解决方案:   Position the cursor after an expr mapping. (closes #5256)
文件:       src/getchar.c, src/testdir/test_mapping.vim,
            src/testdir/dumps/Test_map_expr_1.dump

Patch 8.1.2337
问题:       Double-click time sometimes miscomputed.
解决方案:   Correct time computation. (Dominique Pelle, closes #5259)
文件:       src/mouse.c, src/testdir/runtest.vim

Patch 8.1.2338
问题:       Using Visual mark with :s gives E20 if not set.
解决方案:   Ignore errors when handling 'incsearch'. (closes #3837)
文件:       src/ex_getln.c, src/testdir/test_search.vim,
            src/testdir/dumps/Test_incsearch_substitute_14.dump

Patch 8.1.2339
问题:       Insufficient testing for quickfix.
解决方案:   Add a few more tests. (Yegappan Lakshmanan, closes #5261)
文件:       src/testdir/test_quickfix.vim

Patch 8.1.2340
问题:       Quickfix test fails under valgrind and asan.
解决方案:   Make sure long line does not overflow IObuff. (Dominique Pelle,
            closes #5263)  Put back fix for large terminals. (Yegappan
            Lakshmanan, closes #5264)
文件:       src/quickfix.c, src/testdir/test_quickfix.vim

Patch 8.1.2341
问题:       Not so easy to interrupt a script programmatically.
解决方案:   Add the interrupt() function. (Yasuhiro Matsumoto, closes #2834)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/ex_eval.c,
            src/testdir/Make_all.mak, src/testdir/test_interrupt.vim

Patch 8.1.2342
问题:       Random number generator in Vim script is slow.
解决方案:   Add rand() and srand(). (Yasuhiro Matsumoto, closes #1277)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/Make_all.mak,
            src/testdir/test_random.vim

Patch 8.1.2343
问题:       Using time() for srand() is not very random.
解决方案:   use /dev/urandom if available
文件:       src/evalfunc.c, src/testdir/test_random.vim

Patch 8.1.2344
问题:       Cygwin: warning for using strptime().
解决方案:   Move defining _XOPEN_SOURCE and __USE_XOPEN to vim.h. (Ken Takata,
            closes #5265)  Use 700 for _XOPEN_SOURCE for mkdtemp().
文件:       src/os_unix.h, src/vim.h

Patch 8.1.2345
问题:       .cjs files are not recognized as Javascript.
解决方案:   Add the *.cjs pattern. (closes #5268)
文件:       runtime/filetype.vim, src/testdir/test_filetype.vim

Patch 8.1.2346
问题:       CTRL-R CTRL-R doesn't work with modifyOtherKeys.
解决方案:   Allow key codes when fetching argument for CTRL-R. (closes #5266)
            Also fix CTRL-G in Insert mode.
文件:       src/edit.c, src/ex_getln.c, src/testdir/test_termcodes.vim

Patch 8.1.2347 (after 8.1.2344)
问题:       MacOS: build fails.
解决方案:   Don't define _XOPEN_SOURCE for Mac.
文件:       src/vim.h

Patch 8.1.2348
问题:       :const cannot be followed by "| endif".
解决方案:   Check following command for :const. (closes #5269)
            Also fix completion after :const.
文件:       src/testdir/test_let.vim, src/testdir/test_const.vim,
            src/ex_docmd.c, src/cmdexpand.c, src/eval.c,
            src/testdir/test_cmdline.vim

Patch 8.1.2349
问题:       :lockvar and :unlockvar cannot be followed by "| endif".
解决方案:   Check for following commands. (closes #5269)
文件:       src/testdir/test_const.vim, src/ex_docmd.c

Patch 8.1.2350
问题:       Other text for CTRL-V in Insert mode with modifyOtherKeys.
解决方案:   Convert the Escape sequence back to key as if modifyOtherKeys is
            not set, and use CTRL-SHIFT-V to get the Escape sequence itself.
            (closes #5254)
文件:       runtime/doc/insert.txt, runtime/doc/cmdline.txt, src/edit.c,
            src/proto/edit.pro, src/term.c, src/proto/term.pro, src/getchar.c,
            src/proto/getchar.pro, src/testdir/test_termcodes.vim,
            src/ex_getln.c

Patch 8.1.2351
问题:       'wincolor' not used for > for not fitting double width char.
            Also: popup drawn on right half of double width character looks
            wrong.
解决方案:   Adjust color for > character.  Clear left half of double width
            character if right half is being overwritten.
文件:       src/drawline.c, src/screen.c,
            src/testdir/dumps/Test_popupwin_doublewidth_1.dump

Patch 8.1.2352
问题:       CI doesn't cover FreeBSD.
解决方案:   Configure Cirrus-CI. (Christian Brabandt, closes #5273)
文件:       .cirrus.yml, README.md

Patch 8.1.2353
问题:       Build failure on FreeBSD.
解决方案:   Change #ifdef to only check for Linux-like systems.
文件:       src/vim.h

Patch 8.1.2354
问题:       Cirrus CI runs on another repository.
解决方案:   Run Cirrus CI on vim/vim.
文件:       .cirrus.yml, README.md

Patch 8.1.2355
问题:       Test with "man" fails on FreeBSD.
解决方案:   Use "-P" instead of "--pager".
文件:       src/testdir/test_normal.vim

Patch 8.1.2356
问题:       rand() does not use the best algorithm.
解决方案:   use xoshiro128** instead of xorshift. (Kaito Udagawa,
            closes #5279)
文件:       runtime/doc/eval.txt, src/evalfunc.c, src/testdir/test_random.vim

Patch 8.1.2357
问题:       No test with wrong argument for rand().
解决方案:   Add a test case.
文件:       src/testdir/test_random.vim

Patch 8.1.2358
问题:       Tests fail on Cirrus CI for FreeBSD.
解决方案:   Fix a test and skip some. (Christian Brabandt, closes #5281)
文件:       Filelist, .cirrus.yml, src/testdir/check.vim,
            src/testdir/test_normal.vim, src/testdir/test_quickfix.vim,
            src/testdir/test_source_utf8.vim, src/testdir/test_terminal.vim,
            src/testdir/test_utf8_comparisons.vim

Patch 8.1.2359
问题:       Cannot build without FEAT_FLOAT. (John Marriott)
解决方案:   Fix #ifdefs around f_srand().
文件:       src/evalfunc.c

Patch 8.1.2360
问题:       Quickfix test coverage can still be improved.
解决方案:   Add more test cases. (Yegappan Lakshmanan, closes #5276)
文件:       src/testdir/test_quickfix.vim

Patch 8.1.2361
问题:       MS-Windows: test failures related to VIMDLL.
解决方案:   Adjust code and tests. (Ken Takata, closes #5283)
文件:       src/evalfunc.c, src/ex_cmds.c, src/gui_w32.c, src/mbyte.c,
            src/menu.c, src/proto.h, src/testdir/test_highlight.vim

Patch 8.1.2362
问题:       Cannot place signs in a popup window. (Maxim Kim)
解决方案:   Use the group prefix "PopUp" to specify which signs should show up
            in a popup window. (closes #5277)
文件:       runtime/doc/sign.txt, src/popupwin.c, src/sign.c,
            src/testdir/dumps/Test_popupwin_sign_1.dump

Patch 8.1.2363
问题:       ml_get error when accessing Visual area in 'statusline'.
解决方案:   Disable Visual mode when using another window. (closes #5278)
文件:       src/testdir/test_statusline.vim, src/buffer.c

Patch 8.1.2364
问题:       Termwinscroll test is flaky on FreeBSD.
解决方案:   Add to list of flaky tests.  Rename function.
文件:       src/testdir/runtest.vim, src/testdir/test_terminal.vim

Patch 8.1.2365
问题:       Missing tests for recent popupwin changes.
解决方案:   Add test cases.
文件:       src/testdir/test_popupwin.vim

Patch 8.1.2366
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/ascii.h, src/beval.h, src/dosinst.h, src/feature.h,
            src/glbl_ime.h, src/globals.h, src/gui_at_sb.h, src/gui_gtk_f.h,
            src/gui_gtk_vms.h, src/gui.h, src/gui_x11_pm.h, src/gui_xmebwp.h,
            src/if_cscope.h, src/if_mzsch.h, src/if_ole.h, src/if_py_both.h,
            src/iscygpty.h, src/keymap.h, src/macros.h, src/nbdebug.h,
            src/option.h, src/os_amiga.h, src/os_beos.h, src/os_dos.h,
            src/os_mac.h, src/os_qnx.h, src/os_unix.h, src/os_unixx.h,
            src/os_vms_conf.h, src/os_win32.h, src/proto.h, src/regexp.h,
            src/spell.h, src/structs.h, src/term.h, src/version.h, src/vimio.h

Patch 8.1.2367
问题:       Registers are not sufficiently tested.
解决方案:   Add a few more test cases. (Yegappan Lakshmanan, closes #5288)
文件:       src/testdir/test_registers.vim

Patch 8.1.2368
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/autocmd.c, src/beval.c, src/blob.c, src/blowfish.c,
            src/buffer.c, src/change.c, src/channel.c, src/charset.c,
            src/cindent.c, src/crypt.c, src/crypt_zip.c

Patch 8.1.2369
问题:       Cannot build with quickfix and without text properties.
解决方案:   Fix typo. (Naruhiko Nishino)
文件:       src/popupmenu.c

Patch 8.1.2370
问题:       Build problems on VMS.
解决方案:   Adjust the build file. (Zoltan Arpadffy)
文件:       src/Make_vms.mms, src/os_unix.c, src/os_vms.c

Patch 8.1.2371
问题:       FEAT_TEXT_PROP is a confusing name.
解决方案:   Use FEAT_PROP_POPUP. (Naruhiko Nishino, closes #5291)
文件:       runtime/doc/popup.txt, src/beval.c, src/buffer.c, src/change.c,
            src/drawline.c, src/drawscreen.c, src/edit.c, src/eval.c,
            src/evalbuffer.c, src/evalfunc.c, src/evalwindow.c, src/ex_cmds.c,
            src/ex_docmd.c, src/feature.h, src/fileio.c, src/getchar.c,
            src/globals.h, src/gui.c, src/gui_w32.c, src/indent.c,
            src/insexpand.c, src/macros.h, src/main.c, src/memline.c,
            src/misc2.c, src/mouse.c, src/move.c, src/ops.c, src/option.h,
            src/optiondefs.h, src/optionstr.c, src/popupmenu.c,
            src/popupwin.c, src/proto.h, src/screen.c, src/search.c,
            src/sign.c, src/structs.h, src/tag.c, src/testdir/runtest.vim,
            src/testdir/test_execute_func.vim, src/testdir/test_popupwin.vim,
            src/testdir/test_popupwin_textprop.vim, src/textprop.c, src/ui.c,
            src/version.c, src/vim.h, src/window.c

Patch 8.1.2372
问题:       VMS: failing realloc leaks memory. (Chakshu Gupta)
解决方案:   Free the memory. (partly fixes #5292)
文件:       src/os_vms.c

Patch 8.1.2373
问题:       Cannot build with +popupwin but without +quickfix. (John Marriott)
解决方案:   Adjust #ifdefs.
文件:       src/ex_cmds.c, src/popupmenu.c, src/popupwin.c, src/fileio.c,
            src/testdir/test_compiler.vim, src/testdir/test_tagjump.vim,
            src/testdir/test86.in, src/testdir/test87.in,
            src/testdir/test_autocmd.vim, src/testdir/test_bufwintabinfo.vim,
            src/testdir/test_channel.vim, src/testdir/test_edit.vim,
            src/testdir/test_execute_func.vim,
            src/testdir/test_filter_cmd.vim, src/testdir/test_gui.vim,
            src/testdir/test_makeencoding.vim, src/testdir/test_mksession.vim,
            src/testdir/test_normal.vim, src/testdir/test_popup.vim,
            src/testdir/test_popupwin.vim, src/testdir/test_preview.vim,
            src/testdir/test_startup.vim, src/testdir/test_statusline.vim,
            src/testdir/test_tabpage.vim, src/testdir/test_window_cmd.vim,
            src/testdir/test_window_id.vim

Patch 8.1.2374
问题:       Unused parts of libvterm are included.
解决方案:   Delete the unused files.
文件:       Filelist, src/libvterm/bin/vterm-ctrl.c,
            src/libvterm/bin/unterm.c, src/libvterm/bin/vterm-dump.c

Patch 8.1.2375
问题:       No sufficient testing for registers.
解决方案:   Add more test cases. (Yegappan Lakshmanan, closes #5296)
            Fix that "p" on last virtual column of tab inserts spaces.
文件:       src/register.c, src/testdir/test_registers.vim,
            src/testdir/test_virtualedit.vim, src/testdir/test_visual.vim

Patch 8.1.2376
问题:       Preprocessor indents are incorrect.
解决方案:   Fix the indents. (Ken Takata, closes #5298)
文件:       src/drawline.c, src/gui_w32.c, src/os_mswin.c, src/os_win32.c,
	    src/proto.h

Patch 8.1.2377
问题:       GUI: when losing focus a pending operator is executed.
解决方案:   Do not execute an operator when getting K_IGNORE. (closes #5300)
文件:       src/normal.c

Patch 8.1.2378
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/dict.c, src/diff.c, src/digraph.c, src/dosinst.c, src/edit.c,
            src/eval.c, src/evalbuffer.c, src/evalfunc.c

Patch 8.1.2379
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/ex_cmds.c, src/ex_cmds2.c, src/ex_docmd.c, src/ex_eval.c,
            src/ex_getln.c, src/fileio.c, src/filepath.c, src/findfile.c,
            src/fold.c

Patch 8.1.2380
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/getchar.c, src/gui.c, src/gui_at_fs.c, src/gui_at_sb.c,
            src/gui_athena.c, src/gui_beval.c, src/gui_gtk.c, src/gui_gtk_f.c,
            src/gui_gtk_x11.c

Patch 8.1.2381
问题:       Not all register related code is covered by tests.
解决方案:   Add more test cases. (Yegappan Lakshmanan, closes #5301)
文件:       src/testdir/test_marks.vim, src/testdir/test_registers.vim,
            src/testdir/test_virtualedit.vim

Patch 8.1.2382
问题:       MS-Windows: When using VTP bold+inverse doesn't work.
解决方案:   Compare with the default colors. (Nobuhiro Takasaki, closes #5303)
文件:       src/os_win32.c, src/proto/os_win32.pro, src/screen.c

Patch 8.1.2383
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/gui_mac.c, src/gui_motif.c, src/gui_photon.c, src/gui_w32.c,
            src/gui_x11.c, src/gui_xmdlg.c, src/gui_xmebw.c

Patch 8.1.2384
问题:       Test 48 is old style.
解决方案:   Merge test cases into new style test. (Yegappan Lakshmanan,
            closes #5307)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test48.in, src/testdir/test48.ok,
            src/testdir/test_virtualedit.vim

Patch 8.1.2385
问题:       Opening cmdline window with feedkeys() does not work. (Yegappan
            Lakshmanan)
解决方案:   Recognize K_CMDWIN also when ex_normal_busy is set.
文件:       src/ex_getln.c, src/testdir/test_cmdline.vim

Patch 8.1.2386
问题:       'wincolor' is not used for 'listchars'.
解决方案:   Combine the colors. (closes #5308)
文件:       src/drawline.c, src/testdir/test_highlight.vim,
            src/testdir/dumps/Test_wincolor_lcs.dump

Patch 8.1.2387
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/hardcopy.c, src/hashtab.c, src/if_cscope.c, src/if_lua.c,
            src/if_mzsch.c, src/if_perlsfio.c, src/if_python.c,
            src/if_python3.c, src/if_ruby.c, src/if_tcl.c, src/if_xcmdsrv.c

Patch 8.1.2388
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/json.c, src/json_test.c, src/kword_test.c, src/list.c,
            src/main.c, src/mark.c, src/mbyte.c, src/memfile.c,
            src/memfile_test.c, src/memline.c, src/menu.c

Patch 8.1.2389
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/libvterm/src/screen.c, src/libvterm/src/unicode.c,
            src/libvterm/src/vterm.c, src/libvterm/t/harness.c,
            src/libvterm/include/vterm.h, src/xdiff/xdiffi.c,
            src/xdiff/xemit.c, src/xdiff/xhistogram.c, src/xdiff/xpatience.c,
            src/xdiff/xutils.c, src/xdiff/xdiff.h, src/xdiff/xdiffi.h,
            src/xdiff/xemit.h, src/xdiff/xinclude.h, src/xdiff/xmacros.h,
            src/xdiff/xprepare.h, src/xdiff/xtypes.h, src/xdiff/xutils.h

Patch 8.1.2390
问题:       Test94 is old style, fix 7.4.441 not tested.
解决方案:   Turn test94 into a new style test.  Add tests for the fix in patch
            7.4.441. (Yegappan Lakshmanan, closes #5316)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test94.in, src/testdir/test94.ok,
            src/testdir/test_cmdline.vim, src/testdir/test_visual.vim

Patch 8.1.2391
问题:       Cannot build when __QNXNTO__ is defined. (Ian Wayne Larson)
解决方案:   Move the check for "qansi". (Ken Takata, closes #5317)
文件:       src/highlight.c

Patch 8.1.2392
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/nbdebug.c, src/netbeans.c, src/normal.c, src/ops.c,
            src/option.c

Patch 8.1.2393
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/os_amiga.c, src/os_beos.c, src/os_mac_conv.c, src/os_mswin.c,
            src/os_qnx.c, src/os_unix.c, src/os_vms.c, src/os_win32.c

Patch 8.1.2394
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/popupmenu.c, src/pty.c, src/quickfix.c, src/regexp.c,
            src/regexp_nfa.c, src/screen.c, src/search.c, src/sha256.c,
            src/sign.c

Patch 8.1.2395
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/spell.c, src/spellfile.c, src/syntax.c, src/tag.c, src/term.c,
            src/terminal.c, src/termlib.c, src/testing.c

Patch 8.1.2396
问题:       Using old C style comments.
解决方案:   Use // comments where appropriate.
文件:       src/ui.c, src/undo.c, src/uninstall.c, src/usercmd.c,
            src/userfunc.c, src/winclip.c, src/window.c, src/xpm_w32.c

Patch 8.1.2397
问题:       Should not define __USE_XOPEN. _XOPEN_SOURCE is not needed for
            Android.
解决方案:   Remove __USE_XOPEN and adjust #ifdefs. (Ozaki Kiichi,
            closes #5322)
文件:       src/vim.h

Patch 8.1.2398
问题:       strptime() test fails on Japanese Mac.
解决方案:   Use %T instead of %X.
文件:       src/testdir/test_functions.vim

Patch 8.1.2399
问题:       Info popup on top of cursor if it doesn't fit.
解决方案:   Hide the popup if it doesn't fit.
文件:       src/popupmenu.c, src/testdir/test_popupwin.vim,
            src/testdir/dumps/Test_popupwin_infopopup_wide_1.dump

Patch 8.1.2400
问题:       Test39 is old style.
解决方案:   Convert the test cases into new style. (Yegappan Lakshmanan,
            closes #5324)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test39.in, src/testdir/test39.ok,
            src/testdir/test_blockedit.vim, src/testdir/test_visual.vim

Patch 8.1.2401
问题:       :cexpr does not handle | in expression.
解决方案:   Remove EX_TRLBAR and set nextcmd pointer.
文件:       src/testdir/test_quickfix.vim, src/ex_cmds.h, src/quickfix.c

Patch 8.1.2402
问题:       Typos and other small things.
解决方案:   Small fixes.
文件:       .gitignore, src/testdir/shared.vim, src/testdir/test49.vim,
            src/message.c, src/Makefile

Patch 8.1.2403
问题:       Autocmd test fails under valgrind.
解决方案:   Wait a bit longer.
文件:       src/testdir/test_autocmd.vim

Patch 8.1.2404
问题:       Channel test fails under valgrind.
解决方案:   Sleep a bit longer.
文件:       src/testdir/test_channel.vim

Patch 8.1.2405
问题:       matchadd_conceal test fails under valgrind.
解决方案:   Use WaitForAssert() and wait a bit longer.
文件:       src/testdir/test_matchadd_conceal.vim

Patch 8.1.2406
问题:       Leaking memory in test_paste and test_registers.
解决方案:   Free the old title.  Don't copy expr_line.
文件:       src/term.c, src/os_unix.c, src/register.c

Patch 8.1.2407
问题:       proto file and dependencies outdated.
解决方案:   Update proto files and dependencies.
文件:       src/Makefile, src/proto/bufwrite.pro, src/proto/cmdhist.pro,
            src/proto/optionstr.pro, src/proto/popupwin.pro,
            src/proto/viminfo.pro, src/proto/if_cscope.pro

Patch 8.1.2408
问题:       Syntax menu and build instructions outdated.
解决方案:   Update build instructions and syntax menu.
文件:       Makefile, runtime/makemenu.vim, runtime/synmenu.vim

Patch 8.1.2409
问题:       Creating the distribution doesn't work as documented.
解决方案:   Adjust name of uninstall binary. Create src/auto directory if
            needed.
文件:       tools/rename.bat, src/Make_mvc.mak

Patch 8.1.2410
问题:       MS-Windows: test_iminsert fails without IME support.
解决方案:   Skip the test when imgetstatus() doesn't work.
文件:       src/testdir/test_iminsert.vim

Patch 8.1.2411
问题:       Function argument copied unnecessarily.
解决方案:   Use the argument directly.
文件:       src/ex_docmd.c

Patch 8.1.2412
问题:       Crash when evaluating expression with error. (Dhiraj Mishra)
解决方案:   Check parsing failed. (closes #5329)
文件:       src/eval.c, src/testdir/test_lambda.vim

Patch 8.1.2413
问题:       Cannot update ex_cmdidxs.h on MS-Windows.
解决方案:   Add build rules and dependencies. (Ken Takata, closes #5337)
文件:       src/Make_cyg_ming.mak, src/Make_mvc.mak, src/Make_vms.mms

Patch 8.1.2414
问题:       MS-Windows: properties dialog box shows wrong character.
解决方案:   Explicitly specify encoding. (Ken Takata, closes #5338)
文件:       src/vim.rc

Patch 8.1.2415
问题:       Popup menu flickers if an info popup is used. (Nick Jensen)
解决方案:   Set the pum_skip_redraw flag.
文件:       src/popupmenu.c

Patch 8.1.2416
问题:       Loading menus sets v:errmsg.
解决方案:   Avoid setting v:errmsg and add a test for that. (Jason Franklin)
文件:       runtime/delmenu.vim, runtime/menu.vim, src/testdir/test_menu.vim

Patch 8.1.2417
问题:       MinGW/Cygwin build does not clean up all files.
解决方案:   Delete *.map files. (Michael Soyka)
文件:       src/Make_cyg_ming.mak

Patch 8.1.2418
问题:       bufnr('$') is wrong after recycling popup buffer.
解决方案:   Sort the buffer list by buffer number. (closes #5335)
文件:       src/buffer.c, src/testdir/test_popupwin.vim

Patch 8.1.2419
问题:       With a long file name the hit-enter prompt appears. (J. Lewis
            Muir)
解决方案:   When checking for text to wrap don't do this when outputing a CR.
文件:       src/message.c, src/testdir/test_display.vim,
            src/testdir/dumps/Test_long_file_name_1.dump

Patch 8.1.2420
问题:       Crash when calling popup_close() in win_execute().
解决方案:   Disallow popup_close() in popup window. (Yasuhiro Matsumoto,
            closes #5345)
文件:       src/popupwin.c, src/testdir/test_popupwin.vim

Patch 8.1.2421
问题:       Test88 is old style.
解决方案:   Turn into a new style test. (Yegappan Lakshmanan, closes #5347)
文件:       src/Makefile, src/testdir/Make_all.mak, src/testdir/Make_vms.mms,
            src/testdir/test88.in, src/testdir/test88.ok,
            src/testdir/test_conceal.vim, src/testdir/test_python2.vim
            src/testdir/test_python3.vim

Patch 8.1.2422
问题:       "make depend" does not work correctly for libvterm.
解决方案:   Fix build dependencies. And a few minor improvements.
文件:       src/Makefile, src/filepath.c, src/insexpand.c, src/main.c

Patch 8.1.2423
问题:       MS-Windows properties shows version as "8, 1, 0".
解决方案:   Use "8.1.0". (Ken Takata, closes #5342)
文件:       src/vim.rc

Patch 8.1.2424
问题:       MS-Windows: console buffer is resized unnecessarily.
解决方案:   Only call ResizeConBuf() when the size differs. (Nobuhiro
            Takasaki, closes #5343)
文件:       src/os_win32.c


 vim:tw=78:ts=8:noet:ft=help:norl:
